angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","luegg.directives"]),function(){"use strict ";function e(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}e.$inject=["$httpProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){var t=this;t.$state=e}e.$inject=["$state"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,a,i){var o={superAdmin:r,admin:t,user:n};i.html5Mode(!0),a.otherwise("/"),a.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:pyramidId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function r(e){return e.authorizeCurrentUserForRoute("super-admin")}function n(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],r.$inject=["authService"],n.$inject=["authService"]}(),function(){"use strict";function e(e,t,r){e.$on("$stateChangeError",function(e,r,n,a,i,o){"not authorized"===o&&(t.go("login"),t.previous=r)}),e.$on("$stateChangeStart",function(){r.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,r,n,a){function i(e,n){var i=r.defer();return t.post("/login",{username:e,password:n}).then(function(e){e.data.success?(a.currentUser=e.data.user,i.resolve(!0)):i.resolve(!1)}),i.promise}function o(e){var n=r.defer();return t.post("/api/users",{userData:e}).then(function(t){t.data?(i(e.username,e.password),n.resolve(!0)):n.resolve(!1)}),n.promise}function l(){var n=r.defer();return t.post("/logout",{logout:!0}).then(function(){a.currentUser=void 0,n.resolve(),e.go("home")}),n.promise}function s(e){return!!a.isAuthorized(e)||r.reject("not authorized")}function c(){return!!a.isAuthenticated()||r.reject("not authorized")}var u={authenticateUser:i,createUser:o,logout:l,authorizeCurrentUserForRoute:s,authenticatedUserForRoute:c};return u}e.$inject=["$state","$http","$q","userService","identityService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e,t){function r(){return e.get("/api/users").then(function(e){return e})}var n={getAllUsers:r};return n}e.$inject=["$http","identityService"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,r){function n(){}function a(n,a){t.authenticateUser(n,a).then(function(t){t?e.previous?e.go(e.previous):e.go("home"):r.error("Username / password combinaiton incorrect")})}var i=this;i.login=a,n()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,r,n){function a(){}function i(e){e.password!==e.confirmPassword?n.error("Passwords don't match!"):r.createUser(e).then(function(){t.go("home")})}var o=this;o.register=i,a()}e.$inject=["$scope","$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@"},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function r(){n()}function n(){a.challenges=[],t.getActiveChallengesByCompetition(a.competitionId).then(function(e){e.data.length>0&&(a.challenges=e.data,_.forEach(a.challenges,function(e){0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var a=this;a.challenges=[],r(),e.$on("ws:challenge_created",function(e,t){a.competitionId===t.competitionId&&n()}),e.$on("ws:challenge_completed",function(e,t){a.competitionId===t.competitionId&&n()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpActiveChalleneges",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function r(t){return e.post("/api/challenges/complete",{challenge:t})}function n(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function a(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function i(t,r){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:r}})}var o={createChallenge:t,completeChallenge:r,getChallengesByCompetition:n,getActiveChallengesByCompetition:a,getActiveChallengeByCompetitionByPlayer:i};return o}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function r(){t.logout()}var n=this;n.indentity=e,n.logout=r}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,r){function n(){i.sidebarStatus.left=!i.sidebarStatus.left,e.setSidebarStatus(i.sidebarStatus.left)}function a(){r.logout()}var i=this;i.indentity=t,i.logout=a,i.sidebarStatus=e.getSidebarStatus(),i.toggleSidebar=n}t.$inject=["sidebarService","identityService","authService"],angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,r){function n(){t.logout()}var a=this;a.indentity=e,a.logout=n,a.sidebarStatus=r.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function r(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var n;null!==e.bootstrappedUserObject&&(n=e.bootstrappedUserObject);var a={currentUser:n,isAuthenticated:t,isAuthorized:r};return a}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,r){$.notify({message:e,url:t,target:r},{type:"info"})}function t(e,t,r){$.notify({message:e,url:t,target:r},{type:"success"})}function r(e,t,r){$.notify({message:e,url:t,target:r},{type:"warning"})}function n(e,t,r){$.notify({message:e,url:t,target:r},{type:"danger"})}function a(e,t,r){$.notify({message:e,url:t,target:r},{type:"inverse"})}var i={info:e,success:t,warning:r,error:n,inverse:a};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85}}),i}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(){return r}function t(e){r.left=e}var r={left:!1,right:!1},n={getSidebarStatus:e,setSidebarStatus:t};return n}angular.module("app").factory("sidebarService",e)}(),angular.module("app").service("websocketService",["$rootScope","$window",function(e,t){function r(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}var n;this.connect=function(){n=new WebSocket(r()),n.onmessage=function(t){var r=JSON.parse(t.data);e.$broadcast("ws:"+r.topic,r.data)}},this.send=function(e,t){var r=JSON.stringify({topic:e,data:t});n.send(r)}}]).run(["websocketService",function(e){e.connect()}]),function(){"use strict";function e(){function e(){}e()}angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{competitionId:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,r,n,a,i){function o(){t.getPyramid(h.competitionId).then(function(e){h.pyramid=e.data,h.levels=[];for(var t=1;t<=e.data.levels;++t)h.levels.push(t);l(),s(),u(),d(),p()})}function l(){h.pyramid.players=r("orderBy")(h.pyramid.players,"position")}function s(){_.forEach(h.pyramid.players,function(e){a.currentUser&&e._id===a.currentUser._id&&(h.isCurrentUserOnPyramid=!0,e.class="current-user",h.currentUserPlayer=e,i.getActiveChallengeByCompetitionByPlayer(h.competitionId,e._id).then(function(e){e.data&&(h.hasActiveChallenge=!0)}))}),i.getActiveChallengesByCompetition(h.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(h.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var r=_.find(h.pyramid.players,{_id:e.opponent._id});if(r.class="unavailable",r.challenge={position:"opponent"},0!==e.timeLimit){var n=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;n>0?r.challenge.expires=n:n<=0&&y(null,!0,r)}}),m()})}function c(){h.breakPoints=[];for(var e=0;e<h.pyramid.levels;e++)h.breakPoints.push(e*(e+1)/2+1)}function u(){h.numberOfBlocks=0;for(var e=h.pyramid.levels;e>0;e--)h.numberOfBlocks+=e}function d(){for(var e=h.pyramid.players.length;e<h.numberOfBlocks;e++)h.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"})}function p(){var e=0;c();for(var t=0;t<h.pyramid.players.length;t++)h.breakPoints.indexOf(t+1)>-1&&(e+=1),h.pyramid.players[t].level=e}function m(){var e=h.currentUserPlayer.level>1?h.currentUserPlayer.level-1:null;_.forEach(h.pyramid.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&(h.availableChallenges=!0,t.available=!0)})}function f(e){if(e.available){h.hasActiveChallenge=!0;var t={competitionId:h.competitionId,complete:!1,forfeit:!1,timeLimit:h.pyramid.forfeitDays,challenger:{_id:h.currentUserPlayer._id,firstName:h.currentUserPlayer.firstName,lastName:h.currentUserPlayer.lastName,nickname:h.currentUserPlayer.nickname,position:h.currentUserPlayer.position},opponent:{_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname,position:e.position}};i.createChallenge(t).then(function(){g(),h.pyramidMenuToggle=!1})}else n.error("Sorry, that is not a valid challenge.")}function y(e,r,n){var a=n||h.currentUserPlayer;i.getActiveChallengeByCompetitionByPlayer(h.competitionId,a._id).then(function(n){h.hasActiveChallenge=!1;var a=!1;r?(n.data.forfeit=!0,n.data.challenger.winner=!0,a=!0):e?n.data.challenger._id===h.currentUserPlayer._id?(n.data.challenger.winner=!0,a=!0):n.data.opponent.winner=!0:n.data.challenger._id===h.currentUserPlayer._id?n.data.opponent.winner=!0:(n.data.challenger.winner=!0,a=!0),a?t.swapPositions(h.competitionId,n.data.opponent,n.data.challenger).then(function(){i.completeChallenge(n.data)}):i.completeChallenge(n.data),h.pyramidMenuToggle=!1})}function v(e){y(null,!0,e)}function g(){t.getPyramid(h.competitionId).then(function(e){h.pyramid=e.data,l(),s(),d(),p()})}var h=this;h.pyramid={},h.breakPoints=[],h.numberOfBlocks=0,h.isCurrentUserOnPyramid=!1,h.hasActiveChallenge=!1,h.availableChallenges=!1,h.createChallenge=f,h.completeChallenge=y,h.challengeExpired=v,h.currentUserPlayer={},h.pyramidMenuToggle=!1,o(),e.$on("ws:challenge_created",function(e,t){h.competitionId===t.competitionId&&(n.info(t.description),g())}),e.$on("ws:challenge_completed",function(e,t){h.competitionId===t.competitionId&&(n.info(t.description),g())})}t.$inject=["$scope","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{pyramidId:t}})}function r(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function n(t){return e.post("/api/pyramids/create",{pyramid:t})}function a(t,r,n){return e.post("/api/pyramids/swapPositions",{pyramidId:t,challenger:r,opponent:n})}function i(t,r){return e.post("/api/pyramids/addPlayer",{pyramidId:t,player:r})}var o={getPyramid:t,getPyramidsForUser:r,createPyramid:n,swapPositions:a,addPlayerToPyramid:i};return o}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(e,t,r,n){function a(){r.getAllUsers().then(function(e){l.availablePlayers=e.data})}function i(e){s+=1;var t={position:s,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};l.newPyramid.players.push(t),_.remove(l.availablePlayers,{_id:e._id})}function o(t){n.createPyramid(t).then(function(t){e.go("pyramids.view",{pyramidId:t.data._id})})}var l=this;l.availablePlayers=[],l.addPlayerToPyramid=i,l.createPyramid=o,a();var s=0}e.$inject=["$state","$stateParams","userService","pyramidsService"],angular.module("app").controller("AddPlayerCtrl",e)}(),function(){"use strict";function e(e,t,r,n,a){function i(){r.getAllUsers().then(function(e){u.availablePlayers=e.data})}function o(e){u.addedPlayers.length<u.allowedPlayers?(u.addedPlayerAdded=!0,u.addedPlayers.push(_.remove(u.availablePlayers,{_id:e._id})[0])):a.error("All spots have been filled.<br />If you want to add more people please increase the levels.")}function l(e){u.addedPlayerAdded=!1,u.availablePlayers.push(_.remove(u.addedPlayers,{_id:e._id})[0])}function s(e){u.allowedPlayers=0;for(var t=e;t>0;t--)u.allowedPlayers+=t;if(u.addedPlayers.length>u.allowedPlayers){var r=u.addedPlayers.splice(u.allowedPlayers);u.availablePlayers=u.availablePlayers.concat(r),a.warning("Players were removed becasue there are not enough spots on the pyramid.")}}function c(e){angular.forEach(u.addedPlayers,function(e){d+=1;var t={position:d,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};u.newPyramid.players.push(t)}),n.createPyramid(e).then(function(e){t.go("pyramids.view",{pyramidId:e.data._id})})}var u=this;u.newPyramid={players:[]},u.availablePlayers=[],u.addedPlayers=[],u.createPyramid=c,u.addPlayer=o,u.removePlayer=l,u.allowedPlayers=10,u.newPyramid.levels=4,u.newPyramid.forfeitDays=1,i(),e.$watch("vm.newPyramid.levels",function(e,t){e!==t&&s(e)});var d=0}e.$inject=["$scope","$state","userService","pyramidsService","notifyService"],angular.module("app").controller("CreatePyramidCtrl",e)}(),function(){"use strict";function e(e,t,r){function n(){t.getPyramidsForUser(r.currentUser._id).then(function(e){a.pyramids=e.data})}var a=this;a.pyramids=null,n()}e.$inject=["$state","pyramidsService","identityService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e){function t(){e.pyramidId&&(r.pyramidId=e.pyramidId)}var r=this;r.pyramidId=null,t()}e.$inject=["$stateParams"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(){function e(){}var t=this;t.pyramids=null,e()}angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var r=t.children().first(),n=t.parent().hasClass("fg-float");r.focus(function(){t.addClass("fg-toggled")}),r.blur(function(){(!n||n&&0===r.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvc2VydmljZXMvY2hhbGxlbmdlcy5zZXJ2aWNlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2hlYWRlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9pbmRlbnRpdHkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9ub3RpZnkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zaWRlYmFyLnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvd2Vic29ja2V0LnNlcnZpY2UuanMiLCJjb21tb24vdmlld3MvaG9tZS5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvY29tcG9uZW50cy9weXJhbWlkLmRpcmVjdGl2ZS5qcyIsInB5cmFtaWRzL3NlcnZpY2VzL3B5cmFtaWRzLnNlcnZpY2UuanMiLCJweXJhbWlkcy92aWV3cy9hZGQtcGxheWVyLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9jcmVhdGUtcHlyYW1pZC5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvbXktcHlyYW1pZHMuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWQuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tcG9uZW50cy91aS90b2dnbGUtc3VibWVudS5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy91aS93YXZlcy5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy91aS9mb3Jtcy9mZy1saW5lLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlndXJhdGlvbiIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwiYXBwQ3RybCIsInRoaXMiLCJjb250cm9sbGVyIiwiY29uZmlndXJlUm91dGVzIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsInJvdXRlUm9sZUNoZWNrcyIsInN1cGVyQWRtaW4iLCJyZXF1aXJlU3VwZXJBZG1pbiIsImFkbWluIiwicmVxdWlyZUFkbWluIiwidXNlciIsInJlcXVpcmVBdXRoIiwiaHRtbDVNb2RlIiwib3RoZXJ3aXNlIiwid2hlbiIsInN0YXRlIiwidXJsIiwidmlld3MiLCJjb250ZW50IiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJjb250ZW50QCIsInJlc29sdmUiLCJhdXRoIiwiYXV0aFNlcnZpY2UiLCJhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlIiwiYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSIsIiRpbmplY3QiLCJhcHBSdW4iLCIkcm9vdFNjb3BlIiwic2lkZWJhclNlcnZpY2UiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJlcnJvciIsImdvIiwicHJldmlvdXMiLCJzZXRTaWRlYmFyU3RhdHVzIiwicnVuIiwiJGh0dHAiLCIkcSIsInVzZXJTZXJ2aWNlIiwiaWRlbnRpdHlTZXJ2aWNlIiwiYXV0aGVudGljYXRlVXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJkZmQiLCJkZWZlciIsInBvc3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwic3VjY2VzcyIsImN1cnJlbnRVc2VyIiwicHJvbWlzZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsImxvZ291dCIsInVuZGVmaW5lZCIsInJvbGUiLCJpc0F1dGhvcml6ZWQiLCJyZWplY3QiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZXJ2aWNlIiwiZmFjdG9yeSIsImdldEFsbFVzZXJzIiwidXNlcnMiLCJMb2dpbkN0cmwiLCJub3RpZnlTZXJ2aWNlIiwiYWN0aXZhdGUiLCJsb2dpbiIsInZtIiwiUmVnaXN0ZXJDdHJsIiwiJHNjb3BlIiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiY29uZmlybVBhc3N3b3JkIiwia3BBY3RpdmVDaGFsbGVuZWdlcyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJjdHJsRnVuYyIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb21wZXRpdGlvbklkIiwiY2hhbGxlbmdlc1NlcnZpY2UiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlcyIsImdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwibGVuZ3RoIiwiXyIsImZvckVhY2giLCJjaGFsbGVuZ2UiLCJ0aW1lTGltaXQiLCJleHBpcmVzIiwibW9tZW50IiwiZGlmZiIsImNyZWF0ZWQiLCJhZGQiLCJjaGFsbGVuZ2VEZXRhaWxzIiwiY3JlYXRlQ2hhbGxlbmdlIiwiY29tcGxldGVDaGFsbGVuZ2UiLCJnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsInBhcmFtcyIsImdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllciIsInBsYXllcklkIiwia3BGb290ZXIiLCJpbmRlbnRpdHkiLCJrcEhlYWRlciIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyU3RhdHVzIiwibGVmdCIsImdldFNpZGViYXJTdGF0dXMiLCJrcFNpZGViYXIiLCIkd2luZG93Iiwicm9sZXMiLCJpbmRleE9mIiwiYm9vdHN0cmFwcGVkVXNlck9iamVjdCIsImluZm8iLCJtZXNzYWdlIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsInR5cGUiLCJ3YXJuaW5nIiwiaW52ZXJzZSIsIm5vdGlmeURlZmF1bHRzIiwibmV3ZXN0X29uX3RvcCIsIm9mZnNldCIsIngiLCJ5Iiwic3RhdHVzIiwicmlnaHQiLCJ3ZWJzb2NrZXRIb3N0IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsImUiLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiJGJyb2FkY2FzdCIsInRvcGljIiwic2VuZCIsImpzb24iLCJzdHJpbmdpZnkiLCJ3ZWJzb2NrZXRTZXJ2aWNlIiwiSG9tZUN0cmwiLCJrcFB5cmFtaWQiLCJyZXBsYWNlIiwicHlyYW1pZHNTZXJ2aWNlIiwiJGZpbHRlciIsImdldFB5cmFtaWQiLCJweXJhbWlkIiwibGV2ZWxzIiwiaSIsInB1c2giLCJvcmRlclBsYXllcnMiLCJnZXRQbGF5ZXJzU3RhdHVzIiwiY2FsY3VsYXRlUHlyYW1pZEJsb2NrcyIsImZpbGxJbkVtcHR5QmxvY2tzIiwiYXNzaWduTGV2ZWxzVG9QbGF5ZXJzIiwicGxheWVycyIsInBsYXllciIsIl9pZCIsImlzQ3VycmVudFVzZXJPblB5cmFtaWQiLCJjbGFzcyIsImN1cnJlbnRVc2VyUGxheWVyIiwiaGFzQWN0aXZlQ2hhbGxlbmdlIiwiY2hhbGxlbmdlciIsImZpbmQiLCJwb3NpdGlvbiIsIm9wcG9uZW50IiwidGltZVRvRXhwaXJlIiwiZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMiLCJjcmVhdGVCcmVha1BvaW50cyIsImJyZWFrUG9pbnRzIiwibnVtYmVyT2ZCbG9ja3MiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImxldmVsIiwibGV2ZWxBYm92ZSIsImF2YWlsYWJsZUNoYWxsZW5nZXMiLCJhdmFpbGFibGUiLCJjb21wbGV0ZSIsImZvcmZlaXQiLCJmb3JmZWl0RGF5cyIsIm5pY2tuYW1lIiwicmVmcmVzaFB5cmFtaWQiLCJweXJhbWlkTWVudVRvZ2dsZSIsIndpbm5lcklzQ3VycmVudFVzZXIiLCJmb3JmZWl0TG9zZXIiLCJzd2FwUG9zaXRpb25zIiwid2lubmVyIiwiY2hhbGxlbmdlRXhwaXJlZCIsImRlc2NyaXB0aW9uIiwicHlyYW1pZElkIiwiZ2V0UHlyYW1pZHNGb3JVc2VyIiwidXNlcklkIiwiY3JlYXRlUHlyYW1pZCIsImFkZFBsYXllclRvUHlyYW1pZCIsIkFkZFBsYXllckN0cmwiLCIkc3RhdGVQYXJhbXMiLCJhdmFpbGFibGVQbGF5ZXJzIiwiYWRkUGxheWVyIiwibmV3UHlyYW1pZCIsInJlbW92ZSIsIkNyZWF0ZVB5cmFtaWRDdHJsIiwiYWRkZWRQbGF5ZXJzIiwiYWxsb3dlZFBsYXllcnMiLCJhZGRlZFBsYXllckFkZGVkIiwicmVtb3ZlUGxheWVyIiwidXBkYXRlQWxsb3dlZFBsYXllcnMiLCJyZW1vdmVkUGxheWVycyIsInNwbGljZSIsImNvbmNhdCIsIiR3YXRjaCIsIm5ld1ZhbCIsIm9sZFZhbCIsIk15UHlyYW1pZHNDdHJsIiwicHlyYW1pZHMiLCJQeXJhbWlkQ3RybCIsIlB5cmFtaWRzQ3RybCIsInRvZ2dsZVN1Ym1lbnUiLCJsaW5rRnVuYyIsImVsIiwiY2xpY2siLCJuZXh0Iiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsImxpbmsiLCJ3YXZlc0VmZmVjdCIsImVsZW1lbnQiLCJoYXNDbGFzcyIsIldhdmVzIiwiYXR0YWNoIiwiaW5pdCIsImZnTGluZSIsImlucHV0IiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzRmxvYXRMYWJlbCIsImZvY3VzIiwiYWRkQ2xhc3MiLCJibHVyIiwidmFsIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFlBQ0Esc0JBQ0EsYUFD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QUFBQyxTQUFBLGFBQUFELEVBQUFDLFNBQUEsYUFDQUMsTUFBQUMsT0FBQUgsR0FBQSxpQkFDQUEsRUFBQUMsU0FBQSxhQUNBQyxNQUFBQyxPQUFBSCxHQUFBLGdCQUVBRSxNQUFBQyxPQUFBSCxHQUdBRSxNQUFBRSxPQWhCQSxHQUFBbEssSUFDQUcsU0FBQSxJQUNBeUosS0FBQVAsRUFHQSxPQUFBckosR0FWQTdGLFFBQ0FDLE9BQUEsT0FDQTRGLFVBQUEsY0FBQTZKLE1DSkEsV0FDQSxZQUtBLFNBQUFNLEtBUUEsUUFBQWQsR0FBQWpKLEVBQUEwSixHQUNBLEdBQUFNLEdBQUFOLEVBQUFPLFdBQUFDLFFBQ0FDLEVBQUFULEVBQUFKLFNBQUFLLFNBQUEsV0FDQUssR0FBQUksTUFBQSxXQUNBVixFQUFBVyxTQUFBLGdCQUdBTCxFQUFBTSxLQUFBLGFBQ0FILEdBQUFBLEdBQUEsSUFBQUgsRUFBQU8sTUFBQWpLLFNBQ0FvSixFQUFBYyxZQUFBLGdCQWhCQSxHQUFBNUssSUFDQUcsU0FBQSxJQUNBeUosS0FBQVAsRUFHQSxPQUFBckosR0FWQTdGLFFBQ0FDLE9BQUEsT0FDQTRGLFVBQUEsU0FBQW1LIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkuYm9vdHN0cmFwJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJyxcbiAgJ2x1ZWdnLmRpcmVjdGl2ZXMnXG5dKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCAnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYXRpb24oJGh0dHBQcm92aWRlcikge1xuICAgIC8vaW5pdGlhbGl6ZSBnZXQgaWYgbm90IHRoZXJlXG4gICAgaWYgKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KSB7XG4gICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0ge307ICAgIFxuICAgIH0gICAgXG4gICAgLy9kaXNhYmxlIElFIGFqYXggcmVxdWVzdCBjYWNoaW5nXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnSWYtTW9kaWZpZWQtU2luY2UnXSA9ICdGcmksIDAxIEphbiAyMDE2IDA1OjAwOjAwIEdNVCc7XG4gICAgLy8gZXh0cmFcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydDYWNoZS1Db250cm9sJ10gPSAnbm8tY2FjaGUnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ1ByYWdtYSddID0gJ25vLWNhY2hlJztcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XG5cbiAgZnVuY3Rpb24gQXBwQ3RybCgkc3RhdGUpIHtcbiAgICB2YXIgYXBwQ3RybCA9IHRoaXM7XG4gICAgYXBwQ3RybC4kc3RhdGUgPSAkc3RhdGU7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyZVJvdXRlcyk7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlUm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgdmFyIHJvdXRlUm9sZUNoZWNrcyA9IHtcbiAgICAgIHN1cGVyQWRtaW46IHJlcXVpcmVTdXBlckFkbWluLFxuICAgICAgYWRtaW46IHJlcXVpcmVBZG1pbixcbiAgICAgIHVzZXI6IHJlcXVpcmVBdXRoXG4gICAgfTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vIGZvciBhbnkgdW5tYXRjaGVkIHVybFxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvcHlyYW1pZHMvJywgJy9weXJhbWlkcycpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzJywge1xuICAgICAgICB1cmw6ICcvcHlyYW1pZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMubXlQeXJhbWlkcycsIHtcbiAgICAgICAgdXJsOiAnL215LXB5cmFtaWRzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlQeXJhbWlkc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9teS1weXJhbWlkcy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICB1cmw6ICcvdmlldy86cHlyYW1pZElkJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHlyYW1pZEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9weXJhbWlkLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMuY3JlYXRlJywge1xuICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlUHlyYW1pZEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9jcmVhdGUtcHlyYW1pZC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9sb2dpbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3JlZ2lzdGVyLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlcXVpcmVBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZVN1cGVyQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlU3VwZXJBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdzdXBlci1hZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZUF1dGguJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQXV0aChhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykucnVuKGFwcFJ1bik7XG5cbiAgZnVuY3Rpb24gYXBwUnVuKCRyb290U2NvcGUsICRzdGF0ZSwgc2lkZWJhclNlcnZpY2UpIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgPT09ICdub3QgYXV0aG9yaXplZCcpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSB0b1N0YXRlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyhmYWxzZSk7XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gYXV0aFNlcnZpY2UoJHN0YXRlLCAkaHR0cCwgJHEsIHVzZXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGF1dGhlbnRpY2F0ZVVzZXI6IGF1dGhlbnRpY2F0ZVVzZXIsXG4gICAgICBjcmVhdGVVc2VyOiBjcmVhdGVVc2VyLFxuICAgICAgbG9nb3V0OiBsb2dvdXQsXG4gICAgICBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlOiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlLFxuICAgICAgYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZTogYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZVxuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gcmVzcG9uc2UuZGF0YS51c2VyO1xuICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICB1c2VyRGF0YTogdXNlckRhdGFcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgYXV0aGVudGljYXRlVXNlcih1c2VyRGF0YS51c2VybmFtZSwgdXNlckRhdGEucGFzc3dvcmQpO1xuICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvbG9nb3V0Jywge1xuICAgICAgICBsb2dvdXQ6IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZShyb2xlKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aG9yaXplZChyb2xlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCd1c2VyU2VydmljZScsIHVzZXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiB1c2VyU2VydmljZSgkaHR0cCwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRBbGxVc2VyczogZ2V0QWxsVXNlcnNcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJykudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIExvZ2luQ3RybCk7XG5cbiAgZnVuY3Rpb24gTG9naW5DdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmxvZ2luID0gbG9naW47XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1VzZXJuYW1lIC8gcGFzc3dvcmQgY29tYmluYWl0b24gaW5jb3JyZWN0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCRzdGF0ZS5wcmV2aW91cykge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCRzdGF0ZS5wcmV2aW91cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIFJlZ2lzdGVyQ3RybCk7XG5cbiAgZnVuY3Rpb24gUmVnaXN0ZXJDdHJsKCRzY29wZSwgJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiByZWdpc3RlcihuZXdVc2VyKSB7XG4gICAgICBpZiAobmV3VXNlci5wYXNzd29yZCAhPT0gbmV3VXNlci5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdXRoU2VydmljZS5jcmVhdGVVc2VyKG5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twQWN0aXZlQ2hhbGxlbmVnZXMnLCBrcEFjdGl2ZUNoYWxsZW5lZ2VzKTtcblxuICBmdW5jdGlvbiBrcEFjdGl2ZUNoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzKCkge1xuICAgICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBpZiAoY2hhbGxlbmdlcy5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksJ3MnKSkgKiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jcmVhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jb21wbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnY2hhbGxlbmdlc1NlcnZpY2UnLCBjaGFsbGVuZ2VzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gY2hhbGxlbmdlc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNyZWF0ZUNoYWxsZW5nZTogY3JlYXRlQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVDaGFsbGVuZ2U6IGNvbXBsZXRlQ2hhbGxlbmdlLFxuICAgICAgZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyOiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL2NyZWF0ZScsIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9jb21wbGV0ZScsICB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXInLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twRm9vdGVyJywga3BGb290ZXIpO1xuXG4gIGZ1bmN0aW9uIGtwRm9vdGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twSGVhZGVyJywga3BIZWFkZXIpO1xuXG4gIGZ1bmN0aW9uIGtwSGVhZGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICdoZWFkZXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9oZWFkZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoc2lkZWJhclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgdm0uc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcbiAgICB2bS50b2dnbGVTaWRlYmFyID0gdG9nZ2xlU2lkZWJhcjtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICB2bS5zaWRlYmFyU3RhdHVzLmxlZnQgPSAhdm0uc2lkZWJhclN0YXR1cy5sZWZ0O1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyh2bS5zaWRlYmFyU3RhdHVzLmxlZnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BTaWRlYmFyJywga3BTaWRlYmFyKTtcblxuICBmdW5jdGlvbiBrcFNpZGViYXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3NpZGViYXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnaWRlbnRpdHlTZXJ2aWNlJywgaWRlbnRpdHlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBpZGVudGl0eVNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBjdXJyZW50VXNlcjtcbiAgICBpZiAoJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICBjdXJyZW50VXNlciA9ICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdDtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKHJvbGUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ25vdGlmeVNlcnZpY2UnLCBub3RpZnlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBub3RpZnlTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgaW5mbzogaW5mbyxcbiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgaW52ZXJzZTogaW52ZXJzZVxuICAgIH07XG5cbiAgICAkLm5vdGlmeURlZmF1bHRzKHtcbiAgICAgIG5ld2VzdF9vbl90b3A6IHRydWUsXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5zZXJ2aWNlKCd3ZWJzb2NrZXRTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICR3aW5kb3cpIHtcbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb25uZWN0aW9uO1xuICAgIHRoaXMuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYnNvY2tldEhvc3QoKSk7XG5cbiAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAodG9waWMsIGRhdGEpIHtcbiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgY29ubmVjdGlvbi5zZW5kKGpzb24pO1xuICAgIH07XG4gIH0pLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICBmdW5jdGlvbiBIb21lQ3RybCgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twUHlyYW1pZCcsIGtwUHlyYW1pZCk7XG5cbiAgZnVuY3Rpb24ga3BQeXJhbWlkKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy9weXJhbWlkLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJ1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgcHlyYW1pZHNTZXJ2aWNlLCAkZmlsdGVyLCBub3RpZnlTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkID0ge307XG4gICAgdm0uYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgdm0uaXNDdXJyZW50VXNlck9uUHlyYW1pZCA9IGZhbHNlO1xuICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSBmYWxzZTtcbiAgICB2bS5jcmVhdGVDaGFsbGVuZ2UgPSBjcmVhdGVDaGFsbGVuZ2U7XG4gICAgdm0uY29tcGxldGVDaGFsbGVuZ2UgPSBjb21wbGV0ZUNoYWxsZW5nZTtcbiAgICB2bS5jaGFsbGVuZ2VFeHBpcmVkID0gY2hhbGxlbmdlRXhwaXJlZDtcbiAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHt9O1xuICAgIHZtLnB5cmFtaWRNZW51VG9nZ2xlID0gZmFsc2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkKSB7XG4gICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG5cbiAgICAgICAgdm0ubGV2ZWxzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHB5cmFtaWQuZGF0YS5sZXZlbHM7ICsraSkge1xuICAgICAgICAgIHZtLmxldmVscy5wdXNoKGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3JkZXJQbGF5ZXJzKCk7XG4gICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgY2FsY3VsYXRlUHlyYW1pZEJsb2NrcygpO1xuICAgICAgICBmaWxsSW5FbXB0eUJsb2NrcygpO1xuICAgICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9yZGVyIHRoZSBwbGF5ZXJzIGJ5IHRoZSBwb3NpdGlvbiBwcm9wZXJ0eSBvZiB0aGUgcGxheWVycyBhcnJheSBpbiB0aGUgcHlyYW1pZCBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvcmRlclBsYXllcnMoKSB7XG4gICAgICB2bS5weXJhbWlkLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0ucHlyYW1pZC5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzU3RhdHVzKCkge1xuICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBvbiB0aGlzIHB5cmFtaWQgYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uaXNDdXJyZW50VXNlck9uUHlyYW1pZCA9IHRydWU7XG4gICAgICAgICAgcGxheWVyLmNsYXNzID0gJ2N1cnJlbnQtdXNlcic7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgXy5mb3JFYWNoKGNoYWxsZW5nZXMuZGF0YSwgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuXG4gICAgICAgICAgdmFyIGNoYWxsZW5nZXIgPSBfLmZpbmQodm0ucHlyYW1pZC5wbGF5ZXJzLCB7J19pZCc6IGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZH0pO1xuICAgICAgICAgIGNoYWxsZW5nZXIuY2xhc3MgPSAndW5hdmFpbGFibGUnO1xuICAgICAgICAgIGNoYWxsZW5nZXIuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdjaGFsbGVuZ2VyJ1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb3Bwb25lbnQgPSBfLmZpbmQodm0ucHlyYW1pZC5wbGF5ZXJzLCB7J19pZCc6IGNoYWxsZW5nZS5vcHBvbmVudC5faWR9KTtcbiAgICAgICAgICBvcHBvbmVudC5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdvcHBvbmVudCdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gVHJhY2sgd2hlbiB0aGUgY2hhbGxlbmdlIHdpbGwgZXhwaXJlXG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksICdzJykgKiAtMTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgaGFzIG5vdCB5ZXQgZXhwaXJlZCBkaXNwbGF5IGEgY291bnRkb3duIG9uIHRoZSBvcHBvbmVudFxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlLmV4cGlyZXMgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBweXJhbWlkIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBvcHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm93IHRoYXQgd2Uga25vdyB3aGljaCBwbGF5ZXJzIGFyZSBpbiBjaGFsbGVuZ2VzIGFuZCB3aGljaCBhcmVuJ3RcbiAgICAgICAgLy8gZmluZCB0aGUgYXZhaWxhYmxlIGNoYWxsZW5nZXMgZm9yIHRoaXMgdXNlclxuICAgICAgICBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGVyZSB0byBzdGFydCBlYWNoIG5ldyByb3cgb24gdGhlIHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCcmVha1BvaW50cygpIHtcbiAgICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQubGV2ZWxzOyBpKyspIHtcbiAgICAgICAgdm0uYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIb3cgbWFueSB0b3RhbCBibG9ja3MgaW4gdGhpcyBweXJhbWlkXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHlyYW1pZEJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5weXJhbWlkLmxldmVsczsgaSA+IDA7IGktLSkge1xuICAgICAgICB2bS5udW1iZXJPZkJsb2NrcyArPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbGwgb3V0IHRoZSByZW1haW5pbmcgYmxvY2tzIG9mIHRoZSBweXJhbWlkIHdpdGggZW1wdHkgYmxvY2tzXG4gICAgZnVuY3Rpb24gZmlsbEluRW1wdHlCbG9ja3MoKSB7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDsgaSA8IHZtLm51bWJlck9mQmxvY2tzOyBpKyspIHtcbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzLnB1c2goe1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0VtcHR5JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1Nwb3QnLFxuICAgICAgICAgIHBvc2l0aW9uOiA5OSxcbiAgICAgICAgICBjbGFzczogJ2VtcHR5J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWwgcHJvcGVydHkgYmFzZWQgb24gdGhlIGJyZWFrIHBvaW50c1xuICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB3aG8gb3RoZXIgcGxheWVycyBjYW4gY2hhbGxlbmdlXG4gICAgZnVuY3Rpb24gYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCkge1xuICAgICAgdmFyIGxldmVsID0gMDtcbiAgICAgIGNyZWF0ZUJyZWFrUG9pbnRzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodm0uYnJlYWtQb2ludHMuaW5kZXhPZihpICsgMSkgPiAtMSkge1xuICAgICAgICAgIGxldmVsICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzW2ldLmxldmVsID0gbGV2ZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdGhlIHBsYXllcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIGJlIGNoYWxsZW5nZWQgYnkgdGhpcyB1c2VyXG4gICAgZnVuY3Rpb24gZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2YXIgbGV2ZWxBYm92ZSA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsID4gMSA/IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsIC0gMSA6IG51bGw7XG4gICAgICBfLmZvckVhY2godm0ucHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIGlmIChwbGF5ZXIubGV2ZWwgPT09IGxldmVsQWJvdmUgJiYgcGxheWVyLnBvc2l0aW9uICE9PSA5OSAmJiBwbGF5ZXIuY2xhc3MgIT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHBsYXllcikge1xuICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB0aGF0IGlzIG5vdCBhIHZhbGlkIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5weXJhbWlkLmZvcmZlaXREYXlzLFxuICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgIF9pZDogdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBuaWNrbmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubmlja25hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wcG9uZW50OiB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgbmlja25hbWU6IHBsYXllci5uaWNrbmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICAgICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSB3aW5uZXJJc0N1cnJlbnRVc2VyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmVySXNDdXJyZW50VXNlciwgZm9yZmVpdCwgZm9yZmVpdExvc2VyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdExvc2VyIHx8IHZtLmN1cnJlbnRVc2VyUGxheWVyO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdCB0aGFuIHN3YXAgcG9zaXRpb24gYW5kIG1ha2UgdGhlIGNoYWxsZW5nZXIgdGhlIHdpbm5lclxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIud2lubmVyID0gdHJ1ZTtcbiAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdobyB0aGUgd2lubmVyIHdhcyB0byBzdG9yZSBpbiB0aGUgY2hhbGxlbmdlIHJlY29yZFxuICAgICAgICB9IGVsc2UgaWYgKHdpbm5lcklzQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50Lndpbm5lciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudC53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLndpbm5lciA9IHRydWU7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTd2FwIHBvc2l0aW9ucyBhbmQgdGhlbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIG9yIGp1c3QgY29tcGxldGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBweXJhbWlkXG4gICAgICAgIGlmIChzd2FwUG9zaXRpb25zKSB7XG4gICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLnN3YXBQb3NpdGlvbnModm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQsIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYWxsZW5nZUV4cGlyZWQocGxheWVyKSB7XG4gICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBwbGF5ZXIpO1xuICAgIH1cblxuICAgIC8vIFJlZnJlc2ggdGhlIHB5cmFtaWQgYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcbiAgICAgICAgb3JkZXJQbGF5ZXJzKCk7XG4gICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NyZWF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NvbXBsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdweXJhbWlkc1NlcnZpY2UnLCBweXJhbWlkc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHB5cmFtaWRzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0UHlyYW1pZDogZ2V0UHlyYW1pZCxcbiAgICAgIGdldFB5cmFtaWRzRm9yVXNlcjogZ2V0UHlyYW1pZHNGb3JVc2VyLFxuICAgICAgY3JlYXRlUHlyYW1pZDogY3JlYXRlUHlyYW1pZCxcbiAgICAgIHN3YXBQb3NpdGlvbnM6IHN3YXBQb3NpdGlvbnMsXG4gICAgICBhZGRQbGF5ZXJUb1B5cmFtaWQ6IGFkZFBsYXllclRvUHlyYW1pZFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBweXJhbWlkIGZyb20gdGhlIGRhdGFiYXNlIChvciBtZW1vcnkpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHlyYW1pZCBpZCBmb3IgdGhlIHJlcXVlc3RlZCBweXJhbWlkXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHlyYW1pZChweXJhbWlkSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZCcsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcHlyYW1pZElkOiBweXJhbWlkSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgcHlyYW1pZHMgZnJvbSB0aGUgZGF0YWJhc2UgdGhlIGEgcGFydGljdWxhciB1c2VyIGlzIGluY2x1ZGVkIGluXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3VzZXJJZH0gdGhlIHVzZXIgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgdXNlclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcHlyYW1pZHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkc0ZvclVzZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3B5cmFtaWRzL3VzZXInLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVB5cmFtaWQocHlyYW1pZCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvY3JlYXRlJywge1xuICAgICAgICBweXJhbWlkOiBweXJhbWlkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2FwUG9zaXRpb25zKHB5cmFtaWRJZCwgY2hhbGxlbmdlciwgb3Bwb25lbnQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3N3YXBQb3NpdGlvbnMnLCB7XG4gICAgICAgIHB5cmFtaWRJZDogcHlyYW1pZElkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZChweXJhbWlkSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvYWRkUGxheWVyJywge1xuICAgICAgICBweXJhbWlkSWQ6IHB5cmFtaWRJZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBZGRQbGF5ZXJDdHJsJywgQWRkUGxheWVyQ3RybCk7XG5cbiAgZnVuY3Rpb24gQWRkUGxheWVyQ3RybCgkc3RhdGUsICRzdGF0ZVBhcmFtcywgdXNlclNlcnZpY2UsIHB5cmFtaWRzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZFBsYXllclRvUHlyYW1pZCA9IGFkZFBsYXllclRvUHlyYW1pZDtcbiAgICB2bS5jcmVhdGVQeXJhbWlkID0gY3JlYXRlUHlyYW1pZDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHVzZXJzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb24gPSAwO1xuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9QeXJhbWlkKHBsYXllcikge1xuICAgICAgLy8gQWRkIHRoZSBzZWxlY3RlZCBwbGF5ZXIgdG8gdGhlIHBsYXllcnMgYXJyYXlcbiAgICAgIHBvc2l0aW9uICs9IDE7XG4gICAgICB2YXIgYWRkUGxheWVyID0ge1xuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICBuaWNrbmFtZTogcGxheWVyLm5pY2tuYW1lXG4gICAgICB9O1xuICAgICAgdm0ubmV3UHlyYW1pZC5wbGF5ZXJzLnB1c2goYWRkUGxheWVyKTtcbiAgICAgIC8vIFJlbW92ZSB0aGUgc2VsZWN0ZWQgcGxheWVyIGZyb20gdGhlIGF2YWlsYWJsZSBwbGF5ZXJzXG4gICAgICBfLnJlbW92ZSh2bS5hdmFpbGFibGVQbGF5ZXJzLCB7XG4gICAgICAgIF9pZDogcGxheWVyLl9pZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuY3JlYXRlUHlyYW1pZChweXJhbWlkKS50aGVuKGZ1bmN0aW9uIChuZXdQeXJhbWlkKSB7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMudmlldycsIHtcbiAgICAgICAgICBweXJhbWlkSWQ6IG5ld1B5cmFtaWQuZGF0YS5faWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVzIGEgcHlyYW1pZFxuICovXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDcmVhdGVQeXJhbWlkQ3RybCcsIENyZWF0ZVB5cmFtaWRDdHJsKTtcblxuICBmdW5jdGlvbiBDcmVhdGVQeXJhbWlkQ3RybCgkc2NvcGUsICRzdGF0ZSwgdXNlclNlcnZpY2UsIHB5cmFtaWRzU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubmV3UHlyYW1pZCA9IHtcbiAgICAgIHBsYXllcnM6IFtdXG4gICAgfTtcbiAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdm0uYWRkZWRQbGF5ZXJzID0gW107XG4gICAgdm0uY3JlYXRlUHlyYW1pZCA9IGNyZWF0ZVB5cmFtaWQ7XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLnJlbW92ZVBsYXllciA9IHJlbW92ZVBsYXllcjtcbiAgICB2bS5hbGxvd2VkUGxheWVycyA9IDEwO1xuICAgIHZtLm5ld1B5cmFtaWQubGV2ZWxzID0gNDtcbiAgICB2bS5uZXdQeXJhbWlkLmZvcmZlaXREYXlzID0gMTtcblxuICAgIGFjdGl2YXRlKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogUnVucyBvbiBjb250cm9sbGVyIGluc3RhbnRpYXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHVzZXJzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGxheWVyIHRvIHRoZSBuZXcgcHlyYW1pZFxuICAgICAqIENoZWNrcyB0byBtYWtlIHN1cmUgeW91IGFyZSBub3QgYWRkaW5nIHRvbyBtYW55IHBsYXllcnNcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFBsYXllcihwbGF5ZXIpIHtcbiAgICAgIGlmKHZtLmFkZGVkUGxheWVycy5sZW5ndGggPCB2bS5hbGxvd2VkUGxheWVycykge1xuICAgICAgICB2bS5hZGRlZFBsYXllckFkZGVkID0gdHJ1ZTtcbiAgICAgICAgdm0uYWRkZWRQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYXZhaWxhYmxlUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0FsbCBzcG90cyBoYXZlIGJlZW4gZmlsbGVkLjxiciAvPklmIHlvdSB3YW50IHRvIGFkZCBtb3JlIHBlb3BsZSBwbGVhc2UgaW5jcmVhc2UgdGhlIGxldmVscy4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcHJldml1b3NseSBhZGRlZCBwbGF5ZXIgZnJvbSB0aGUgcHlyYW1pZFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYWRkZWRQbGF5ZXJBZGRlZCA9IGZhbHNlO1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmFkZGVkUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBudW1iZXIgb2YgYWxsb3dlZCBwbGF5ZXJzIGZvciB0aGUgcHlyYW1pZFxuICAgICAqIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgbGV2ZWxzIGNob3NlblxuICAgICAqIFJlbW92ZXMgZXh0cmEgcGxheWVycyBhbmQgbWFrZXMgdGhlbSBhdmFpbGFibGUgYWdhaW5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGxldmVsc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUFsbG93ZWRQbGF5ZXJzKGxldmVscykge1xuICAgICAgdm0uYWxsb3dlZFBsYXllcnMgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IGxldmVsczsgaSA+IDA7IGktLSkge1xuICAgICAgICB2bS5hbGxvd2VkUGxheWVycyArPSBpO1xuICAgICAgfVxuICAgICAgaWYgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggPiB2bS5hbGxvd2VkUGxheWVycykge1xuICAgICAgICB2YXIgcmVtb3ZlZFBsYXllcnMgPSB2bS5hZGRlZFBsYXllcnMuc3BsaWNlKHZtLmFsbG93ZWRQbGF5ZXJzKTtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHZtLmF2YWlsYWJsZVBsYXllcnMuY29uY2F0KHJlbW92ZWRQbGF5ZXJzKTtcbiAgICAgICAgbm90aWZ5U2VydmljZS53YXJuaW5nKCdQbGF5ZXJzIHdlcmUgcmVtb3ZlZCBiZWNhc3VlIHRoZXJlIGFyZSBub3QgZW5vdWdoIHNwb3RzIG9uIHRoZSBweXJhbWlkLicpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2FjdGggZm9yIGNoYW5nZXMgdG8gdGhlIHB5cmFtaWQgbGV2ZWxzIG1vZGVsIGFuZCB1cGRhdGUgdGhlIG51bWJlciBvZiBhbGxvd2VkIHBsYXllcnNcbiAgICAkc2NvcGUuJHdhdGNoKCd2bS5uZXdQeXJhbWlkLmxldmVscycsIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICBpZiAobmV3VmFsICE9PSBvbGRWYWwpIHtcbiAgICAgICAgdXBkYXRlQWxsb3dlZFBsYXllcnMobmV3VmFsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVzZWQgdG8ga2VlcCB0cmFjayBvZiBwb3NpdGlvbiBvbiB0aGUgcHlyYW1pZCBiYXNlZCBvbiB3aGVuIHRoZSBwbGF5ZXIgd2FzIGFkZGVkXG4gICAgdmFyIHBvc2l0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgcHlyYW1pZFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcHlyYW1pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVB5cmFtaWQocHlyYW1pZCkge1xuICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwb3NpdGlvbiArPSAxO1xuICAgICAgICB2YXIgYWRkUGxheWVyID0ge1xuICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgbmlja25hbWU6IHBsYXllci5uaWNrbmFtZVxuICAgICAgICB9O1xuICAgICAgICB2bS5uZXdQeXJhbWlkLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgfSk7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuY3JlYXRlUHlyYW1pZChweXJhbWlkKS50aGVuKGZ1bmN0aW9uIChuZXdQeXJhbWlkKSB7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMudmlldycsIHtcbiAgICAgICAgICBweXJhbWlkSWQ6IG5ld1B5cmFtaWQuZGF0YS5faWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignTXlQeXJhbWlkc0N0cmwnLCBNeVB5cmFtaWRzQ3RybCk7XG5cbiAgZnVuY3Rpb24gTXlQeXJhbWlkc0N0cmwoJHN0YXRlLCBweXJhbWlkc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucHlyYW1pZHMgPSBudWxsO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmdldFB5cmFtaWRzRm9yVXNlcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkcykge1xuICAgICAgICB2bS5weXJhbWlkcyA9IHB5cmFtaWRzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUHlyYW1pZEN0cmwnLCBQeXJhbWlkQ3RybCk7XG5cbiAgZnVuY3Rpb24gUHlyYW1pZEN0cmwoJHN0YXRlUGFyYW1zKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkSWQgPSBudWxsO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5weXJhbWlkSWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZElkID0gJHN0YXRlUGFyYW1zLnB5cmFtaWRJZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUHlyYW1pZHNDdHJsJywgUHlyYW1pZHNDdHJsKTtcblxuICBmdW5jdGlvbiBQeXJhbWlkc0N0cmwoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkcyA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGVTdWJtZW51JywgdG9nZ2xlU3VibWVudSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlU3VibWVudSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsKSB7XG4gICAgICBlbC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLm5leHQoKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICBlbC5wYXJlbnQoKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd2F2ZXNFZmZlY3QnLCB3YXZlc0VmZmVjdCk7XG5cbiAgZnVuY3Rpb24gd2F2ZXNFZmZlY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWljb24nKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdidG4tZmxvYXQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1jaXJjbGUnXSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1saWdodCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWxpZ2h0J10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBXYXZlcy5pbml0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZmdMaW5lJywgZmdMaW5lKTtcblxuICBmdW5jdGlvbiBmZ0xpbmUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKTtcbiAgICAgIHZhciBpc0Zsb2F0TGFiZWwgPSBlbGVtZW50LnBhcmVudCgpLmhhc0NsYXNzKCdmZy1mbG9hdCcpO1xuICAgICAgaW5wdXQuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQuYmx1cihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGbG9hdExhYmVsIHx8IChpc0Zsb2F0TGFiZWwgJiYgaW5wdXQudmFsKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
