angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var i=this;i.$state=e,i.lockSidebar=t.get("sidebarLocked"),i.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,o,r){var a={superAdmin:n,admin:t,user:i};r.html5Mode(!0),o.otherwise("/"),o.when("/competitions/","/competitions"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("competitions",{url:"/competitions",views:{content:{controller:"CompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competitions.html"}}}).state("competitions.myCompetitions",{url:"/my-competitions",views:{"content@":{controller:"MyCompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/my-competitions.html"}},resolve:{auth:a.user}}).state("competitions.view",{url:"/view/:competitionId",views:{"content@":{controller:"CompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition.html"}}}).state("competitions.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"CompetitionStatsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-stats.html"}}}).state("competitions.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"CompetitionAdminCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-admin.html"}},resolve:{auth:a.user}}).state("competitions.create",{url:"/create",views:{"content@":{controller:"CreateCompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/create-competition.html"}},resolve:{auth:a.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:a.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function i(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],i.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,i,o,r,a){"not authorized"===a&&(t.go("login"),t.previous=n,t.prevParams=i)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(e,i){var r=n.defer();return t.post("/login",{username:e,password:i}).then(function(e){e.data.success?(o.currentUser=e.data.user,r.resolve(!0)):"unverified"===e.data.message?r.resolve("unverified"):r.resolve(!1)}),r.promise}function s(e){var i=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?i.resolve(!0):i.resolve(!1)},function(e){"Error: Email already in use"===e.data.reason&&r.error("Sorry, an account already exists with that email address.")}),i.promise}function l(){var i=n.defer();return t.post("/logout",{logout:!0}).then(function(){o.currentUser=void 0,i.resolve(),e.go("home")}),i.promise}function c(e){return!!o.isAuthorized(e)||n.reject("not authorized")}function u(){return!!o.isAuthenticated()||n.reject("not authorized")}var p={authenticateUser:a,createUser:s,logout:l,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:u};return p}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return _.forEach(e.data,function(e){e.displayName||(e.displayName=e.firstName+" "+e.lastName)}),e.data=_.sortBy(e.data,"displayName"),e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function i(t){return e.get("/api/user/password/link",{params:{username:t}})}function o(t,n,i){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:i})}function r(t){return e.put("/api/user",{user:t})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:i,resetPassword:o,updateUser:r};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i,o){t.authenticateUser(i,o).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("competitions.myCompetitions"):n.error("Username / password combinaiton incorrect")})}var r=this;r.login=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){r.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function s(t){n.generatePasswordResetLink(t).then(function(t){t.data?(i.success("Please check your email for a password reset link"),e.go("home")):i.error("Could not find that email address")})}function l(r){r.password!==r.confirmPassword?i.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,r.password).then(function(t){t.data&&o.authenticateUser(t.data.username,r.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=s,c.resetPassword=l,a()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){i.password!==i.confirmPassword?n.error("Passwords don't match!"):(i.displayName||(i.displayName=i.firstName+" "+i.lastName),t.createUser(i).then(function(){e.go("verify")}))}var r=this;r.register=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){t.userId&&t.verificationToken&&(o.verifying=!0,o.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?o.verified=!0:o.verified=!1}))}var o=this;o.verified=void 0,o.verifying=!1,i()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.competition",function(){o.competition&&i()})}function i(){o.challenges=[],t.getActiveChallengesByCompetition(o.competition._id).then(function(e){e.data.length>0&&(o.challenges=e.data,_.forEach(o.challenges,function(e){"versus"===e.type&&(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team),0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var o=this;o.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("wpmActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function i(){e.$watch("vm.challenges",function(){a.challenges&&a.challenges.length>0&&o()})}function o(){_.forEach(a.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger","versus"===e.type&&(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team),e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})})}function r(e,t){n.deleteChallenge(a.competitionId,e).then(function(){a.challenges.splice(t,1)})}var a=this;a.challenges=[],a.deleteChallenge=r,i()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("wpmCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){r.player&&(n(r.player),i(r.player),o(r.player))})}function n(e){for(var t=[],n=0;n<r.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var i=0;i<t.length;i++)if(e.position<t[i+1]){e.level=t.indexOf(t[i])+1;break}}function i(e){var t,n=0,i=!0;_.forEach(e.results,function(o){i&&("challenger"===o.winner&&o.challenger._id===e._id||"opponent"===o.winner&&o.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):i=!1:("opponent"===o.winner&&o.challenger._id===e._id||"challenger"===o.winner&&o.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):i=!1)),r.streak={type:t,value:n}})}function o(e){r.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),r.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),r.wins.total=r.wins.asChallenger+r.wins.asOpponent,r.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),r.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),r.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),r.loses.total=r.loses.asChallenger+r.loses.asOpponent,r.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var r=this;r.maxLevels=7,r.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmPlayerOverallResults",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{team:"=",challenges:"="},templateUrl:"/challenges/components/team-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.challenges",function(){o.challenges&&o.challenges.length>0&&(n(o.team,o.challenges),i(o.team,o.challenges))})}function n(e,t){var n,i=0,r=!0;_.forEach(t,function(t){r&&("challenger"===t.winner&&t.challenger.team===e||"opponent"===t.winner&&t.opponent.team===e?"losing"!==n?(i+=1,n="winning"):r=!1:("opponent"===t.winner&&t.challenger.team===e||"challenger"===t.winner&&t.opponent.team===e)&&("winning"!==n?(i+=1,n="losing"):r=!1)),o.streak={type:n,value:i}})}function i(e,t){o.wins.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"opponent"===t.winner})),o.wins.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"challenger"===t.winner})),o.wins.total=o.wins.asChallenger+o.wins.asOpponent,o.wins.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"challenger"===t.winner||t.opponent.team===e&&"opponent"===t.winner)})),o.loses.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"challenger"===t.winner})),o.loses.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"opponent"===t.winner})),o.loses.total=o.loses.asChallenger+o.loses.asOpponent,o.loses.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"opponent"===t.winner||t.opponent.team===e&&"challenger"===t.winner)}))}var o=this;o.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmTeamOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/pyramid/create",{challenge:t})}function n(t){return e.post("/api/challenges/versus/create",{challenge:t})}function i(t){return e.post("/api/challenges/pyramid/complete",{challenge:t})}function o(t){return e.post("/api/challenges/versus/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function a(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function s(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function l(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function c(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function u(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function p(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var m={createPyramidChallenge:t,createVersusChallenge:n,completePyramidChallenge:i,completeVersusChallenge:o,getChallengesByCompetition:r,getActiveChallengesByCompetition:a,getActiveChallengeByCompetitionByPlayer:s,getCompletedChallengesByCompetition:l,deleteActiveChallengeByCompetitionByPlayer:c,deleteChallenge:u,getPlayerResultsByCompetition:p};return m}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/competition-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("wpmCompetitionCompact",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=o.competition.players.length+1,e.approvePendingPlayer(o.competition._id,t)}function i(t){e.denyPendingPlayer(o.competition._id,t)}var o=this;o.pendingPlayers=[],o.approvePendingPlayer=n,o.denyPendingPlayer=i,t()}t.$inject=["competitionsService"],angular.module("app").directive("wpmPendingPlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/pyramid.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o,r,a){function s(){for(var t=U;t>0;--t)A.maxPlayers+=t;e.$watch("vm.competition",function(){A.competition&&(A.competitionId=A.competition._id,l(),c(),p(),m(),d())})}function l(){A.competition.players=i("orderBy")(A.competition.players,"position")}function c(){A.currentUserIsAdmin=!1,A.currentUserIsPending=!1,r.isAuthenticated()&&(A.currentUserIsAdmin=_.some(A.competition.admins,["_id",r.currentUser._id]),A.currentUserIsPending=_.some(A.competition.pendingPlayers,["_id",r.currentUser._id])),A.currentUserIsOnCompetition=!1,A.hasActiveChallenge=!1,_.forEach(A.competition.players,function(e){r.isAuthenticated()&&e._id===r.currentUser._id&&(A.currentUserIsOnCompetition=!0,e.class="current-user",A.currentUserPlayer=e,a.getActiveChallengeByCompetitionByPlayer(A.competitionId,e._id).then(function(t){if(t.data){A.hasActiveChallenge=!0,A.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger;var n=_.find(A.competition.players,{_id:A.activeChallengeOpponent._id});n.class=n.class?n.class+" current-opponent":"current-opponent"}else f()}))}),a.getActiveChallengesByCompetition(A.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(A.competition.players,{_id:e.challenger._id});"available"===t.class&&(t.class=""),t.class=t.class?t.class+" unavailable":"unavailable",t.available=!1,t.challenge={position:"challenger"};var n=_.find(A.competition.players,{_id:e.opponent._id});if("available"===n.class&&(n.class=""),n.class=n.class?n.class+" unavailable":"unavailable",n.available=!1,n.challenge={position:"opponent"},0!==e.timeLimit){var i=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;i>0?n.challenge.expires=i:i<=0&&v(null,!0,n)}})})}function u(){A.breakPoints=[];for(var e=0;e<U;e++)A.breakPoints.push(e*(e+1)/2+1)}function p(){var e=0;A.levels=[],u();for(var t=0;t<A.competition.players.length;t++)A.breakPoints.indexOf(t+1)>-1&&(e+=1,A.levels.push(e)),A.competition.players[t].level=e}function m(){A.numberOfBlocks=0;for(var e=_.last(A.levels);e>0;e--)A.numberOfBlocks+=e}function d(){A.numberOfRealPlayers=A.competition.players.length;for(var e=A.competition.players.length;e<A.numberOfBlocks;e++)A.competition.players.push({firstName:"Empty",lastName:"Spot",displayName:"Empty Spot",position:99,class:A.currentUserIsOnCompetition?"empty":"joinable empty"});p()}function f(){if(A.currentUserIsOnCompetition&&!A.hasActiveChallenge){var e=A.currentUserPlayer.level>1?A.currentUserPlayer.level-1:null;_.forEach(A.competition.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&t.available!==!1&&(A.availableChallenges=!0,t.available=!0,t.class="available")})}}function h(e){if(e.available){A.hasActiveChallenge=!0;var t={type:A.competition.type,competitionName:A.competition.name,competitionId:A.competitionId,complete:!1,forfeit:!1,timeLimit:A.competition.forfeitDays,challenger:{_id:A.currentUserPlayer._id,email:A.currentUserPlayer.email,firstName:A.currentUserPlayer.firstName,lastName:A.currentUserPlayer.lastName,displayName:A.currentUserPlayer.displayName,position:A.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position}};a.createPyramidChallenge(t).then(function(){A.competitionMenuToggle=!1})}else o.error("Sorry, that is not a valid challenge.")}function v(e,t,i){var o=i||A.currentUserPlayer;a.getActiveChallengeByCompetitionByPlayer(A.competitionId,o._id).then(function(o){A.hasActiveChallenge=!1;var r=!1;t?(o.data.forfeit=!0,"opponent"===i.challenge.position?(o.data.winner="challenger",r=!0):o.data.winner="opponent"):e?o.data.challenger._id===A.currentUserPlayer._id?(o.data.winner="challenger",r=!0):o.data.winner="opponent":o.data.challenger._id===A.currentUserPlayer._id?o.data.winner="opponent":(o.data.winner="challenger",r=!0),r?n.swapPositions(A.competitionId,o.data.opponent,o.data.challenger).then(function(){a.completePyramidChallenge(o.data).then(function(){S&&w()})}):a.completePyramidChallenge(o.data).then(function(){S&&w()}),A.competitionMenuToggle=!1})}function g(e){v(null,!0,e)}function y(){if(r.isAuthenticated())if(A.numberOfRealPlayers<A.maxPlayers){var e={_id:r.currentUser._id,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,displayName:r.currentUser.displayName,email:r.currentUser.username,position:A.numberOfRealPlayers+1};A.competition.restrictJoins?swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetitionRequest(A.competition,e).then(function(){A.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")}):swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetition(A.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")})}else o.warning("Sorry, this competition is full");else o.warning("Please login to join a competition"),t.previous="competitions.view",t.prevParams={competitionId:A.competitionId},t.go("login")}function C(){swal({title:"Leave Competition?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){w(),swal("OK, you'r out!","You've been removed from the competition.","success")})}function w(){r.isAuthenticated()&&A.currentUserIsOnCompetition&&(S=!0,A.hasActiveChallenge?v(null,!0,A.currentUserPlayer):(A.currentUserIsOnCompetition=!1,A.hasActiveChallenge=!1,n.getCompetition(A.competitionId).then(function(e){var t=e.data,i=A.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=i&&(e.position-=1)});for(var o=_.remove(t.players,function(e){return e._id===A.currentUserPlayer._id}),r=[],a=0;a<A.numberOfRealPlayers-1;++a){var s={_id:t.players[a]._id,firstName:t.players[a].firstName,lastName:t.players[a].lastName,displayName:t.players[a].displayName,position:t.players[a].position};r.push(s)}n.removedPlayerFromCompetition(A.competitionId,o[0],r).then(function(){S=!1})})))}function P(e){99!==e.position||A.currentUserIsOnCompetition?e.showChallengeModal=!e.showChallengeModal:y()}function b(){n.getCompetition(A.competitionId).then(function(e){A.competition=e.data})}var U=7,A=this;A.competitionId=null,A.breakPoints=[],A.levels=[],A.numberOfBlocks=0,A.currentUserIsOnCompetition=!1,A.currentUserIsPending=!1,A.currentUserIsAdmin=!1,A.hasActiveChallenge=!1,A.activeChallengeOpponent=null,A.availableChallenges=!1,A.createChallenge=h,A.completeChallenge=v,A.challengeExpired=g,A.currentUserPlayer={},A.competitionMenuToggle=!1,A.addCurrentUserToCompetition=y,A.confirmRemoveCurrentUserFromCompetition=C,A.playerClick=P,A.numberOfRealPlayers=0,A.maxPlayers=0,s();var S=!1;e.$on("ws:competition_updated",function(e,t){A.competitionId===t.competitionId&&(o.info(t.description),b())})}t.$inject=["$scope","$state","competitionsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("wpmPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-admins.html"};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){d.competition&&(d.addedAdmins=_.cloneDeep(d.competition.admins),d.disableSubmit=!0,d.userIsPrimaryAdmin=_.find(d.competition.admins,{primary:!0})._id===o.currentUser._id,a())})}function a(){d.availableAdmins=[],p=[],i.getAllUsers().then(function(e){_.forEach(d.competition.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){d.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),m=_.cloneDeep(d.availableAdmins)})}function s(){d.competition.admins=d.addedAdmins,t.updateCompetition(d.competition).then(function(){d.disableSubmit=!0})}function l(){p=[],d.addedAdmins=_.cloneDeep(d.competition.admins),d.availableAdmins=_.cloneDeep(m)}function c(e){p.push(e),d.availableAdmins.push(_.remove(d.addedAdmins,{_id:e._id})[0]),d.disableSubmit=!1}function u(e){d.addedAdmins.push(_.remove(d.availableAdmins,{_id:e._id})[0]),d.disableSubmit=!1}var p=[],m=[],d=this;d.availableAdmins=[],d.addedAdmins=[],d.userIsPrimaryAdmin=!1,d.updateCompetition=s,d.cancelUpdate=l,d.removeAdmin=c,d.addAdmin=u,d.disableSubmit=!0,r()}t.$inject=["$scope","competitionsService","challengesService","userService","identityService"],angular.module("app").directive("wpmUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-players.html"};return e}function t(e,t,n,i,o,r){function a(){for(var t=g;t>0;--t)y+=t;e.$watch("vm.competition",function(){C.competition&&(C.addedPlayers=_.cloneDeep(C.competition.players),C.disableSubmit=!0,s())})}function s(){C.availablePlayers=[],h=[],o.getAllUsers().then(function(e){_.forEach(C.competition.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){C.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),v=_.cloneDeep(C.availablePlayers)})}function l(){"versus"===C.competition.type&&C.addedPlayers.length%2>0?r.error("A Versus competition must have an even number of players"):C.addedPlayers.length>y?r.error("A competition can have a maximum of "+y+" players"):(_.forEach(h,function(e){i.deleteActiveChallengeByCompetitionByPlayer(C.competition._id,e._id)}),C.competition.players=C.addedPlayers,n.updateCompetition(C.competition).then(function(){C.disableSubmit=!0}))}function c(){h=[],C.addedPlayers=_.cloneDeep(C.competition.players),C.availablePlayers=_.cloneDeep(v)}function u(){"versus"===C.competition.type?m():"pyramid"===C.competition.type&&p(),C.disableSubmit=!1}function p(){var e=1;_.forEach(C.addedPlayers,function(t){t.position=e,++e})}function m(){_.forEach(C.addedPlayers,function(e){e.position=2});for(var e=0;e<C.addedPlayers.length/2;e++)C.addedPlayers[e].position=1}function d(e){h.push(e),C.availablePlayers.push(_.remove(C.addedPlayers,{_id:e._id})[0]),u()}function f(e){C.addedPlayers.push(_.remove(C.availablePlayers,{_id:e._id})[0]),u(),C.disableSubmit=!1}var h=[],v=[],g=7,y=null,C=this;C.availablePlayers=[],C.addedPlayers=[],C.updateCompetition=l,C.cancelUpdate=c,C.reorderPlayers=u,C.removePlayer=d,C.addPlayer=f,C.disableSubmit=!0,a()}t.$inject=["$scope","$filter","competitionsService","challengesService","userService","notifyService"],angular.module("app").directive("wpmUpdatePlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/versus.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){m.competition&&(m.competitionId=m.competition._id,m.showControls=!1,m.showChallengeModal=!1,a(),s())})}function a(){m.competition.teams=[{players:_.filter(m.competition.players,["position",1])},{players:_.filter(m.competition.players,["position",2])}]}function s(){m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,n.isAuthenticated()&&(m.currentUserIsAdmin=_.some(m.competition.admins,["_id",n.currentUser._id]),m.currentUserIsPending=_.some(m.competition.pendingPlayers,["_id",n.currentUser._id])),m.currentUserIsOnCompetition=!1,m.hasActiveChallenge=!1,_.forEach(m.competition.players,function(e){n.isAuthenticated()&&e._id===n.currentUser._id&&(m.currentUserIsOnCompetition=!0,e.class="current-user",m.currentUserPlayer=e,m.competition.teams[e.position-1].class="current-user-team",m.competition.class="current-user-on-competition")}),i.getActiveChallengesByCompetition(m.competitionId).then(function(e){if(e.data.length>0&&(m.activeChallenge=e.data[0],m.hasActiveChallenge=!0,0!==m.activeChallenge.timeLimit)){var t=moment().diff(moment(m.activeChallenge.created).add(m.activeChallenge.timeLimit,"d"),"s")*-1;t>0?m.challengeExpireTime=t:t<=0&&u(null,!0)}})}function l(){m.hasActiveChallenge&&m.currentUserIsOnCompetition&&(m.showControls=!m.showControls)}function c(e){if(m.showChallengeModal=!1,m.hasActiveChallenge)o.error("Sorry, you are already in an active challenge.");else{m.hasActiveChallenge=!0;var t={type:m.competition.type,competitionName:m.competition.name,competitionId:m.competitionId,complete:!1,forfeit:!1,timeLimit:m.competition.forfeitDays,challenger:{team:m.currentUserPlayer.position,_id:m.currentUserPlayer._id},opponent:{team:e}};i.createVersusChallenge(t).then(function(){m.competitionMenuToggle=!1})}}function u(e,t){m.hasActiveChallenge=!1;var n=m.activeChallenge;t?(n.forfeit=!0,n.winner="challenger"):m.activeChallenge.challenger.team===e?n.winner="challenger":n.winner="opponent",i.completeVersusChallenge(n),m.competitionMenuToggle=!1}function p(){t.getCompetition(m.competitionId).then(function(e){m.competition=e.data})}var m=this;m.competitionId=null,m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,m.currentUserIsOnCompetition=!1,m.activeChallenge=null,m.hasActiveChallenge=!1,m.currentUserPlayer=null,m.createChallenge=c,m.completeChallenge=u,m.challengeExpireTime=null,m.showControls=!1,m.showChallengeModal=!1,m.toggleControls=l,r(),e.$on("ws:competition_updated",function(e,t){m.competitionId===t.competitionId&&(o.info(t.description),p())})}t.$inject=["$scope","competitionsService","identityService","challengesService","notifyService"],angular.module("app").directive("wpmVersus",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/competition",{params:{competitionId:t}})}function n(t){return e.get("/api/competitions/user",{params:{userId:t}})}function i(){return e.get("/api/competitions")}function o(t){return e.post("/api/competitions/create",{competition:t})}function r(t){return e.post("/api/competitions/update",{competition:t})}function a(t){return e.delete("/api/competitions/delete",{params:{competitionId:t}})}function s(t,n,i){return e.post("/api/competitions/swapPositions",{competitionId:t,challenger:n,opponent:i})}function l(t,n){return e.post("/api/competitions/addPlayer",{competitionId:t,player:n})}function c(t,n){return e.post("/api/competitions/addPlayerRequest",{competition:t,player:n})}function u(t,n,i){return e.post("/api/competitions/removePlayer",{competitionId:t,removedPlayer:n,players:i})}function p(t,n){return e.post("/api/competitions/approvePlayer",{competitionId:t,player:n})}function m(t,n){return e.post("/api/competitions/denyPlayer",{competitionId:t,player:n})}var d={getCompetition:t,getCompetitionsForUser:n,getCompetitions:i,createCompetition:o,updateCompetition:r,deleteCompetition:a,swapPositions:s,addPlayerToCompetition:l,addPlayerToCompetitionRequest:c,removedPlayerFromCompetition:u,approvePendingPlayer:p,denyPendingPlayer:m};return d}e.$inject=["$http"],angular.module("app").factory("competitionsService",e)}(),function(){"use strict";function e(e,t,n,i,o,r,a,s){function l(){n.competitionId?(m.competitionId=n.competitionId,c()):t.go("competitions.myCompetitions")}function c(){o.getCompetition(m.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",r.currentUser._id])?(m.isAdmin=!0,
e.data.players=i("orderBy")(e.data.players,"position"),m.competition=e.data):t.go("competitions.myCompetitions")}),s.getCompletedChallengesByCompetition(m.competitionId).then(function(e){m.challenges=e.data})}function u(){o.getCompetition(m.competitionId).then(function(e){var t=e.data;t.restrictJoins=m.competition.restrictJoins,o.updateCompetition(t)})}function p(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){o.deleteCompetition(m.competitionId).then(function(){t.go("competitions.myCompetitions")})})}var m=this;m.competitionId=null,m.updateCompetitionRestrictJoins=u,m.deleteCompetition=p,l(),e.$on("ws:competition_updated",function(e,t){m.competitionId===t.competitionId&&(a.info(t.description),c())}),e.$on("ws:competition_deleted",function(e,n){m.competitionId===n.competitionId&&(a.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","$filter","competitionsService","identityService","notifyService","challengesService"],angular.module("app").controller("CompetitionAdminCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){t.competitionId&&(l.competitionId=t.competitionId,s())}function s(){i.getCompetition(l.competitionId).then(function(e){e.data?(l.competition=e.data,"pyramid"===l.competition.type?_.forEach(l.competition.players,function(e){r.getPlayerResultsByCompetition(l.competitionId,e._id).then(function(t){e.results=t.data})}):"versus"===l.competition.type&&(l.teams=[{number:1},{number:2}])):n.go("competitions.myCompetitions")}),r.getCompletedChallengesByCompetition(l.competitionId).then(function(e){l.challenges=e.data})}var l=this;l.competitionId=null,l.competition={},l.playersResults=[],l.challenges=[],a(),e.$on("ws:competition_updated",function(e,t){l.competitionId===t.competitionId&&(o.info(t.description),s())}),e.$on("ws:competition_deleted",function(e,t){l.competitionId===t.competitionId&&(o.info(t.description),n.go("competitions.myCompetitions"))})}e.$inject=["$scope","$stateParams","$state","competitionsService","notifyService","challengesService"],angular.module("app").controller("CompetitionStatsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){n.competitionId&&(a.competitionId=n.competitionId,i.getCompetition(a.competitionId).then(function(e){e.data?a.competition=e.data:t.go("competitions.myCompetitions")}))}var a=this;a.competitionId=null,a.competition=null,r(),e.$on("ws:competition_deleted",function(e,n){a.competitionId===n.competitionId&&(o.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","competitionsService","notifyService"],angular.module("app").controller("CompetitionCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("CompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){t.getAllUsers().then(function(e){h.availablePlayers=e.data});for(var e=d;e>0;--e)f+=e;for(e=0;e<d;e++)m.push(e*(e+1)/2+1)}function a(e){h.addedPlayers.push(_.remove(h.availablePlayers,{_id:e._id})[0]),l()}function s(e){h.availablePlayers.push(_.remove(h.addedPlayers,{_id:e._id})[0]),l()}function l(){"versus"===h.newCompetition.type?u():"pyramid"===h.newCompetition.type&&c()}function c(){var e=1;_.forEach(h.addedPlayers,function(t){t.position=e,++e})}function u(){_.forEach(h.addedPlayers,function(e){e.position=2});for(var e=0;e<h.addedPlayers.length/2;e++)h.addedPlayers[e].position=1}function p(t){if("versus"===t.type&&h.addedPlayers.length%2>0)o.error("A Versus competition must have an even number of players");else if(h.addedPlayers.length>f)o.error("A competition can have a maximum of "+f+" players");else{angular.forEach(h.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position};t.players.push(n)}),t.admins=[{_id:i.currentUser._id,email:i.currentUser.username,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,displayName:i.currentUser.displayName,primary:!0}];for(var r=0;r<m.length;r++)if(t.players.length<m[r]){t.levels=r;break}n.createCompetition(t).then(function(t){e.go("competitions.view",{competitionId:t.data._id})})}}var m=[],d=7,f=null,h=this;h.newCompetition={players:[],restrictJoins:!1},h.availablePlayers=[],h.addedPlayers=[],h.createCompetition=p,h.addPlayer=a,h.removePlayer=s,h.reorderPlayers=l,h.newCompetition.forfeitDays=1,h.competitionTypes=["pyramid","versus"],r()}e.$inject=["$state","userService","competitionsService","identityService","notifyService"],angular.module("app").controller("CreateCompetitionCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){a()}function a(){s=[],l.activeChallenge=null,i.isAuthenticated()&&t.getCompetitionsForUser(i.currentUser._id).then(function(e){l.competitions=e.data,_.forEach(l.competitions,function(e){s.push(e._id),"pyramid"===e.type?n.getActiveChallengeByCompetitionByPlayer(e._id,i.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))}):"versus"===e.type&&n.getActiveChallengesByCompetition(e._id).then(function(t){t.data.length>0&&(e.activeChallenge=t.data[0],0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var s=[],l=this;l.activeChallenge=null,r(),e.$on("ws:competition_updated",function(e,t){s.indexOf(t.competitionId)>=0&&(o.info(t.description),a())})}e.$inject=["$scope","competitionsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyCompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){if(i.password!==i.confirmPassword)n.error("Passwords don't match!");else{var o={_id:i._id};i.firstName===e.currentUser.firstName&&i.lastName===e.currentUser.lastName&&i.displayName===e.currentUser.displayName||(o.firstName=i.firstName,o.lastName=i.lastName,o.displayName=i.displayName),i.password&&i.password.lentgh>0&&(o.password=i.password),t.updateUser(o).then(function(){n.success("Your information has been updated"),r.userForm.$setPristine();var t=angular.copy(e.currentUser);angular.extend(t,o),e.currentUser=t,r.user.confirmPassword=r.user.password=""})}}var r=this;r.user={_id:e.currentUser._id,firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,displayName:e.currentUser.displayName},r.updateUser=o,r.userForm={},i()}e.$inject=["identityService","userService","notifyService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var i=this;i.indentity=e,i.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("wpmFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,i,o){function r(){a(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&a()})}function a(){p.alerts=[],n.isAuthenticated()&&o.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){p.alerts=e.data})}function s(e,t){o.clearAlert(e).then(function(){p.alerts.splice(t,1)})}function l(){o.clearAllAlertsByPlayer(n.currentUser._id).then(function(){p.alerts=[]})}function c(){t.setSidebarStatus(!p.sidebarStatus.left)}function u(){i.logout()}var p=this;p.indentity=n,p.logout=u,p.sidebarStatus=t.getSidebarStatus(),p.toggleSidebar=c,p.clearAlert=s,p.clearAllAlerts=l,p.alerts=[],r(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&a()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("wpmHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function i(){t.logout()}var o=this;o.indentity=e,o.logout=i,o.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("wpmSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var i in e)n.push(e[i]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function i(t){return e.put("/api/alerts/clear",{userId:t})}var o={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:i};return o}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var i;null!==e.bootstrappedUserObject&&(i=e.bootstrappedUserObject);var o={currentUser:i,isAuthenticated:t,isAuthorized:n};return o}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function o(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var r={info:e,success:t,warning:n,error:i,inverse:o};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85},delay:5e3}),r}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,i){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:i,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},i={getSidebarStatus:e,setSidebarStatus:t};return i}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function i(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function o(){a=new WebSocket(i()),a.onmessage=function(t){l=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},a.onclose=function(){l<s.length?(console.log("WebSocket closed. Reconnecting..."),n(o,1e3*s[l]),l+=1):console.log("Giving up on WebSocket")}}function r(e,t){var n=JSON.stringify({topic:e,data:t});a.send(n)}var a,s=[3,10,100,1e3],l=0,c={connect:o,send:r};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e){function t(){e.getCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,i){var o=i.scrollaxis||"y",r=i.theme||"minimal-dark",a=i.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,r,o,a)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),i=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!i||i&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuZGlyZWN0aXZlLmpzIiwiY2hhbGxlbmdlcy9zZXJ2aWNlcy9jaGFsbGVuZ2VzLnNlcnZpY2UuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy9jb21wZXRpdGlvbi1jb21wYWN0LmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3BlbmRpbmctcGxheWVycy5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy9weXJhbWlkLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1hZG1pbnMuZGlyZWN0aXZlLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdXBkYXRlLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdmVyc3VzLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9zZXJ2aWNlcy9jb21wZXRpdGlvbnMuc2VydmljZS5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1hZG1pbi5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLXN0YXRzLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24uY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbnMuY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jcmVhdGUtY29tcGV0aXRpb24uY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9teS1jb21wZXRpdGlvbnMuY29udHJvbGxlci5qcyIsInVzZXJzL3ZpZXdzL3VzZXIuY29udHJvbGxlci5qcyIsImNvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9oZWFkZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5kaXJlY3RpdmUuanMiLCJjb21tb24vZmlsdGVycy9vcmRlci1vYmplY3QtYnkuZmlsdGVyLmpzIiwiY29tbW9uL3NlcnZpY2VzL2FsZXJ0cy5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL2luZGVudGl0eS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL25vdGlmeS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3Njcm9sbGJhci5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3NpZGViYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy93ZWJzb2NrZXQuc2VydmljZS5qcyIsImNvbW1vbi92aWV3cy9ob21lLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tcG9uZW50cy91aS9zY3JvbGxiYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCIkaHR0cFByb3ZpZGVyIiwiJHVpYlRvb2x0aXBQcm92aWRlciIsIiRxUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCJvcHRpb25zIiwiYXBwZW5kVG9Cb2R5IiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwibG9jYWxTdG9yYWdlU2VydmljZSIsInRvZ2dsZVNpZGViYXJMb2NrZWQiLCJsb2NrZWQiLCJzZXQiLCJhcHBDdHJsIiwidGhpcyIsImxvY2tTaWRlYmFyIiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJzdXBlckFkbWluIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJhZG1pbiIsInJlcXVpcmVBZG1pbiIsInVzZXIiLCJyZXF1aXJlQXV0aCIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiY29udGVudEAiLCJyZXNvbHZlIiwiYXV0aCIsImF1dGhTZXJ2aWNlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsImF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCIkaW5qZWN0IiwiYXBwUnVuIiwiJHJvb3RTY29wZSIsInNpZGViYXJTZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsInByZXZpb3VzIiwicHJldlBhcmFtcyIsInNldFNpZGViYXJTdGF0dXMiLCJydW4iLCIkaHR0cCIsIiRxIiwidXNlclNlcnZpY2UiLCJpZGVudGl0eVNlcnZpY2UiLCJub3RpZnlTZXJ2aWNlIiwiYXV0aGVudGljYXRlVXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJkZmQiLCJkZWZlciIsInBvc3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwic3VjY2VzcyIsImN1cnJlbnRVc2VyIiwibWVzc2FnZSIsInByb21pc2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJyZWFzb24iLCJsb2dvdXQiLCJ1bmRlZmluZWQiLCJyb2xlIiwiaXNBdXRob3JpemVkIiwicmVqZWN0IiwiaXNBdXRoZW50aWNhdGVkIiwic2VydmljZSIsImZhY3RvcnkiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwiXyIsImZvckVhY2giLCJkaXNwbGF5TmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic29ydEJ5IiwidmVyaWZ5VXNlciIsInVzZXJJZCIsInZlcmlmaWNhdGlvblRva2VuIiwicGFyYW1zIiwiZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayIsInJlc2V0UGFzc3dvcmQiLCJwdXQiLCJ1cGRhdGVVc2VyIiwiTG9naW5DdHJsIiwiYWN0aXZhdGUiLCJsb2dpbiIsInZtIiwiUGFzc3dvcmRSZXNldEN0cmwiLCIkc3RhdGVQYXJhbXMiLCJ2ZXJpZmllZCIsInJlc2V0UGFzc3dvcmRGb3JtIiwiY29uZmlybVBhc3N3b3JkIiwiUmVnaXN0ZXJDdHJsIiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiVmVyaWZpY2F0aW9uQ3RybCIsInZlcmlmeWluZyIsIndwbUFjdGl2ZUNoYWxsZW5lZ2VzIiwiZGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImN0cmxGdW5jIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbXBldGl0aW9uIiwiJHNjb3BlIiwiY2hhbGxlbmdlc1NlcnZpY2UiLCIkd2F0Y2giLCJnZXRBY3RpdmVDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlcyIsImdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwiX2lkIiwibGVuZ3RoIiwiY2hhbGxlbmdlIiwidHlwZSIsImNoYWxsZW5nZXIiLCJ0ZWFtIiwib3Bwb25lbnQiLCJ0aW1lTGltaXQiLCJleHBpcmVzIiwibW9tZW50IiwiZGlmZiIsImNyZWF0ZWQiLCJhZGQiLCJ3cG1Db21wbGV0ZWRDaGFsbGVuZWdlcyIsImNvbXBldGl0aW9uSWQiLCJhbGxvd0RlbGV0ZSIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInNwbGljZSIsIndwbVBsYXllck92ZXJhbGxSZXN1bHRzIiwicGxheWVyIiwiYXNzaWducGxheWVyc1RvTGV2ZWxzIiwiY2FsY3VsYXRlU3RyZWFrIiwiY2FsY3VhdGVXaW5BbmRMb3NlcyIsImJyZWFrUG9pbnRzIiwiaSIsIm1heExldmVscyIsInB1c2giLCJsZXZlbCIsImoiLCJwb3NpdGlvbiIsImluZGV4T2YiLCJzdHJlYWtUeXBlIiwic3RyZWFrIiwiY29udGludWVTdHJlYWsiLCJyZXN1bHRzIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsIndwbVRlYW1PdmVyYWxsUmVzdWx0cyIsImNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2UiLCJjcmVhdGVWZXJzdXNDaGFsbGVuZ2UiLCJjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UiLCJjb21wbGV0ZVZlcnN1c0NoYWxsZW5nZSIsImdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwicGxheWVySWQiLCJnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsImxpbWl0IiwiZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwiZGVsZXRlIiwiZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24iLCJ3cG1Db21wZXRpdGlvbkNvbXBhY3QiLCJ3cG1QZW5kaW5nUGxheWVycyIsImNvbXBldGl0aW9uc1NlcnZpY2UiLCJhcHByb3ZlUGVuZGluZ1BsYXllciIsInBsYXllcnMiLCJkZW55UGVuZGluZ1BsYXllciIsInBlbmRpbmdQbGF5ZXJzIiwid3BtUHlyYW1pZCIsInJlcGxhY2UiLCIkZmlsdGVyIiwibWF4UGxheWVycyIsIm9yZGVyUGxheWVycyIsImdldFBsYXllcnNTdGF0dXMiLCJhc3NpZ25MZXZlbHNUb1BsYXllcnMiLCJjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcyIsImZpbGxJbkVtcHR5QmxvY2tzIiwiY3VycmVudFVzZXJJc0FkbWluIiwiY3VycmVudFVzZXJJc1BlbmRpbmciLCJzb21lIiwiYWRtaW5zIiwiY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24iLCJoYXNBY3RpdmVDaGFsbGVuZ2UiLCJjbGFzcyIsImN1cnJlbnRVc2VyUGxheWVyIiwiYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQiLCJjdXJyZW50T3Bwb25lbnQiLCJmaW5kIiwiZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMiLCJhdmFpbGFibGUiLCJ0aW1lVG9FeHBpcmUiLCJjb21wbGV0ZUNoYWxsZW5nZSIsImNyZWF0ZUJyZWFrUG9pbnRzIiwibGV2ZWxzIiwibnVtYmVyT2ZCbG9ja3MiLCJsYXN0IiwibnVtYmVyT2ZSZWFsUGxheWVycyIsImxldmVsQWJvdmUiLCJhdmFpbGFibGVDaGFsbGVuZ2VzIiwiY3JlYXRlQ2hhbGxlbmdlIiwiY29tcGV0aXRpb25OYW1lIiwibmFtZSIsImNvbXBsZXRlIiwiZm9yZmVpdERheXMiLCJlbWFpbCIsImNvbXBldGl0aW9uTWVudVRvZ2dsZSIsIndpbm5lcklzQ3VycmVudFVzZXIiLCJmb3JmZWl0TG9zZXIiLCJzd2FwUG9zaXRpb25zIiwicmVtb3ZpbmdDdXJyZW50VXNlciIsInJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uIiwiY2hhbGxlbmdlRXhwaXJlZCIsImFkZEN1cnJlbnRVc2VyVG9Db21wZXRpdGlvbiIsInJlc3RyaWN0Sm9pbnMiLCJzd2FsIiwidGl0bGUiLCJ0ZXh0Iiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2FuY2VsQnV0dG9uVGV4dCIsImNsb3NlT25Db25maXJtIiwiY2xvc2VPbkNhbmNlbCIsImFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0IiwiYWRkUGxheWVyVG9Db21wZXRpdGlvbiIsIndhcm5pbmciLCJjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24iLCJjb25maXJtQnV0dG9uQ2xhc3MiLCJnZXRDb21wZXRpdGlvbiIsInAiLCJvcGVuUG9zaXRpb24iLCJyZW1vdmVkUGxheWVyIiwicmVtb3ZlIiwidXBkYXRlZFBsYXllcnMiLCJ1cGRhdGVkUGxheWVyIiwicmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbiIsInBsYXllckNsaWNrIiwic2hvd0NoYWxsZW5nZU1vZGFsIiwicmVmcmVzaENvbXBldGl0aW9uIiwiY2hhbGxlbmdlRGV0YWlscyIsImluZm8iLCJkZXNjcmlwdGlvbiIsIndwbVVwZGF0ZUFkbWlucyIsImFkZGVkQWRtaW5zIiwiY2xvbmVEZWVwIiwiZGlzYWJsZVN1Ym1pdCIsInVzZXJJc1ByaW1hcnlBZG1pbiIsInByaW1hcnkiLCJnZXRBdmFpbGFibGVBZG1pbnMiLCJhdmFpbGFibGVBZG1pbnMiLCJyZW1vdmVkQWRtaW5zIiwiY29tcGV0aXRpb25BZG1pbiIsImF2YWlsYWJsZUFkbWluIiwib3JpZ2luYWxBdmFpbGFibGVBZG1pbnMiLCJ1cGRhdGVDb21wZXRpdGlvbiIsImNhbmNlbFVwZGF0ZSIsInJlbW92ZUFkbWluIiwiYWRkQWRtaW4iLCJ3cG1VcGRhdGVQbGF5ZXJzIiwiYWRkZWRQbGF5ZXJzIiwiZ2V0QXZhaWxhYmxlUGxheWVycyIsImF2YWlsYWJsZVBsYXllcnMiLCJyZW1vdmVkUGxheWVycyIsImNvbXBldGl0aW9uUGxheWVyIiwiYXZhaWxhYmxlUGxheWVyIiwib3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzIiwicmVvcmRlclBsYXllcnMiLCJyZW9yZGVyVmVyc3VzUGxheWVycyIsInJlb3JkZXJQeXJhbWlkUGxheWVycyIsInJlbW92ZVBsYXllciIsImFkZFBsYXllciIsIndwbVZlcnN1cyIsInNob3dDb250cm9scyIsImdyb3VwUGxheWVycyIsImdldEN1cnJlbnRVc2VyU3RhdHVzIiwidGVhbXMiLCJhY3RpdmVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VFeHBpcmVUaW1lIiwidG9nZ2xlQ29udHJvbHMiLCJ3aW5uaW5nVGVhbSIsImdldENvbXBldGl0aW9uc0ZvclVzZXIiLCJnZXRDb21wZXRpdGlvbnMiLCJjcmVhdGVDb21wZXRpdGlvbiIsImRlbGV0ZUNvbXBldGl0aW9uIiwiQ29tcGV0aXRpb25BZG1pbkN0cmwiLCJpc0FkbWluIiwidXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zIiwidXBkYXRlZENvbXBldGl0aW9uIiwiY29tcGV0aXRpb25EZXRhaWxzIiwiQ29tcGV0aXRpb25TdGF0c0N0cmwiLCJudW1iZXIiLCJwbGF5ZXJzUmVzdWx0cyIsIkNvbXBldGl0aW9uQ3RybCIsIkNvbXBldGl0aW9uc0N0cmwiLCJjb21wZXRpdGlvbnMiLCJDcmVhdGVDb21wZXRpdGlvbkN0cmwiLCJuZXdDb21wZXRpdGlvbiIsImNvbXBldGl0aW9uVHlwZXMiLCJNeUNvbXBldGl0aW9uc0N0cmwiLCJteUNvbXBldGl0aW9ucyIsIlVzZXJDdHJsIiwidXNlclVwZGF0ZXMiLCJsZW50Z2giLCJ1c2VyRm9ybSIsIiRzZXRQcmlzdGluZSIsImN1cnJlbnRVc2VyQ2xvbmUiLCJjb3B5IiwiZXh0ZW5kIiwid3BtRm9vdGVyIiwiaW5kZW50aXR5Iiwid3BtSGVhZGVyIiwiYWxlcnRzU2VydmljZSIsImdldEFjdGl2ZUFsZXJ0cyIsImhlYWRlckN0cmwiLCJhbGVydHMiLCJnZXRBY3RpdmVBbGVydHNCeVBsYXllciIsImNsZWFyQWxlcnQiLCJpbmRleCIsImNsZWFyQWxsQWxlcnRzIiwiY2xlYXJBbGxBbGVydHNCeVBsYXllciIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyU3RhdHVzIiwibGVmdCIsImdldFNpZGViYXJTdGF0dXMiLCJlIiwid3BtU2lkZWJhciIsIm9yZGVyT2JqZWN0QnkiLCJpbnB1dCIsImF0dHJpYnV0ZSIsImlzT2JqZWN0IiwiYXJyYXkiLCJvYmplY3RLZXkiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsImFsZXJ0SWQiLCIkd2luZG93Iiwicm9sZXMiLCJib290c3RyYXBwZWRVc2VyT2JqZWN0IiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsImludmVyc2UiLCJub3RpZnlEZWZhdWx0cyIsIm5ld2VzdF9vbl90b3AiLCJvZmZzZXQiLCJ4IiwieSIsImRlbGF5Iiwic2Nyb2xsYmFyU2VydmljZSIsIm1hbGlodVNjcm9sbCIsInNlbGVjdG9yIiwidGhlbWUiLCJzY3JvbGxheGlzIiwibW91c2V3aGVlbGF4aXMiLCJtQ3VzdG9tU2Nyb2xsYmFyIiwic2Nyb2xsSW5lcnRpYSIsImF4aXMiLCJtb3VzZVdoZWVsIiwiZW5hYmxlIiwicHJldmVudERlZmF1bHQiLCJzdGF0dXMiLCJyaWdodCIsIndlYnNvY2tldFNlcnZpY2UiLCIkdGltZW91dCIsIndlYnNvY2tldEhvc3QiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwicmV0cnkiLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiJGJyb2FkY2FzdCIsInRvcGljIiwib25jbG9zZSIsInJldHJ5U2Vjb25kcyIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwianNvbiIsInN0cmluZ2lmeSIsIkhvbWVDdHJsIiwiY092ZXJmbG93IiwibGlua0Z1bmMiLCJlbGVtZW50IiwiYXR0cnMiLCJoYXNDbGFzcyIsImxpbmsiLCJ0b2dnbGVTdWJtZW51IiwiZWwiLCJjbGljayIsIm5leHQiLCJzbGlkZVRvZ2dsZSIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwid2F2ZXNFZmZlY3QiLCJXYXZlcyIsImF0dGFjaCIsImluaXQiLCJmZ0xpbmUiLCJjaGlsZHJlbiIsImZpcnN0IiwiaXNGbG9hdExhYmVsIiwiZm9jdXMiLCJhZGRDbGFzcyIsImJsdXIiLCJ2YWwiLCJyZW1vdmVDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsWUFDQSxzQkFDQSxhQUNBLHdCQUNBLFFBQ0EscUJBQ0Esd0JBQ0Esc0JDVkEsd0JBSUEsU0FBQUMsR0FBQUMsRUFBQUMsRUFBQUMsR0FFQUYsRUFBQUcsU0FBQUMsUUFBQUMsTUFDQUwsRUFBQUcsU0FBQUMsUUFBQUMsUUFHQUwsRUFBQUcsU0FBQUMsUUFBQUMsSUFBQSxxQkFBQSxnQ0FFQUwsRUFBQUcsU0FBQUMsUUFBQUMsSUFBQSxpQkFBQSxXQUNBTCxFQUFBRyxTQUFBQyxRQUFBQyxJQUFBLE9BQUEsV0FFQUosRUFBQUssU0FBQUMsY0FBQSxJQUNBTCxFQUFBTSw0QkFBQSxrRUFkQVgsUUFBQUMsT0FBQSxPQUFBVyxPQUFBVixNQ0ZBLHVCQUlBLFNBQUFXLEdBQUFDLEVBQUFDLEdBUUEsUUFBQUMsR0FBQUMsR0FDQUYsRUFBQUcsSUFBQSxnQkFBQUQsR0FSQSxHQUFBRSxHQUFBQyxJQUVBRCxHQUFBTCxPQUFBQSxFQUVBSyxFQUFBRSxZQUFBTixFQUFBUCxJQUFBLGlCQUNBVyxFQUFBSCxvQkFBQUEsNkNBUkFoQixRQUFBQyxPQUFBLE9BQUFxQixX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SCxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLGNBQUFtVSxNQ0pBLFdBQ0EsWUFLQSxTQUFBSSxLQVFBLFFBQUFoQixHQUFBblQsRUFBQW9ULEdBQ0EsR0FBQS9ELEdBQUErRCxFQUFBZ0IsV0FBQUMsUUFDQUMsRUFBQWxCLEVBQUFTLFNBQUFQLFNBQUEsV0FDQWpFLEdBQUFrRixNQUFBLFdBQ0FuQixFQUFBb0IsU0FBQSxnQkFHQW5GLEVBQUFvRixLQUFBLGFBQ0FILEdBQUFBLEdBQUEsSUFBQWpGLEVBQUFxRixNQUFBalUsU0FDQTJTLEVBQUF1QixZQUFBLGdCQWhCQSxHQUFBL1UsSUFDQUcsU0FBQSxJQUNBd1QsS0FBQUosRUFHQSxPQUFBdlQsR0FWQTdILFFBQ0FDLE9BQUEsT0FDQTRILFVBQUEsU0FBQXVVIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkuYm9vdHN0cmFwJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJyxcbiAgJ0xvY2FsU3RvcmFnZU1vZHVsZScsXG4gICdhbmd1bGFyLXNvcnRhYmxlLXZpZXcnLFxuICAnYW5ndWxhci52ZXJ0aWxpemUnXG5dKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCAnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYXRpb24oJGh0dHBQcm92aWRlciwgJHVpYlRvb2x0aXBQcm92aWRlciwgJHFQcm92aWRlcikge1xuICAgIC8vaW5pdGlhbGl6ZSBnZXQgaWYgbm90IHRoZXJlXG4gICAgaWYgKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KSB7XG4gICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0ge307ICAgIFxuICAgIH0gICAgXG4gICAgLy9kaXNhYmxlIElFIGFqYXggcmVxdWVzdCBjYWNoaW5nXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnSWYtTW9kaWZpZWQtU2luY2UnXSA9ICdGcmksIDAxIEphbiAyMDE2IDA1OjAwOjAwIEdNVCc7XG4gICAgLy8gZXh0cmFcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydDYWNoZS1Db250cm9sJ10gPSAnbm8tY2FjaGUnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ1ByYWdtYSddID0gJ25vLWNhY2hlJztcblxuICAgICR1aWJUb29sdGlwUHJvdmlkZXIub3B0aW9ucyh7IGFwcGVuZFRvQm9keTogdHJ1ZSB9KTtcbiAgICAkcVByb3ZpZGVyLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKGZhbHNlKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XG5cbiAgZnVuY3Rpb24gQXBwQ3RybCgkc3RhdGUsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcbiAgICB2YXIgYXBwQ3RybCA9IHRoaXM7XG4gICAgLy8gVXNlIHRoaXMgZm9yIFNpZGViYXIgbWVudVxuICAgIGFwcEN0cmwuJHN0YXRlID0gJHN0YXRlO1xuICAgIC8vIExvY2sgdGhlIHNpZGViYXIgaW4gdmlld1xuICAgIGFwcEN0cmwubG9ja1NpZGViYXIgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnc2lkZWJhckxvY2tlZCcpO1xuICAgIGFwcEN0cmwudG9nZ2xlU2lkZWJhckxvY2tlZCA9IHRvZ2dsZVNpZGViYXJMb2NrZWQ7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyTG9ja2VkKGxvY2tlZCkge1xuICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ3NpZGViYXJMb2NrZWQnLCBsb2NrZWQpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJlUm91dGVzKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmVSb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB2YXIgcm91dGVSb2xlQ2hlY2tzID0ge1xuICAgICAgc3VwZXJBZG1pbjogcmVxdWlyZVN1cGVyQWRtaW4sXG4gICAgICBhZG1pbjogcmVxdWlyZUFkbWluLFxuICAgICAgdXNlcjogcmVxdWlyZUF1dGhcbiAgICB9O1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy8gZm9yIGFueSB1bm1hdGNoZWQgdXJsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJy9jb21wZXRpdGlvbnMvJywgJy9jb21wZXRpdGlvbnMnKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tbW9uL3ZpZXdzL2hvbWUuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy9jb21wZXRpdGlvbnMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb25zLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJywge1xuICAgICAgICB1cmw6ICcvbXktY29tcGV0aXRpb25zJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlDb21wZXRpdGlvbnNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL215LWNvbXBldGl0aW9ucy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMudmlldycsIHtcbiAgICAgICAgdXJsOiAnL3ZpZXcvOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb21wZXRpdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuc3RhdHMnLCB7XG4gICAgICAgIHVybDogJy9zdGF0cy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uU3RhdHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLXN0YXRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnY29tcGV0aXRpb25zLmFkbWluJywge1xuICAgICAgICB1cmw6ICcvYWRtaW4vOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb21wZXRpdGlvbkFkbWluQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1hZG1pbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuY3JlYXRlJywge1xuICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlQ29tcGV0aXRpb25DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NyZWF0ZS1jb21wZXRpdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd1c2VyJywge1xuICAgICAgICB1cmw6ICcvdXNlcicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd1c2Vycy92aWV3cy91c2VyLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncmVnaXN0ZXInLCB7XG4gICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd2ZXJpZnknLCB7XG4gICAgICAgIHVybDogJy92ZXJpZmljYXRpb24nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZlcmlmaWNhdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy92ZXJpZmljYXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd2ZXJpZmljYXRpb24nLCB7XG4gICAgICAgIHVybDogJy92ZXJpZmljYXRpb24vOnVzZXJJZC86dmVyaWZpY2F0aW9uVG9rZW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZlcmlmaWNhdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy92ZXJpZmljYXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdwYXNzd29yZC1yZXNldC1yZXF1ZXN0Jywge1xuICAgICAgICB1cmw6ICcvcGFzc3dvcmQtcmVzZXQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bhc3N3b3JkUmVzZXRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcGFzc3dvcmQtcmVzZXQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdwYXNzd29yZC1yZXNldCcsIHtcbiAgICAgICAgdXJsOiAnL3Bhc3N3b3JkLXJlc2V0Lzp1c2VySWQvOnZlcmlmaWNhdGlvblRva2VuJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQYXNzd29yZFJlc2V0Q3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3Bhc3N3b3JkLXJlc2V0Lmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlcXVpcmVBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZVN1cGVyQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlU3VwZXJBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdzdXBlci1hZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZUF1dGguJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQXV0aChhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykucnVuKGFwcFJ1bik7XG5cbiAgZnVuY3Rpb24gYXBwUnVuKCRyb290U2NvcGUsICRzdGF0ZSwgc2lkZWJhclNlcnZpY2UpIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgPT09ICdub3QgYXV0aG9yaXplZCcpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSB0b1N0YXRlO1xuICAgICAgICAkc3RhdGUucHJldlBhcmFtcyA9IHRvUGFyYW1zO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyhmYWxzZSk7XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gYXV0aFNlcnZpY2UoJHN0YXRlLCAkaHR0cCwgJHEsIHVzZXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGF1dGhlbnRpY2F0ZVVzZXI6IGF1dGhlbnRpY2F0ZVVzZXIsXG4gICAgICBjcmVhdGVVc2VyOiBjcmVhdGVVc2VyLFxuICAgICAgbG9nb3V0OiBsb2dvdXQsXG4gICAgICBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlOiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlLFxuICAgICAgYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZTogYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZVxuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gcmVzcG9uc2UuZGF0YS51c2VyO1xuICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gJ3VudmVyaWZpZWQnKSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoJ3VudmVyaWZpZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVVzZXIodXNlckRhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgICAgdXNlckRhdGE6IHVzZXJEYXRhXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlYXNvbiA9PT0gJ0Vycm9yOiBFbWFpbCBhbHJlYWR5IGluIHVzZScpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdTb3JyeSwgYW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoYXQgZW1haWwgYWRkcmVzcy4nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvbG9nb3V0Jywge1xuICAgICAgICBsb2dvdXQ6IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZShyb2xlKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aG9yaXplZChyb2xlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCd1c2VyU2VydmljZScsIHVzZXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiB1c2VyU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxuICAgICAgdmVyaWZ5VXNlcjogdmVyaWZ5VXNlcixcbiAgICAgIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbms6IGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmssXG4gICAgICByZXNldFBhc3N3b3JkOiByZXNldFBhc3N3b3JkLFxuICAgICAgdXBkYXRlVXNlcjogdXBkYXRlVXNlclxuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICAvLyBNYWtlIHN1cmUgZXZlcnkgdXNlciBoYXMgYSBkaXNwbGF5IG5hbWVcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgaWYgKCF1c2VyLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICB1c2VyLmRpc3BsYXlOYW1lID0gdXNlci5maXJzdE5hbWUgKyAnICcgKyB1c2VyLmxhc3ROYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHVzZXJzLmRhdGEgPSBfLnNvcnRCeSh1c2Vycy5kYXRhLCAnZGlzcGxheU5hbWUnKTtcbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmVyaWZ5VXNlcih1c2VySWQsIHZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXIvdmVyaWZpY2F0aW9uJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICB2ZXJpZmljYXRpb25Ub2tlbjogdmVyaWZpY2F0aW9uVG9rZW5cbiAgICAgICAgfVxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXIvcGFzc3dvcmQvbGluaycsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgICAgIH1cbiAgICAgIH0pOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRQYXNzd29yZCh1c2VySWQsIHZlcmlmaWNhdGlvblRva2VuLCBwYXNzd29yZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS91c2VyL3Bhc3N3b3JkL3Jlc2V0Jywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW46IHZlcmlmaWNhdGlvblRva2VuLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVXNlcih1c2VyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3VzZXInLCB7XG4gICAgICAgIHVzZXI6IHVzZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBMb2dpbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIExvZ2luQ3RybCgkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdVc2VybmFtZSAvIHBhc3N3b3JkIGNvbWJpbmFpdG9uIGluY29ycmVjdCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlID09PSAndW52ZXJpZmllZCcpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdZb3UgbXVzdCB2ZXJpZnkgeW91ciBlbWFpbCBiZWZvcmUgeW91IGNhbiBsb2dpbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgkc3RhdGUucHJldmlvdXMpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygkc3RhdGUucHJldmlvdXMsICRzdGF0ZS5wcmV2UGFyYW1zKTtcbiAgICAgICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IG51bGw7XG4gICAgICAgICAgICAkc3RhdGUucHJldlBhcmFtcyA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUGFzc3dvcmRSZXNldEN0cmwnLCBQYXNzd29yZFJlc2V0Q3RybCk7XG5cbiAgZnVuY3Rpb24gUGFzc3dvcmRSZXNldEN0cmwoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBhdXRoU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS51c2VybmFtZSA9ICcnO1xuICAgIHZtLnZlcmlmaWVkID0gZmFsc2U7XG4gICAgdm0ucmVzZXRQYXNzd29yZEZvcm0gPSB7fTtcbiAgICB2bS5nZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rID0gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluaztcbiAgICB2bS5yZXNldFBhc3N3b3JkID0gcmVzZXRQYXNzd29yZDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9IGVsc2UgaWYgKCRzdGF0ZVBhcmFtcy51c2VySWQgJiYgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnZlcmlmeVVzZXIoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKSB7XG4gICAgICB1c2VyU2VydmljZS5nZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdDb3VsZCBub3QgZmluZCB0aGF0IGVtYWlsIGFkZHJlc3MnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLnN1Y2Nlc3MoJ1BsZWFzZSBjaGVjayB5b3VyIGVtYWlsIGZvciBhIHBhc3N3b3JkIHJlc2V0IGxpbmsnKTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChyZXNldFBhc3N3b3JkRm9ybSkge1xuICAgICAgaWYgKHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkICE9PSByZXNldFBhc3N3b3JkRm9ybS5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1c2VyU2VydmljZS5yZXNldFBhc3N3b3JkKCRzdGF0ZVBhcmFtcy51c2VySWQsICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbiwgcmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIocmVzcG9uc2UuZGF0YS51c2VybmFtZSwgcmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgUmVnaXN0ZXJDdHJsKTtcblxuICBmdW5jdGlvbiBSZWdpc3RlckN0cmwoJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiByZWdpc3RlcihuZXdVc2VyKSB7XG4gICAgICBpZiAobmV3VXNlci5wYXNzd29yZCAhPT0gbmV3VXNlci5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW5ld1VzZXIuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBuZXdVc2VyLmRpc3BsYXlOYW1lID0gbmV3VXNlci5maXJzdE5hbWUgKyAnICcgKyBuZXdVc2VyLmxhc3ROYW1lO1xuICAgICAgICB9XG4gICAgICAgIGF1dGhTZXJ2aWNlLmNyZWF0ZVVzZXIobmV3VXNlcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCd2ZXJpZnknKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1ZlcmlmaWNhdGlvbkN0cmwnLCBWZXJpZmljYXRpb25DdHJsKTtcblxuICBmdW5jdGlvbiBWZXJpZmljYXRpb25DdHJsKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCB1c2VyU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0udmVyaWZpZWQgPSB1bmRlZmluZWQ7XG4gICAgdm0udmVyaWZ5aW5nID0gZmFsc2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLnVzZXJJZCAmJiAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pIHtcbiAgICAgICAgdm0udmVyaWZ5aW5nID0gdHJ1ZTtcbiAgICAgICAgdm0udmVyaWZpZWQgPSBudWxsO1xuICAgICAgICB1c2VyU2VydmljZS52ZXJpZnlVc2VyKCRzdGF0ZVBhcmFtcy51c2VySWQsICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgdm0udmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1BY3RpdmVDaGFsbGVuZWdlcycsIHdwbUFjdGl2ZUNoYWxsZW5lZ2VzKTtcblxuICBmdW5jdGlvbiB3cG1BY3RpdmVDaGFsbGVuZWdlcygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvYWN0aXZlLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlcygpIHtcbiAgICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBpZiAoY2hhbGxlbmdlcy5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhOyAgICAgICAgICBcbiAgICAgICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5kaXNwbGF5TmFtZSA9ICdUZWFtICcgKyBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtO1xuICAgICAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksJ3MnKSkgKiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1Db21wbGV0ZWRDaGFsbGVuZWdlcycsIHdwbUNvbXBsZXRlZENoYWxsZW5lZ2VzKTtcblxuICBmdW5jdGlvbiB3cG1Db21wbGV0ZWRDaGFsbGVuZWdlcygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJyxcbiAgICAgICAgYWxsb3dEZWxldGU6ICc9JyxcbiAgICAgICAgY2hhbGxlbmdlczogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2NvbXBsZXRlZC1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgIHZtLmRlbGV0ZUNoYWxsZW5nZSA9IGRlbGV0ZUNoYWxsZW5nZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNoYWxsZW5nZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHZtLmNoYWxsZW5nZXMgJiYgdm0uY2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKSB7XG4gICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBjaGFsbGVuZ2UubG9zZXIgPSBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgPyAnb3Bwb25lbnQnIDogJ2NoYWxsZW5nZXInO1xuICAgICAgICBpZiAoY2hhbGxlbmdlLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbTtcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW07XG4gICAgICAgIH1cbiAgICAgICAgY2hhbGxlbmdlLndoZW5Db21wbGV0ZWQgPSBtb21lbnQoY2hhbGxlbmdlLmNvbXBsZXRlZCkuY2FsZW5kYXIobnVsbCwge1xuICAgICAgICAgIHNhbWVEYXk6ICdbVG9kYXldJyxcbiAgICAgICAgICBuZXh0RGF5OiAnW1RvbW9ycm93XScsXG4gICAgICAgICAgbmV4dFdlZWs6ICdkZGRkJyxcbiAgICAgICAgICBsYXN0RGF5OiAnW1llc3RlcmRheV0nLFxuICAgICAgICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQnLFxuICAgICAgICAgIHNhbWVFbHNlOiAnREQvTU0vWVlZWSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlSWQsICRpbmRleCkge1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZGVsZXRlQ2hhbGxlbmdlKHZtLmNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZUlkKS50aGVuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMuc3BsaWNlKCRpbmRleCwgMSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVBsYXllck92ZXJhbGxSZXN1bHRzJywgd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMpO1xuXG4gIGZ1bmN0aW9uIHdwbVBsYXllck92ZXJhbGxSZXN1bHRzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcGxheWVyOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm1heExldmVscyA9IDc7XG4gICAgdm0ud2lucyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0ubG9zZXMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLnN0cmVhayA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICB2YWx1ZTogMFxuICAgIH07XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5wbGF5ZXIucmVzdWx0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnBsYXllcikge1xuICAgICAgICAgIGFzc2lnbnBsYXllcnNUb0xldmVscyh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1bGF0ZVN0cmVhayh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1YXRlV2luQW5kTG9zZXModm0ucGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXNzaWducGxheWVyc1RvTGV2ZWxzKHBsYXllcikge1xuICAgICAgLy8gRGV0ZXJtaW5lIGFsbCB0aGUgYnJlYWsgcG9pbnRzIHRvIGZpZ3VyZSBvdXQgbGV2ZWxzXG4gICAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubWF4TGV2ZWxzOyBpKyspIHtcbiAgICAgICAgYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBhbGwgcGxheWVycyB0byB0aGUgbG93ZXN0IGxldmVsXG4gICAgICBwbGF5ZXIubGV2ZWwgPSBicmVha1BvaW50cy5sZW5ndGg7XG4gICAgICAvLyBOb3cgY2hlY2sgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaXMgYXQgYSBoaWdoZXIgbGV2ZWxcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA8IGJyZWFrUG9pbnRzW2ogKyAxXSkge1xuICAgICAgICAgIHBsYXllci5sZXZlbCA9IGJyZWFrUG9pbnRzLmluZGV4T2YoYnJlYWtQb2ludHNbal0pICsgMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN0cmVhayhwbGF5ZXIpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHBsYXllcidzIGN1cnJlbnQgc3RyZWFrXG4gICAgICB2YXIgc3RyZWFrID0gMDtcbiAgICAgIHZhciBjb250aW51ZVN0cmVhayA9IHRydWU7XG4gICAgICB2YXIgc3RyZWFrVHlwZTtcbiAgICAgIF8uZm9yRWFjaChwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY29udGludWVTdHJlYWspIHtcbiAgICAgICAgICAvLyBXaW5uaW5nIFN0cmVha1xuICAgICAgICAgIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIGxvc2luZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgd2lubmluZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnbG9zaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICd3aW5uaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLy8gTG9zaW5nIFN0cmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSB3aW5uaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciBsb3Npbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ3dpbm5pbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ2xvc2luZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2bS5zdHJlYWsgPSB7XG4gICAgICAgICAgdHlwZTogc3RyZWFrVHlwZSxcbiAgICAgICAgICB2YWx1ZTogc3RyZWFrXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWF0ZVdpbkFuZExvc2VzKHBsYXllcikge1xuICAgICAgLy8gRmlndXJlIG91dCB3aW5zIGFuZCBsb3Nlc1xuICAgICAgdm0ud2lucy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLnRvdGFsID0gdm0ud2lucy5hc0NoYWxsZW5nZXIgKyB2bS53aW5zLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLndpbnMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMudG90YWwgPSB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgKyB2bS5sb3Nlcy5hc09wcG9uZW50O1xuXG4gICAgICB2bS5sb3Nlcy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1UZWFtT3ZlcmFsbFJlc3VsdHMnLCB3cG1UZWFtT3ZlcmFsbFJlc3VsdHMpO1xuXG4gIGZ1bmN0aW9uIHdwbVRlYW1PdmVyYWxsUmVzdWx0cygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRlYW06ICc9JyxcbiAgICAgICAgY2hhbGxlbmdlczogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL3RlYW0tb3ZlcmFsbC1yZXN1bHRzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ud2lucyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0ubG9zZXMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLnN0cmVhayA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICB2YWx1ZTogMFxuICAgIH07XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jaGFsbGVuZ2VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY2hhbGxlbmdlcyAmJiB2bS5jaGFsbGVuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjYWxjdWxhdGVTdHJlYWsodm0udGVhbSwgdm0uY2hhbGxlbmdlcyk7XG4gICAgICAgICAgY2FsY3VhdGVXaW5BbmRMb3Nlcyh2bS50ZWFtLCB2bS5jaGFsbGVuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlU3RyZWFrKHRlYW0sIGNoYWxsZW5nZXMpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHRlYW0ncyBjdXJyZW50IHN0cmVha1xuICAgICAgdmFyIHN0cmVhayA9IDA7XG4gICAgICB2YXIgY29udGludWVTdHJlYWsgPSB0cnVlO1xuICAgICAgdmFyIHN0cmVha1R5cGU7XG4gICAgICBfLmZvckVhY2goY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY29udGludWVTdHJlYWspIHtcbiAgICAgICAgICAvLyBXaW5uaW5nIFN0cmVha1xuICAgICAgICAgIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0pIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IG9uIGEgbG9zaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciB3aW5uaW5nIHN0cmVha1xuICAgICAgICAgICAgaWYgKHN0cmVha1R5cGUgIT09ICdsb3NpbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ3dpbm5pbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWVTdHJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvLyBMb3NpbmcgU3RyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JyAmJiBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IG9uIGEgd2lubmluZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgbG9zaW5nIHN0cmVha1xuICAgICAgICAgICAgaWYgKHN0cmVha1R5cGUgIT09ICd3aW5uaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICdsb3NpbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWVTdHJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdm0uc3RyZWFrID0ge1xuICAgICAgICAgIHR5cGU6IHN0cmVha1R5cGUsXG4gICAgICAgICAgdmFsdWU6IHN0cmVha1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VhdGVXaW5BbmRMb3Nlcyh0ZWFtICwgY2hhbGxlbmdlcykge1xuICAgICAgLy8gRmlndXJlIG91dCB3aW5zIGFuZCBsb3Nlc1xuICAgICAgdm0ud2lucy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLnRvdGFsID0gdm0ud2lucy5hc0NoYWxsZW5nZXIgKyB2bS53aW5zLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLndpbnMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSlcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNPcHBvbmVudCA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLmFzQ2hhbGxlbmdlciA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLnRvdGFsID0gdm0ubG9zZXMuYXNDaGFsbGVuZ2VyICsgdm0ubG9zZXMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ubG9zZXMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JykgfHxcbiAgICAgICAgICAoY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSlcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnY2hhbGxlbmdlc1NlcnZpY2UnLCBjaGFsbGVuZ2VzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gY2hhbGxlbmdlc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2U6IGNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2UsXG4gICAgICBjcmVhdGVWZXJzdXNDaGFsbGVuZ2U6IGNyZWF0ZVZlcnN1c0NoYWxsZW5nZSxcbiAgICAgIGNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZTogY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVWZXJzdXNDaGFsbGVuZ2U6IGNvbXBsZXRlVmVyc3VzQ2hhbGxlbmdlLFxuICAgICAgZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyOiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIsXG4gICAgICBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXI6IGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcixcbiAgICAgIGRlbGV0ZUNoYWxsZW5nZTogZGVsZXRlQ2hhbGxlbmdlLFxuICAgICAgZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb246IGdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvcHlyYW1pZC9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3ZlcnN1cy9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3B5cmFtaWQvY29tcGxldGUnLCAge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3ZlcnN1cy9jb21wbGV0ZScsICB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXInLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBsaW1pdCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBsZXRlZC9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXIvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQ2hhbGxlbmdlKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZUlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NoYWxsZW5nZXMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjaGFsbGVuZ2VJZDogY2hhbGxlbmdlSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9yZXN1bHRzL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtQ29tcGV0aXRpb25Db21wYWN0Jywgd3BtQ29tcGV0aXRpb25Db21wYWN0KTtcblxuICBmdW5jdGlvbiB3cG1Db21wZXRpdGlvbkNvbXBhY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nLFxuXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvY29tcGV0aXRpb24tY29tcGFjdC5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygpIHtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVBlbmRpbmdQbGF5ZXJzJywgd3BtUGVuZGluZ1BsYXllcnMpO1xuXG4gIGZ1bmN0aW9uIHdwbVBlbmRpbmdQbGF5ZXJzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3BlbmRpbmctcGxheWVycy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhjb21wZXRpdGlvbnNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5wZW5kaW5nUGxheWVycyA9IFtdO1xuICAgIHZtLmFwcHJvdmVQZW5kaW5nUGxheWVyID0gYXBwcm92ZVBlbmRpbmdQbGF5ZXI7XG4gICAgdm0uZGVueVBlbmRpbmdQbGF5ZXIgPSBkZW55UGVuZGluZ1BsYXllcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiBhcHByb3ZlUGVuZGluZ1BsYXllcihwbGF5ZXIpIHtcbiAgICAgIHBsYXllci5wb3NpdGlvbiA9IHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoICsgMTtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuYXBwcm92ZVBlbmRpbmdQbGF5ZXIodm0uY29tcGV0aXRpb24uX2lkLCBwbGF5ZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbnlQZW5kaW5nUGxheWVyKHBsYXllcikge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5kZW55UGVuZGluZ1BsYXllcih2bS5jb21wZXRpdGlvbi5faWQsIHBsYXllcik7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtUHlyYW1pZCcsIHdwbVB5cmFtaWQpO1xuXG4gIGZ1bmN0aW9uIHdwbVB5cmFtaWQoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy9weXJhbWlkLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsICRzdGF0ZSwgY29tcGV0aXRpb25zU2VydmljZSwgJGZpbHRlciwgbm90aWZ5U2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0uYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IGZhbHNlO1xuICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZU9wcG9uZW50ID0gbnVsbDtcbiAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gZmFsc2U7XG4gICAgdm0uY3JlYXRlQ2hhbGxlbmdlID0gY3JlYXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNvbXBsZXRlQ2hhbGxlbmdlID0gY29tcGxldGVDaGFsbGVuZ2U7XG4gICAgdm0uY2hhbGxlbmdlRXhwaXJlZCA9IGNoYWxsZW5nZUV4cGlyZWQ7XG4gICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSB7fTtcbiAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICB2bS5hZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb24gPSBhZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb247XG4gICAgdm0uY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uID0gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uO1xuICAgIHZtLnBsYXllckNsaWNrID0gcGxheWVyQ2xpY2s7XG4gICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IDA7XG4gICAgdm0ubWF4UGxheWVycyA9IDA7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICB2bS5tYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNvbXBldGl0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY29tcGV0aXRpb24pIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gdm0uY29tcGV0aXRpb24uX2lkO1xuICAgICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICAgICAgICBjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcygpO1xuICAgICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9yZGVyIHRoZSBwbGF5ZXJzIGJ5IHRoZSBwb3NpdGlvbiBwcm9wZXJ0eSBvZiB0aGUgcGxheWVycyBhcnJheSBpbiB0aGUgY29tcGV0aXRpb24gb2JqZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gb3JkZXJQbGF5ZXJzKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzU3RhdHVzKCkge1xuICAgICAgXG4gICAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFuIGFkbWluIG9mIHRoaXMgY29tcGV0aXRpb25cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHBlbmRpbmcgcmVxdWVzdCB0byBqb2luXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLnBlbmRpbmdQbGF5ZXJzLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgIH1cblxuICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgY29tcGV0aXRpb24gYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdjdXJyZW50LXVzZXInO1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gcGxheWVyO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkID8gY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQgOiBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyO1xuICAgICAgICAgICAgICAvLyBBZGQgYSBjbGFzcyB0byB0aGUgY3VycmVudCB1c2VyJ3Mgb3Bwb25lbnQnXG4gICAgICAgICAgICAgIHZhciBjdXJyZW50T3Bwb25lbnQgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeydfaWQnOiB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudC5faWR9KTtcbiAgICAgICAgICAgICAgY3VycmVudE9wcG9uZW50LmNsYXNzID0gY3VycmVudE9wcG9uZW50LmNsYXNzID8gY3VycmVudE9wcG9uZW50LmNsYXNzICsgJyBjdXJyZW50LW9wcG9uZW50JzogJ2N1cnJlbnQtb3Bwb25lbnQnO1xuICAgICAgICAgICAgLy8gVGhlIHVzZXIgZG9lc24ndCBoYXZlIGFuIGFjdGl2ZSBjaGFsbGVuZ2UsIHNvIGZpbmQgdGhlIGF2YWlsYWJsZSBjaGFsbGVuZ2VzJ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgXy5mb3JFYWNoKGNoYWxsZW5nZXMuZGF0YSwgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuXG4gICAgICAgICAgdmFyIGNoYWxsZW5nZXIgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeyAnX2lkJzogY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkIH0pO1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2VyLmNsYXNzID09PSAnYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFsbGVuZ2VyLmNsYXNzID0gY2hhbGxlbmdlci5jbGFzcyA/IGNoYWxsZW5nZXIuY2xhc3MgKyAnIHVuYXZhaWxhYmxlJzogJ3VuYXZhaWxhYmxlJztcbiAgICAgICAgICBjaGFsbGVuZ2VyLmF2YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICAgIGNoYWxsZW5nZXIuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdjaGFsbGVuZ2VyJ1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb3Bwb25lbnQgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeyAnX2lkJzogY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCB9KTtcbiAgICAgICAgICBpZiAob3Bwb25lbnQuY2xhc3MgPT09ICdhdmFpbGFibGUnKSB7XG4gICAgICAgICAgICBvcHBvbmVudC5jbGFzcyA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvcHBvbmVudC5jbGFzcyA9IG9wcG9uZW50LmNsYXNzID8gb3Bwb25lbnQuY2xhc3MgKyAnIHVuYXZhaWxhYmxlJzogJ3VuYXZhaWxhYmxlJztcbiAgICAgICAgICBvcHBvbmVudC5hdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICBvcHBvbmVudC5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ29wcG9uZW50J1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBUcmFjayB3aGVuIHRoZSBjaGFsbGVuZ2Ugd2lsbCBleHBpcmVcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIHRpbWVUb0V4cGlyZSA9IG1vbWVudCgpLmRpZmYobW9tZW50KGNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwgJ3MnKSAqIC0xO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBoYXMgbm90IHlldCBleHBpcmVkIGRpc3BsYXkgYSBjb3VudGRvd24gb24gdGhlIG9wcG9uZW50XG4gICAgICAgICAgICBpZiAodGltZVRvRXhwaXJlID4gMCkge1xuICAgICAgICAgICAgICBvcHBvbmVudC5jaGFsbGVuZ2UuZXhwaXJlcyA9IHRpbWVUb0V4cGlyZTtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBleHBpcmVkIHdoaWxlIG5vIG9uZSB3YXMgdmlld2luZyB0aGlzIGNvbXBldGl0aW9uIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBvcHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hlcmUgdG8gc3RhcnQgZWFjaCBuZXcgcm93IG9uIHRoZSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJyZWFrUG9pbnRzKCkge1xuICAgICAgdm0uYnJlYWtQb2ludHMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4TGV2ZWxzOyBpKyspIHtcbiAgICAgICAgdm0uYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWwgcHJvcGVydHkgYmFzZWQgb24gdGhlIGJyZWFrIHBvaW50c1xuICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB3aG8gb3RoZXIgcGxheWVycyBjYW4gY2hhbGxlbmdlXG4gICAgZnVuY3Rpb24gYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCkge1xuICAgICAgdmFyIGxldmVsID0gMDtcbiAgICAgIHZtLmxldmVscyA9IFtdO1xuICAgICAgY3JlYXRlQnJlYWtQb2ludHMoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodm0uYnJlYWtQb2ludHMuaW5kZXhPZihpICsgMSkgPiAtMSkge1xuICAgICAgICAgIGxldmVsICs9IDE7XG4gICAgICAgICAgLy8gU2V0IHRoZSBudW1iZXIgb2YgdG90YWwgbGV2ZWxzXG4gICAgICAgICAgdm0ubGV2ZWxzLnB1c2gobGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdpdmUgZWFjaCBwbGF5ZXIgYSBsZXZlbFxuICAgICAgICB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmxldmVsID0gbGV2ZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSG93IG1hbnkgdG90YWwgYmxvY2tzIGluIHRoaXMgY29tcGV0aXRpb25cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSBfLmxhc3Qodm0ubGV2ZWxzKTsgaSA+IDA7IGktLSkge1xuICAgICAgICB2bS5udW1iZXJPZkJsb2NrcyArPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbGwgb3V0IHRoZSByZW1haW5pbmcgYmxvY2tzIG9mIHRoZSBjb21wZXRpdGlvbiB3aXRoIGVtcHR5IGJsb2Nrc1xuICAgIGZ1bmN0aW9uIGZpbGxJbkVtcHR5QmxvY2tzKCkge1xuICAgICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoOyBpIDwgdm0ubnVtYmVyT2ZCbG9ja3M7IGkrKykge1xuICAgICAgICB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLnB1c2goe1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0VtcHR5JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1Nwb3QnLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnRW1wdHkgU3BvdCcsXG4gICAgICAgICAgcG9zaXRpb246IDk5LFxuICAgICAgICAgIGNsYXNzOiB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA/ICdlbXB0eSc6ICdqb2luYWJsZSBlbXB0eSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBXZSBoYXZlIHRvIGdpdmUgbGV2ZWxzIHRvIHRoZSBuZXcgZW1wdHkgc3BvdHNcbiAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgYWxsIHRoZSBwbGF5ZXJzIHRoYXQgYXJlIGF2YWlsYWJsZSB0byBiZSBjaGFsbGVuZ2VkIGJ5IHRoaXMgdXNlclxuICAgIGZ1bmN0aW9uIGZpbmRBdmFpbGFibGVDaGFsbGVuZ2VzKCkge1xuICAgICAgaWYgKHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uICYmICF2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgdmFyIGxldmVsQWJvdmUgPSB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCA+IDEgPyB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCAtIDEgOiBudWxsO1xuICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgIGlmIChwbGF5ZXIubGV2ZWwgPT09IGxldmVsQWJvdmUgJiYgcGxheWVyLnBvc2l0aW9uICE9PSA5OSAmJiBwbGF5ZXIuY2xhc3MgIT09ICd1bmF2YWlsYWJsZScgJiYgcGxheWVyLmF2YWlsYWJsZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgcGxheWVyLmF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnYXZhaWxhYmxlJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjaGFsbGVuZ2UgYmV0d2VlbiB0aGUgY3VycmVudCB1c2VyIGFuZCB0aGUgcGxheWVyIHNlbGVjdGVkXG4gICAgICogXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXIsIHRoZSBjaGFsbGVuZ2VkIHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZShwbGF5ZXIpIHtcbiAgICAgIGlmICghcGxheWVyLmF2YWlsYWJsZSkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdTb3JyeSwgdGhhdCBpcyBub3QgYSB2YWxpZCBjaGFsbGVuZ2UuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICB2YXIgY2hhbGxlbmdlID0ge1xuICAgICAgICAgIHR5cGU6IHZtLmNvbXBldGl0aW9uLnR5cGUsXG4gICAgICAgICAgY29tcGV0aXRpb25OYW1lOiB2bS5jb21wZXRpdGlvbi5uYW1lLFxuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IHZtLmNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgIGZvcmZlaXQ6IGZhbHNlLFxuICAgICAgICAgIHRpbWVMaW1pdDogdm0uY29tcGV0aXRpb24uZm9yZmVpdERheXMsXG4gICAgICAgICAgY2hhbGxlbmdlcjoge1xuICAgICAgICAgICAgX2lkOiB2bS5jdXJyZW50VXNlclBsYXllci5faWQsXG4gICAgICAgICAgICBlbWFpbDogdm0uY3VycmVudFVzZXJQbGF5ZXIuZW1haWwsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvblxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3Bwb25lbnQ6IHtcbiAgICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiBwbGF5ZXIuZW1haWwsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBsYXllci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIGNvbXBldGl0aW9uXG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGxldGUgYSBjaGFsbGVuZ2UgYnkgYSB1c2VyIGludGVyYWN0aW9uIG9yIGEgZm9yZmVpdFxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IHdpbm5lcklzQ3VycmVudFVzZXJcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBmb3JmZWl0XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBmb3JmZWl0TG9zZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZSh3aW5uZXJJc0N1cnJlbnRVc2VyLCBmb3JmZWl0LCBmb3JmZWl0TG9zZXIpIHtcbiAgICAgIHZhciBwbGF5ZXIgPSBmb3JmZWl0TG9zZXIgfHwgdm0uY3VycmVudFVzZXJQbGF5ZXI7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBzd2FwUG9zaXRpb25zID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBmb3JmZWl0XG4gICAgICAgIGlmIChmb3JmZWl0KSB7XG4gICAgICAgICAgY2hhbGxlbmdlLmRhdGEuZm9yZmVpdCA9IHRydWU7XG4gICAgICAgICAgaWYgKGZvcmZlaXRMb3Nlci5jaGFsbGVuZ2UucG9zaXRpb24gPT09ICdvcHBvbmVudCcpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdobyB0aGUgd2lubmVyIHdhcyB0byBzdG9yZSBpbiB0aGUgY2hhbGxlbmdlIHJlY29yZFxuICAgICAgICB9IGVsc2UgaWYgKHdpbm5lcklzQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTd2FwIHBvc2l0aW9ucyBhbmQgdGhlbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIG9yIGp1c3QgY29tcGxldGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBjb21wZXRpdGlvblxuICAgICAgICBpZiAoc3dhcFBvc2l0aW9ucykge1xuICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2Uuc3dhcFBvc2l0aW9ucyh2bS5jb21wZXRpdGlvbklkLCBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudCwgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAocmVtb3ZpbmdDdXJyZW50VXNlcikge1xuICAgICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZpbmdDdXJyZW50VXNlcikge1xuICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIGNvbXBsZXRlIGNoYWxsbmdlIGZ1bmN0aW9uIHdpdGggdGhlIGZvcmZlaXRpbmcgcGxheWVyXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGFsbGVuZ2VFeHBpcmVkKHBsYXllcikge1xuICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgcGxheWVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBjdXJyZW50IHVzZXIgdGhlIGNvbXBldGl0aW9uIFxuICAgICAqIGlmIHRoZXkncmUgbm90IGFscmVhZHkgb24gaXQgYW5kIHRoZXJlJ3Mgc3BhY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb24oKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGlmICh2bS5udW1iZXJPZlJlYWxQbGF5ZXJzIDwgdm0ubWF4UGxheWVycykge1xuICAgICAgICAgIHZhciBwbGF5ZXIgPSB7XG4gICAgICAgICAgICBfaWQ6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0ubnVtYmVyT2ZSZWFsUGxheWVycyArIDFcbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmICghdm0uY29tcGV0aXRpb24ucmVzdHJpY3RKb2lucykge1xuICAgICAgICAgICAgc3dhbCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAnSm9pbiBDb21wZXRpdGlvbj8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnWW91XFwnbGwgYmUgYWRkZWQgdG8gdGhlIGJvdHRvbScsXG4gICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdKb2luJyxcbiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmFkZFBsYXllclRvQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCwgcGxheWVyKTtcbiAgICAgICAgICAgICAgc3dhbCgnV2VsY29tZSBBYm9hcmQhJywgJ05vdyBzdGFydCBmaWdodGluZyB5b3VyIHdheSB0byB0aGUgdG9wJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3YWwoe1xuICAgICAgICAgICAgICB0aXRsZTogJ1NlbmQgSm9pbiBSZXF1ZXN0PycsXG4gICAgICAgICAgICAgIHRleHQ6ICdUaGlzIGlzIGEgY2xvc2VkIGNvbXBldGl0aW9uIHNvIGFuIGFkbWluIG11c3QgYXBwcm92ZSB5b3VyIHJlcXVlc3QnLFxuICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnU2VuZCBSZXF1ZXN0JyxcbiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0KHZtLmNvbXBldGl0aW9uLCBwbGF5ZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHN3YWwoJ1JlcXVlc3QgU2VudCcsICdZb3Ugd2lsbCByZWNlaXZlIGFuIGVtYWlsIG9uY2UgYW4gYWRtaW4gcHJvY2Vzc2VzIHRoZSByZXF1ZXN0LicsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS53YXJuaW5nKCdTb3JyeSwgdGhpcyBjb21wZXRpdGlvbiBpcyBmdWxsJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnUGxlYXNlIGxvZ2luIHRvIGpvaW4gYSBjb21wZXRpdGlvbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSAnY29tcGV0aXRpb25zLnZpZXcnO1xuICAgICAgICAkc3RhdGUucHJldlBhcmFtcyA9IHsnY29tcGV0aXRpb25JZCc6IHZtLmNvbXBldGl0aW9uSWR9O1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSBjb25maXJtYXRpb24gbW9kYWwgZm9yIGxlYXZpbmcgdGhlIGNvbXBldGl0aW9uIFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpIHtcbiAgICAgIHN3YWwoe1xuICAgICAgICB0aXRsZTogJ0xlYXZlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdZb3Ugd2lsbCBsb3NlIHlvdXIgc3BvdCBhbmQgZm9yZmVpdCBhbnkgYWN0aXZlIGNoYWxsZW5nZXMuJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMsIGxlYXZlJyxcbiAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnYnRuLWRhbmdlcicsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdObywgc3RheScsXG4gICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpO1xuICAgICAgICBzd2FsKCdPSywgeW91XFwnciBvdXQhJywgJ1lvdVxcJ3ZlIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBjb21wZXRpdGlvbi4nLCAnc3VjY2VzcycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVXNlIHRoaXMgdG8gZW5mb3JjZSBvcmRlciBvZiBvcGVyYXRpb25zIHdoZW4gdGhlIHBsYXllciB0byBiZSByZW1vdmVkIGhhZCBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgdmFyIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgdXNlciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uKCkge1xuICAgICAgLy8gTWFrZSBzdXJlIHRoZSB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgb24gdGhpcyBjb21wZXRpdGlvblxuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbikge1xuICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gdHJ1ZTtcbiAgICAgICAgLy8gRm9yZmVpdCBpZiB0aGV5IGhhdmUgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICBpZiAodm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgdm0uY3VycmVudFVzZXJQbGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIHdlIGFyZSByZW1vdmluZyB0aGVtIC4uLlxuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyBHZXQgYW4gdXBkYXRlZCBjb3B5IG9mIHRoZSBjb21wZXRpdGlvbiBpbmNhc2UgYSBmb3JmZWl0IGhhcHBlbmVkXG4gICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgdXBkYXRlZCBjb3B5IGxvY2FsbHkgc28gYXMgbm90IHRvIGRpc3RydXB0IHRoZSBjb21wZXRpdGlvblxuICAgICAgICAgICAgLy8gdW50aWwgdGhlIHBsYXllciBoYXMgYmVlbiByZW1vdmVkXG4gICAgICAgICAgICB2YXIgY29tcGV0aXRpb24gPSBwLmRhdGE7XG5cbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIHNwb3QgdGhleSB3ZXJlIGluIG9uIHRoZSBjb21wZXRpdGlvblxuICAgICAgICAgICAgdmFyIG9wZW5Qb3NpdGlvbiA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uO1xuXG4gICAgICAgICAgICAvLyBNb3ZlIGFsbCB0aGUgcGxheWVycyB1cCAxIHBvc2l0aW9uIHRoYXQgd2VyZSBiZWhpbmQgdGhlIHJlbW92ZWQgcGxheWVyXG4gICAgICAgICAgICBfLmZvckVhY2goY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICBpZiAocGxheWVyLnBvc2l0aW9uID49IG9wZW5Qb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHBsYXllci5wb3NpdGlvbiAtPSAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlZCB0aGUgcGxheWVyIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFBsYXllciA9IF8ucmVtb3ZlKGNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIGEgbmV3IGFycmF5IG9mIGFsbCB0aGUgcGxheWVycyBzdGlsbCBvbiB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIC8vIG9ubHkgdXNlIHRoZSBwcm9wZXJ0aWVzIHdlIHdhbnQgdG8gc3RvcmUgaW4gdGhlIGNvbXBldGl0aW9uIGRvY3VtZW50XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyAtIDE7ICsraSkge1xuICAgICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllciA9IHtcbiAgICAgICAgICAgICAgICBfaWQ6IGNvbXBldGl0aW9uLnBsYXllcnNbaV0uX2lkLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogY29tcGV0aXRpb24ucGxheWVyc1tpXS5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IGNvbXBldGl0aW9uLnBsYXllcnNbaV0ubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGNvbXBldGl0aW9uLnBsYXllcnNbaV0uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGNvbXBldGl0aW9uLnBsYXllcnNbaV0ucG9zaXRpb25cbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB1cGRhdGVkUGxheWVycy5wdXNoKHVwZGF0ZWRQbGF5ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxsIHNlcnZpY2UgdG8gcmVtb3ZlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UucmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCByZW1vdmVkUGxheWVyWzBdLCB1cGRhdGVkUGxheWVycykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGF0IHRoZSBhcHByb3ByaWF0ZSBhY3Rpb24gaXMgYmFzZWQgb24gdGhlIHBsYXllciBjbGlja2luZyBhbmQgdGhlIHBsYXllciBiZWluZyBjbGlja2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGxheWVyQ2xpY2socGxheWVyKSB7XG4gICAgICAvLyBjbGlja2VkIG9uIGVtcHR5IHNwb3RcbiAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPT09IDk5ICYmICF2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbikge1xuICAgICAgICBhZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBsYXllci5zaG93Q2hhbGxlbmdlTW9kYWwgPSAhcGxheWVyLnNob3dDaGFsbGVuZ2VNb2RhbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoIHRoZSBjb21wZXRpdGlvbiBiZWNhc3VlIG9mIGFuIHVwZGF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlZnJlc2hDb21wZXRpdGlvbigpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNvbXBldGl0aW9uX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hDb21wZXRpdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1VcGRhdGVBZG1pbnMnLCB3cG1VcGRhdGVBZG1pbnMpO1xuXG4gIGZ1bmN0aW9uIHdwbVVwZGF0ZUFkbWlucygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY29tcGV0aXRpb25zU2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIHVzZXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgcmVtb3ZlZEFkbWlucyA9IFtdO1xuICAgIHZhciBvcmlnaW5hbEF2YWlsYWJsZUFkbWlucyA9IFtdO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYXZhaWxhYmxlQWRtaW5zID0gW107XG4gICAgdm0uYWRkZWRBZG1pbnMgPSBbXTtcbiAgICB2bS51c2VySXNQcmltYXJ5QWRtaW4gPSBmYWxzZTtcbiAgICB2bS51cGRhdGVDb21wZXRpdGlvbiA9IHVwZGF0ZUNvbXBldGl0aW9uO1xuICAgIHZtLmNhbmNlbFVwZGF0ZSA9IGNhbmNlbFVwZGF0ZTtcbiAgICB2bS5yZW1vdmVBZG1pbiA9IHJlbW92ZUFkbWluO1xuICAgIHZtLmFkZEFkbWluID0gYWRkQWRtaW47XG4gICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uYWRkZWRBZG1pbnMgPSBfLmNsb25lRGVlcCh2bS5jb21wZXRpdGlvbi5hZG1pbnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5hZG1pbnMsIHsncHJpbWFyeSc6IHRydWV9KS5faWQgPT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQgPyB0cnVlOiBmYWxzZTtcbiAgICAgICAgICBnZXRBdmFpbGFibGVBZG1pbnMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlQWRtaW5zKCkge1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zID0gW107XG4gICAgICByZW1vdmVkQWRtaW5zID0gW107XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBhZG1pbnMgZnJvbSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgYWRtaW5zXG4gICAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5hZG1pbnMsIGZ1bmN0aW9uIChjb21wZXRpdGlvbkFkbWluKSB7XG4gICAgICAgICAgXy5yZW1vdmUodXNlcnMuZGF0YSwgZnVuY3Rpb24gKGF2YWlsYWJsZUFkbWluKXtcbiAgICAgICAgICAgIHJldHVybiBjb21wZXRpdGlvbkFkbWluLl9pZCA9PT0gYXZhaWxhYmxlQWRtaW4uX2lkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gT25seSB1c2UgY2VydGFpbiBwcm9wZXJ0aWVzIG9mIHRoZSB1c2VyIGZvciB0aGUgYWRtaW4gcmVjb3JkXG4gICAgICAgIF8uZm9yRWFjaCh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlQWRtaW4pIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVBZG1pbnMucHVzaCh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGF2YWlsYWJsZUFkbWluLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhdmFpbGFibGVBZG1pbi5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBhdmFpbGFibGVBZG1pbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVBZG1pbi51c2VybmFtZSxcbiAgICAgICAgICAgIF9pZDogYXZhaWxhYmxlQWRtaW4uX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zID0gXy5jbG9uZURlZXAodm0uYXZhaWxhYmxlQWRtaW5zKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZXMgdGhhdCB3ZXJlIHJlcXVzdGVkXG4gICAgZnVuY3Rpb24gdXBkYXRlQ29tcGV0aXRpb24oKSB7XG4gICAgICB2bS5jb21wZXRpdGlvbi5hZG1pbnMgPSB2bS5hZGRlZEFkbWlucztcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb24pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgIH0pOyAgIFxuICAgIH1cblxuICAgIC8vIENhbmNlbCB0aGUgdXBkYXRlIGFuZCBwdXQgZXZlcnl0aGluZyBiYWNrIHRvIHRoZSBvcmdpbmFsXG4gICAgZnVuY3Rpb24gY2FuY2VsVXBkYXRlKCkge1xuICAgICAgcmVtb3ZlZEFkbWlucyA9IFtdO1xuICAgICAgdm0uYWRkZWRBZG1pbnMgPSBfLmNsb25lRGVlcCh2bS5jb21wZXRpdGlvbi5hZG1pbnMpO1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zID0gXy5jbG9uZURlZXAob3JpZ2luYWxBdmFpbGFibGVBZG1pbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gYWRtaW4gZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgKiBRdWV1ZSB1cCB0aGUgYWRtaW5zIHRvIGJlIHJlbW92ZWQgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGFkbWluXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlQWRtaW4oYWRtaW4pIHtcbiAgICAgIHJlbW92ZWRBZG1pbnMucHVzaChhZG1pbik7XG4gICAgICB2bS5hdmFpbGFibGVBZG1pbnMucHVzaChfLnJlbW92ZSh2bS5hZGRlZEFkbWlucywge19pZDogYWRtaW4uX2lkfSlbMF0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gYWRtaW4gdG8gdGhlIGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEFkbWluKGFkbWluKSB7XG4gICAgICB2bS5hZGRlZEFkbWlucy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZUFkbWlucywge19pZDogYWRtaW4uX2lkfSlbMF0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtVXBkYXRlUGxheWVycycsIHdwbVVwZGF0ZVBsYXllcnMpO1xuXG4gIGZ1bmN0aW9uIHdwbVVwZGF0ZVBsYXllcnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdXBkYXRlLXBsYXllcnMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkZmlsdGVyLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICB2YXIgb3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdmFyIG1heExldmVscyA9IDc7XG4gICAgdmFyIG1heFBsYXllcnMgPSBudWxsO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLnVwZGF0ZUNvbXBldGl0aW9uID0gdXBkYXRlQ29tcGV0aXRpb247XG4gICAgdm0uY2FuY2VsVXBkYXRlID0gY2FuY2VsVXBkYXRlO1xuICAgIHZtLnJlb3JkZXJQbGF5ZXJzID0gcmVvcmRlclBsYXllcnM7XG4gICAgdm0ucmVtb3ZlUGxheWVyID0gcmVtb3ZlUGxheWVyO1xuICAgIHZtLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbiAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIC8vIERldGVybWluZSB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGxheWVycyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGV2ZWxzXG4gICAgICBmb3IgKHZhciBpID0gbWF4TGV2ZWxzOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIG1heFBsYXllcnMgKz0gaTtcbiAgICAgIH1cbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNvbXBldGl0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY29tcGV0aXRpb24pIHtcbiAgICAgICAgICB2bS5hZGRlZFBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzKTtcbiAgICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICBnZXRBdmFpbGFibGVQbGF5ZXJzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEF2YWlsYWJsZVBsYXllcnMoKSB7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgICByZW1vdmVkUGxheWVycyA9IFtdO1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKGNvbXBldGl0aW9uUGxheWVyKSB7XG4gICAgICAgICAgXy5yZW1vdmUodXNlcnMuZGF0YSwgZnVuY3Rpb24gKGF2YWlsYWJsZVBsYXllcil7XG4gICAgICAgICAgICByZXR1cm4gY29tcGV0aXRpb25QbGF5ZXIuX2lkID09PSBhdmFpbGFibGVQbGF5ZXIuX2lkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gT25seSB1c2UgY2VydGFpbiBwcm9wZXJ0aWVzIG9mIHRoZSB1c2VyIGZvciB0aGUgcGxheWVyIHJlY29yZFxuICAgICAgICBfLmZvckVhY2godXNlcnMuZGF0YSwgZnVuY3Rpb24gKGF2YWlsYWJsZVBsYXllcikge1xuICAgICAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMucHVzaCh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGF2YWlsYWJsZVBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogYXZhaWxhYmxlUGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGF2YWlsYWJsZVBsYXllci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVQbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBfaWQ6IGF2YWlsYWJsZVBsYXllci5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBvcmlnaW5hbEF2YWlsYWJsZVBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5hdmFpbGFibGVQbGF5ZXJzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZXMgdGhhdCB3ZXJlIHJlcXVzdGVkXG4gICAgZnVuY3Rpb24gdXBkYXRlQ29tcGV0aXRpb24oKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycgJiYgdm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAlIDIgPiAwKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgVmVyc3VzIGNvbXBldGl0aW9uIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2UgaWYgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggPiBtYXhQbGF5ZXJzKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgY29tcGV0aXRpb24gY2FuIGhhdmUgYSBtYXhpbXVtIG9mICcgKyBtYXhQbGF5ZXJzICsgJyBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfLmZvckVhY2gocmVtb3ZlZFBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbi5faWQsIHBsYXllci5faWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVycyA9IHZtLmFkZGVkUGxheWVycztcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS51cGRhdGVDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhbmNlbCB0aGUgdXBkYXRlIGFuZCBwdXQgZXZlcnl0aGluZyBiYWNrIHRvIHRoZSBvcmdpbmFsXG4gICAgZnVuY3Rpb24gY2FuY2VsVXBkYXRlKCkge1xuICAgICAgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICAgIHZtLmFkZGVkUGxheWVycyA9IF8uY2xvbmVEZWVwKHZtLmNvbXBldGl0aW9uLnBsYXllcnMpO1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IF8uY2xvbmVEZWVwKG9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyk7XG4gICAgfVxuXG4gICAgLy8gUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgZnVuY3Rpb24gcmVvcmRlclBsYXllcnMoKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgcmVvcmRlclZlcnN1c1BsYXllcnMoKTtcbiAgICAgIH0gZWxzZSBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgIHJlb3JkZXJQeXJhbWlkUGxheWVycygpO1xuICAgICAgfVxuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlb3JkZXIgdGhlIHBsYXllcnMgYmFzZWQgb24gdGhlIGRyYWctZHJvcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlb3JkZXJQeXJhbWlkUGxheWVycygpIHtcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gaTtcbiAgICAgICAgKytpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVvcmRlclZlcnN1c1BsYXllcnMoKSB7XG4gICAgICAvLyBTZXQgYWxsIHBsYXllcnMgdG8gdGVhbSAyXG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IDI7XG4gICAgICB9KTtcbiAgICAgIC8vIFNldCB0aGUgZmlyc3QgaGFsZiBvZiB0aGUgcGxheWVycyB0byB0ZWFtIDFcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggLyAyKTsgaSsrKSB7XG4gICAgICAgIHZtLmFkZGVkUGxheWVyc1tpXS5wb3NpdGlvbiA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHBsYXllciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAqIFF1ZXVlIHVwIHRoZSBwbGF5ZXJzIHRvIGJlIHJlbW92ZWQgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzLnB1c2gocGxheWVyKTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hZGRlZFBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYWRkZWRQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYXZhaWxhYmxlUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtVmVyc3VzJywgd3BtVmVyc3VzKTtcblxuICBmdW5jdGlvbiB3cG1WZXJzdXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy92ZXJzdXMuaHRtbCcsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY29tcGV0aXRpb25zU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IGZhbHNlO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG4gICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSBudWxsO1xuICAgIHZtLmNyZWF0ZUNoYWxsZW5nZSA9IGNyZWF0ZUNoYWxsZW5nZTtcbiAgICB2bS5jb21wbGV0ZUNoYWxsZW5nZSA9IGNvbXBsZXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNoYWxsZW5nZUV4cGlyZVRpbWUgPSBudWxsO1xuICAgIHZtLnNob3dDb250cm9scyA9IGZhbHNlO1xuICAgIHZtLnNob3dDaGFsbGVuZ2VNb2RhbCA9IGZhbHNlO1xuICAgIHZtLnRvZ2dsZUNvbnRyb2xzID0gdG9nZ2xlQ29udHJvbHM7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9IHZtLmNvbXBldGl0aW9uLl9pZDtcbiAgICAgICAgICB2bS5zaG93Q29udHJvbHMgPSBmYWxzZTtcbiAgICAgICAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICAgICAgICBncm91cFBsYXllcnMoKTtcbiAgICAgICAgICBnZXRDdXJyZW50VXNlclN0YXR1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHcm91cCBwbGF5ZXJzIGJ5IHRlYW1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBncm91cFBsYXllcnMoKSB7XG4gICAgICB2bS5jb21wZXRpdGlvbi50ZWFtcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHBsYXllcnM6IF8uZmlsdGVyKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIFsncG9zaXRpb24nLCAxXSksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwbGF5ZXJzOiBfLmZpbHRlcih2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBbJ3Bvc2l0aW9uJywgMl0pLFxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyU3RhdHVzKCkge1xuICAgICAgXG4gICAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFuIGFkbWluIG9mIHRoaXMgY29tcGV0aXRpb25cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHBlbmRpbmcgcmVxdWVzdCB0byBqb2luXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLnBlbmRpbmdQbGF5ZXJzLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgIH1cblxuICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgY29tcGV0aXRpb24gYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdjdXJyZW50LXVzZXInO1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gcGxheWVyO1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uLnRlYW1zW3BsYXllci5wb3NpdGlvbiAtIDFdLmNsYXNzID0gJ2N1cnJlbnQtdXNlci10ZWFtJztcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbi5jbGFzcyA9ICdjdXJyZW50LXVzZXItb24tY29tcGV0aXRpb24nO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gYWN0aXZlIGNoYWxsZW5nZSBmb3IgdGhpcyBjb21wZXRpdGlvblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGFbMF07XG4gICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFRyYWNrIHdoZW4gdGhlIGNoYWxsZW5nZSB3aWxsIGV4cGlyZVxuICAgICAgICAgIGlmICh2bS5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQodm0uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZCh2bS5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCAncycpICogLTE7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGhhcyBub3QgeWV0IGV4cGlyZWQgZGlzcGxheSBhIGNvdW50ZG93blxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgdm0uY2hhbGxlbmdlRXhwaXJlVGltZSA9IHRpbWVUb0V4cGlyZTtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBleHBpcmVkIHdoaWxlIG5vIG9uZSB3YXMgdmlld2luZyB0aGlzIGNvbXBldGl0aW9uIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xzKCkge1xuICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSAmJiB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbikge1xuICAgICAgICB2bS5zaG93Q29udHJvbHMgPSAhdm0uc2hvd0NvbnRyb2xzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZSh0ZWFtKSB7XG4gICAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICAgIGlmICh2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIHlvdSBhcmUgYWxyZWFkeSBpbiBhbiBhY3RpdmUgY2hhbGxlbmdlLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIGNoYWxsZW5nZSBtb2RhbFxuICAgICAgICB2YXIgY2hhbGxlbmdlID0ge1xuICAgICAgICAgIHR5cGU6IHZtLmNvbXBldGl0aW9uLnR5cGUsXG4gICAgICAgICAgY29tcGV0aXRpb25OYW1lOiB2bS5jb21wZXRpdGlvbi5uYW1lLFxuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IHZtLmNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgIGZvcmZlaXQ6IGZhbHNlLFxuICAgICAgICAgIHRpbWVMaW1pdDogdm0uY29tcGV0aXRpb24uZm9yZmVpdERheXMsXG4gICAgICAgICAgY2hhbGxlbmdlcjoge1xuICAgICAgICAgICAgdGVhbTogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb24sXG4gICAgICAgICAgICBfaWQ6IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3Bwb25lbnQ6IHtcbiAgICAgICAgICAgIHRlYW06IHRlYW1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIGNvbXBldGl0aW9uXG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZVZlcnN1c0NoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIENsb3NlIHRoZSBjb21wZXRpdGlvbiBzaWRlYmFyXG4gICAgICAgICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHdpbm5pbmdUZWFtXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmluZ1RlYW0sIGZvcmZlaXQpIHtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgdmFyIGNoYWxsZW5nZSA9IHZtLmFjdGl2ZUNoYWxsZW5nZTtcbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgaWYgKGZvcmZlaXQpIHtcbiAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICBjaGFsbGVuZ2Uud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgLy8gRmlndXJlIG91dCB3aG8gdGhlIHdpbm5lciB3YXMgdG8gc3RvcmUgaW4gdGhlIGNoYWxsZW5nZSByZWNvcmRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2bS5hY3RpdmVDaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB3aW5uaW5nVGVhbSkge1xuICAgICAgICAgIGNoYWxsZW5nZS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbGxlbmdlLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKTtcbiAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIGNvbXBldGl0aW9uIGJlY2FzdWUgb2YgYW4gdXBkYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnY29tcGV0aXRpb25zU2VydmljZScsIGNvbXBldGl0aW9uc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNvbXBldGl0aW9uc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldENvbXBldGl0aW9uOiBnZXRDb21wZXRpdGlvbixcbiAgICAgIGdldENvbXBldGl0aW9uc0ZvclVzZXI6IGdldENvbXBldGl0aW9uc0ZvclVzZXIsXG4gICAgICBnZXRDb21wZXRpdGlvbnM6IGdldENvbXBldGl0aW9ucyxcbiAgICAgIGNyZWF0ZUNvbXBldGl0aW9uOiBjcmVhdGVDb21wZXRpdGlvbixcbiAgICAgIHVwZGF0ZUNvbXBldGl0aW9uOiB1cGRhdGVDb21wZXRpdGlvbixcbiAgICAgIGRlbGV0ZUNvbXBldGl0aW9uOiBkZWxldGVDb21wZXRpdGlvbixcbiAgICAgIHN3YXBQb3NpdGlvbnM6IHN3YXBQb3NpdGlvbnMsXG4gICAgICBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uOiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uLFxuICAgICAgYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3Q6IGFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0LFxuICAgICAgcmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbjogcmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbixcbiAgICAgIGFwcHJvdmVQZW5kaW5nUGxheWVyOiBhcHByb3ZlUGVuZGluZ1BsYXllcixcbiAgICAgIGRlbnlQZW5kaW5nUGxheWVyOiBkZW55UGVuZGluZ1BsYXllclxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBjb21wZXRpdGlvbiBmcm9tIHRoZSBkYXRhYmFzZSAob3IgbWVtb3J5KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbXBldGl0aW9uIGlkIGZvciB0aGUgcmVxdWVzdGVkIGNvbXBldGl0aW9uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb24nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgY29tcGV0aXRpb25zIGZyb20gdGhlIGRhdGFiYXNlIHRoYXQgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBjb21wZXRpdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21wZXRpdGlvbnMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYWN0aXZlIGNvbXBldGl0aW9ucyBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBjb21wZXRpdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbnMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvbXBldGl0aW9ucycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBldGl0aW9uKGNvbXBldGl0aW9uKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvY3JlYXRlJywge1xuICAgICAgICBjb21wZXRpdGlvbjogY29tcGV0aXRpb25cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uKGNvbXBldGl0aW9uKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvdXBkYXRlJywge1xuICAgICAgICBjb21wZXRpdGlvbjogY29tcGV0aXRpb25cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvY29tcGV0aXRpb25zL2RlbGV0ZScsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dhcFBvc2l0aW9ucyhjb21wZXRpdGlvbklkLCBjaGFsbGVuZ2VyLCBvcHBvbmVudCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL3N3YXBQb3NpdGlvbnMnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIGNoYWxsZW5nZXI6IGNoYWxsZW5nZXIsXG4gICAgICAgIG9wcG9uZW50OiBvcHBvbmVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9Db21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9hZGRQbGF5ZXInLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uUmVxdWVzdChjb21wZXRpdGlvbiwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvYWRkUGxheWVyUmVxdWVzdCcsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbihjb21wZXRpdGlvbklkLCByZW1vdmVkUGxheWVyLCBwbGF5ZXJzKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvcmVtb3ZlUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICByZW1vdmVkUGxheWVyOiByZW1vdmVkUGxheWVyLFxuICAgICAgICBwbGF5ZXJzOiBwbGF5ZXJzXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHByb3ZlUGVuZGluZ1BsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9hcHByb3ZlUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVueVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvZGVueVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvbkFkbWluQ3RybCcsIENvbXBldGl0aW9uQWRtaW5DdHJsKTtcblxuICBmdW5jdGlvbiBDb21wZXRpdGlvbkFkbWluQ3RybCgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkZmlsdGVyLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS51cGRhdGVDb21wZXRpdGlvblJlc3RyaWN0Sm9pbnMgPSB1cGRhdGVDb21wZXRpdGlvblJlc3RyaWN0Sm9pbnM7XG4gICAgdm0uZGVsZXRlQ29tcGV0aXRpb24gPSBkZWxldGVDb21wZXRpdGlvbjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG4gICAgICAgIHJlZnJlc2hDb21wZXRpdGlvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoQ29tcGV0aXRpb24oKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIHVzZXIgaXMgYW4gYWRtaW4gb2YgdGhpcyBjb21wZXRpdGlvblxuICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSAmJiBfLnNvbWUoY29tcGV0aXRpb24uZGF0YS5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgICAgdm0uaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgLy8gRGlzcGxheSB0aGUgcGxheWVycyBpbiB0aGUgcHJvcGVyIG9yZGVyXG4gICAgICAgICAgY29tcGV0aXRpb24uZGF0YS5wbGF5ZXJzID0gJGZpbHRlcignb3JkZXJCeScpKGNvbXBldGl0aW9uLmRhdGEucGxheWVycywgJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvblJlc3RyaWN0Sm9pbnMoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZhciB1cGRhdGVkQ29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB1cGRhdGVkQ29tcGV0aXRpb24ucmVzdHJpY3RKb2lucyA9IHZtLmNvbXBldGl0aW9uLnJlc3RyaWN0Sm9pbnM7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odXBkYXRlZENvbXBldGl0aW9uKTtcbiAgICAgIH0pOyAgICAgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdUaGlzIGNhbiBub3QgYmUgdW5kb25lJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5kZWxldGVDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uU3RhdHNDdHJsJywgQ29tcGV0aXRpb25TdGF0c0N0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uU3RhdHNDdHJsKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5jb21wZXRpdGlvbiA9IHt9O1xuICAgIHZtLnBsYXllcnNSZXN1bHRzID0gW107XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSkge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgICAgICBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICAgICAgdm0udGVhbXMgPSBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIFVzZWQgZm9yIHRoZSBjb21wbGV0ZWQgY2hhbGxlbmdlcyBkaXJlY3RpdmVcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uQ3RybCcsIENvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmNvbXBldGl0aW9uID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG5cbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5kYXRhKSB7XG4gICAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjb21wZXRpdGlvbkRldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjb21wZXRpdGlvbkRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY29tcGV0aXRpb25EZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvbnNDdHJsJywgQ29tcGV0aXRpb25zQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25zQ3RybChjb21wZXRpdGlvbnNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbnMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb25zKCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9ucyA9IGNvbXBldGl0aW9ucy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIGNvbXBldGl0aW9uXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NyZWF0ZUNvbXBldGl0aW9uQ3RybCcsIENyZWF0ZUNvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlQ29tcGV0aXRpb25DdHJsKCRzdGF0ZSwgdXNlclNlcnZpY2UsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBicmVha1BvaW50cyA9IFtdO1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciBtYXhQbGF5ZXJzID0gbnVsbDtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm5ld0NvbXBldGl0aW9uID0ge1xuICAgICAgcGxheWVyczogW10sXG4gICAgICByZXN0cmljdEpvaW5zOiBmYWxzZVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZUNvbXBldGl0aW9uID0gY3JlYXRlQ29tcGV0aXRpb247XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLnJlbW92ZVBsYXllciA9IHJlbW92ZVBsYXllcjtcbiAgICB2bS5yZW9yZGVyUGxheWVycyA9IHJlb3JkZXJQbGF5ZXJzO1xuICAgIHZtLm5ld0NvbXBldGl0aW9uLmZvcmZlaXREYXlzID0gMTtcbiAgICB2bS5jb21wZXRpdGlvblR5cGVzID0gWydweXJhbWlkJywgJ3ZlcnN1cyddO1xuXG4gICAgYWN0aXZhdGUoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSdW5zIG9uIGNvbnRyb2xsZXIgaW5zdGFudGlhdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gdXNlcnMuZGF0YTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICBtYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBicmVhayBwb2ludHMgYXJyYXlcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBjb21wZXRpdGlvblxuICAgICAqIENoZWNrcyB0byBtYWtlIHN1cmUgeW91IGFyZSBub3QgYWRkaW5nIHRvbyBtYW55IHBsYXllcnNcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwcmV2aXVvc2x5IGFkZGVkIHBsYXllciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmFkZGVkUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBjaGFuZ2VzIGJhc2VkIG9uIHRoZSBjb21wZXRpdGlvbiB0eXBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlclBsYXllcnMoKSB7XG4gICAgICBpZiAodm0ubmV3Q29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgcmVvcmRlclZlcnN1c1BsYXllcnMoKTtcbiAgICAgIH0gZWxzZSBpZiAodm0ubmV3Q29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgIHJlb3JkZXJQeXJhbWlkUGxheWVycygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlb3JkZXIgdGhlIHBsYXllcnMgYmFzZWQgb24gdGhlIGRyYWctZHJvcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlb3JkZXJQeXJhbWlkUGxheWVycygpIHtcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gaTtcbiAgICAgICAgKytpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVvcmRlclZlcnN1c1BsYXllcnMoKSB7XG4gICAgICAvLyBTZXQgYWxsIHBsYXllcnMgdG8gdGVhbSAyXG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IDI7XG4gICAgICB9KTtcbiAgICAgIC8vIFNldCB0aGUgZmlyc3QgaGFsZiBvZiB0aGUgcGxheWVycyB0byB0ZWFtIDFcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggLyAyKTsgaSsrKSB7XG4gICAgICAgIHZtLmFkZGVkUGxheWVyc1tpXS5wb3NpdGlvbiA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnICYmIHZtLmFkZGVkUGxheWVycy5sZW5ndGggJSAyID4gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIFZlcnN1cyBjb21wZXRpdGlvbiBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgcGxheWVycycpO1xuICAgICAgfSBlbHNlIGlmICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoID4gbWF4UGxheWVycykge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIGNvbXBldGl0aW9uIGNhbiBoYXZlIGEgbWF4aW11bSBvZiAnICsgbWF4UGxheWVycyArICcgcGxheWVycycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBlbWFpbDogcGxheWVyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogcGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb21wZXRpdGlvbi5wbGF5ZXJzLnB1c2goYWRkUGxheWVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbXBldGl0aW9uLmFkbWlucyA9IFt7XG4gICAgICAgICAgX2lkOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgICAgIGVtYWlsOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICBwcmltYXJ5OiB0cnVlXG4gICAgICAgIH1dO1xuXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBvZiBsZXZlbHMgYmFzZWQgb24gdGhlIG51bWJlciBvZiBwbGF5ZXJzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggPCBicmVha1BvaW50c1tpXSkge1xuICAgICAgICAgICAgY29tcGV0aXRpb24ubGV2ZWxzID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuY3JlYXRlQ29tcGV0aXRpb24oY29tcGV0aXRpb24pLnRoZW4oZnVuY3Rpb24gKG5ld0NvbXBldGl0aW9uKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMudmlldycsIHtcbiAgICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IG5ld0NvbXBldGl0aW9uLmRhdGEuX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdNeUNvbXBldGl0aW9uc0N0cmwnLCBNeUNvbXBldGl0aW9uc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIE15Q29tcGV0aXRpb25zQ3RybCgkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgbXlDb21wZXRpdGlvbnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGV0aXRpb25zRm9yVXNlcigpIHtcbiAgICAgIG15Q29tcGV0aXRpb25zID0gW107XG4gICAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uc0ZvclVzZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25zID0gY29tcGV0aXRpb25zLmRhdGE7XG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9ucywgZnVuY3Rpb24oY29tcGV0aXRpb24pIHtcbiAgICAgICAgICAgIG15Q29tcGV0aXRpb25zLnB1c2goY29tcGV0aXRpb24uX2lkKTtcbiAgICAgICAgICAgIGlmIChjb21wZXRpdGlvbi50eXBlID09PSAncHlyYW1pZCcpIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uLl9pZCwgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UgPSBjaGFsbGVuZ2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS5leHBpcmVzID0gKG1vbWVudCgpLmRpZmYobW9tZW50KGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwncycpKSAqIC0xO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhWzBdO1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNvbXBldGl0aW9uX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKG15Q29tcGV0aXRpb25zLmluZGV4T2YoY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSA+PSAwKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgZ2V0Q29tcGV0aXRpb25zRm9yVXNlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJywgVXNlckN0cmwpO1xuXG4gIGZ1bmN0aW9uIFVzZXJDdHJsKGlkZW50aXR5U2VydmljZSwgdXNlclNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnVzZXIgPSAge1xuICAgICAgX2lkOiAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgIGZpcnN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICBkaXNwbGF5TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lXG4gICAgfTtcbiAgICB2bS51cGRhdGVVc2VyID0gdXBkYXRlVXNlcjtcbiAgICB2bS51c2VyRm9ybSA9IHt9O1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVVzZXIgKHVzZXIpIHtcbiAgICAgIGlmICh1c2VyLnBhc3N3b3JkICE9PSB1c2VyLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGFueSBvZiB0aGUgbmFtZXMgd2VyZSB1cGRhdGVkIHdlJ2xsIG5lZWQgdG8gdXBkYXRlIHRoZW0gaW4gdGhlIG90aGVyIGNvbGxlY3Rpb25zJ1xuICAgICAgICB2YXIgdXNlclVwZGF0ZXMgPSB7XG4gICAgICAgICAgX2lkOiB1c2VyLl9pZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodXNlci5maXJzdE5hbWUgIT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUgfHwgdXNlci5sYXN0TmFtZSAhPT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lIHx8IHVzZXIuZGlzcGxheU5hbWUgIT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcbiAgICAgICAgICB1c2VyVXBkYXRlcy5kaXNwbGF5TmFtZSA9IHVzZXIuZGlzcGxheU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIucGFzc3dvcmQgJiYgdXNlci5wYXNzd29yZC5sZW50Z2ggPiAwKSB7XG4gICAgICAgICAgdXNlclVwZGF0ZXMucGFzc3dvcmQgPSB1c2VyLnBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIodXNlclVwZGF0ZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uuc3VjY2VzcygnWW91ciBpbmZvcm1hdGlvbiBoYXMgYmVlbiB1cGRhdGVkJyk7XG4gICAgICAgICAgdm0udXNlckZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgdXBkYXRlZCBkYXRhXG4gICAgICAgICAgdmFyIGN1cnJlbnRVc2VyQ2xvbmUgPSBhbmd1bGFyLmNvcHkoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjdXJyZW50VXNlckNsb25lLCB1c2VyVXBkYXRlcyk7XG4gICAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXJDbG9uZTtcbiAgICAgICAgICB2bS51c2VyLmNvbmZpcm1QYXNzd29yZCA9IHZtLnVzZXIucGFzc3dvcmQgPSAnJztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1Gb290ZXInLCB3cG1Gb290ZXIpO1xuXG4gIGZ1bmN0aW9uIHdwbUZvb3RlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1IZWFkZXInLCB3cG1IZWFkZXIpO1xuXG4gIGZ1bmN0aW9uIHdwbUhlYWRlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnaGVhZGVyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgc2lkZWJhclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIGFsZXJ0c1NlcnZpY2UpIHtcbiAgICB2YXIgaGVhZGVyQ3RybCA9IHRoaXM7XG4gICAgaGVhZGVyQ3RybC5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgaGVhZGVyQ3RybC5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgaGVhZGVyQ3RybC5zaWRlYmFyU3RhdHVzID0gc2lkZWJhclNlcnZpY2UuZ2V0U2lkZWJhclN0YXR1cygpO1xuICAgIGhlYWRlckN0cmwudG9nZ2xlU2lkZWJhciA9IHRvZ2dsZVNpZGViYXI7XG4gICAgaGVhZGVyQ3RybC5jbGVhckFsZXJ0ID0gY2xlYXJBbGVydDtcbiAgICBoZWFkZXJDdHJsLmNsZWFyQWxsQWxlcnRzID0gY2xlYXJBbGxBbGVydHM7XG4gICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgJHNjb3BlLiR3YXRjaCgnaGVhZGVyQ3RybC5pbmRlbnRpdHkuY3VycmVudFVzZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzKCkge1xuICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgYWxlcnRzU2VydmljZS5nZXRBY3RpdmVBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChhbGVydHMpIHtcbiAgICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IGFsZXJ0cy5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsZXJ0KGNsZWFyQWxlcnQsIGluZGV4KSB7XG4gICAgICBhbGVydHNTZXJ2aWNlLmNsZWFyQWxlcnQoY2xlYXJBbGVydCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckN0cmwuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsbEFsZXJ0cygpIHtcbiAgICAgIGFsZXJ0c1NlcnZpY2UuY2xlYXJBbGxBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKCFoZWFkZXJDdHJsLnNpZGViYXJTdGF0dXMubGVmdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnVwZGF0ZV9hbGVydHMnLCBmdW5jdGlvbiAoZSwgYWxlcnRzKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIF8uc29tZShhbGVydHMsIFsndXNlcklkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1TaWRlYmFyJywgd3BtU2lkZWJhcik7XG5cbiAgZnVuY3Rpb24gd3BtU2lkZWJhcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnc2lkZWJhckN0cmwnLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSwgc2lkZWJhclNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgdm0uc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5maWx0ZXIoJ29yZGVyT2JqZWN0QnknLCBvcmRlck9iamVjdEJ5KTtcblxuICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGF0dHJpYnV0ZSkge1xuICAgICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KGlucHV0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIGZvciAodmFyIG9iamVjdEtleSBpbiBpbnB1dCkge1xuICAgICAgICBhcnJheS5wdXNoKGlucHV0W29iamVjdEtleV0pO1xuICAgICAgfVxuXG4gICAgICBhcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGEgPSBwYXJzZUludChhW2F0dHJpYnV0ZV0pO1xuICAgICAgICBiID0gcGFyc2VJbnQoYlthdHRyaWJ1dGVdKTtcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhbGVydHNTZXJ2aWNlJywgYWxlcnRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gYWxlcnRzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXI6IGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyLFxuICAgICAgY2xlYXJBbGVydDogY2xlYXJBbGVydCxcbiAgICAgIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXI6IGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHVuY2xlYXJlZCBhbGVydHMgZm9yIGEgdXNlciBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYWxlcnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FsZXJ0cy8nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgYWxlcnRzIGFzIGNsZWFyZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGVydElkIGlkIGZvciB0aGUgYWxlcnRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxlcnQoYWxlcnRJZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9hbGVydC9jbGVhcicsIHtcbiAgICAgICAgYWxlcnRJZDogYWxlcnRJZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFya3MgYWxsIHVudmlld2VkIGFsZXJ0cyBhcyB2aWV3ZWQgZm9yIGEgdXNlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL2FsZXJ0cy9jbGVhcicsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdpZGVudGl0eVNlcnZpY2UnLCBpZGVudGl0eVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGlkZW50aXR5U2VydmljZSgkd2luZG93KSB7XG4gICAgdmFyIGN1cnJlbnRVc2VyO1xuICAgIGlmICgkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3QgIT09IG51bGwpIHtcbiAgICAgIGN1cnJlbnRVc2VyID0gJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0O1xuICAgIH1cbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkLFxuICAgICAgaXNBdXRob3JpemVkOiBpc0F1dGhvcml6ZWRcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQocm9sZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2Yocm9sZSkgPiAtMTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnbm90aWZ5U2VydmljZScsIG5vdGlmeVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIG5vdGlmeVNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBpbmZvOiBpbmZvLFxuICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXG4gICAgICBlcnJvcjogZXJyb3IsXG4gICAgICBpbnZlcnNlOiBpbnZlcnNlXG4gICAgfTtcblxuICAgICQubm90aWZ5RGVmYXVsdHMoe1xuICAgICAgbmV3ZXN0X29uX3RvcDogdHJ1ZSxcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB4OiAyMCxcbiAgICAgICAgeTogODVcbiAgICAgIH0sXG4gICAgICBkZWxheTogNTAwMCxcbiAgICB9KTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnaW5mbydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2RhbmdlcidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludmVyc2UobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2ludmVyc2UnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnc2Nyb2xsYmFyU2VydmljZScsIHNjcm9sbGJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNjcm9sbGJhclNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBtYWxpaHVTY3JvbGw6IG1hbGlodVNjcm9sbFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIG1hbGlodVNjcm9sbChzZWxlY3RvciwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKSB7XG4gICAgICAkKHNlbGVjdG9yKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAgICAgdGhlbWU6IHRoZW1lLFxuICAgICAgICBzY3JvbGxJbmVydGlhOiAxMDAsXG4gICAgICAgIGF4aXM6IHNjcm9sbGF4aXMsXG4gICAgICAgIG1vdXNlV2hlZWw6IHtcbiAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgYXhpczogbW91c2V3aGVlbGF4aXMsXG4gICAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnd2Vic29ja2V0U2VydmljZScsIHdlYnNvY2tldFNlcnZpY2UpLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTtcblxuICBmdW5jdGlvbiB3ZWJzb2NrZXRTZXJ2aWNlKCRyb290U2NvcGUsICR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIGNvbm5lY3Rpb247XG4gICAgdmFyIHJldHJ5U2Vjb25kcyA9IFszLCAxMCwgMTAwLCAxMDAwXTtcbiAgICB2YXIgcmV0cnkgPSAwO1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY29ubmVjdDogY29ubmVjdCxcbiAgICAgIHNlbmQ6IHNlbmRcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgICBjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh3ZWJzb2NrZXRIb3N0KCkpO1xuXG4gICAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHJ5ID0gMDtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuXG4gICAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZXRyeSA8IHJldHJ5U2Vjb25kcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNsb3NlZC4gUmVjb25uZWN0aW5nLi4uJyk7XG4gICAgICAgICAgJHRpbWVvdXQoY29ubmVjdCwgcmV0cnlTZWNvbmRzW3JldHJ5XSoxMDAwKTtcbiAgICAgICAgICByZXRyeSArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXZpbmcgdXAgb24gV2ViU29ja2V0Jyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VuZCh0b3BpYywgZGF0YSkge1xuICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgICBjb25uZWN0aW9uLnNlbmQoanNvbik7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgSG9tZUN0cmwpO1xuXG4gIGZ1bmN0aW9uIEhvbWVDdHJsKGNvbXBldGl0aW9uc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9ucyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbnMpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25zID0gY29tcGV0aXRpb25zLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdjT3ZlcmZsb3cnLCBjT3ZlcmZsb3cpO1xuXG4gIGZ1bmN0aW9uIGNPdmVyZmxvdyhzY3JvbGxiYXJTZXJ2aWNlKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHNjcm9sbGF4aXMgPSBhdHRycy5zY3JvbGxheGlzIHx8ICd5JztcbiAgICAgIHZhciB0aGVtZSA9IGF0dHJzLnRoZW1lIHx8ICdtaW5pbWFsLWRhcmsnO1xuICAgICAgdmFyIG1vdXNld2hlZWxheGlzID0gYXR0cnMubW91c2V3aGVlbGF4aXMgfHwgJ3knO1xuICAgICAgaWYgKCEkKCdodG1sJykuaGFzQ2xhc3MoJ2lzbW9iaWxlJykpIHtcbiAgICAgICAgc2Nyb2xsYmFyU2VydmljZS5tYWxpaHVTY3JvbGwoZWxlbWVudCwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGVTdWJtZW51JywgdG9nZ2xlU3VibWVudSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlU3VibWVudSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsKSB7XG4gICAgICBlbC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLm5leHQoKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICBlbC5wYXJlbnQoKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd2F2ZXNFZmZlY3QnLCB3YXZlc0VmZmVjdCk7XG5cbiAgZnVuY3Rpb24gd2F2ZXNFZmZlY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWljb24nKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdidG4tZmxvYXQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1jaXJjbGUnXSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1saWdodCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWxpZ2h0J10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBXYXZlcy5pbml0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZmdMaW5lJywgZmdMaW5lKTtcblxuICBmdW5jdGlvbiBmZ0xpbmUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKTtcbiAgICAgIHZhciBpc0Zsb2F0TGFiZWwgPSBlbGVtZW50LnBhcmVudCgpLmhhc0NsYXNzKCdmZy1mbG9hdCcpO1xuICAgICAgaW5wdXQuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQuYmx1cihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGbG9hdExhYmVsIHx8IChpc0Zsb2F0TGFiZWwgJiYgaW5wdXQudmFsKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
