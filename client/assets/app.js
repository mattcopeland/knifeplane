angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var r=this;r.$state=e,r.lockSidebar=t.get("sidebarLocked"),r.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,i,a){var o={superAdmin:n,admin:t,user:r};a.html5Mode(!0),i.otherwise("/"),i.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:competitionId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"StatsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/stats.html"}}}).state("pyramids.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"AdminCtrl",controllerAs:"vm",templateUrl:"pyramids/views/admin.html"}},resolve:{auth:o.user}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function r(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],r.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,r,i,a,o){"not authorized"===o&&(t.go("login"),t.previous=n,t.prevParams=r)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(e,r){var a=n.defer();return t.post("/login",{username:e,password:r}).then(function(e){e.data.success?(i.currentUser=e.data.user,a.resolve(!0)):"unverified"===e.data.message?a.resolve("unverified"):a.resolve(!1)}),a.promise}function s(e){var r=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?r.resolve(!0):r.resolve(!1)},function(e){"Error: Duplicate Username"===e.data.reason&&a.error("Sorry, an account already exists with that email address.")}),r.promise}function l(){var r=n.defer();return t.post("/logout",{logout:!0}).then(function(){i.currentUser=void 0,r.resolve(),e.go("home")}),r.promise}function c(e){return!!i.isAuthorized(e)||n.reject("not authorized")}function d(){return!!i.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:o,createUser:s,logout:l,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:d};return u}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function r(t){return e.get("/api/user/password/link",{params:{username:t}})}function i(t,n,r){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:r})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:r,resetPassword:i};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function r(){}function i(r,i){t.authenticateUser(r,i).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("pyramids.myPyramids"):n.error("Username / password combinaiton incorrect")})}var a=this;a.login=i,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(){a.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function s(t){n.generatePasswordResetLink(t).then(function(t){t.data?(r.success("Please check your email for a password reset link"),e.go("home")):r.error("Could not find that email address")})}function l(a){a.password!==a.confirmPassword?r.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,a.password).then(function(t){t.data&&i.authenticateUser(t.data.username,a.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=s,c.resetPassword=l,o()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){}function i(r){r.password!==r.confirmPassword?n.error("Passwords don't match!"):t.createUser(r).then(function(){e.go("verify")})}var a=this;a.register=i,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){t.userId&&t.verificationToken&&(i.verifying=!0,i.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?i.verified=!0:i.verified=!1}))}var i=this;i.verified=void 0,i.verifying=!1,r()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.pyramid",function(){i.pyramid&&r()})}function r(){i.challenges=[],t.getActiveChallengesByCompetition(i.pyramid._id).then(function(e){e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var i=this;i.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function r(){e.$watch("vm.challenges",function(){o.challenges&&o.challenges.length>0&&i()})}function i(){_.forEach(o.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger",e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})})}function a(e,t){n.deleteChallenge(o.competitionId,e).then(function(){o.challenges.splice(t,1)})}var o=this;o.challenges=[],o.deleteChallenge=a,r()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("kpCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){a.player&&(n(a.player),r(a.player),i(a.player))})}function n(e){for(var t=[],n=0;n<a.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var r=0;r<t.length;r++)if(e.position<t[r+1]){e.level=t.indexOf(t[r])+1;break}}function r(e){var t,n=0,r=!0;_.forEach(e.results,function(i){r&&("challenger"===i.winner&&i.challenger._id===e._id||"opponent"===i.winner&&i.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):r=!1:("opponent"===i.winner&&i.challenger._id===e._id||"challenger"===i.winner&&i.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):r=!1)),a.streak={type:t,value:n}})}function i(e){a.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),a.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),a.wins.total=a.wins.asChallenger+a.wins.asOpponent,a.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),a.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),a.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),a.loses.total=a.loses.asChallenger+a.loses.asOpponent,a.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var a=this;a.maxLevels=10,a.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},a.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},a.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("kpPlayerOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function n(t){return e.post("/api/challenges/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function i(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function a(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function o(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function s(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function l(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function c(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var d={createChallenge:t,completeChallenge:n,getChallengesByCompetition:r,getActiveChallengesByCompetition:i,getActiveChallengeByCompetitionByPlayer:a,getCompletedChallengesByCompetition:o,deleteActiveChallengeByCompetitionByPlayer:s,deleteChallenge:l,getPlayerResultsByCompetition:c};return d}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var r=this;r.indentity=e,r.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,r,i){function a(){o(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&o()})}function o(){u.alerts=[],n.isAuthenticated()&&i.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){u.alerts=e.data})}function s(e,t){i.clearAlert(e).then(function(){u.alerts.splice(t,1)})}function l(){i.clearAllAlertsByPlayer(n.currentUser._id).then(function(){u.alerts=[]})}function c(){t.setSidebarStatus(!u.sidebarStatus.left)}function d(){r.logout()}var u=this;u.indentity=n,u.logout=d,u.sidebarStatus=t.getSidebarStatus(),u.toggleSidebar=c,u.clearAlert=s,u.clearAllAlerts=l,u.alerts=[],a(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&o()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function r(){t.logout()}var i=this;i.indentity=e,i.logout=r,i.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var r in e)n.push(e[r]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function r(t){return e.put("/api/alerts/clear",{userId:t})}var i={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:r};return i}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var r;null!==e.bootstrappedUserObject&&(r=e.bootstrappedUserObject);var i={currentUser:r,isAuthenticated:t,isAuthorized:n};return i}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function r(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var a={info:e,success:t,warning:n,error:r,inverse:i};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85}}),a}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,r){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:r,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},r={getSidebarStatus:e,setSidebarStatus:t};return r}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function r(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function i(){o=new WebSocket(r()),o.onmessage=function(t){l=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},o.onclose=function(){l<s.length?(console.log("WebSocket closed. Reconnecting..."),n(i,1e3*s[l]),l+=1):console.log("Giving up on WebSocket")}}function a(e,t){var n=JSON.stringify({topic:e,data:t});o.send(n)}var o,s=[3,10,100,1e3],l=0,c={connect:i,send:a};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e){function t(){e.getPyramids().then(function(e){n.pyramids=e.data})}var n=this;n.pyramids=[],t()}e.$inject=["pyramidsService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=i.pyramid.players.length+1,e.approvePendingPlayer(i.pyramid._id,t)}function r(t){e.denyPendingPlayer(i.pyramid._id,t)}var i=this;i.pendingPlayers=[],i.approvePendingPlayer=n,i.denyPendingPlayer=r,t()}t.$inject=["pyramidsService"],angular.module("app").directive("kpPendingPlayers",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/pyramid-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("kpPyramidCompact",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{pyramid:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,r,i,a,o){function s(){for(var t=S;t>0;--t)$.maxPlayers+=t;e.$watch("vm.pyramid",function(){$.pyramid&&($.competitionId=$.pyramid._id,l(),c(),u(),p(),m())})}function l(){$.pyramid.players=r("orderBy")($.pyramid.players,"position")}function c(){$.currentUserIsAdmin=!1,$.currentUserIsPending=!1,a.isAuthenticated()&&($.currentUserIsAdmin=_.some($.pyramid.admins,["_id",a.currentUser._id]),$.currentUserIsPending=_.some($.pyramid.pendingPlayers,["_id",a.currentUser._id])),$.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,_.forEach($.pyramid.players,function(e){a.isAuthenticated()&&e._id===a.currentUser._id&&($.currentUserIsOnPyramid=!0,e.class="current-user",$.currentUserPlayer=e,o.getActiveChallengeByCompetitionByPlayer($.competitionId,e._id).then(function(t){t.data&&($.hasActiveChallenge=!0,$.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger)}))}),o.getActiveChallengesByCompetition($.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find($.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var n=_.find($.pyramid.players,{_id:e.opponent._id});if(n.class="unavailable",n.challenge={position:"opponent"},0!==e.timeLimit){var r=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;r>0?n.challenge.expires=r:r<=0&&v(null,!0,n)}}),f()})}function d(){$.breakPoints=[];for(var e=0;e<S;e++)$.breakPoints.push(e*(e+1)/2+1)}function u(){var e=0;$.levels=[],d();for(var t=0;t<$.pyramid.players.length;t++)$.breakPoints.indexOf(t+1)>-1&&(e+=1,$.levels.push(e)),$.pyramid.players[t].level=e}function p(){$.numberOfBlocks=0;for(var e=_.last($.levels);e>0;e--)$.numberOfBlocks+=e}function m(){$.numberOfRealPlayers=$.pyramid.players.length;for(var e=$.pyramid.players.length;e<$.numberOfBlocks;e++)$.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"});u()}function f(){if($.currentUserIsOnPyramid&&!$.hasActiveChallenge){var e=$.currentUserPlayer.level>1?$.currentUserPlayer.level-1:null;_.forEach($.pyramid.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&($.availableChallenges=!0,t.available=!0,t.class="available")})}}function y(e){if(e.available){$.hasActiveChallenge=!0;var t={competitionName:$.pyramid.name,competitionId:$.competitionId,complete:!1,forfeit:!1,timeLimit:$.pyramid.forfeitDays,challenger:{_id:$.currentUserPlayer._id,email:$.currentUserPlayer.email,firstName:$.currentUserPlayer.firstName,lastName:$.currentUserPlayer.lastName,position:$.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,position:e.position}};o.createChallenge(t).then(function(){$.pyramidMenuToggle=!1})}else i.error("Sorry, that is not a valid challenge.")}function v(e,t,r){var i=r||$.currentUserPlayer;o.getActiveChallengeByCompetitionByPlayer($.competitionId,i._id).then(function(i){$.hasActiveChallenge=!1;var a=!1;t?(i.data.forfeit=!0,"opponent"===r.challenge.position?(i.data.winner="challenger",a=!0):i.data.winner="opponent"):e?i.data.challenger._id===$.currentUserPlayer._id?(i.data.winner="challenger",a=!0):i.data.winner="opponent":i.data.challenger._id===$.currentUserPlayer._id?i.data.winner="opponent":(i.data.winner="challenger",a=!0),a?n.swapPositions($.competitionId,i.data.opponent,i.data.challenger).then(function(){o.completeChallenge(i.data).then(function(){U&&C()})}):o.completeChallenge(i.data).then(function(){U&&C()}),$.pyramidMenuToggle=!1})}function h(e){v(null,!0,e)}function g(){if(a.isAuthenticated())if($.numberOfRealPlayers<$.maxPlayers){var e={_id:a.currentUser._id,firstName:a.currentUser.firstName,lastName:a.currentUser.lastName,email:a.currentUser.username,position:$.numberOfRealPlayers+1};$.pyramid.open?swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToPyramid($.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")}):swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToPyramidRequest($.pyramid,e).then(function(){$.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")})}else i.warning("Sorry, this pyramid is full");else i.warning("Please login to join a competition"),t.previous="pyramids.view",t.prevParams={competitionId:$.competitionId},t.go("login")}function P(){swal({title:"Leave Pyramid?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){C(),swal("OK, you'r out!","You've been removed from the pyramid.","success")})}function C(){a.isAuthenticated()&&$.currentUserIsOnPyramid&&(U=!0,$.hasActiveChallenge?v(null,!0,$.currentUserPlayer):($.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,n.getPyramid($.competitionId).then(function(e){var t=e.data,r=$.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=r&&(e.position-=1)});for(var i=_.remove(t.players,function(e){return e._id===$.currentUserPlayer._id}),a=[],o=0;o<$.numberOfRealPlayers-1;++o){var s={_id:t.players[o]._id,firstName:t.players[o].firstName,lastName:t.players[o].lastName,position:t.players[o].position};a.push(s)}n.removedPlayerFromPyramid($.competitionId,i[0],a).then(function(){U=!1})})))}function w(e){99!==e.position||$.currentUserIsOnPyramid||g(),e.available===!0&&$.currentUserIsOnPyramid&&!$.hasActiveChallenge&&swal({title:"Challenge Request",text:"Challenge "+e.firstName+" "+e.lastName+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Send Challenge",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){y(e),swal("Challenge Sent",e.firstName+" "+e.lastName+" has been notified of the challenge.","success")})}function b(){n.getPyramid($.competitionId).then(function(e){$.pyramid=e.data})}var S=10,$=this;$.competitionId=null,$.breakPoints=[],$.levels=[],$.numberOfBlocks=0,$.currentUserIsOnPyramid=!1,$.currentUserIsPending=!1,$.currentUserIsAdmin=!1,$.hasActiveChallenge=!1,$.activeChallengeOpponent=null,$.availableChallenges=!1,$.createChallenge=y,$.completeChallenge=v,$.challengeExpired=h,$.currentUserPlayer={},$.pyramidMenuToggle=!1,$.addCurrentUserToPyramid=g,$.confirmRemoveCurrentUserFromPyramid=P,$.playerClick=w,$.numberOfRealPlayers=0,$.maxPlayers=0,s();var U=!1;e.$on("ws:pyramid_updated",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),b())})}t.$inject=["$scope","$state","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/update-admins.html"};return e}function t(e,t,n,r,i){function a(){e.$watch("vm.pyramid",function(){p.pyramid&&(p.addedAdmins=_.cloneDeep(p.pyramid.admins),p.disableSubmit=!0,p.userIsPrimaryAdmin=_.find(p.pyramid.admins,{primary:!0})._id===i.currentUser._id,o())})}function o(){r.getAllUsers().then(function(e){_.forEach(p.pyramid.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){p.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,email:e.username,_id:e._id})})})}function s(){p.pyramid.admins=p.addedAdmins,t.updatePyramid(p.pyramid).then(function(){p.disableSubmit=!0})}function l(){p.addedAdmins=_.cloneDeep(p.pyramid.admins)}function c(e){u.push(e),p.availableAdmins.push(_.remove(p.addedAdmins,{_id:e._id})[0]),p.disableSubmit=!1}function d(e){p.addedAdmins.push(_.remove(p.availableAdmins,{_id:e._id})[0]),p.disableSubmit=!1}var u=[],p=this;p.availableAdmins=[],p.addedAdmins=[],p.userIsPrimaryAdmin=!1,p.updatePyramid=s,p.cancelUpdate=l,p.removeAdmin=c,p.addAdmin=d,p.disableSubmit=!0,a()}t.$inject=["$scope","pyramidsService","challengesService","userService","identityService"],angular.module("app").directive("kpUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/update-players.html"};return e}function t(e,t,n,r,i){function a(){e.$watch("vm.pyramid",function(){m.pyramid&&(m.addedPlayers=_.cloneDeep(m.pyramid.players),m.disableSubmit=!0,o())})}function o(){i.getAllUsers().then(function(e){_.forEach(m.pyramid.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){m.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,email:e.username,_id:e._id})})})}function s(){_.forEach(p,function(e){r.deleteActiveChallengeByCompetitionByPlayer(m.pyramid._id,e._id)}),m.pyramid.players=m.addedPlayers,n.updatePyramid(m.pyramid).then(function(){m.disableSubmit=!0})}function l(){m.addedPlayers=_.cloneDeep(m.pyramid.players)}function c(){var e=1;_.forEach(m.addedPlayers,function(t){t.position=e,++e}),m.disableSubmit=!1}function d(e){p.push(e),m.availablePlayers.push(_.remove(m.addedPlayers,{_id:e._id})[0]),c()}function u(e){e.position=m.addedPlayers.length+1,m.addedPlayers.push(_.remove(m.availablePlayers,{_id:e._id})[0]),m.disableSubmit=!1}var p=[],m=this;m.availablePlayers=[],m.addedPlayers=[],m.updatePyramid=s,m.cancelUpdate=l,m.reorderPlayers=c,m.removePlayer=d,m.addPlayer=u,m.disableSubmit=!0,a()}t.$inject=["$scope","$filter","pyramidsService","challengesService","userService"],angular.module("app").directive("kpUpdatePlayers",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{competitionId:t}})}function n(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function r(){return e.get("/api/pyramids")}function i(t){return e.post("/api/pyramids/create",{pyramid:t})}function a(t){return e.post("/api/pyramids/update",{pyramid:t})}function o(t){return e.delete("/api/pyramids/delete",{params:{competitionId:t}})}function s(t,n,r){return e.post("/api/pyramids/swapPositions",{competitionId:t,challenger:n,opponent:r})}function l(t,n){return e.post("/api/pyramids/addPlayer",{competitionId:t,player:n})}function c(t,n){return e.post("/api/pyramids/addPlayerRequest",{competition:t,player:n})}function d(t,n,r){return e.post("/api/pyramids/removePlayer",{competitionId:t,removedPlayer:n,players:r})}function u(t,n){return e.post("/api/pyramids/approvePlayer",{competitionId:t,player:n})}function p(t,n){return e.post("/api/pyramids/denyPlayer",{competitionId:t,player:n})}var m={getPyramid:t,getPyramidsForUser:n,getPyramids:r,createPyramid:i,updatePyramid:a,deletePyramid:o,swapPositions:s,addPlayerToPyramid:l,addPlayerToPyramidRequest:c,removedPlayerFromPyramid:d,approvePendingPlayer:u,denyPendingPlayer:p};return m}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(e,t,n,r,i,a,o,s){function l(){n.competitionId?(p.competitionId=n.competitionId,c()):t.go("pyramids.myPyramids")}function c(){i.getPyramid(p.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",a.currentUser._id])?(p.isAdmin=!0,e.data.players=r("orderBy")(e.data.players,"position"),p.pyramid=e.data):t.go("pyramids.myPyramids")}),s.getCompletedChallengesByCompetition(p.competitionId).then(function(e){p.challenges=e.data})}function d(){i.getPyramid(p.competitionId).then(function(e){var t=e.data;t.open=p.pyramid.open,i.updatePyramid(t)})}function u(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){i.deletePyramid(p.competitionId).then(function(){t.go("pyramids.myPyramids")})})}var p=this;p.competitionId=null,p.updatePyramidOpenStatus=d,p.deletePyramid=u,l(),e.$on("ws:pyramid_updated",function(e,t){p.competitionId===t.competitionId&&(o.info(t.description),c())}),e.$on("ws:pyramid_deleted",function(e,n){p.competitionId===n.competitionId&&(o.info(n.description),t.go("pyramids.myPyramids"))})}e.$inject=["$scope","$state","$stateParams","$filter","pyramidsService","identityService","notifyService","challengesService"],angular.module("app").controller("AdminCtrl",e)}(),function(){"use strict";function e(e,t,n,r){function i(){t.getAllUsers().then(function(e){u.availablePlayers=e.data});for(var e=0;e<d;e++)c.push(e*(e+1)/2+1)}function a(e){e.position=u.addedPlayers.length+1,u.addedPlayers.push(_.remove(u.availablePlayers,{_id:e._id})[0])}function o(e){u.availablePlayers.push(_.remove(u.addedPlayers,{_id:e._id})[0]),s()}function s(){var e=1;_.forEach(u.addedPlayers,function(t){t.position=e,++e})}function l(t){angular.forEach(u.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,position:e.position};t.players.push(n)}),t.admins=[{_id:r.currentUser._id,email:r.currentUser.username,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,primary:!0}];for(var i=0;i<c.length;i++)if(t.players.length<c[i]){t.levels=i;break}n.createPyramid(t).then(function(t){e.go("pyramids.view",{competitionId:t.data._id})})}var c=[],d=10,u=this;u.newPyramid={players:[],open:!1},u.availablePlayers=[],u.addedPlayers=[],u.createPyramid=l,u.addPlayer=a,u.removePlayer=o,u.reorderPlayers=s,u.newPyramid.forfeitDays=1,i()}e.$inject=["$state","userService","pyramidsService","identityService"],angular.module("app").controller("CreatePyramidCtrl",e);
}(),function(){"use strict";function e(e,t,n,r,i){function a(){o()}function o(){s=[],l.activeChallenge=null,r.isAuthenticated()&&t.getPyramidsForUser(r.currentUser._id).then(function(e){l.pyramids=e.data,_.forEach(l.pyramids,function(e){s.push(e._id),n.getActiveChallengeByCompetitionByPlayer(e._id,r.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var s=[],l=this;l.activeChallenge=null,a(),e.$on("ws:pyramid_updated",function(e,t){s.indexOf(t.competitionId)>=0&&(i.info(t.description),o())})}e.$inject=["$scope","pyramidsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i){function a(){n.competitionId&&(o.competitionId=n.competitionId,r.getPyramid(o.competitionId).then(function(e){e.data?o.pyramid=e.data:t.go("pyramids.myPyramids")}))}var o=this;o.competitionId=null,o.pyramid=null,a(),e.$on("ws:pyramid_deleted",function(e,n){o.competitionId===n.competitionId&&(i.info(n.description),t.go("pyramids.myPyramids"))})}e.$inject=["$scope","$state","$stateParams","pyramidsService","notifyService"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getPyramids().then(function(e){n.pyramids=e.data})}var n=this;n.pyramids=[],t()}e.$inject=["pyramidsService"],angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(){t.competitionId&&(l.competitionId=t.competitionId,s())}function s(){r.getPyramid(l.competitionId).then(function(e){e.data?(l.pyramid=e.data,_.forEach(l.pyramid.players,function(e){a.getPlayerResultsByCompetition(l.competitionId,e._id).then(function(t){e.results=t.data})})):n.go("pyramids.myPyramids")}),a.getCompletedChallengesByCompetition(l.competitionId).then(function(e){l.challenges=e.data})}var l=this;l.competitionId=null,l.pyramid={},l.playersResults=[],l.challenges=[],o(),e.$on("ws:pyramid_updated",function(e,t){l.competitionId===t.competitionId&&(i.info(t.description),s())}),e.$on("ws:pyramid_deleted",function(e,t){l.competitionId===t.competitionId&&(i.info(t.description),n.go("pyramids.myPyramids"))})}e.$inject=["$scope","$stateParams","$state","pyramidsService","notifyService","challengesService"],angular.module("app").controller("StatsCtrl",e)}(),function(){"use strict";function e(e){function t(){}var n=this;n.indentity=e,t()}e.$inject=["identityService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,r){var i=r.scrollaxis||"y",a=r.theme||"minimal-dark",o=r.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,a,i,o)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),r=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!r||r&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL3NlcnZpY2VzL2NoYWxsZW5nZXMuc2VydmljZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9oZWFkZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5kaXJlY3RpdmUuanMiLCJjb21tb24vZmlsdGVycy9vcmRlci1vYmplY3QtYnkuZmlsdGVyLmpzIiwiY29tbW9uL3NlcnZpY2VzL2FsZXJ0cy5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL2luZGVudGl0eS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL25vdGlmeS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3Njcm9sbGJhci5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3NpZGViYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy93ZWJzb2NrZXQuc2VydmljZS5qcyIsImNvbW1vbi92aWV3cy9ob21lLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3BlbmRpbmctcGxheWVycy5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQtY29tcGFjdC5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQuZGlyZWN0aXZlLmpzIiwicHlyYW1pZHMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmRpcmVjdGl2ZS5qcyIsInB5cmFtaWRzL2NvbXBvbmVudHMvdXBkYXRlLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwicHlyYW1pZHMvc2VydmljZXMvcHlyYW1pZHMuc2VydmljZS5qcyIsInB5cmFtaWRzL3ZpZXdzL2FkbWluLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9jcmVhdGUtcHlyYW1pZC5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvbXktcHlyYW1pZHMuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWQuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9zdGF0cy5jb250cm9sbGVyLmpzIiwidXNlcnMvdmlld3MvdXNlci5jb250cm9sbGVyLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvc2Nyb2xsYmFyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3RvZ2dsZS1zdWJtZW51LmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3dhdmVzLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL2Zvcm1zL2ZnLWxpbmUuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWd1cmF0aW9uIiwiJGh0dHBQcm92aWRlciIsIiR1aWJUb29sdGlwUHJvdmlkZXIiLCIkcVByb3ZpZGVyIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiZ2V0Iiwib3B0aW9ucyIsImFwcGVuZFRvQm9keSIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiY29uZmlnIiwiQXBwQ3RybCIsIiRzdGF0ZSIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJ0b2dnbGVTaWRlYmFyTG9ja2VkIiwibG9ja2VkIiwic2V0IiwiYXBwQ3RybCIsInRoaXMiLCJsb2NrU2lkZWJhciIsImNvbnRyb2xsZXIiLCJjb25maWd1cmVSb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwicm91dGVSb2xlQ2hlY2tzIiwic3VwZXJBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIiwiYWRtaW4iLCJyZXF1aXJlQWRtaW4iLCJ1c2VyIiwicmVxdWlyZUF1dGgiLCJodG1sNU1vZGUiLCJvdGhlcndpc2UiLCJ3aGVuIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRlbnRAIiwicmVzb2x2ZSIsImF1dGgiLCJhdXRoU2VydmljZSIsImF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUiLCJhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlIiwiJGluamVjdCIsImFwcFJ1biIsIiRyb290U2NvcGUiLCJzaWRlYmFyU2VydmljZSIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImVycm9yIiwiZ28iLCJwcmV2aW91cyIsInByZXZQYXJhbXMiLCJzZXRTaWRlYmFyU3RhdHVzIiwicnVuIiwiJGh0dHAiLCIkcSIsInVzZXJTZXJ2aWNlIiwiaWRlbnRpdHlTZXJ2aWNlIiwibm90aWZ5U2VydmljZSIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2UiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwicmVhc29uIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsInZlcmlmeVVzZXIiLCJ1c2VySWQiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInBhcmFtcyIsImdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsiLCJyZXNldFBhc3N3b3JkIiwicHV0IiwiTG9naW5DdHJsIiwiYWN0aXZhdGUiLCJsb2dpbiIsInZtIiwiUGFzc3dvcmRSZXNldEN0cmwiLCIkc3RhdGVQYXJhbXMiLCJ2ZXJpZmllZCIsInJlc2V0UGFzc3dvcmRGb3JtIiwiY29uZmlybVBhc3N3b3JkIiwiUmVnaXN0ZXJDdHJsIiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiVmVyaWZpY2F0aW9uQ3RybCIsInZlcmlmeWluZyIsImtwQWN0aXZlQ2hhbGxlbmVnZXMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiY3RybEZ1bmMiLCJyZXN0cmljdCIsInNjb3BlIiwicHlyYW1pZCIsIiRzY29wZSIsImNoYWxsZW5nZXNTZXJ2aWNlIiwiJHdhdGNoIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlcyIsImNoYWxsZW5nZXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsIl9pZCIsImxlbmd0aCIsIl8iLCJmb3JFYWNoIiwiY2hhbGxlbmdlIiwidGltZUxpbWl0IiwiZXhwaXJlcyIsIm1vbWVudCIsImRpZmYiLCJjcmVhdGVkIiwiYWRkIiwia3BDb21wbGV0ZWRDaGFsbGVuZWdlcyIsImNvbXBldGl0aW9uSWQiLCJhbGxvd0RlbGV0ZSIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInNwbGljZSIsImtwUGxheWVyT3ZlcmFsbFJlc3VsdHMiLCJwbGF5ZXIiLCJhc3NpZ25wbGF5ZXJzVG9MZXZlbHMiLCJjYWxjdWxhdGVTdHJlYWsiLCJjYWxjdWF0ZVdpbkFuZExvc2VzIiwiYnJlYWtQb2ludHMiLCJpIiwibWF4TGV2ZWxzIiwicHVzaCIsImxldmVsIiwiaiIsInBvc2l0aW9uIiwiaW5kZXhPZiIsInN0cmVha1R5cGUiLCJzdHJlYWsiLCJjb250aW51ZVN0cmVhayIsInJlc3VsdHMiLCJjaGFsbGVuZ2VyIiwib3Bwb25lbnQiLCJ0eXBlIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsImNyZWF0ZUNoYWxsZW5nZSIsImNvbXBsZXRlQ2hhbGxlbmdlIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJwbGF5ZXJJZCIsImdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwibGltaXQiLCJkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJkZWxldGUiLCJnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbiIsImtwRm9vdGVyIiwiaW5kZW50aXR5Iiwia3BIZWFkZXIiLCJhbGVydHNTZXJ2aWNlIiwiZ2V0QWN0aXZlQWxlcnRzIiwiaGVhZGVyQ3RybCIsImFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyIiwiY2xlYXJBbGVydCIsImluZGV4IiwiY2xlYXJBbGxBbGVydHMiLCJjbGVhckFsbEFsZXJ0c0J5UGxheWVyIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJTdGF0dXMiLCJsZWZ0IiwiZ2V0U2lkZWJhclN0YXR1cyIsImUiLCJzb21lIiwia3BTaWRlYmFyIiwib3JkZXJPYmplY3RCeSIsImlucHV0IiwiYXR0cmlidXRlIiwiaXNPYmplY3QiLCJhcnJheSIsIm9iamVjdEtleSIsInNvcnQiLCJhIiwiYiIsInBhcnNlSW50IiwiYWxlcnRJZCIsIiR3aW5kb3ciLCJyb2xlcyIsImJvb3RzdHJhcHBlZFVzZXJPYmplY3QiLCJpbmZvIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsIndhcm5pbmciLCJpbnZlcnNlIiwibm90aWZ5RGVmYXVsdHMiLCJuZXdlc3Rfb25fdG9wIiwib2Zmc2V0IiwieCIsInkiLCJzY3JvbGxiYXJTZXJ2aWNlIiwibWFsaWh1U2Nyb2xsIiwic2VsZWN0b3IiLCJ0aGVtZSIsInNjcm9sbGF4aXMiLCJtb3VzZXdoZWVsYXhpcyIsIm1DdXN0b21TY3JvbGxiYXIiLCJzY3JvbGxJbmVydGlhIiwiYXhpcyIsIm1vdXNlV2hlZWwiLCJlbmFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXR1cyIsInJpZ2h0Iiwid2Vic29ja2V0U2VydmljZSIsIiR0aW1lb3V0Iiwid2Vic29ja2V0SG9zdCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiY29ubmVjdCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJyZXRyeSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCIkYnJvYWRjYXN0IiwidG9waWMiLCJvbmNsb3NlIiwicmV0cnlTZWNvbmRzIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJqc29uIiwic3RyaW5naWZ5IiwiSG9tZUN0cmwiLCJweXJhbWlkc1NlcnZpY2UiLCJnZXRQeXJhbWlkcyIsInB5cmFtaWRzIiwia3BQZW5kaW5nUGxheWVycyIsImFwcHJvdmVQZW5kaW5nUGxheWVyIiwicGxheWVycyIsImRlbnlQZW5kaW5nUGxheWVyIiwicGVuZGluZ1BsYXllcnMiLCJrcFB5cmFtaWRDb21wYWN0Iiwia3BQeXJhbWlkIiwicmVwbGFjZSIsIiRmaWx0ZXIiLCJtYXhQbGF5ZXJzIiwib3JkZXJQbGF5ZXJzIiwiZ2V0UGxheWVyc1N0YXR1cyIsImFzc2lnbkxldmVsc1RvUGxheWVycyIsImNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MiLCJmaWxsSW5FbXB0eUJsb2NrcyIsImN1cnJlbnRVc2VySXNBZG1pbiIsImN1cnJlbnRVc2VySXNQZW5kaW5nIiwiYWRtaW5zIiwiY3VycmVudFVzZXJJc09uUHlyYW1pZCIsImhhc0FjdGl2ZUNoYWxsZW5nZSIsImNsYXNzIiwiY3VycmVudFVzZXJQbGF5ZXIiLCJhY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCIsImZpbmQiLCJ0aW1lVG9FeHBpcmUiLCJmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcyIsImNyZWF0ZUJyZWFrUG9pbnRzIiwibGV2ZWxzIiwibnVtYmVyT2ZCbG9ja3MiLCJsYXN0IiwibnVtYmVyT2ZSZWFsUGxheWVycyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibGV2ZWxBYm92ZSIsImF2YWlsYWJsZUNoYWxsZW5nZXMiLCJhdmFpbGFibGUiLCJjb21wZXRpdGlvbk5hbWUiLCJuYW1lIiwiY29tcGxldGUiLCJmb3JmZWl0RGF5cyIsImVtYWlsIiwicHlyYW1pZE1lbnVUb2dnbGUiLCJ3aW5uZXJJc0N1cnJlbnRVc2VyIiwiZm9yZmVpdExvc2VyIiwic3dhcFBvc2l0aW9ucyIsInJlbW92aW5nQ3VycmVudFVzZXIiLCJyZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkIiwiY2hhbGxlbmdlRXhwaXJlZCIsImFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkIiwib3BlbiIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJjbG9zZU9uQ2FuY2VsIiwiYWRkUGxheWVyVG9QeXJhbWlkIiwiYWRkUGxheWVyVG9QeXJhbWlkUmVxdWVzdCIsImNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkIiwiY29uZmlybUJ1dHRvbkNsYXNzIiwiZ2V0UHlyYW1pZCIsInAiLCJvcGVuUG9zaXRpb24iLCJyZW1vdmVkUGxheWVyIiwicmVtb3ZlIiwidXBkYXRlZFBsYXllcnMiLCJ1cGRhdGVkUGxheWVyIiwicmVtb3ZlZFBsYXllckZyb21QeXJhbWlkIiwicGxheWVyQ2xpY2siLCJyZWZyZXNoUHlyYW1pZCIsImNoYWxsZW5nZURldGFpbHMiLCJkZXNjcmlwdGlvbiIsImtwVXBkYXRlQWRtaW5zIiwiYWRkZWRBZG1pbnMiLCJjbG9uZURlZXAiLCJkaXNhYmxlU3VibWl0IiwidXNlcklzUHJpbWFyeUFkbWluIiwicHJpbWFyeSIsImdldEF2YWlsYWJsZUFkbWlucyIsInB5cmFtaWRBZG1pbiIsImF2YWlsYWJsZUFkbWluIiwiYXZhaWxhYmxlQWRtaW5zIiwidXBkYXRlUHlyYW1pZCIsImNhbmNlbFVwZGF0ZSIsInJlbW92ZUFkbWluIiwicmVtb3ZlZEFkbWlucyIsImFkZEFkbWluIiwia3BVcGRhdGVQbGF5ZXJzIiwiYWRkZWRQbGF5ZXJzIiwiZ2V0QXZhaWxhYmxlUGxheWVycyIsInB5cmFtaWRQbGF5ZXIiLCJhdmFpbGFibGVQbGF5ZXIiLCJhdmFpbGFibGVQbGF5ZXJzIiwicmVtb3ZlZFBsYXllcnMiLCJyZW9yZGVyUGxheWVycyIsInJlbW92ZVBsYXllciIsImFkZFBsYXllciIsImdldFB5cmFtaWRzRm9yVXNlciIsImNyZWF0ZVB5cmFtaWQiLCJkZWxldGVQeXJhbWlkIiwiY29tcGV0aXRpb24iLCJBZG1pbkN0cmwiLCJpc0FkbWluIiwidXBkYXRlUHlyYW1pZE9wZW5TdGF0dXMiLCJ1cGRhdGVkUHlyYW1pZCIsIkNyZWF0ZVB5cmFtaWRDdHJsIiwibmV3UHlyYW1pZCIsIk15UHlyYW1pZHNDdHJsIiwibXlQeXJhbWlkcyIsImFjdGl2ZUNoYWxsZW5nZSIsIlB5cmFtaWRDdHJsIiwiUHlyYW1pZHNDdHJsIiwiU3RhdHNDdHJsIiwicGxheWVyc1Jlc3VsdHMiLCJVc2VyQ3RybCIsImNPdmVyZmxvdyIsImxpbmtGdW5jIiwiZWxlbWVudCIsImF0dHJzIiwiaGFzQ2xhc3MiLCJsaW5rIiwidG9nZ2xlU3VibWVudSIsImVsIiwiY2xpY2siLCJuZXh0Iiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsIndhdmVzRWZmZWN0IiwiV2F2ZXMiLCJhdHRhY2giLCJpbml0IiwiZmdMaW5lIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzRmxvYXRMYWJlbCIsImZvY3VzIiwiYWRkQ2xhc3MiLCJibHVyIiwidmFsIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFlBQ0Esc0JBQ0EsYUFDQSx3QkFDQSxRQUNBLHFCQUNBLHdCQUNBLHNCQ1ZBLHdCQUlBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFGLEVBQUFHLFNBQUFDLFFBQUFDLE1BQ0FMLEVBQUFHLFNBQUFDLFFBQUFDLFFBR0FMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEscUJBQUEsZ0NBRUFMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEsaUJBQUEsV0FDQUwsRUFBQUcsU0FBQUMsUUFBQUMsSUFBQSxPQUFBLFdBRUFKLEVBQUFLLFNBQUFDLGNBQUEsSUFDQUwsRUFBQU0sNEJBQUEsa0VBZEFYLFFBQUFDLE9BQUEsT0FBQVcsT0FBQVYsTUNGQSx1QkFJQSxTQUFBVyxHQUFBQyxFQUFBQyxHQVFBLFFBQUFDLEdBQUFDLEdBQ0FGLEVBQUFHLElBQUEsZ0JBQUFELEdBUkEsR0FBQUUsR0FBQUMsSUFFQUQsR0FBQUwsT0FBQUEsRUFFQUssRUFBQUUsWUFBQU4sRUFBQVAsSUFBQSxpQkFDQVcsRUFBQUgsb0JBQUFBLDZDQVJBaEIsUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxVQUFBVCxNQ0ZBLHVCQUlBLFNBQUFV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QUEsSUFDQThSLEtBQUFKLEVBR0EsT0FBQTdSLEdBVkF0SCxRQUNBQyxPQUFBLE9BQ0FxSCxVQUFBLFNBQUE2UyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAndWkucm91dGVyJyxcbiAgJ3VpLmJvb3RzdHJhcCcsXG4gICduZ0FuaW1hdGUnLFxuICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICdub3Vpc2xpZGVyJyxcbiAgJ2xvY2FseXRpY3MuZGlyZWN0aXZlcycsXG4gICd0aW1lcicsXG4gICdMb2NhbFN0b3JhZ2VNb2R1bGUnLFxuICAnYW5ndWxhci1zb3J0YWJsZS12aWV3JyxcbiAgJ2FuZ3VsYXIudmVydGlsaXplJ1xuXSk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QgJztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhjb25maWd1cmF0aW9uKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmF0aW9uKCRodHRwUHJvdmlkZXIsICR1aWJUb29sdGlwUHJvdmlkZXIsICRxUHJvdmlkZXIpIHtcbiAgICAvL2luaXRpYWxpemUgZ2V0IGlmIG5vdCB0aGVyZVxuICAgIGlmICghJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldCkge1xuICAgICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldCA9IHt9OyAgICBcbiAgICB9ICAgIFxuICAgIC8vZGlzYWJsZSBJRSBhamF4IHJlcXVlc3QgY2FjaGluZ1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ0lmLU1vZGlmaWVkLVNpbmNlJ10gPSAnRnJpLCAwMSBKYW4gMjAxNiAwNTowMDowMCBHTVQnO1xuICAgIC8vIGV4dHJhXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnQ2FjaGUtQ29udHJvbCddID0gJ25vLWNhY2hlJztcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydQcmFnbWEnXSA9ICduby1jYWNoZSc7XG5cbiAgICAkdWliVG9vbHRpcFByb3ZpZGVyLm9wdGlvbnMoeyBhcHBlbmRUb0JvZHk6IHRydWUgfSk7XG4gICAgJHFQcm92aWRlci5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyhmYWxzZSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQXBwQ3RybCcsIEFwcEN0cmwpO1xuXG4gIGZ1bmN0aW9uIEFwcEN0cmwoJHN0YXRlLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XG4gICAgdmFyIGFwcEN0cmwgPSB0aGlzO1xuICAgIC8vIFVzZSB0aGlzIGZvciBTaWRlYmFyIG1lbnVcbiAgICBhcHBDdHJsLiRzdGF0ZSA9ICRzdGF0ZTtcbiAgICAvLyBMb2NrIHRoZSBzaWRlYmFyIGluIHZpZXdcbiAgICBhcHBDdHJsLmxvY2tTaWRlYmFyID0gbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ3NpZGViYXJMb2NrZWQnKTtcbiAgICBhcHBDdHJsLnRvZ2dsZVNpZGViYXJMb2NrZWQgPSB0b2dnbGVTaWRlYmFyTG9ja2VkO1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhckxvY2tlZChsb2NrZWQpIHtcbiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdzaWRlYmFyTG9ja2VkJywgbG9ja2VkKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyZVJvdXRlcyk7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlUm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgdmFyIHJvdXRlUm9sZUNoZWNrcyA9IHtcbiAgICAgIHN1cGVyQWRtaW46IHJlcXVpcmVTdXBlckFkbWluLFxuICAgICAgYWRtaW46IHJlcXVpcmVBZG1pbixcbiAgICAgIHVzZXI6IHJlcXVpcmVBdXRoXG4gICAgfTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vIGZvciBhbnkgdW5tYXRjaGVkIHVybFxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvcHlyYW1pZHMvJywgJy9weXJhbWlkcycpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzJywge1xuICAgICAgICB1cmw6ICcvcHlyYW1pZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMubXlQeXJhbWlkcycsIHtcbiAgICAgICAgdXJsOiAnL215LXB5cmFtaWRzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlQeXJhbWlkc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9teS1weXJhbWlkcy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICB1cmw6ICcvdmlldy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvcHlyYW1pZC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLnN0YXRzJywge1xuICAgICAgICB1cmw6ICcvc3RhdHMvOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTdGF0c0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9zdGF0cy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLmFkbWluJywge1xuICAgICAgICB1cmw6ICcvYWRtaW4vOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9hZG1pbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy5jcmVhdGUnLCB7XG4gICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDcmVhdGVQeXJhbWlkQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL2NyZWF0ZS1weXJhbWlkLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3VzZXInLCB7XG4gICAgICAgIHVybDogJy91c2VyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3VzZXJzL3ZpZXdzL3VzZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvbG9naW4uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmeScsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmaWNhdGlvbicsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbi86dXNlcklkLzp2ZXJpZmljYXRpb25Ub2tlbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0LXJlcXVlc3QnLCB7XG4gICAgICAgIHVybDogJy9wYXNzd29yZC1yZXNldCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3dvcmRSZXNldEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0Jywge1xuICAgICAgICB1cmw6ICcvcGFzc3dvcmQtcmVzZXQvOnVzZXJJZC86dmVyaWZpY2F0aW9uVG9rZW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bhc3N3b3JkUmVzZXRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcGFzc3dvcmQtcmVzZXQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcmVxdWlyZUFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gIH1cblxuICByZXF1aXJlU3VwZXJBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVTdXBlckFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ3N1cGVyLWFkbWluJyk7XG4gIH1cblxuICByZXF1aXJlQXV0aC4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5ydW4oYXBwUnVuKTtcblxuICBmdW5jdGlvbiBhcHBSdW4oJHJvb3RTY29wZSwgJHN0YXRlLCBzaWRlYmFyU2VydmljZSkge1xuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciA9PT0gJ25vdCBhdXRob3JpemVkJykge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IHRvU3RhdGU7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gdG9QYXJhbXM7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBhdXRoU2VydmljZSgkc3RhdGUsICRodHRwLCAkcSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgYXV0aGVudGljYXRlVXNlcjogYXV0aGVudGljYXRlVXNlcixcbiAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIsXG4gICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGU6IGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUsXG4gICAgICBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlOiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAndW52ZXJpZmllZCcpIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZSgndW52ZXJpZmllZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICB1c2VyRGF0YTogdXNlckRhdGFcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVhc29uID09PSAnRXJyb3I6IER1cGxpY2F0ZSBVc2VybmFtZScpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdTb3JyeSwgYW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoYXQgZW1haWwgYWRkcmVzcy4nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvbG9nb3V0Jywge1xuICAgICAgICBsb2dvdXQ6IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZShyb2xlKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aG9yaXplZChyb2xlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCd1c2VyU2VydmljZScsIHVzZXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiB1c2VyU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzLFxuICAgICAgdmVyaWZ5VXNlcjogdmVyaWZ5VXNlcixcbiAgICAgIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbms6IGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmssXG4gICAgICByZXNldFBhc3N3b3JkOiByZXNldFBhc3N3b3JkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZlcmlmeVVzZXIodXNlcklkLCB2ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VyL3ZlcmlmaWNhdGlvbicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG4gICAgICAgIH1cbiAgICAgIH0pOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VyL3Bhc3N3b3JkL2xpbmsnLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVxuICAgICAgICB9XG4gICAgICB9KTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQodXNlcklkLCB2ZXJpZmljYXRpb25Ub2tlbiwgcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvdXNlci9wYXNzd29yZC9yZXNldCcsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIHZlcmlmaWNhdGlvblRva2VuOiB2ZXJpZmljYXRpb25Ub2tlbixcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9KTsgIFxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBMb2dpbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIExvZ2luQ3RybCgkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdVc2VybmFtZSAvIHBhc3N3b3JkIGNvbWJpbmFpdG9uIGluY29ycmVjdCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlID09PSAndW52ZXJpZmllZCcpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdZb3UgbXVzdCB2ZXJpZnkgeW91ciBlbWFpbCBiZWZvcmUgeW91IGNhbiBsb2dpbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgkc3RhdGUucHJldmlvdXMpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygkc3RhdGUucHJldmlvdXMsICRzdGF0ZS5wcmV2UGFyYW1zKTtcbiAgICAgICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IG51bGw7XG4gICAgICAgICAgICAkc3RhdGUucHJldlBhcmFtcyA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMubXlQeXJhbWlkcycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1Bhc3N3b3JkUmVzZXRDdHJsJywgUGFzc3dvcmRSZXNldEN0cmwpO1xuXG4gIGZ1bmN0aW9uIFBhc3N3b3JkUmVzZXRDdHJsKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCB1c2VyU2VydmljZSwgbm90aWZ5U2VydmljZSwgYXV0aFNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0udXNlcm5hbWUgPSAnJztcbiAgICB2bS52ZXJpZmllZCA9IGZhbHNlO1xuICAgIHZtLnJlc2V0UGFzc3dvcmRGb3JtID0ge307XG4gICAgdm0uZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayA9IGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbms7XG4gICAgdm0ucmVzZXRQYXNzd29yZCA9IHJlc2V0UGFzc3dvcmQ7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSBlbHNlIGlmICgkc3RhdGVQYXJhbXMudXNlcklkICYmICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgICB1c2VyU2VydmljZS52ZXJpZnlVc2VyKCRzdGF0ZVBhcmFtcy51c2VySWQsICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgdm0udmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkge1xuICAgICAgdXNlclNlcnZpY2UuZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignQ291bGQgbm90IGZpbmQgdGhhdCBlbWFpbCBhZGRyZXNzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5zdWNjZXNzKCdQbGVhc2UgY2hlY2sgeW91ciBlbWFpbCBmb3IgYSBwYXNzd29yZCByZXNldCBsaW5rJyk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQocmVzZXRQYXNzd29yZEZvcm0pIHtcbiAgICAgIGlmIChyZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCAhPT0gcmVzZXRQYXNzd29yZEZvcm0uY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlclNlcnZpY2UucmVzZXRQYXNzd29yZCgkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4sIHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHJlc3BvbnNlLmRhdGEudXNlcm5hbWUsIHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIFJlZ2lzdGVyQ3RybCk7XG5cbiAgZnVuY3Rpb24gUmVnaXN0ZXJDdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIobmV3VXNlcikge1xuICAgICAgaWYgKG5ld1VzZXIucGFzc3dvcmQgIT09IG5ld1VzZXIuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlVXNlcihuZXdVc2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3ZlcmlmeScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVmVyaWZpY2F0aW9uQ3RybCcsIFZlcmlmaWNhdGlvbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIFZlcmlmaWNhdGlvbkN0cmwoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS52ZXJpZmllZCA9IHVuZGVmaW5lZDtcbiAgICB2bS52ZXJpZnlpbmcgPSBmYWxzZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMudXNlcklkICYmICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgICB2bS52ZXJpZnlpbmcgPSB0cnVlO1xuICAgICAgICB2bS52ZXJpZmllZCA9IG51bGw7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnZlcmlmeVVzZXIoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twQWN0aXZlQ2hhbGxlbmVnZXMnLCBrcEFjdGl2ZUNoYWxsZW5lZ2VzKTtcblxuICBmdW5jdGlvbiBrcEFjdGl2ZUNoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcHlyYW1pZDogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLnB5cmFtaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5weXJhbWlkKSB7XG4gICAgICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzKCkge1xuICAgICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0ucHlyYW1pZC5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZXMuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BDb21wbGV0ZWRDaGFsbGVuZWdlcycsIGtwQ29tcGxldGVkQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIGtwQ29tcGxldGVkQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbklkOiAnQCcsXG4gICAgICAgIGFsbG93RGVsZXRlOiAnPScsXG4gICAgICAgIGNoYWxsZW5nZXM6ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsICRzdGF0ZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcbiAgICB2bS5kZWxldGVDaGFsbGVuZ2UgPSBkZWxldGVDaGFsbGVuZ2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jaGFsbGVuZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh2bS5jaGFsbGVuZ2VzICYmIHZtLmNoYWxsZW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzKCkge1xuICAgICAgXy5mb3JFYWNoKHZtLmNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgY2hhbGxlbmdlLmxvc2VyID0gY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInID8gJ29wcG9uZW50JyA6ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgY2hhbGxlbmdlLndoZW5Db21wbGV0ZWQgPSBtb21lbnQoY2hhbGxlbmdlLmNvbXBsZXRlZCkuY2FsZW5kYXIobnVsbCwge1xuICAgICAgICAgIHNhbWVEYXk6ICdbVG9kYXldJyxcbiAgICAgICAgICBuZXh0RGF5OiAnW1RvbW9ycm93XScsXG4gICAgICAgICAgbmV4dFdlZWs6ICdkZGRkJyxcbiAgICAgICAgICBsYXN0RGF5OiAnW1llc3RlcmRheV0nLFxuICAgICAgICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQnLFxuICAgICAgICAgIHNhbWVFbHNlOiAnREQvTU0vWVlZWSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlSWQsICRpbmRleCkge1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZGVsZXRlQ2hhbGxlbmdlKHZtLmNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZUlkKS50aGVuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMuc3BsaWNlKCRpbmRleCwgMSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twUGxheWVyT3ZlcmFsbFJlc3VsdHMnLCBrcFBsYXllck92ZXJhbGxSZXN1bHRzKTtcblxuICBmdW5jdGlvbiBrcFBsYXllck92ZXJhbGxSZXN1bHRzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcGxheWVyOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm1heExldmVscyA9IDEwO1xuICAgIHZtLndpbnMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLmxvc2VzID0ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhc0NoYWxsZW5nZXI6IDAsXG4gICAgICBhc09wcG9uZW50OiAwLFxuICAgICAgYnlGb3JmZWl0OiAwXG4gICAgfTtcbiAgICB2bS5zdHJlYWsgPSB7XG4gICAgICB0eXBlOiBudWxsLFxuICAgICAgdmFsdWU6IDBcbiAgICB9O1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0ucGxheWVyLnJlc3VsdHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5wbGF5ZXIpIHtcbiAgICAgICAgICBhc3NpZ25wbGF5ZXJzVG9MZXZlbHModm0ucGxheWVyKTtcbiAgICAgICAgICBjYWxjdWxhdGVTdHJlYWsodm0ucGxheWVyKTtcbiAgICAgICAgICBjYWxjdWF0ZVdpbkFuZExvc2VzKHZtLnBsYXllcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzc2lnbnBsYXllcnNUb0xldmVscyhwbGF5ZXIpIHtcbiAgICAgIC8vIERldGVybWluZSBhbGwgdGhlIGJyZWFrIHBvaW50cyB0byBmaWd1cmUgb3V0IGxldmVsc1xuICAgICAgdmFyIGJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLm1heExldmVsczsgaSsrKSB7XG4gICAgICAgIGJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlZmF1bHQgYWxsIHBsYXllcnMgdG8gdGhlIGxvd2VzdCBsZXZlbFxuICAgICAgcGxheWVyLmxldmVsID0gYnJlYWtQb2ludHMubGVuZ3RoO1xuICAgICAgLy8gTm93IGNoZWNrIHRvIHNlZSBpZiB0aGUgcGxheWVyIGlzIGF0IGEgaGlnaGVyIGxldmVsXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJyZWFrUG9pbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPCBicmVha1BvaW50c1tqICsgMV0pIHtcbiAgICAgICAgICBwbGF5ZXIubGV2ZWwgPSBicmVha1BvaW50cy5pbmRleE9mKGJyZWFrUG9pbnRzW2pdKSArIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTdHJlYWsocGxheWVyKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSBwbGF5ZXIncyBjdXJyZW50IHN0cmVha1xuICAgICAgdmFyIHN0cmVhayA9IDA7XG4gICAgICB2YXIgY29udGludWVTdHJlYWsgPSB0cnVlO1xuICAgICAgdmFyIHN0cmVha1R5cGU7XG4gICAgICBfLmZvckVhY2gocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgaWYgKGNvbnRpbnVlU3RyZWFrKSB7XG4gICAgICAgICAgLy8gV2lubmluZyBTdHJlYWtcbiAgICAgICAgICBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQpIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSBsb3Npbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIHdpbm5pbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ2xvc2luZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnd2lubmluZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIExvc2luZyBTdHJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IG9uIGEgd2lubmluZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgbG9zaW5nIHN0cmVha1xuICAgICAgICAgICAgaWYgKHN0cmVha1R5cGUgIT09ICd3aW5uaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICdsb3NpbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWVTdHJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdm0uc3RyZWFrID0ge1xuICAgICAgICAgIHR5cGU6IHN0cmVha1R5cGUsXG4gICAgICAgICAgdmFsdWU6IHN0cmVha1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VhdGVXaW5BbmRMb3NlcyhwbGF5ZXIpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgd2lucyBhbmQgbG9zZXNcbiAgICAgIHZtLndpbnMuYXNPcHBvbmVudCA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50J1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLmFzQ2hhbGxlbmdlciA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy50b3RhbCA9IHZtLndpbnMuYXNDaGFsbGVuZ2VyICsgdm0ud2lucy5hc09wcG9uZW50O1xuXG4gICAgICB2bS53aW5zLmJ5Rm9yZmVpdCA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykgfHxcbiAgICAgICAgICAoY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSlcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNPcHBvbmVudCA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLmFzQ2hhbGxlbmdlciA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLnRvdGFsID0gdm0ubG9zZXMuYXNDaGFsbGVuZ2VyICsgdm0ubG9zZXMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ubG9zZXMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JykgfHxcbiAgICAgICAgICAoY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdjaGFsbGVuZ2VzU2VydmljZScsIGNoYWxsZW5nZXNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBjaGFsbGVuZ2VzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY3JlYXRlQ2hhbGxlbmdlOiBjcmVhdGVDaGFsbGVuZ2UsXG4gICAgICBjb21wbGV0ZUNoYWxsZW5nZTogY29tcGxldGVDaGFsbGVuZ2UsXG4gICAgICBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXI6IGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcixcbiAgICAgIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyLFxuICAgICAgZGVsZXRlQ2hhbGxlbmdlOiBkZWxldGVDaGFsbGVuZ2UsXG4gICAgICBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbjogZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb25cbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL2NyZWF0ZScsIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9jb21wbGV0ZScsICB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXInLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBsaW1pdCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBsZXRlZC9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXIvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQ2hhbGxlbmdlKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZUlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NoYWxsZW5nZXMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjaGFsbGVuZ2VJZDogY2hhbGxlbmdlSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9yZXN1bHRzL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BGb290ZXInLCBrcEZvb3Rlcik7XG5cbiAgZnVuY3Rpb24ga3BGb290ZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9mb290ZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIHZtLmxvZ291dCA9IGxvZ291dDtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BIZWFkZXInLCBrcEhlYWRlcik7XG5cbiAgZnVuY3Rpb24ga3BIZWFkZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ2hlYWRlckN0cmwnLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2hlYWRlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIHNpZGViYXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBhbGVydHNTZXJ2aWNlKSB7XG4gICAgdmFyIGhlYWRlckN0cmwgPSB0aGlzO1xuICAgIGhlYWRlckN0cmwuaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIGhlYWRlckN0cmwubG9nb3V0ID0gbG9nb3V0O1xuICAgIGhlYWRlckN0cmwuc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcbiAgICBoZWFkZXJDdHJsLnRvZ2dsZVNpZGViYXIgPSB0b2dnbGVTaWRlYmFyO1xuICAgIGhlYWRlckN0cmwuY2xlYXJBbGVydCA9IGNsZWFyQWxlcnQ7XG4gICAgaGVhZGVyQ3RybC5jbGVhckFsbEFsZXJ0cyA9IGNsZWFyQWxsQWxlcnRzO1xuICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgICRzY29wZS4kd2F0Y2goJ2hlYWRlckN0cmwuaW5kZW50aXR5LmN1cnJlbnRVc2VyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgZ2V0QWN0aXZlQWxlcnRzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUFsZXJ0cygpIHtcbiAgICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGFsZXJ0c1NlcnZpY2UuZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoYWxlcnRzKSB7XG4gICAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBhbGVydHMuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJBbGVydChjbGVhckFsZXJ0LCBpbmRleCkge1xuICAgICAgYWxlcnRzU2VydmljZS5jbGVhckFsZXJ0KGNsZWFyQWxlcnQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJBbGxBbGVydHMoKSB7XG4gICAgICBhbGVydHNTZXJ2aWNlLmNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyghaGVhZGVyQ3RybC5zaWRlYmFyU3RhdHVzLmxlZnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czp1cGRhdGVfYWxlcnRzJywgZnVuY3Rpb24gKGUsIGFsZXJ0cykge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBfLnNvbWUoYWxlcnRzLCBbJ3VzZXJJZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKSkge1xuICAgICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BTaWRlYmFyJywga3BTaWRlYmFyKTtcblxuICBmdW5jdGlvbiBrcFNpZGViYXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3NpZGViYXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmlsdGVyKCdvcmRlck9iamVjdEJ5Jywgb3JkZXJPYmplY3RCeSk7XG5cbiAgZnVuY3Rpb24gb3JkZXJPYmplY3RCeSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBhdHRyaWJ1dGUpIHtcbiAgICAgIGlmICghYW5ndWxhci5pc09iamVjdChpbnB1dCkpIHJldHVybiBpbnB1dDtcblxuICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICBmb3IgKHZhciBvYmplY3RLZXkgaW4gaW5wdXQpIHtcbiAgICAgICAgYXJyYXkucHVzaChpbnB1dFtvYmplY3RLZXldKTtcbiAgICAgIH1cblxuICAgICAgYXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBhID0gcGFyc2VJbnQoYVthdHRyaWJ1dGVdKTtcbiAgICAgICAgYiA9IHBhcnNlSW50KGJbYXR0cmlidXRlXSk7XG4gICAgICAgIHJldHVybiBhIC0gYjtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnYWxlcnRzU2VydmljZScsIGFsZXJ0c1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGFsZXJ0c1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyOiBnZXRBY3RpdmVBbGVydHNCeVBsYXllcixcbiAgICAgIGNsZWFyQWxlcnQ6IGNsZWFyQWxlcnQsXG4gICAgICBjbGVhckFsbEFsZXJ0c0J5UGxheWVyOiBjbGVhckFsbEFsZXJ0c0J5UGxheWVyXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB1bmNsZWFyZWQgYWxlcnRzIGZvciBhIHVzZXIgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgaWQgZm9yIHRoZSB1c2VyXG4gICAgICogQHJldHVybiB7QXJyYXl9IGFsZXJ0c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hbGVydHMvJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIGFsZXJ0cyBhcyBjbGVhcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxlcnRJZCBpZCBmb3IgdGhlIGFsZXJ0XG4gICAgICogQHJldHVybiB7U3RyaW5nfSBTdGF0dXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGVhckFsZXJ0KGFsZXJ0SWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYWxlcnQvY2xlYXInLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0SWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIGFsbCB1bnZpZXdlZCBhbGVydHMgYXMgdmlld2VkIGZvciBhIHVzZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWQgaWQgZm9yIHRoZSB1c2VyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBTdGF0dXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGVhckFsbEFsZXJ0c0J5UGxheWVyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9hbGVydHMvY2xlYXInLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnaWRlbnRpdHlTZXJ2aWNlJywgaWRlbnRpdHlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBpZGVudGl0eVNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBjdXJyZW50VXNlcjtcbiAgICBpZiAoJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICBjdXJyZW50VXNlciA9ICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdDtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKHJvbGUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ25vdGlmeVNlcnZpY2UnLCBub3RpZnlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBub3RpZnlTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgaW5mbzogaW5mbyxcbiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgaW52ZXJzZTogaW52ZXJzZVxuICAgIH07XG5cbiAgICAkLm5vdGlmeURlZmF1bHRzKHtcbiAgICAgIG5ld2VzdF9vbl90b3A6IHRydWUsXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3Njcm9sbGJhclNlcnZpY2UnLCBzY3JvbGxiYXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBzY3JvbGxiYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgbWFsaWh1U2Nyb2xsOiBtYWxpaHVTY3JvbGxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBtYWxpaHVTY3JvbGwoc2VsZWN0b3IsIHRoZW1lLCBzY3JvbGxheGlzLCBtb3VzZXdoZWVsYXhpcykge1xuICAgICAgJChzZWxlY3RvcikubUN1c3RvbVNjcm9sbGJhcih7XG4gICAgICAgIHRoZW1lOiB0aGVtZSxcbiAgICAgICAgc2Nyb2xsSW5lcnRpYTogMTAwLFxuICAgICAgICBheGlzOiBzY3JvbGxheGlzLFxuICAgICAgICBtb3VzZVdoZWVsOiB7XG4gICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgIGF4aXM6IG1vdXNld2hlZWxheGlzLFxuICAgICAgICAgIHByZXZlbnREZWZhdWx0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdzaWRlYmFyU2VydmljZScsIHNpZGViYXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBzaWRlYmFyU2VydmljZSgpIHtcbiAgICB2YXIgc2lkZWJhclN0YXR1cyA9IHtcbiAgICAgIGxlZnQ6IGZhbHNlLFxuICAgICAgcmlnaHQ6IGZhbHNlXG4gICAgfTtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldFNpZGViYXJTdGF0dXM6IGdldFNpZGViYXJTdGF0dXMsXG4gICAgICBzZXRTaWRlYmFyU3RhdHVzOiBzZXRTaWRlYmFyU3RhdHVzXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0U2lkZWJhclN0YXR1cygpIHtcbiAgICAgIHJldHVybiBzaWRlYmFyU3RhdHVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFNpZGViYXJTdGF0dXMoc3RhdHVzKSB7XG4gICAgICBzaWRlYmFyU3RhdHVzLmxlZnQgPSBzdGF0dXM7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3dlYnNvY2tldFNlcnZpY2UnLCB3ZWJzb2NrZXRTZXJ2aWNlKS5ydW4oZnVuY3Rpb24gKHdlYnNvY2tldFNlcnZpY2UpIHtcbiAgICB3ZWJzb2NrZXRTZXJ2aWNlLmNvbm5lY3QoKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gd2Vic29ja2V0U2VydmljZSgkcm9vdFNjb3BlLCAkd2luZG93LCAkdGltZW91dCkge1xuICAgIHZhciBjb25uZWN0aW9uO1xuICAgIHZhciByZXRyeVNlY29uZHMgPSBbMywgMTAsIDEwMCwgMTAwMF07XG4gICAgdmFyIHJldHJ5ID0gMDtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNvbm5lY3Q6IGNvbm5lY3QsXG4gICAgICBzZW5kOiBzZW5kXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gd2Vic29ja2V0SG9zdCgpIHtcbiAgICAgIGlmICgkd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgICAgICByZXR1cm4gJ3dzczovLycgKyAkd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQod2Vic29ja2V0SG9zdCgpKTtcblxuICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXRyeSA9IDA7XG4gICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnRvcGljLCBwYXlsb2FkLmRhdGEpO1xuICAgICAgfTtcblxuICAgICAgY29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmV0cnkgPCByZXRyeVNlY29uZHMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQuIFJlY29ubmVjdGluZy4uLicpO1xuICAgICAgICAgICR0aW1lb3V0KGNvbm5lY3QsIHJldHJ5U2Vjb25kc1tyZXRyeV0qMTAwMCk7XG4gICAgICAgICAgcmV0cnkgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2l2aW5nIHVwIG9uIFdlYlNvY2tldCcpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmQodG9waWMsIGRhdGEpIHtcbiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgY29ubmVjdGlvbi5zZW5kKGpzb24pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICBmdW5jdGlvbiBIb21lQ3RybChweXJhbWlkc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWRzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHMoKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkcykge1xuICAgICAgICB2bS5weXJhbWlkcyA9IHB5cmFtaWRzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twUGVuZGluZ1BsYXllcnMnLCBrcFBlbmRpbmdQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiBrcFBlbmRpbmdQbGF5ZXJzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcHlyYW1pZDogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMocHlyYW1pZHNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5wZW5kaW5nUGxheWVycyA9IFtdO1xuICAgIHZtLmFwcHJvdmVQZW5kaW5nUGxheWVyID0gYXBwcm92ZVBlbmRpbmdQbGF5ZXI7XG4gICAgdm0uZGVueVBlbmRpbmdQbGF5ZXIgPSBkZW55UGVuZGluZ1BsYXllcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiBhcHByb3ZlUGVuZGluZ1BsYXllcihwbGF5ZXIpIHtcbiAgICAgIHBsYXllci5wb3NpdGlvbiA9IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGggKyAxO1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmFwcHJvdmVQZW5kaW5nUGxheWVyKHZtLnB5cmFtaWQuX2lkLCBwbGF5ZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbnlQZW5kaW5nUGxheWVyKHBsYXllcikge1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmRlbnlQZW5kaW5nUGxheWVyKHZtLnB5cmFtaWQuX2lkLCBwbGF5ZXIpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BQeXJhbWlkQ29tcGFjdCcsIGtwUHlyYW1pZENvbXBhY3QpO1xuXG4gIGZ1bmN0aW9uIGtwUHlyYW1pZENvbXBhY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPScsXG5cbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQtY29tcGFjdC5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygpIHtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcFB5cmFtaWQnLCBrcFB5cmFtaWQpO1xuXG4gIGZ1bmN0aW9uIGtwUHlyYW1pZCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3B5cmFtaWRzL2NvbXBvbmVudHMvcHlyYW1pZC5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPSdcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsICRzdGF0ZSwgcHlyYW1pZHNTZXJ2aWNlLCAkZmlsdGVyLCBub3RpZnlTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIG1heExldmVscyA9IDEwO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0uYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgdm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgdm0uYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQgPSBudWxsO1xuICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSBmYWxzZTtcbiAgICB2bS5jcmVhdGVDaGFsbGVuZ2UgPSBjcmVhdGVDaGFsbGVuZ2U7XG4gICAgdm0uY29tcGxldGVDaGFsbGVuZ2UgPSBjb21wbGV0ZUNoYWxsZW5nZTtcbiAgICB2bS5jaGFsbGVuZ2VFeHBpcmVkID0gY2hhbGxlbmdlRXhwaXJlZDtcbiAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHt9O1xuICAgIHZtLnB5cmFtaWRNZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgdm0uYWRkQ3VycmVudFVzZXJUb1B5cmFtaWQgPSBhZGRDdXJyZW50VXNlclRvUHlyYW1pZDtcbiAgICB2bS5jb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCA9IGNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkO1xuICAgIHZtLnBsYXllckNsaWNrID0gcGxheWVyQ2xpY2s7XG4gICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IDA7XG4gICAgdm0ubWF4UGxheWVycyA9IDA7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICB2bS5tYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLnB5cmFtaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5weXJhbWlkKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9IHZtLnB5cmFtaWQuX2lkO1xuICAgICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICAgICAgICBjYWxjdWxhdGVQeXJhbWlkQmxvY2tzKCk7XG4gICAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3JkZXIgdGhlIHBsYXllcnMgYnkgdGhlIHBvc2l0aW9uIHByb3BlcnR5IG9mIHRoZSBwbGF5ZXJzIGFycmF5IGluIHRoZSBweXJhbWlkIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9yZGVyUGxheWVycygpIHtcbiAgICAgIHZtLnB5cmFtaWQucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5weXJhbWlkLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFBsYXllcnNTdGF0dXMoKSB7XG4gICAgICBcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IGZhbHNlO1xuICAgICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgYW4gYWRtaW4gb2YgdGhpcyBweXJhbWlkXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IF8uc29tZSh2bS5weXJhbWlkLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHBlbmRpbmcgcmVxdWVzdCB0byBqb2luXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gXy5zb21lKHZtLnB5cmFtaWQucGVuZGluZ1BsYXllcnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pO1xuICAgICAgfVxuXG4gICAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gZmFsc2U7XG4gICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgcHlyYW1pZCBhbmQgc2V0IHNvbWUgcHJvcGVydGllc1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIHBsYXllci5faWQgPT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdm0uYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQgPSBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCA/IGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50IDogY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgXy5mb3JFYWNoKGNoYWxsZW5nZXMuZGF0YSwgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuXG4gICAgICAgICAgdmFyIGNoYWxsZW5nZXIgPSBfLmZpbmQodm0ucHlyYW1pZC5wbGF5ZXJzLCB7ICdfaWQnOiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgfSk7XG4gICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgY2hhbGxlbmdlci5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2NoYWxsZW5nZXInXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvcHBvbmVudCA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5vcHBvbmVudC5faWQgfSk7XG4gICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSAndW5hdmFpbGFibGUnO1xuICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnb3Bwb25lbnQnXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFRyYWNrIHdoZW4gdGhlIGNoYWxsZW5nZSB3aWxsIGV4cGlyZVxuICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCAncycpICogLTE7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGhhcyBub3QgeWV0IGV4cGlyZWQgZGlzcGxheSBhIGNvdW50ZG93biBvbiB0aGUgb3Bwb25lbnRcbiAgICAgICAgICAgIGlmICh0aW1lVG9FeHBpcmUgPiAwKSB7XG4gICAgICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZS5leHBpcmVzID0gdGltZVRvRXhwaXJlO1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGV4cGlyZWQgd2hpbGUgbm8gb25lIHdhcyB2aWV3aW5nIHRoaXMgcHlyYW1pZCBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIGJ5IGZvcmZlaXRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVRvRXhwaXJlIDw9IDApIHtcbiAgICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgb3Bwb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE5vdyB0aGF0IHdlIGtub3cgd2hpY2ggcGxheWVycyBhcmUgaW4gY2hhbGxlbmdlcyBhbmQgd2hpY2ggYXJlbid0XG4gICAgICAgIC8vIGZpbmQgdGhlIGF2YWlsYWJsZSBjaGFsbGVuZ2VzIGZvciB0aGlzIHVzZXJcbiAgICAgICAgZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hlcmUgdG8gc3RhcnQgZWFjaCBuZXcgcm93IG9uIHRoZSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQnJlYWtQb2ludHMoKSB7XG4gICAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICB2bS5icmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdpdmUgZWFjaCBwbGF5ZXIgYSBsZXZlbCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgYnJlYWsgcG9pbnRzXG4gICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdobyBvdGhlciBwbGF5ZXJzIGNhbiBjaGFsbGVuZ2VcbiAgICBmdW5jdGlvbiBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKSB7XG4gICAgICB2YXIgbGV2ZWwgPSAwO1xuICAgICAgdm0ubGV2ZWxzID0gW107XG4gICAgICBjcmVhdGVCcmVha1BvaW50cygpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5weXJhbWlkLnBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZtLmJyZWFrUG9pbnRzLmluZGV4T2YoaSArIDEpID4gLTEpIHtcbiAgICAgICAgICBsZXZlbCArPSAxO1xuICAgICAgICAgIC8vIFNldCB0aGUgbnVtYmVyIG9mIHRvdGFsIGxldmVsc1xuICAgICAgICAgIHZtLmxldmVscy5wdXNoKGxldmVsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWxcbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzW2ldLmxldmVsID0gbGV2ZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSG93IG1hbnkgdG90YWwgYmxvY2tzIGluIHRoaXMgcHlyYW1pZFxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gXy5sYXN0KHZtLmxldmVscyk7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgcHlyYW1pZCB3aXRoIGVtcHR5IGJsb2Nrc1xuICAgIGZ1bmN0aW9uIGZpbGxJbkVtcHR5QmxvY2tzKCkge1xuICAgICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDsgaSA8IHZtLm51bWJlck9mQmxvY2tzOyBpKyspIHtcbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzLnB1c2goe1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0VtcHR5JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1Nwb3QnLFxuICAgICAgICAgIHBvc2l0aW9uOiA5OSxcbiAgICAgICAgICBjbGFzczogJ2VtcHR5J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGhhdmUgdG8gZ2l2ZSBsZXZlbHMgdG8gdGhlIG5ldyBlbXB0eSBzcG90c1xuICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdGhlIHBsYXllcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIGJlIGNoYWxsZW5nZWQgYnkgdGhpcyB1c2VyXG4gICAgZnVuY3Rpb24gZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKSB7XG4gICAgICBpZiAodm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCAmJiAhdm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgIHZhciBsZXZlbEFib3ZlID0gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgPiAxID8gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgLSAxIDogbnVsbDtcbiAgICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgIGlmIChwbGF5ZXIubGV2ZWwgPT09IGxldmVsQWJvdmUgJiYgcGxheWVyLnBvc2l0aW9uICE9PSA5OSAmJiBwbGF5ZXIuY2xhc3MgIT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgcGxheWVyLmF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnYXZhaWxhYmxlJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZShwbGF5ZXIpIHtcbiAgICAgIGlmICghcGxheWVyLmF2YWlsYWJsZSkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdTb3JyeSwgdGhhdCBpcyBub3QgYSB2YWxpZCBjaGFsbGVuZ2UuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICB2YXIgY2hhbGxlbmdlID0ge1xuICAgICAgICAgIGNvbXBldGl0aW9uTmFtZTogdm0ucHlyYW1pZC5uYW1lLFxuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IHZtLmNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgIGZvcmZlaXQ6IGZhbHNlLFxuICAgICAgICAgIHRpbWVMaW1pdDogdm0ucHlyYW1pZC5mb3JmZWl0RGF5cyxcbiAgICAgICAgICBjaGFsbGVuZ2VyOiB7XG4gICAgICAgICAgICBfaWQ6IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiB2bS5jdXJyZW50VXNlclBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHBvbmVudDoge1xuICAgICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZW1haWw6IHBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogcGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBweXJhbWlkXG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLnB5cmFtaWRNZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wbGV0ZSBhIGNoYWxsZW5nZSBieSBhIHVzZXIgaW50ZXJhY3Rpb24gb3IgYSBmb3JmZWl0XG4gICAgICogXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gd2lubmVySXNDdXJyZW50VXNlclxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IGZvcmZlaXRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGZvcmZlaXRMb3NlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2hhbGxlbmdlKHdpbm5lcklzQ3VycmVudFVzZXIsIGZvcmZlaXQsIGZvcmZlaXRMb3Nlcikge1xuICAgICAgdmFyIHBsYXllciA9IGZvcmZlaXRMb3NlciB8fCB2bS5jdXJyZW50VXNlclBsYXllcjtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHN3YXBQb3NpdGlvbnMgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZvcmZlaXRcbiAgICAgICAgaWYgKGZvcmZlaXQpIHtcbiAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5mb3JmZWl0ID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoZm9yZmVpdExvc2VyLmNoYWxsZW5nZS5wb3NpdGlvbiA9PT0gJ29wcG9uZW50Jykge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hvIHRoZSB3aW5uZXIgd2FzIHRvIHN0b3JlIGluIHRoZSBjaGFsbGVuZ2UgcmVjb3JkXG4gICAgICAgIH0gZWxzZSBpZiAod2lubmVySXNDdXJyZW50VXNlcikge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN3YXAgcG9zaXRpb25zIGFuZCB0aGVuIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2Ugb3IganVzdCBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIHB5cmFtaWRcbiAgICAgICAgaWYgKHN3YXBQb3NpdGlvbnMpIHtcbiAgICAgICAgICBweXJhbWlkc1NlcnZpY2Uuc3dhcFBvc2l0aW9ucyh2bS5jb21wZXRpdGlvbklkLCBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudCwgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZpbmdDdXJyZW50VXNlcikge1xuICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2bS5weXJhbWlkTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBjb21wbGV0ZSBjaGFsbG5nZSBmdW5jdGlvbiB3aXRoIHRoZSBmb3JmZWl0aW5nIHBsYXllclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhbGxlbmdlRXhwaXJlZChwbGF5ZXIpIHtcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHBsYXllcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGN1cnJlbnQgdXNlciB0aGUgcHlyYW1pZCBcbiAgICAgKiBpZiB0aGV5J3JlIG5vdCBhbHJlYWR5IG9uIGl0IGFuZCB0aGVyZSdzIHNwYWNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQ3VycmVudFVzZXJUb1B5cmFtaWQoKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGlmICh2bS5udW1iZXJPZlJlYWxQbGF5ZXJzIDwgdm0ubWF4UGxheWVycykge1xuICAgICAgICAgIHZhciBwbGF5ZXIgPSB7XG4gICAgICAgICAgICBfaWQ6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzICsgMVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHZtLnB5cmFtaWQub3Blbikge1xuICAgICAgICAgICAgc3dhbCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAnSm9pbiBDb21wZXRpdGlvbj8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnWW91XFwnbGwgYmUgYWRkZWQgdG8gdGhlIGJvdHRvbScsXG4gICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdKb2luJyxcbiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBweXJhbWlkc1NlcnZpY2UuYWRkUGxheWVyVG9QeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllcik7XG4gICAgICAgICAgICAgIHN3YWwoJ1dlbGNvbWUgQWJvYXJkIScsICdOb3cgc3RhcnQgZmlnaHRpbmcgeW91ciB3YXkgdG8gdGhlIHRvcCcsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgdGl0bGU6ICdTZW5kIEpvaW4gUmVxdWVzdD8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnVGhpcyBpcyBhIGNsb3NlZCBjb21wZXRpdGlvbiBzbyBhbiBhZG1pbiBtdXN0IGFwcHJvdmUgeW91ciByZXF1ZXN0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgUmVxdWVzdCcsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLmFkZFBsYXllclRvUHlyYW1pZFJlcXVlc3Qodm0ucHlyYW1pZCwgcGxheWVyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBzd2FsKCdSZXF1ZXN0IFNlbnQnLCAnWW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCBvbmNlIGFuIGFkbWluIHByb2Nlc3NlcyB0aGUgcmVxdWVzdC4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnU29ycnksIHRoaXMgcHlyYW1pZCBpcyBmdWxsJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnUGxlYXNlIGxvZ2luIHRvIGpvaW4gYSBjb21wZXRpdGlvbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSAncHlyYW1pZHMudmlldyc7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0geydjb21wZXRpdGlvbklkJzogdm0uY29tcGV0aXRpb25JZH07XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpIHtcbiAgICAgIHN3YWwoe1xuICAgICAgICB0aXRsZTogJ0xlYXZlIFB5cmFtaWQ/JyxcbiAgICAgICAgdGV4dDogJ1lvdSB3aWxsIGxvc2UgeW91ciBzcG90IGFuZCBmb3JmZWl0IGFueSBhY3RpdmUgY2hhbGxlbmdlcy4nLFxuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcywgbGVhdmUnLFxuICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4tZGFuZ2VyJyxcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05vLCBzdGF5JyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKTtcbiAgICAgICAgc3dhbCgnT0ssIHlvdVxcJ3Igb3V0IScsICdZb3VcXCd2ZSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcHlyYW1pZC4nLCAnc3VjY2VzcycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVXNlIHRoaXMgdG8gZW5mb3JjZSBvcmRlciBvZiBvcGVyYXRpb25zIHdoZW4gdGhlIHBsYXllciB0byBiZSByZW1vdmVkIGhhZCBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgdmFyIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBvbiB0aGlzIHB5cmFtaWRcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCkge1xuICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gdHJ1ZTtcbiAgICAgICAgLy8gRm9yZmVpdCBpZiB0aGV5IGhhdmUgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICBpZiAodm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgdm0uY3VycmVudFVzZXJQbGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIHdlIGFyZSByZW1vdmluZyB0aGVtIC4uLlxuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQgPSBmYWxzZTtcbiAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEdldCBhbiB1cGRhdGVkIGNvcHkgb2YgdGhlIHB5cmFtaWQgaW5jYXNlIGEgZm9yZmVpdCBoYXBwZW5lZFxuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSB1cGRhdGVkIGNvcHkgbG9jYWxseSBzbyBhcyBub3QgdG8gZGlzdHJ1cHQgdGhlIHB5cmFtaWRcbiAgICAgICAgICAgIC8vIHVudGlsIHRoZSBwbGF5ZXIgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgdmFyIHB5cmFtaWQgPSBwLmRhdGE7XG5cbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIHNwb3QgdGhleSB3ZXJlIGluIG9uIHRoZSBweXJhbWlkXG4gICAgICAgICAgICB2YXIgb3BlblBvc2l0aW9uID0gdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb247XG5cbiAgICAgICAgICAgIC8vIE1vdmUgYWxsIHRoZSBwbGF5ZXJzIHVwIDEgcG9zaXRpb24gdGhhdCB3ZXJlIGJlaGluZCB0aGUgcmVtb3ZlZCBwbGF5ZXJcbiAgICAgICAgICAgIF8uZm9yRWFjaChweXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA+PSBvcGVuUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucG9zaXRpb24gLT0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZWQgdGhlIHBsYXllciBmcm9tIHRoZSBweXJhbWlkXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFBsYXllciA9IF8ucmVtb3ZlKHB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICByZXR1cm4gcGxheWVyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgYSBuZXcgYXJyYXkgb2YgYWxsIHRoZSBwbGF5ZXJzIHN0aWxsIG9uIHRoZSBweXJhbWlkXG4gICAgICAgICAgICAvLyBvbmx5IHVzZSB0aGUgcHJvcGVydGllcyB3ZSB3YW50IHRvIHN0b3JlIGluIHRoZSBweXJhbWlkIGRvY3VtZW50XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyAtIDE7ICsraSkge1xuICAgICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllciA9IHtcbiAgICAgICAgICAgICAgICBfaWQ6IHB5cmFtaWQucGxheWVyc1tpXS5faWQsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBweXJhbWlkLnBsYXllcnNbaV0uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBweXJhbWlkLnBsYXllcnNbaV0ubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHB5cmFtaWQucGxheWVyc1tpXS5wb3NpdGlvblxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHVwZGF0ZWRQbGF5ZXJzLnB1c2godXBkYXRlZFBsYXllcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENhbGwgc2VydmljZSB0byByZW1vdmUgdGhlIHBsYXllclxuICAgICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLnJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZCh2bS5jb21wZXRpdGlvbklkLCByZW1vdmVkUGxheWVyWzBdLCB1cGRhdGVkUGxheWVycykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGF0IHRoZSBhcHByb3ByaWF0ZSBhY3Rpb24gaXMgYmFzZWQgb24gdGhlIHBsYXllciBjbGlja2luZyBhbmQgdGhlIHBsYXllciBiZWluZyBjbGlja2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGxheWVyQ2xpY2socGxheWVyKSB7XG4gICAgICAvLyBjbGlja2VkIG9uIGVtcHR5IHNwb3RcbiAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPT09IDk5ICYmICF2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkKSB7XG4gICAgICAgIGFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkKCk7XG4gICAgICB9XG4gICAgICBpZiAocGxheWVyLmF2YWlsYWJsZSA9PT0gdHJ1ZSAmJiB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkICYmICF2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgc3dhbCh7XG4gICAgICAgICAgdGl0bGU6ICdDaGFsbGVuZ2UgUmVxdWVzdCcsXG4gICAgICAgICAgdGV4dDogJ0NoYWxsZW5nZSAnICsgcGxheWVyLmZpcnN0TmFtZSArICcgJyArIHBsYXllci5sYXN0TmFtZSArICc/JyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgQ2hhbGxlbmdlJyxcbiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3JlYXRlQ2hhbGxlbmdlKHBsYXllcik7XG4gICAgICAgICAgc3dhbCgnQ2hhbGxlbmdlIFNlbnQnLCBwbGF5ZXIuZmlyc3ROYW1lICsgJyAnICsgcGxheWVyLmxhc3ROYW1lICsgJyBoYXMgYmVlbiBub3RpZmllZCBvZiB0aGUgY2hhbGxlbmdlLicsICdzdWNjZXNzJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIHB5cmFtaWQgYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twVXBkYXRlQWRtaW5zJywga3BVcGRhdGVBZG1pbnMpO1xuXG4gIGZ1bmN0aW9uIGtwVXBkYXRlQWRtaW5zKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcHlyYW1pZDogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciByZW1vdmVkQWRtaW5zID0gW107XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICB2bS5hZGRlZEFkbWlucyA9IFtdO1xuICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IGZhbHNlO1xuICAgIHZtLnVwZGF0ZVB5cmFtaWQgPSB1cGRhdGVQeXJhbWlkO1xuICAgIHZtLmNhbmNlbFVwZGF0ZSA9IGNhbmNlbFVwZGF0ZTtcbiAgICB2bS5yZW1vdmVBZG1pbiA9IHJlbW92ZUFkbWluO1xuICAgIHZtLmFkZEFkbWluID0gYWRkQWRtaW47XG4gICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5weXJhbWlkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0ucHlyYW1pZCkge1xuICAgICAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0ucHlyYW1pZC5hZG1pbnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IF8uZmluZCh2bS5weXJhbWlkLmFkbWlucywgeydwcmltYXJ5JzogdHJ1ZX0pLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCA/IHRydWU6IGZhbHNlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZUFkbWlucygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBdmFpbGFibGVBZG1pbnMoKSB7XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBhZG1pbnMgZnJvbSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgYWRtaW5zXG4gICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLmFkbWlucywgZnVuY3Rpb24gKHB5cmFtaWRBZG1pbikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVBZG1pbil7XG4gICAgICAgICAgICByZXR1cm4gcHlyYW1pZEFkbWluLl9pZCA9PT0gYXZhaWxhYmxlQWRtaW4uX2lkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gT25seSB1c2UgY2VydGFpbiBwcm9wZXJ0aWVzIG9mIHRoZSB1c2VyIGZvciB0aGUgYWRtaW4gcmVjb3JkXG4gICAgICAgIF8uZm9yRWFjaCh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlQWRtaW4pIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVBZG1pbnMucHVzaCh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGF2YWlsYWJsZUFkbWluLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhdmFpbGFibGVBZG1pbi5sYXN0TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVBZG1pbi51c2VybmFtZSxcbiAgICAgICAgICAgIF9pZDogYXZhaWxhYmxlQWRtaW4uX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVQeXJhbWlkKCkge1xuICAgICAgdm0ucHlyYW1pZC5hZG1pbnMgPSB2bS5hZGRlZEFkbWlucztcbiAgICAgIHB5cmFtaWRzU2VydmljZS51cGRhdGVQeXJhbWlkKHZtLnB5cmFtaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgIH0pOyAgIFxuICAgIH1cblxuICAgIC8vIENhbmNlbCB0aGUgdXBkYXRlIGFuZCBwdXQgZXZlcnl0aGluZyBiYWNrIHRvIHRoZSBvcmdpbmFsXG4gICAgZnVuY3Rpb24gY2FuY2VsVXBkYXRlKCkge1xuICAgICAgdm0uYWRkZWRBZG1pbnMgPSBfLmNsb25lRGVlcCh2bS5weXJhbWlkLmFkbWlucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBhZG1pbiBmcm9tIHRoZSBweXJhbWlkXG4gICAgICogUXVldWUgdXAgdGhlIGFkbWlucyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkbWluKSB7XG4gICAgICByZW1vdmVkQWRtaW5zLnB1c2goYWRtaW4pO1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goXy5yZW1vdmUodm0uYWRkZWRBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFkbWluIHRvIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEFkbWluKGFkbWluKSB7XG4gICAgICB2bS5hZGRlZEFkbWlucy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZUFkbWlucywge19pZDogYWRtaW4uX2lkfSlbMF0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BVcGRhdGVQbGF5ZXJzJywga3BVcGRhdGVQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiBrcFVwZGF0ZVBsYXllcnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJGZpbHRlciwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UpIHtcbiAgICB2YXIgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2bS5hZGRlZFBsYXllcnMgPSBbXTtcbiAgICB2bS51cGRhdGVQeXJhbWlkID0gdXBkYXRlUHlyYW1pZDtcbiAgICB2bS5jYW5jZWxVcGRhdGUgPSBjYW5jZWxVcGRhdGU7XG4gICAgdm0ucmVvcmRlclBsYXllcnMgPSByZW9yZGVyUGxheWVycztcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0ucHlyYW1pZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnB5cmFtaWQpIHtcbiAgICAgICAgICB2bS5hZGRlZFBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5weXJhbWlkLnBsYXllcnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZVBsYXllcnMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlUGxheWVycygpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHB5cmFtaWRQbGF5ZXIpIHtcbiAgICAgICAgICBfLnJlbW92ZSh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlUGxheWVyKXtcbiAgICAgICAgICAgIHJldHVybiBweXJhbWlkUGxheWVyLl9pZCA9PT0gYXZhaWxhYmxlUGxheWVyLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIHBsYXllciByZWNvcmRcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGF2YWlsYWJsZVBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVQbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBfaWQ6IGF2YWlsYWJsZVBsYXllci5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZVB5cmFtaWQoKSB7XG4gICAgICBfLmZvckVhY2gocmVtb3ZlZFBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0ucHlyYW1pZC5faWQsIHBsYXllci5faWQpO1xuICAgICAgfSk7XG4gICAgICB2bS5weXJhbWlkLnBsYXllcnMgPSB2bS5hZGRlZFBsYXllcnM7XG4gICAgICBweXJhbWlkc1NlcnZpY2UudXBkYXRlUHlyYW1pZCh2bS5weXJhbWlkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICB9KTsgICBcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycyA9IF8uY2xvbmVEZWVwKHZtLnB5cmFtaWQucGxheWVycyk7XG4gICAgfVxuXG4gICAgLy8gUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgZnVuY3Rpb24gcmVvcmRlclBsYXllcnMoKSB7XG4gICAgICB2YXIgaSA9IDE7XG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IGk7XG4gICAgICAgICsraTtcbiAgICAgIH0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwbGF5ZXIgZnJvbSB0aGUgcHlyYW1pZFxuICAgICAqIFF1ZXVlIHVwIHRoZSBwbGF5ZXJzIHRvIGJlIHJlbW92ZWQgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzLnB1c2gocGxheWVyKTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hZGRlZFBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXIocGxheWVyKSB7XG4gICAgICBwbGF5ZXIucG9zaXRpb24gPSB2bS5hZGRlZFBsYXllcnMubGVuZ3RoICsgMTtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3B5cmFtaWRzU2VydmljZScsIHB5cmFtaWRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gcHlyYW1pZHNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRQeXJhbWlkOiBnZXRQeXJhbWlkLFxuICAgICAgZ2V0UHlyYW1pZHNGb3JVc2VyOiBnZXRQeXJhbWlkc0ZvclVzZXIsXG4gICAgICBnZXRQeXJhbWlkczogZ2V0UHlyYW1pZHMsXG4gICAgICBjcmVhdGVQeXJhbWlkOiBjcmVhdGVQeXJhbWlkLFxuICAgICAgdXBkYXRlUHlyYW1pZDogdXBkYXRlUHlyYW1pZCxcbiAgICAgIGRlbGV0ZVB5cmFtaWQ6IGRlbGV0ZVB5cmFtaWQsXG4gICAgICBzd2FwUG9zaXRpb25zOiBzd2FwUG9zaXRpb25zLFxuICAgICAgYWRkUGxheWVyVG9QeXJhbWlkOiBhZGRQbGF5ZXJUb1B5cmFtaWQsXG4gICAgICBhZGRQbGF5ZXJUb1B5cmFtaWRSZXF1ZXN0OiBhZGRQbGF5ZXJUb1B5cmFtaWRSZXF1ZXN0LFxuICAgICAgcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkOiByZW1vdmVkUGxheWVyRnJvbVB5cmFtaWQsXG4gICAgICBhcHByb3ZlUGVuZGluZ1BsYXllcjogYXBwcm92ZVBlbmRpbmdQbGF5ZXIsXG4gICAgICBkZW55UGVuZGluZ1BsYXllcjogZGVueVBlbmRpbmdQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcHlyYW1pZCBmcm9tIHRoZSBkYXRhYmFzZSAob3IgbWVtb3J5KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHB5cmFtaWQgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgcHlyYW1pZFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcHlyYW1pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWQoY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9weXJhbWlkJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIHB5cmFtaWRzIGZyb20gdGhlIGRhdGFiYXNlIHRoYXQgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWRzRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZHMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYWN0aXZlIHB5cmFtaWRzIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHB5cmFtaWRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHlyYW1pZHMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3B5cmFtaWRzJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9jcmVhdGUnLCB7XG4gICAgICAgIHB5cmFtaWQ6IHB5cmFtaWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVB5cmFtaWQocHlyYW1pZCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvdXBkYXRlJywge1xuICAgICAgICBweXJhbWlkOiBweXJhbWlkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQeXJhbWlkKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvcHlyYW1pZHMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2FwUG9zaXRpb25zKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZXIsIG9wcG9uZW50KSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9zd2FwUG9zaXRpb25zJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZChjb21wZXRpdGlvbklkLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL2FkZFBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZFJlcXVlc3QoY29tcGV0aXRpb24sIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvYWRkUGxheWVyUmVxdWVzdCcsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkKGNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXIsIHBsYXllcnMpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcmVtb3ZlZFBsYXllcjogcmVtb3ZlZFBsYXllcixcbiAgICAgICAgcGxheWVyczogcGxheWVyc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9hcHByb3ZlUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVueVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9kZW55UGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FkbWluQ3RybCcsIEFkbWluQ3RybCk7XG5cbiAgZnVuY3Rpb24gQWRtaW5DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRmaWx0ZXIsIHB5cmFtaWRzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0udXBkYXRlUHlyYW1pZE9wZW5TdGF0dXMgPSB1cGRhdGVQeXJhbWlkT3BlblN0YXR1cztcbiAgICB2bS5kZWxldGVQeXJhbWlkID0gZGVsZXRlUHlyYW1pZDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIGlmIChweXJhbWlkLmRhdGEgJiYgXy5zb21lKHB5cmFtaWQuZGF0YS5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgICAgdm0uaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgLy8gRGlzcGxheSB0aGUgcGxheWVycyBpbiB0aGUgcHJvcGVyIG9yZGVyXG4gICAgICAgICAgcHlyYW1pZC5kYXRhLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5JykocHlyYW1pZC5kYXRhLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVQeXJhbWlkT3BlblN0YXR1cygpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRQeXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICB1cGRhdGVkUHlyYW1pZC5vcGVuID0gdm0ucHlyYW1pZC5vcGVuO1xuICAgICAgICBweXJhbWlkc1NlcnZpY2UudXBkYXRlUHlyYW1pZCh1cGRhdGVkUHlyYW1pZCk7XG4gICAgICB9KTsgICAgICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQeXJhbWlkKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdUaGlzIGNhbiBub3QgYmUgdW5kb25lJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLmRlbGV0ZVB5cmFtaWQodm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX2RlbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMubXlQeXJhbWlkcycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIHB5cmFtaWRcbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ3JlYXRlUHlyYW1pZEN0cmwnLCBDcmVhdGVQeXJhbWlkQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlUHlyYW1pZEN0cmwoJHN0YXRlLCB1c2VyU2VydmljZSwgcHlyYW1pZHNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2YXIgbWF4TGV2ZWxzID0gMTA7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5uZXdQeXJhbWlkID0ge1xuICAgICAgcGxheWVyczogW10sXG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZVB5cmFtaWQgPSBjcmVhdGVQeXJhbWlkO1xuICAgIHZtLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0ucmVvcmRlclBsYXllcnMgPSByZW9yZGVyUGxheWVycztcbiAgICB2bS5uZXdQeXJhbWlkLmZvcmZlaXREYXlzID0gMTtcblxuICAgIGFjdGl2YXRlKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogUnVucyBvbiBjb250cm9sbGVyIGluc3RhbnRpYXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHVzZXJzLmRhdGE7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIGJyZWFrIHBvaW50cyBhcnJheVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBweXJhbWlkXG4gICAgICogQ2hlY2tzIHRvIG1ha2Ugc3VyZSB5b3UgYXJlIG5vdCBhZGRpbmcgdG9vIG1hbnkgcGxheWVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgcGxheWVyLnBvc2l0aW9uID0gdm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCArIDE7XG4gICAgICB2bS5hZGRlZFBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwcmV2aXVvc2x5IGFkZGVkIHBsYXllciBmcm9tIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIHRoZSBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBkcmFnLWRyb3BcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUGxheWVycygpIHtcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gaTtcbiAgICAgICAgKytpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgIGVtYWlsOiBwbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvblxuICAgICAgICB9O1xuICAgICAgICBweXJhbWlkLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgfSk7XG4gICAgICBweXJhbWlkLmFkbWlucyA9IFt7XG4gICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICBwcmltYXJ5OiB0cnVlXG4gICAgICB9XTtcblxuICAgICAgLy8gRmlndXJlIG91dCB0aGUgbnVtYmVyIG9mIGxldmVscyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHBsYXllcnNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHB5cmFtaWQucGxheWVycy5sZW5ndGggPCBicmVha1BvaW50c1tpXSkge1xuICAgICAgICAgIHB5cmFtaWQubGV2ZWxzID0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBweXJhbWlkc1NlcnZpY2UuY3JlYXRlUHlyYW1pZChweXJhbWlkKS50aGVuKGZ1bmN0aW9uIChuZXdQeXJhbWlkKSB7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMudmlldycsIHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBuZXdQeXJhbWlkLmRhdGEuX2lkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ015UHlyYW1pZHNDdHJsJywgTXlQeXJhbWlkc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIE15UHlyYW1pZHNDdHJsKCRzY29wZSwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIG15UHlyYW1pZHMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRQeXJhbWlkc0ZvclVzZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkc0ZvclVzZXIoKSB7XG4gICAgICBteVB5cmFtaWRzID0gW107XG4gICAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHNGb3JVc2VyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZHMgPSBweXJhbWlkcy5kYXRhO1xuICAgICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkcywgZnVuY3Rpb24ocHlyYW1pZCkge1xuICAgICAgICAgICAgbXlQeXJhbWlkcy5wdXNoKHB5cmFtaWQuX2lkKTtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihweXJhbWlkLl9pZCwgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICAgIHB5cmFtaWQuYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKHB5cmFtaWQuYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcHlyYW1pZC5hY3RpdmVDaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChweXJhbWlkLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQocHlyYW1pZC5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAobXlQeXJhbWlkcy5pbmRleE9mKGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkgPj0gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIGdldFB5cmFtaWRzRm9yVXNlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1B5cmFtaWRDdHJsJywgUHlyYW1pZEN0cmwpO1xuXG4gIGZ1bmN0aW9uIFB5cmFtaWRDdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHB5cmFtaWRzU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0ucHlyYW1pZCA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuXG4gICAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgICBpZiAocHlyYW1pZC5kYXRhKSB7XG4gICAgICAgICAgICB2bS5weXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX2RlbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMubXlQeXJhbWlkcycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1B5cmFtaWRzQ3RybCcsIFB5cmFtaWRzQ3RybCk7XG5cbiAgZnVuY3Rpb24gUHlyYW1pZHNDdHJsKHB5cmFtaWRzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucHlyYW1pZHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkcygpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdTdGF0c0N0cmwnLCBTdGF0c0N0cmwpO1xuXG4gIGZ1bmN0aW9uIFN0YXRzQ3RybCgkc2NvcGUsICRzdGF0ZVBhcmFtcywgJHN0YXRlLCBweXJhbWlkc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5weXJhbWlkID0ge307XG4gICAgdm0ucGxheWVyc1Jlc3VsdHMgPSBbXTtcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hQeXJhbWlkKCkge1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmdldFB5cmFtaWQodm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAocHlyYW1pZCkge1xuICAgICAgICBpZiAocHlyYW1pZC5kYXRhKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcblxuICAgICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgcGxheWVyLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6cHlyYW1pZF91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVXNlckN0cmwnLCBVc2VyQ3RybCk7XG5cbiAgZnVuY3Rpb24gVXNlckN0cmwoaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnY092ZXJmbG93JywgY092ZXJmbG93KTtcblxuICBmdW5jdGlvbiBjT3ZlcmZsb3coc2Nyb2xsYmFyU2VydmljZSkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBzY3JvbGxheGlzID0gYXR0cnMuc2Nyb2xsYXhpcyB8fCAneSc7XG4gICAgICB2YXIgdGhlbWUgPSBhdHRycy50aGVtZSB8fCAnbWluaW1hbC1kYXJrJztcbiAgICAgIHZhciBtb3VzZXdoZWVsYXhpcyA9IGF0dHJzLm1vdXNld2hlZWxheGlzIHx8ICd5JztcbiAgICAgIGlmICghJCgnaHRtbCcpLmhhc0NsYXNzKCdpc21vYmlsZScpKSB7XG4gICAgICAgIHNjcm9sbGJhclNlcnZpY2UubWFsaWh1U2Nyb2xsKGVsZW1lbnQsIHRoZW1lLCBzY3JvbGxheGlzLCBtb3VzZXdoZWVsYXhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9nZ2xlU3VibWVudScsIHRvZ2dsZVN1Ym1lbnUpO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZVN1Ym1lbnUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCkge1xuICAgICAgZWwuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBlbC5uZXh0KCkuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgZWwucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dhdmVzRWZmZWN0Jywgd2F2ZXNFZmZlY3QpO1xuXG4gIGZ1bmN0aW9uIHdhdmVzRWZmZWN0KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1pY29uJykgfHwgZWxlbWVudC5oYXNDbGFzcygnYnRuLWZsb2F0JykpIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQsIFsnd2F2ZXMtY2lyY2xlJ10pO1xuICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdidG4tbGlnaHQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1saWdodCddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgV2F2ZXMuaW5pdCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2ZnTGluZScsIGZnTGluZSk7XG5cbiAgZnVuY3Rpb24gZmdMaW5lKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudC5jaGlsZHJlbigpLmZpcnN0KCk7XG4gICAgICB2YXIgaXNGbG9hdExhYmVsID0gZWxlbWVudC5wYXJlbnQoKS5oYXNDbGFzcygnZmctZmxvYXQnKTtcbiAgICAgIGlucHV0LmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnZmctdG9nZ2xlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0LmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzRmxvYXRMYWJlbCB8fCAoaXNGbG9hdExhYmVsICYmIGlucHV0LnZhbCgpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
