angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","luegg.directives"]),function(){"use strict ";function e(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}e.$inject=["$httpProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){var t=this;t.$state=e}e.$inject=["$state"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,a,i){var o={superAdmin:n,admin:t,user:r};i.html5Mode(!0),a.otherwise("/"),a.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:pyramidId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function r(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],r.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,r,a,i,o){"not authorized"===o&&(t.go("login"),t.previous=n)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,r,a){function i(e,r){var i=n.defer();return t.post("/login",{username:e,password:r}).then(function(e){e.data.success?(a.currentUser=e.data.user,i.resolve(!0)):i.resolve(!1)}),i.promise}function o(e){var r=n.defer();return t.post("/api/users",{userData:e}).then(function(t){t.data?(i(e.username,e.password),r.resolve(!0)):r.resolve(!1)}),r.promise}function l(){var r=n.defer();return t.post("/logout",{logout:!0}).then(function(){a.currentUser=void 0,r.resolve(),e.go("home")}),r.promise}function s(e){return!!a.isAuthorized(e)||n.reject("not authorized")}function c(){return!!a.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:i,createUser:o,logout:l,authorizeCurrentUserForRoute:s,authenticatedUserForRoute:c};return u}e.$inject=["$state","$http","$q","userService","identityService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e,t){function n(){return e.get("/api/users").then(function(e){return e})}var r={getAllUsers:n};return r}e.$inject=["$http","identityService"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function r(){}function a(r,a){t.authenticateUser(r,a).then(function(t){t?e.previous?e.go(e.previous):e.go("home"):n.error("Username / password combinaiton incorrect")})}var i=this;i.login=a,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,r){function a(){}function i(e){e.password!==e.confirmPassword?r.error("Passwords don't match!"):n.createUser(e).then(function(){t.go("home")})}var o=this;o.register=i,a()}e.$inject=["$scope","$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@"},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){r()}function r(){a.challenges=[],t.getActiveChallengesByCompetition(a.competitionId).then(function(e){e.data.length>0&&(a.challenges=e.data,_.forEach(a.challenges,function(e){0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var a=this;a.challenges=[],n(),e.$on("ws:challenge_created",function(e,t){a.competitionId===t.competitionId&&r()}),e.$on("ws:challenge_completed",function(e,t){a.competitionId===t.competitionId&&r()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@"},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t){function n(){r()}function r(){i.challenges=[],t.getCompletedChallengesByCompetition(i.competitionId,a).then(function(e){e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger",e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})}))})}var a=3,i=this;i.challenges=[],n(),e.$on("ws:challenge_completed",function(e,t){i.competitionId===t.competitionId&&r()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpCompletedChalleneges",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function n(t){return e.post("/api/challenges/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function a(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function i(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function o(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}var l={createChallenge:t,completeChallenge:n,getChallengesByCompetition:r,getActiveChallengesByCompetition:a,getActiveChallengeByCompetitionByPlayer:i,getCompletedChallengesByCompetition:o};return l}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var r=this;r.indentity=e,r.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n){function r(){i.sidebarStatus.left=!i.sidebarStatus.left,e.setSidebarStatus(i.sidebarStatus.left)}function a(){n.logout()}var i=this;i.indentity=t,i.logout=a,i.sidebarStatus=e.getSidebarStatus(),i.toggleSidebar=r}t.$inject=["sidebarService","identityService","authService"],angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function r(){t.logout()}var a=this;a.indentity=e,a.logout=r,a.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var r;null!==e.bootstrappedUserObject&&(r=e.bootstrappedUserObject);var a={currentUser:r,isAuthenticated:t,isAuthorized:n};return a}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function r(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function a(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var i={info:e,success:t,warning:n,error:r,inverse:a};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85}}),i}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},r={getSidebarStatus:e,setSidebarStatus:t};return r}angular.module("app").factory("sidebarService",e)}(),angular.module("app").service("websocketService",["$rootScope","$window",function(e,t){function n(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}var r;this.connect=function(){r=new WebSocket(n()),r.onmessage=function(t){var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)}},this.send=function(e,t){var n=JSON.stringify({topic:e,data:t});r.send(n)}}]).run(["websocketService",function(e){e.connect()}]),function(){"use strict";function e(){function e(){}e()}angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{competitionId:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,r,a,i,o){function l(){n.getPyramid(b.competitionId).then(function(e){if(e.data){b.pyramid=e.data,b.levels=[];for(var n=1;n<=e.data.levels;++n)b.levels.push(n);s(),c(),d(),p(),m()}else t.go("pyramids.myPyramids")})}function s(){b.pyramid.players=r("orderBy")(b.pyramid.players,"position")}function c(){_.forEach(b.pyramid.players,function(e){i.isAuthenticated()&&e._id===i.currentUser._id&&(b.currentUserIsOnPyramid=!0,e.class="current-user",b.currentUserPlayer=e,o.getActiveChallengeByCompetitionByPlayer(b.competitionId,e._id).then(function(e){e.data&&(b.hasActiveChallenge=!0)}))}),o.getActiveChallengesByCompetition(b.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(b.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var n=_.find(b.pyramid.players,{_id:e.opponent._id});if(n.class="unavailable",n.challenge={position:"opponent"},0!==e.timeLimit){var r=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;r>0?n.challenge.expires=r:r<=0&&h(null,!0,n)}}),f()})}function u(){b.breakPoints=[];for(var e=0;e<b.pyramid.levels;e++)b.breakPoints.push(e*(e+1)/2+1)}function d(){b.numberOfBlocks=0;for(var e=b.pyramid.levels;e>0;e--)b.numberOfBlocks+=e}function p(){b.numberOfRealPlayers=b.pyramid.players.length;for(var e=b.pyramid.players.length;e<b.numberOfBlocks;e++)b.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"})}function m(){var e=0;u();for(var t=0;t<b.pyramid.players.length;t++)b.breakPoints.indexOf(t+1)>-1&&(e+=1),b.pyramid.players[t].level=e}function f(){var e=b.currentUserPlayer.level>1?b.currentUserPlayer.level-1:null;_.forEach(b.pyramid.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&(b.availableChallenges=!0,t.available=!0)})}function y(e){if(e.available){b.hasActiveChallenge=!0;var t={competitionId:b.competitionId,complete:!1,forfeit:!1,timeLimit:b.pyramid.forfeitDays,challenger:{_id:b.currentUserPlayer._id,firstName:b.currentUserPlayer.firstName,lastName:b.currentUserPlayer.lastName,nickname:b.currentUserPlayer.nickname,position:b.currentUserPlayer.position},opponent:{_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname,position:e.position}};o.createChallenge(t).then(function(){b.pyramidMenuToggle=!1})}else a.error("Sorry, that is not a valid challenge.")}function h(e,t,r){var a=r||b.currentUserPlayer;o.getActiveChallengeByCompetitionByPlayer(b.competitionId,a._id).then(function(a){b.hasActiveChallenge=!1;var i=!1;t?(a.data.forfeit=!0,"opponent"===r.challenge.position?(a.data.challenger.winner=!0,a.data.winner="challenger",i=!0):(a.data.opponent.winner=!0,a.data.winner="opponent")):e?a.data.challenger._id===b.currentUserPlayer._id?(a.data.challenger.winner=!0,a.data.winner="challenger",i=!0):(a.data.opponent.winner=!0,a.data.winner="opponent"):a.data.challenger._id===b.currentUserPlayer._id?(a.data.opponent.winner=!0,a.data.winner="opponent"):(a.data.challenger.winner=!0,a.data.winner="challenger",i=!0),i?n.swapPositions(b.competitionId,a.data.opponent,a.data.challenger).then(function(){o.completeChallenge(a.data).then(function(){$&&w()})}):o.completeChallenge(a.data).then(function(){$&&w()}),b.pyramidMenuToggle=!1})}function g(e){h(null,!0,e)}function v(){if(i.isAuthenticated())if(b.numberOfRealPlayers<b.numberOfBlocks){var e={_id:i.currentUser._id,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,position:b.numberOfRealPlayers+1};n.addPlayerToPyramid(b.competitionId,e)}else a.warning("Sorry, this pyramid is full");else t.go("login")}function P(){swal({title:"Leave Pyramid?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){w(),swal("OK, you'r out!","You've been removed from the pyramid.","success")})}function w(){i.isAuthenticated()&&b.currentUserIsOnPyramid&&($=!0,b.hasActiveChallenge?h(null,!0,b.currentUserPlayer):(b.currentUserIsOnPyramid=!1,b.hasActiveChallenge=!1,n.getPyramid(b.competitionId).then(function(e){var t=e.data,r=b.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=r&&(e.position-=1)});for(var a=_.remove(t.players,function(e){return e._id===b.currentUserPlayer._id}),i=[],o=0;o<b.numberOfRealPlayers-1;++o){var l={_id:t.players[o]._id,firstName:t.players[o].firstName,lastName:t.players[o].lastName,position:t.players[o].position};i.push(l)}n.removedPlayerFromPyramid(b.competitionId,a[0],i).then(function(){$=!1})})))}function C(){n.getPyramid(b.competitionId).then(function(e){b.pyramid=e.data,s(),c(),p(),m()})}var b=this;b.pyramid={},b.breakPoints=[],b.numberOfBlocks=0,b.currentUserIsOnPyramid=!1,b.hasActiveChallenge=!1,b.availableChallenges=!1,b.createChallenge=y,b.completeChallenge=h,b.challengeExpired=g,b.currentUserPlayer={},b.pyramidMenuToggle=!1,b.addCurrentUserToPyramid=v,b.confirmRemoveCurrentUserFromPyramid=P,b.numberOfRealPlayers=0,l();var $=!1;e.$on("ws:challenge_created",function(e,t){b.competitionId===t.competitionId&&(a.info(t.description),C())}),e.$on("ws:challenge_completed",function(e,t){b.competitionId===t.competitionId&&(a.info(t.description),$||C())}),e.$on("ws:player_added",function(e,t){b.competitionId===t.competitionId&&(a.info(t.description),C())}),e.$on("ws:player_removed",function(e,t){b.competitionId===t.competitionId&&(a.info(t.description),C())})}t.$inject=["$scope","$state","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{pyramidId:t}})}function n(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function r(t){return e.post("/api/pyramids/create",{pyramid:t})}function a(t,n,r){return e.post("/api/pyramids/swapPositions",{pyramidId:t,challenger:n,opponent:r})}function i(t,n){return e.post("/api/pyramids/addPlayer",{pyramidId:t,player:n})}function o(t,n,r){return e.post("/api/pyramids/removePlayer",{pyramidId:t,removedPlayer:n,players:r})}var l={getPyramid:t,getPyramidsForUser:n,createPyramid:r,swapPositions:a,addPlayerToPyramid:i,removedPlayerFromPyramid:o};return l}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(e,t,n,r,a){function i(){n.getAllUsers().then(function(e){u.availablePlayers=e.data})}function o(e){u.addedPlayers.length<u.allowedPlayers?(u.addedPlayerAdded=!0,u.addedPlayers.push(_.remove(u.availablePlayers,{_id:e._id})[0])):a.error("All spots have been filled.<br />If you want to add more people please increase the levels.")}function l(e){u.addedPlayerAdded=!1,u.availablePlayers.push(_.remove(u.addedPlayers,{_id:e._id})[0])}function s(e){u.allowedPlayers=0;for(var t=e;t>0;t--)u.allowedPlayers+=t;if(u.addedPlayers.length>u.allowedPlayers){var n=u.addedPlayers.splice(u.allowedPlayers);u.availablePlayers=u.availablePlayers.concat(n),a.warning("Players were removed becasue there are not enough spots on the pyramid.")}}function c(e){angular.forEach(u.addedPlayers,function(e){d+=1;var t={position:d,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};u.newPyramid.players.push(t)}),r.createPyramid(e).then(function(e){t.go("pyramids.view",{pyramidId:e.data._id})})}var u=this;u.newPyramid={players:[]},u.availablePlayers=[],u.addedPlayers=[],u.createPyramid=c,u.addPlayer=o,u.removePlayer=l,u.allowedPlayers=10,u.newPyramid.levels=4,u.newPyramid.forfeitDays=1,i(),e.$watch("vm.newPyramid.levels",function(e,t){e!==t&&s(e)});var d=0}e.$inject=["$scope","$state","userService","pyramidsService","notifyService"],angular.module("app").controller("CreatePyramidCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){t.getPyramidsForUser(n.currentUser._id).then(function(e){a.pyramids=e.data})}var a=this;a.pyramids=null,r()}e.$inject=["$state","pyramidsService","identityService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e){function t(){e.pyramidId&&(n.pyramidId=e.pyramidId)}var n=this;n.pyramidId=null,t()}e.$inject=["$stateParams"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(){function e(){}var t=this;t.pyramids=null,e()}angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),r=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!r||r&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL3NlcnZpY2VzL2NoYWxsZW5nZXMuc2VydmljZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9oZWFkZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5kaXJlY3RpdmUuanMiLCJjb21tb24vc2VydmljZXMvaW5kZW50aXR5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvbm90aWZ5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvc2lkZWJhci5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3dlYnNvY2tldC5zZXJ2aWNlLmpzIiwiY29tbW9uL3ZpZXdzL2hvbWUuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL2NvbXBvbmVudHMvcHlyYW1pZC5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9zZXJ2aWNlcy9weXJhbWlkcy5zZXJ2aWNlLmpzIiwicHlyYW1pZHMvdmlld3MvY3JlYXRlLXB5cmFtaWQuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL215LXB5cmFtaWRzLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9weXJhbWlkLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9weXJhbWlkcy5jb250cm9sbGVyLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCIkaHR0cFByb3ZpZGVyIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiZ2V0IiwiY29uZmlnIiwiQXBwQ3RybCIsIiRzdGF0ZSIsImFwcEN0cmwiLCJ0aGlzIiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJzdXBlckFkbWluIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJhZG1pbiIsInJlcXVpcmVBZG1pbiIsInVzZXIiLCJyZXF1aXJlQXV0aCIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiY29udGVudEAiLCJyZXNvbHZlIiwiYXV0aCIsImF1dGhTZXJ2aWNlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsImF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCIkaW5qZWN0IiwiYXBwUnVuIiwiJHJvb3RTY29wZSIsInNpZGViYXJTZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsInByZXZpb3VzIiwic2V0U2lkZWJhclN0YXR1cyIsInJ1biIsIiRodHRwIiwiJHEiLCJ1c2VyU2VydmljZSIsImlkZW50aXR5U2VydmljZSIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjdXJyZW50VXNlciIsInByb21pc2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJsb2dvdXQiLCJ1bmRlZmluZWQiLCJyb2xlIiwiaXNBdXRob3JpemVkIiwicmVqZWN0IiwiaXNBdXRoZW50aWNhdGVkIiwic2VydmljZSIsImZhY3RvcnkiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwiTG9naW5DdHJsIiwibm90aWZ5U2VydmljZSIsImFjdGl2YXRlIiwibG9naW4iLCJ2bSIsIlJlZ2lzdGVyQ3RybCIsIiRzY29wZSIsInJlZ2lzdGVyIiwibmV3VXNlciIsImNvbmZpcm1QYXNzd29yZCIsImtwQWN0aXZlQ2hhbGxlbmVnZXMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiY3RybEZ1bmMiLCJyZXN0cmljdCIsInNjb3BlIiwiY29tcGV0aXRpb25JZCIsImNoYWxsZW5nZXNTZXJ2aWNlIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlcyIsImNoYWxsZW5nZXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsImxlbmd0aCIsIl8iLCJmb3JFYWNoIiwiY2hhbGxlbmdlIiwidGltZUxpbWl0IiwiZXhwaXJlcyIsIm1vbWVudCIsImRpZmYiLCJjcmVhdGVkIiwiYWRkIiwiY2hhbGxlbmdlRGV0YWlscyIsImtwQ29tcGxldGVkQ2hhbGxlbmVnZXMiLCJnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzIiwiZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJjaGFsbGVuZ2VzTGltaXQiLCJsb3NlciIsIndpbm5lciIsIndoZW5Db21wbGV0ZWQiLCJjb21wbGV0ZWQiLCJjYWxlbmRhciIsInNhbWVEYXkiLCJuZXh0RGF5IiwibmV4dFdlZWsiLCJsYXN0RGF5IiwibGFzdFdlZWsiLCJzYW1lRWxzZSIsImNyZWF0ZUNoYWxsZW5nZSIsImNvbXBsZXRlQ2hhbGxlbmdlIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJwYXJhbXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJwbGF5ZXJJZCIsImxpbWl0Iiwia3BGb290ZXIiLCJpbmRlbnRpdHkiLCJrcEhlYWRlciIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyU3RhdHVzIiwibGVmdCIsImdldFNpZGViYXJTdGF0dXMiLCJrcFNpZGViYXIiLCIkd2luZG93Iiwicm9sZXMiLCJpbmRleE9mIiwiYm9vdHN0cmFwcGVkVXNlck9iamVjdCIsImluZm8iLCJtZXNzYWdlIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsInR5cGUiLCJ3YXJuaW5nIiwiaW52ZXJzZSIsIm5vdGlmeURlZmF1bHRzIiwibmV3ZXN0X29uX3RvcCIsIm9mZnNldCIsIngiLCJ5Iiwic3RhdHVzIiwicmlnaHQiLCJ3ZWJzb2NrZXRIb3N0IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsImUiLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiJGJyb2FkY2FzdCIsInRvcGljIiwic2VuZCIsImpzb24iLCJzdHJpbmdpZnkiLCJ3ZWJzb2NrZXRTZXJ2aWNlIiwiSG9tZUN0cmwiLCJrcFB5cmFtaWQiLCJyZXBsYWNlIiwicHlyYW1pZHNTZXJ2aWNlIiwiJGZpbHRlciIsImdldFB5cmFtaWQiLCJweXJhbWlkIiwibGV2ZWxzIiwiaSIsInB1c2giLCJvcmRlclBsYXllcnMiLCJnZXRQbGF5ZXJzU3RhdHVzIiwiY2FsY3VsYXRlUHlyYW1pZEJsb2NrcyIsImZpbGxJbkVtcHR5QmxvY2tzIiwiYXNzaWduTGV2ZWxzVG9QbGF5ZXJzIiwicGxheWVycyIsInBsYXllciIsIl9pZCIsImN1cnJlbnRVc2VySXNPblB5cmFtaWQiLCJjbGFzcyIsImN1cnJlbnRVc2VyUGxheWVyIiwiaGFzQWN0aXZlQ2hhbGxlbmdlIiwiY2hhbGxlbmdlciIsImZpbmQiLCJwb3NpdGlvbiIsIm9wcG9uZW50IiwidGltZVRvRXhwaXJlIiwiZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMiLCJjcmVhdGVCcmVha1BvaW50cyIsImJyZWFrUG9pbnRzIiwibnVtYmVyT2ZCbG9ja3MiLCJudW1iZXJPZlJlYWxQbGF5ZXJzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJsZXZlbCIsImxldmVsQWJvdmUiLCJhdmFpbGFibGVDaGFsbGVuZ2VzIiwiYXZhaWxhYmxlIiwiY29tcGxldGUiLCJmb3JmZWl0IiwiZm9yZmVpdERheXMiLCJuaWNrbmFtZSIsInB5cmFtaWRNZW51VG9nZ2xlIiwid2lubmVySXNDdXJyZW50VXNlciIsImZvcmZlaXRMb3NlciIsInN3YXBQb3NpdGlvbnMiLCJyZW1vdmluZ0N1cnJlbnRVc2VyIiwicmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCIsImNoYWxsZW5nZUV4cGlyZWQiLCJhZGRDdXJyZW50VXNlclRvUHlyYW1pZCIsImFkZFBsYXllclRvUHlyYW1pZCIsImNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkIiwic3dhbCIsInRpdGxlIiwidGV4dCIsInNob3dDYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uVGV4dCIsImNvbmZpcm1CdXR0b25DbGFzcyIsImNhbmNlbEJ1dHRvblRleHQiLCJjbG9zZU9uQ29uZmlybSIsImNsb3NlT25DYW5jZWwiLCJwIiwib3BlblBvc2l0aW9uIiwicmVtb3ZlZFBsYXllciIsInJlbW92ZSIsInVwZGF0ZWRQbGF5ZXJzIiwidXBkYXRlZFBsYXllciIsInJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZCIsInJlZnJlc2hQeXJhbWlkIiwiZGVzY3JpcHRpb24iLCJkZXRhaWxzIiwicHlyYW1pZElkIiwiZ2V0UHlyYW1pZHNGb3JVc2VyIiwidXNlcklkIiwiY3JlYXRlUHlyYW1pZCIsIkNyZWF0ZVB5cmFtaWRDdHJsIiwiYXZhaWxhYmxlUGxheWVycyIsImFkZFBsYXllciIsImFkZGVkUGxheWVycyIsImFsbG93ZWRQbGF5ZXJzIiwiYWRkZWRQbGF5ZXJBZGRlZCIsInJlbW92ZVBsYXllciIsInVwZGF0ZUFsbG93ZWRQbGF5ZXJzIiwicmVtb3ZlZFBsYXllcnMiLCJzcGxpY2UiLCJjb25jYXQiLCJuZXdQeXJhbWlkIiwiJHdhdGNoIiwibmV3VmFsIiwib2xkVmFsIiwiTXlQeXJhbWlkc0N0cmwiLCJweXJhbWlkcyIsIlB5cmFtaWRDdHJsIiwiJHN0YXRlUGFyYW1zIiwiUHlyYW1pZHNDdHJsIiwidG9nZ2xlU3VibWVudSIsImxpbmtGdW5jIiwiZWwiLCJjbGljayIsIm5leHQiLCJzbGlkZVRvZ2dsZSIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwibGluayIsIndhdmVzRWZmZWN0IiwiZWxlbWVudCIsImhhc0NsYXNzIiwiV2F2ZXMiLCJhdHRhY2giLCJpbml0IiwiZmdMaW5lIiwiaW5wdXQiLCJjaGlsZHJlbiIsImZpcnN0IiwiaXNGbG9hdExhYmVsIiwiZm9jdXMiLCJhZGRDbGFzcyIsImJsdXIiLCJ2YWwiLCJyZW1vdmVDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsWUFDQSxzQkFDQSxhQUNBLHdCQUNBLFFBQ0EscUJDUkEsd0JBSUEsU0FBQUMsR0FBQUMsR0FFQUEsRUFBQUMsU0FBQUMsUUFBQUMsTUFDQUgsRUFBQUMsU0FBQUMsUUFBQUMsUUFHQUgsRUFBQUMsU0FBQUMsUUFBQUMsSUFBQSxxQkFBQSxnQ0FFQUgsRUFBQUMsU0FBQUMsUUFBQUMsSUFBQSxpQkFBQSxXQUNBSCxFQUFBQyxTQUFBQyxRQUFBQyxJQUFBLE9BQUEsdUNBWEFOLFFBQUFDLE9BQUEsT0FBQU0sT0FBQUwsTUNGQSx1QkFJQSxTQUFBTSxHQUFBQyxHQUNBLEdBQUFDLEdBQUFDLElBQ0FELEdBQUFELE9BQUFBLHVCQUpBVCxRQUFBQyxPQUFBLE9B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QyxTQUFBLGFBQ0FDLE1BQUFDLE9BQUFILEdBQUEsZ0JBRUFFLE1BQUFDLE9BQUFILEdBR0FFLE1BQUFFLE9BaEJBLEdBQUFyTSxJQUNBRyxTQUFBLElBQ0E0TCxLQUFBUCxFQUdBLE9BQUF4TCxHQVZBN0YsUUFDQUMsT0FBQSxPQUNBNEYsVUFBQSxjQUFBZ00sTUNKQSxXQUNBLFlBS0EsU0FBQU0sS0FRQSxRQUFBZCxHQUFBcEwsRUFBQTZMLEdBQ0EsR0FBQU0sR0FBQU4sRUFBQU8sV0FBQUMsUUFDQUMsRUFBQVQsRUFBQUosU0FBQUssU0FBQSxXQUNBSyxHQUFBSSxNQUFBLFdBQ0FWLEVBQUFXLFNBQUEsZ0JBR0FMLEVBQUFNLEtBQUEsYUFDQUgsR0FBQUEsR0FBQSxJQUFBSCxFQUFBTyxNQUFBcE0sU0FDQXVMLEVBQUFjLFlBQUEsZ0JBaEJBLEdBQUEvTSxJQUNBRyxTQUFBLElBQ0E0TCxLQUFBUCxFQUdBLE9BQUF4TCxHQVZBN0YsUUFDQUMsT0FBQSxPQUNBNEYsVUFBQSxTQUFBc00iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICd1aS5ib290c3RyYXAnLFxuICAnbmdBbmltYXRlJyxcbiAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAnbm91aXNsaWRlcicsXG4gICdsb2NhbHl0aWNzLmRpcmVjdGl2ZXMnLFxuICAndGltZXInLFxuICAnbHVlZ2cuZGlyZWN0aXZlcydcbl0pOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0ICc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJhdGlvbik7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJhdGlvbigkaHR0cFByb3ZpZGVyKSB7XG4gICAgLy9pbml0aWFsaXplIGdldCBpZiBub3QgdGhlcmVcbiAgICBpZiAoISRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQpIHtcbiAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7fTsgICAgXG4gICAgfSAgICBcbiAgICAvL2Rpc2FibGUgSUUgYWpheCByZXF1ZXN0IGNhY2hpbmdcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydJZi1Nb2RpZmllZC1TaW5jZSddID0gJ0ZyaSwgMDEgSmFuIDIwMTYgMDU6MDA6MDAgR01UJztcbiAgICAvLyBleHRyYVxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ0NhY2hlLUNvbnRyb2wnXSA9ICduby1jYWNoZSc7XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnUHJhZ21hJ10gPSAnbm8tY2FjaGUnO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcblxuICBmdW5jdGlvbiBBcHBDdHJsKCRzdGF0ZSkge1xuICAgIHZhciBhcHBDdHJsID0gdGhpcztcbiAgICBhcHBDdHJsLiRzdGF0ZSA9ICRzdGF0ZTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJlUm91dGVzKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmVSb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB2YXIgcm91dGVSb2xlQ2hlY2tzID0ge1xuICAgICAgc3VwZXJBZG1pbjogcmVxdWlyZVN1cGVyQWRtaW4sXG4gICAgICBhZG1pbjogcmVxdWlyZUFkbWluLFxuICAgICAgdXNlcjogcmVxdWlyZUF1dGhcbiAgICB9O1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy8gZm9yIGFueSB1bm1hdGNoZWQgdXJsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJy9weXJhbWlkcy8nLCAnL3B5cmFtaWRzJyk7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbW1vbi92aWV3cy9ob21lLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMnLCB7XG4gICAgICAgIHVybDogJy9weXJhbWlkcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHlyYW1pZHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvcHlyYW1pZHMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy5teVB5cmFtaWRzJywge1xuICAgICAgICB1cmw6ICcvbXktcHlyYW1pZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeVB5cmFtaWRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL215LXB5cmFtaWRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLnZpZXcnLCB7XG4gICAgICAgIHVybDogJy92aWV3LzpweXJhbWlkSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQeXJhbWlkQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL3B5cmFtaWQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy5jcmVhdGUnLCB7XG4gICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDcmVhdGVQeXJhbWlkQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL2NyZWF0ZS1weXJhbWlkLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncmVnaXN0ZXInLCB7XG4gICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcmVxdWlyZUFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gIH1cblxuICByZXF1aXJlU3VwZXJBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVTdXBlckFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ3N1cGVyLWFkbWluJyk7XG4gIH1cblxuICByZXF1aXJlQXV0aC4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5ydW4oYXBwUnVuKTtcblxuICBmdW5jdGlvbiBhcHBSdW4oJHJvb3RTY29wZSwgJHN0YXRlLCBzaWRlYmFyU2VydmljZSkge1xuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciA9PT0gJ25vdCBhdXRob3JpemVkJykge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IHRvU3RhdGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBhdXRoU2VydmljZSgkc3RhdGUsICRodHRwLCAkcSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgYXV0aGVudGljYXRlVXNlcjogYXV0aGVudGljYXRlVXNlcixcbiAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIsXG4gICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGU6IGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUsXG4gICAgICBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlOiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB7XG4gICAgICAgIHVzZXJEYXRhOiB1c2VyRGF0YVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKHVzZXJEYXRhLnVzZXJuYW1lLCB1c2VyRGF0YS5wYXNzd29yZCk7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7XG4gICAgICAgIGxvZ291dDogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgdXNlclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHVzZXJTZXJ2aWNlKCRodHRwLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2Vyc1xuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignTG9naW5DdHJsJywgTG9naW5DdHJsKTtcblxuICBmdW5jdGlvbiBMb2dpbkN0cmwoJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubG9naW4gPSBsb2dpbjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignVXNlcm5hbWUgLyBwYXNzd29yZCBjb21iaW5haXRvbiBpbmNvcnJlY3QnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoJHN0YXRlLnByZXZpb3VzKSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJHN0YXRlLnByZXZpb3VzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgUmVnaXN0ZXJDdHJsKTtcblxuICBmdW5jdGlvbiBSZWdpc3RlckN0cmwoJHNjb3BlLCAkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKG5ld1VzZXIpIHtcbiAgICAgIGlmIChuZXdVc2VyLnBhc3N3b3JkICE9PSBuZXdVc2VyLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmNyZWF0ZVVzZXIobmV3VXNlcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BBY3RpdmVDaGFsbGVuZWdlcycsIGtwQWN0aXZlQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIGtwQWN0aXZlQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbklkOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvYWN0aXZlLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2VzLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZS5leHBpcmVzID0gKG1vbWVudCgpLmRpZmYobW9tZW50KGNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwncycpKSAqIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NyZWF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NvbXBsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BDb21wbGV0ZWRDaGFsbGVuZWdlcycsIGtwQ29tcGxldGVkQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIGtwQ29tcGxldGVkQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbklkOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvY29tcGxldGVkLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciBjaGFsbGVuZ2VzTGltaXQgPSAzO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgZ2V0Q29tcGxldGVkQ2hhbGxlbmdlcygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbXBsZXRlZENoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCBjaGFsbGVuZ2VzTGltaXQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZXMuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmxvc2VyID0gY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInID8gJ29wcG9uZW50JyA6ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIGNoYWxsZW5nZS53aGVuQ29tcGxldGVkID0gbW9tZW50KGNoYWxsZW5nZS5jb21wbGV0ZWQpLmNhbGVuZGFyKG51bGwsIHtcbiAgICAgICAgICAgICAgc2FtZURheTogJ1tUb2RheV0nLFxuICAgICAgICAgICAgICBuZXh0RGF5OiAnW1RvbW9ycm93XScsXG4gICAgICAgICAgICAgIG5leHRXZWVrOiAnZGRkZCcsXG4gICAgICAgICAgICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5XScsXG4gICAgICAgICAgICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQnLFxuICAgICAgICAgICAgICBzYW1lRWxzZTogJ0REL01NL1lZWVknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jb21wbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnY2hhbGxlbmdlc1NlcnZpY2UnLCBjaGFsbGVuZ2VzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gY2hhbGxlbmdlc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNyZWF0ZUNoYWxsZW5nZTogY3JlYXRlQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVDaGFsbGVuZ2U6IGNvbXBsZXRlQ2hhbGxlbmdlLFxuICAgICAgZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyOiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIsXG4gICAgICBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGxldGUnLCAge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24vcGxheWVyJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgbGltaXQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9jb21wbGV0ZWQvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIGxpbWl0OiBsaW1pdFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twRm9vdGVyJywga3BGb290ZXIpO1xuXG4gIGZ1bmN0aW9uIGtwRm9vdGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twSGVhZGVyJywga3BIZWFkZXIpO1xuXG4gIGZ1bmN0aW9uIGtwSGVhZGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICdoZWFkZXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9oZWFkZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoc2lkZWJhclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgdm0uc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcbiAgICB2bS50b2dnbGVTaWRlYmFyID0gdG9nZ2xlU2lkZWJhcjtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICB2bS5zaWRlYmFyU3RhdHVzLmxlZnQgPSAhdm0uc2lkZWJhclN0YXR1cy5sZWZ0O1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyh2bS5zaWRlYmFyU3RhdHVzLmxlZnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BTaWRlYmFyJywga3BTaWRlYmFyKTtcblxuICBmdW5jdGlvbiBrcFNpZGViYXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3NpZGViYXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnaWRlbnRpdHlTZXJ2aWNlJywgaWRlbnRpdHlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBpZGVudGl0eVNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBjdXJyZW50VXNlcjtcbiAgICBpZiAoJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICBjdXJyZW50VXNlciA9ICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdDtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKHJvbGUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ25vdGlmeVNlcnZpY2UnLCBub3RpZnlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBub3RpZnlTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgaW5mbzogaW5mbyxcbiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgaW52ZXJzZTogaW52ZXJzZVxuICAgIH07XG5cbiAgICAkLm5vdGlmeURlZmF1bHRzKHtcbiAgICAgIG5ld2VzdF9vbl90b3A6IHRydWUsXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5zZXJ2aWNlKCd3ZWJzb2NrZXRTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICR3aW5kb3cpIHtcbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb25uZWN0aW9uO1xuICAgIHRoaXMuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYnNvY2tldEhvc3QoKSk7XG5cbiAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAodG9waWMsIGRhdGEpIHtcbiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgY29ubmVjdGlvbi5zZW5kKGpzb24pO1xuICAgIH07XG4gIH0pLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICBmdW5jdGlvbiBIb21lQ3RybCgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twUHlyYW1pZCcsIGtwUHlyYW1pZCk7XG5cbiAgZnVuY3Rpb24ga3BQeXJhbWlkKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy9weXJhbWlkLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJ1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBweXJhbWlkc1NlcnZpY2UsICRmaWx0ZXIsIG5vdGlmeVNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWQgPSB7fTtcbiAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gZmFsc2U7XG4gICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IGZhbHNlO1xuICAgIHZtLmNyZWF0ZUNoYWxsZW5nZSA9IGNyZWF0ZUNoYWxsZW5nZTtcbiAgICB2bS5jb21wbGV0ZUNoYWxsZW5nZSA9IGNvbXBsZXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNoYWxsZW5nZUV4cGlyZWQgPSBjaGFsbGVuZ2VFeHBpcmVkO1xuICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0ge307XG4gICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICB2bS5hZGRDdXJyZW50VXNlclRvUHlyYW1pZCA9IGFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkO1xuICAgIHZtLmNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkID0gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQ7XG4gICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IDA7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkKSB7XG4gICAgICAgIGlmIChweXJhbWlkLmRhdGEpIHtcbiAgICAgICAgICB2bS5weXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuXG4gICAgICAgICAgLy8gVGhpcyBkb2Vzbid0IGNoYW5nZSBvbiByZWZyZXNoXG4gICAgICAgICAgdm0ubGV2ZWxzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcHlyYW1pZC5kYXRhLmxldmVsczsgKytpKSB7XG4gICAgICAgICAgICB2bS5sZXZlbHMucHVzaChpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvcmRlclBsYXllcnMoKTtcbiAgICAgICAgICBnZXRQbGF5ZXJzU3RhdHVzKCk7XG4gICAgICAgICAgY2FsY3VsYXRlUHlyYW1pZEJsb2NrcygpO1xuICAgICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9yZGVyIHRoZSBwbGF5ZXJzIGJ5IHRoZSBwb3NpdGlvbiBwcm9wZXJ0eSBvZiB0aGUgcGxheWVycyBhcnJheSBpbiB0aGUgcHlyYW1pZCBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvcmRlclBsYXllcnMoKSB7XG4gICAgICB2bS5weXJhbWlkLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0ucHlyYW1pZC5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzU3RhdHVzKCkge1xuICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBvbiB0aGlzIHB5cmFtaWQgYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCA9IHRydWU7XG4gICAgICAgICAgcGxheWVyLmNsYXNzID0gJ2N1cnJlbnQtdXNlcic7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgXy5mb3JFYWNoKGNoYWxsZW5nZXMuZGF0YSwgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuXG4gICAgICAgICAgdmFyIGNoYWxsZW5nZXIgPSBfLmZpbmQodm0ucHlyYW1pZC5wbGF5ZXJzLCB7ICdfaWQnOiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgfSk7XG4gICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgY2hhbGxlbmdlci5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2NoYWxsZW5nZXInXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvcHBvbmVudCA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5vcHBvbmVudC5faWQgfSk7XG4gICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSAndW5hdmFpbGFibGUnO1xuICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnb3Bwb25lbnQnXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFRyYWNrIHdoZW4gdGhlIGNoYWxsZW5nZSB3aWxsIGV4cGlyZVxuICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCAncycpICogLTE7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGhhcyBub3QgeWV0IGV4cGlyZWQgZGlzcGxheSBhIGNvdW50ZG93biBvbiB0aGUgb3Bwb25lbnRcbiAgICAgICAgICAgIGlmICh0aW1lVG9FeHBpcmUgPiAwKSB7XG4gICAgICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZS5leHBpcmVzID0gdGltZVRvRXhwaXJlO1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGV4cGlyZWQgd2hpbGUgbm8gb25lIHdhcyB2aWV3aW5nIHRoaXMgcHlyYW1pZCBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIGJ5IGZvcmZlaXRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVRvRXhwaXJlIDw9IDApIHtcbiAgICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgb3Bwb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE5vdyB0aGF0IHdlIGtub3cgd2hpY2ggcGxheWVycyBhcmUgaW4gY2hhbGxlbmdlcyBhbmQgd2hpY2ggYXJlbid0XG4gICAgICAgIC8vIGZpbmQgdGhlIGF2YWlsYWJsZSBjaGFsbGVuZ2VzIGZvciB0aGlzIHVzZXJcbiAgICAgICAgZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hlcmUgdG8gc3RhcnQgZWFjaCBuZXcgcm93IG9uIHRoZSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQnJlYWtQb2ludHMoKSB7XG4gICAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5weXJhbWlkLmxldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSG93IG1hbnkgdG90YWwgYmxvY2tzIGluIHRoaXMgcHlyYW1pZFxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5sZXZlbHM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgcHlyYW1pZCB3aXRoIGVtcHR5IGJsb2Nrc1xuICAgIGZ1bmN0aW9uIGZpbGxJbkVtcHR5QmxvY2tzKCkge1xuICAgICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDsgaSA8IHZtLm51bWJlck9mQmxvY2tzOyBpKyspIHtcbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzLnB1c2goe1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0VtcHR5JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1Nwb3QnLFxuICAgICAgICAgIHBvc2l0aW9uOiA5OSxcbiAgICAgICAgICBjbGFzczogJ2VtcHR5J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWwgcHJvcGVydHkgYmFzZWQgb24gdGhlIGJyZWFrIHBvaW50c1xuICAgIC8vIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB3aG8gb3RoZXIgcGxheWVycyBjYW4gY2hhbGxlbmdlXG4gICAgZnVuY3Rpb24gYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCkge1xuICAgICAgdmFyIGxldmVsID0gMDtcbiAgICAgIGNyZWF0ZUJyZWFrUG9pbnRzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodm0uYnJlYWtQb2ludHMuaW5kZXhPZihpICsgMSkgPiAtMSkge1xuICAgICAgICAgIGxldmVsICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzW2ldLmxldmVsID0gbGV2ZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdGhlIHBsYXllcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIGJlIGNoYWxsZW5nZWQgYnkgdGhpcyB1c2VyXG4gICAgZnVuY3Rpb24gZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2YXIgbGV2ZWxBYm92ZSA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsID4gMSA/IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsIC0gMSA6IG51bGw7XG4gICAgICBfLmZvckVhY2godm0ucHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIGlmIChwbGF5ZXIubGV2ZWwgPT09IGxldmVsQWJvdmUgJiYgcGxheWVyLnBvc2l0aW9uICE9PSA5OSAmJiBwbGF5ZXIuY2xhc3MgIT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHBsYXllcikge1xuICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB0aGF0IGlzIG5vdCBhIHZhbGlkIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5weXJhbWlkLmZvcmZlaXREYXlzLFxuICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgIF9pZDogdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBuaWNrbmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubmlja25hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wcG9uZW50OiB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgbmlja25hbWU6IHBsYXllci5uaWNrbmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIHB5cmFtaWRcbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY3JlYXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSB3aW5uZXJJc0N1cnJlbnRVc2VyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmVySXNDdXJyZW50VXNlciwgZm9yZmVpdCwgZm9yZmVpdExvc2VyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdExvc2VyIHx8IHZtLmN1cnJlbnRVc2VyUGxheWVyO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGlmIChmb3JmZWl0TG9zZXIuY2hhbGxlbmdlLnBvc2l0aW9uID09PSAnb3Bwb25lbnQnKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLndpbm5lciA9IHRydWU7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQud2lubmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hvIHRoZSB3aW5uZXIgd2FzIHRvIHN0b3JlIGluIHRoZSBjaGFsbGVuZ2UgcmVjb3JkXG4gICAgICAgIH0gZWxzZSBpZiAod2lubmVySXNDdXJyZW50VXNlcikge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLndpbm5lciA9IHRydWU7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQud2lubmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudC53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3dhcCBwb3NpdGlvbnMgYW5kIHRoZW4gY29tcGxldGUgdGhlIGNoYWxsZW5nZSBvciBqdXN0IGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgcHlyYW1pZFxuICAgICAgICBpZiAoc3dhcFBvc2l0aW9ucykge1xuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5zd2FwUG9zaXRpb25zKHZtLmNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50LCBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLnB5cmFtaWRNZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIGNvbXBsZXRlIGNoYWxsbmdlIGZ1bmN0aW9uIHdpdGggdGhlIGZvcmZlaXRpbmcgcGxheWVyXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGFsbGVuZ2VFeHBpcmVkKHBsYXllcikge1xuICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgcGxheWVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgY3VycmVudCB1c2VyIHRoZSBweXJhbWlkIFxuICAgICAqIGlmIHRoZXkncmUgbm90IGFscmVhZHkgb24gaXQgYW5kIHRoZXJlJ3Mgc3BhY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRDdXJyZW50VXNlclRvUHlyYW1pZCgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgaWYgKHZtLm51bWJlck9mUmVhbFBsYXllcnMgPCB2bS5udW1iZXJPZkJsb2Nrcykge1xuICAgICAgICAgIHZhciBwbGF5ZXIgPSB7XG4gICAgICAgICAgICBfaWQ6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLm51bWJlck9mUmVhbFBsYXllcnMgKyAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBweXJhbWlkc1NlcnZpY2UuYWRkUGxheWVyVG9QeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS53YXJuaW5nKCdTb3JyeSwgdGhpcyBweXJhbWlkIGlzIGZ1bGwnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnTGVhdmUgUHlyYW1pZD8nLFxuICAgICAgICB0ZXh0OiAnWW91IHdpbGwgbG9zZSB5b3VyIHNwb3QgYW5kIGZvcmZlaXQgYW55IGFjdGl2ZSBjaGFsbGVuZ2VzLicsXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWVzLCBsZWF2ZScsXG4gICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogJ2J0bi1kYW5nZXInLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm8sIHN0YXknLFxuICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpO1xuICAgICAgICBzd2FsKCdPSywgeW91XFwnciBvdXQhJywgJ1lvdVxcJ3ZlIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBweXJhbWlkLicsICdzdWNjZXNzJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVc2UgdGhpcyB0byBlbmZvcmNlIG9yZGVyIG9mIG9wZXJhdGlvbnMgd2hlbiB0aGUgcGxheWVyIHRvIGJlIHJlbW92ZWQgaGFkIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICB2YXIgcmVtb3ZpbmdDdXJyZW50VXNlciA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIG9uIHRoaXMgcHlyYW1pZFxuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkKSB7XG4gICAgICAgIHJlbW92aW5nQ3VycmVudFVzZXIgPSB0cnVlO1xuICAgICAgICAvLyBGb3JmZWl0IGlmIHRoZXkgaGF2ZSBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgICAgIGlmICh2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCB2bS5jdXJyZW50VXNlclBsYXllcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2luY2Ugd2UgYXJlIHJlbW92aW5nIHRoZW0gLi4uXG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCA9IGZhbHNlO1xuICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gR2V0IGFuIHVwZGF0ZWQgY29weSBvZiB0aGUgcHlyYW1pZCBpbmNhc2UgYSBmb3JmZWl0IGhhcHBlbmVkXG4gICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLmdldFB5cmFtaWQodm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHVwZGF0ZWQgY29weSBsb2NhbGx5IHNvIGFzIG5vdCB0byBkaXN0cnVwdCB0aGUgcHlyYW1pZFxuICAgICAgICAgICAgLy8gdW50aWwgdGhlIHBsYXllciBoYXMgYmVlbiByZW1vdmVkXG4gICAgICAgICAgICB2YXIgcHlyYW1pZCA9IHAuZGF0YTtcblxuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgc3BvdCB0aGV5IHdlcmUgaW4gb24gdGhlIHB5cmFtaWRcbiAgICAgICAgICAgIHZhciBvcGVuUG9zaXRpb24gPSB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvbjtcblxuICAgICAgICAgICAgLy8gTW92ZSBhbGwgdGhlIHBsYXllcnMgdXAgMSBwb3NpdGlvbiB0aGF0IHdlcmUgYmVoaW5kIHRoZSByZW1vdmVkIHBsYXllclxuICAgICAgICAgICAgXy5mb3JFYWNoKHB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICBpZiAocGxheWVyLnBvc2l0aW9uID49IG9wZW5Qb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHBsYXllci5wb3NpdGlvbiAtPSAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlZCB0aGUgcGxheWVyIGZyb20gdGhlIHB5cmFtaWRcbiAgICAgICAgICAgIHZhciByZW1vdmVkUGxheWVyID0gXy5yZW1vdmUocHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwbGF5ZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFrZSBhIG5ldyBhcnJheSBvZiBhbGwgdGhlIHBsYXllcnMgc3RpbGwgb24gdGhlIHB5cmFtaWRcbiAgICAgICAgICAgIC8vIG9ubHkgdXNlIHRoZSBwcm9wZXJ0aWVzIHdlIHdhbnQgdG8gc3RvcmUgaW4gdGhlIHB5cmFtaWQgZG9jdW1lbnRcbiAgICAgICAgICAgIHZhciB1cGRhdGVkUGxheWVycyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgIHZhciB1cGRhdGVkUGxheWVyID0ge1xuICAgICAgICAgICAgICAgIF9pZDogcHlyYW1pZC5wbGF5ZXJzW2ldLl9pZCxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHB5cmFtaWQucGxheWVyc1tpXS5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHB5cmFtaWQucGxheWVyc1tpXS5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcHlyYW1pZC5wbGF5ZXJzW2ldLnBvc2l0aW9uXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdXBkYXRlZFBsYXllcnMucHVzaCh1cGRhdGVkUGxheWVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsbCBzZXJ2aWNlIHRvIHJlbW92ZSB0aGUgcGxheWVyXG4gICAgICAgICAgICBweXJhbWlkc1NlcnZpY2UucmVtb3ZlZFBsYXllckZyb21QeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXJbMF0sIHVwZGF0ZWRQbGF5ZXJzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmVtb3ZpbmdDdXJyZW50VXNlciA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoIHRoZSBweXJhbWlkIGJlY2FzdWUgb2YgYW4gdXBkYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVmcmVzaFB5cmFtaWQoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkKSB7XG4gICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG4gICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICBnZXRQbGF5ZXJzU3RhdHVzKCk7XG4gICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jcmVhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jb21wbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIGlmICghcmVtb3ZpbmdDdXJyZW50VXNlcikge1xuICAgICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpwbGF5ZXJfYWRkZWQnLCBmdW5jdGlvbiAoXywgZGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oZGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6cGxheWVyX3JlbW92ZWQnLCBmdW5jdGlvbiAoXywgZGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oZGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgncHlyYW1pZHNTZXJ2aWNlJywgcHlyYW1pZHNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBweXJhbWlkc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldFB5cmFtaWQ6IGdldFB5cmFtaWQsXG4gICAgICBnZXRQeXJhbWlkc0ZvclVzZXI6IGdldFB5cmFtaWRzRm9yVXNlcixcbiAgICAgIGNyZWF0ZVB5cmFtaWQ6IGNyZWF0ZVB5cmFtaWQsXG4gICAgICBzd2FwUG9zaXRpb25zOiBzd2FwUG9zaXRpb25zLFxuICAgICAgYWRkUGxheWVyVG9QeXJhbWlkOiBhZGRQbGF5ZXJUb1B5cmFtaWQsXG4gICAgICByZW1vdmVkUGxheWVyRnJvbVB5cmFtaWQ6IHJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBweXJhbWlkIGZyb20gdGhlIGRhdGFiYXNlIChvciBtZW1vcnkpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHlyYW1pZCBpZCBmb3IgdGhlIHJlcXVlc3RlZCBweXJhbWlkXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHlyYW1pZChweXJhbWlkSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZCcsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcHlyYW1pZElkOiBweXJhbWlkSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgcHlyYW1pZHMgZnJvbSB0aGUgZGF0YWJhc2UgdGhlIGEgcGFydGljdWxhciB1c2VyIGlzIGluY2x1ZGVkIGluXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3VzZXJJZH0gdGhlIHVzZXIgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgdXNlclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcHlyYW1pZHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkc0ZvclVzZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3B5cmFtaWRzL3VzZXInLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVB5cmFtaWQocHlyYW1pZCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvY3JlYXRlJywge1xuICAgICAgICBweXJhbWlkOiBweXJhbWlkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2FwUG9zaXRpb25zKHB5cmFtaWRJZCwgY2hhbGxlbmdlciwgb3Bwb25lbnQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3N3YXBQb3NpdGlvbnMnLCB7XG4gICAgICAgIHB5cmFtaWRJZDogcHlyYW1pZElkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZChweXJhbWlkSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvYWRkUGxheWVyJywge1xuICAgICAgICBweXJhbWlkSWQ6IHB5cmFtaWRJZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZChweXJhbWlkSWQsIHJlbW92ZWRQbGF5ZXIsIHBsYXllcnMpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgcHlyYW1pZElkOiBweXJhbWlkSWQsXG4gICAgICAgIHJlbW92ZWRQbGF5ZXI6IHJlbW92ZWRQbGF5ZXIsXG4gICAgICAgIHBsYXllcnM6IHBsYXllcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZXMgYSBweXJhbWlkXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NyZWF0ZVB5cmFtaWRDdHJsJywgQ3JlYXRlUHlyYW1pZEN0cmwpO1xuXG4gIGZ1bmN0aW9uIENyZWF0ZVB5cmFtaWRDdHJsKCRzY29wZSwgJHN0YXRlLCB1c2VyU2VydmljZSwgcHlyYW1pZHNTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5uZXdQeXJhbWlkID0ge1xuICAgICAgcGxheWVyczogW11cbiAgICB9O1xuICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2bS5hZGRlZFBsYXllcnMgPSBbXTtcbiAgICB2bS5jcmVhdGVQeXJhbWlkID0gY3JlYXRlUHlyYW1pZDtcbiAgICB2bS5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG4gICAgdm0ucmVtb3ZlUGxheWVyID0gcmVtb3ZlUGxheWVyO1xuICAgIHZtLmFsbG93ZWRQbGF5ZXJzID0gMTA7XG4gICAgdm0ubmV3UHlyYW1pZC5sZXZlbHMgPSA0O1xuICAgIHZtLm5ld1B5cmFtaWQuZm9yZmVpdERheXMgPSAxO1xuXG4gICAgYWN0aXZhdGUoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSdW5zIG9uIGNvbnRyb2xsZXIgaW5zdGFudGlhdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gdXNlcnMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBweXJhbWlkXG4gICAgICogQ2hlY2tzIHRvIG1ha2Ugc3VyZSB5b3UgYXJlIG5vdCBhZGRpbmcgdG9vIG1hbnkgcGxheWVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgaWYodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCA8IHZtLmFsbG93ZWRQbGF5ZXJzKSB7XG4gICAgICAgIHZtLmFkZGVkUGxheWVyQWRkZWQgPSB0cnVlO1xuICAgICAgICB2bS5hZGRlZFBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignQWxsIHNwb3RzIGhhdmUgYmVlbiBmaWxsZWQuPGJyIC8+SWYgeW91IHdhbnQgdG8gYWRkIG1vcmUgcGVvcGxlIHBsZWFzZSBpbmNyZWFzZSB0aGUgbGV2ZWxzLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwcmV2aXVvc2x5IGFkZGVkIHBsYXllciBmcm9tIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hZGRlZFBsYXllckFkZGVkID0gZmFsc2U7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIG51bWJlciBvZiBhbGxvd2VkIHBsYXllcnMgZm9yIHRoZSBweXJhbWlkXG4gICAgICogYmFzZWQgb24gdGhlIG51bWJlciBvZiBsZXZlbHMgY2hvc2VuXG4gICAgICogUmVtb3ZlcyBleHRyYSBwbGF5ZXJzIGFuZCBtYWtlcyB0aGVtIGF2YWlsYWJsZSBhZ2FpblxuICAgICAqIEBwYXJhbSAge251bWJlcn0gbGV2ZWxzXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlQWxsb3dlZFBsYXllcnMobGV2ZWxzKSB7XG4gICAgICB2bS5hbGxvd2VkUGxheWVycyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gbGV2ZWxzOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIHZtLmFsbG93ZWRQbGF5ZXJzICs9IGk7XG4gICAgICB9XG4gICAgICBpZiAodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCA+IHZtLmFsbG93ZWRQbGF5ZXJzKSB7XG4gICAgICAgIHZhciByZW1vdmVkUGxheWVycyA9IHZtLmFkZGVkUGxheWVycy5zcGxpY2Uodm0uYWxsb3dlZFBsYXllcnMpO1xuICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gdm0uYXZhaWxhYmxlUGxheWVycy5jb25jYXQocmVtb3ZlZFBsYXllcnMpO1xuICAgICAgICBub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ1BsYXllcnMgd2VyZSByZW1vdmVkIGJlY2FzdWUgdGhlcmUgYXJlIG5vdCBlbm91Z2ggc3BvdHMgb24gdGhlIHB5cmFtaWQuJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYWN0aCBmb3IgY2hhbmdlcyB0byB0aGUgcHlyYW1pZCBsZXZlbHMgbW9kZWwgYW5kIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGFsbG93ZWQgcGxheWVyc1xuICAgICRzY29wZS4kd2F0Y2goJ3ZtLm5ld1B5cmFtaWQubGV2ZWxzJywgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkge1xuICAgICAgICB1cGRhdGVBbGxvd2VkUGxheWVycyhuZXdWYWwpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXNlZCB0byBrZWVwIHRyYWNrIG9mIHBvc2l0aW9uIG9uIHRoZSBweXJhbWlkIGJhc2VkIG9uIHdoZW4gdGhlIHBsYXllciB3YXMgYWRkZWRcbiAgICB2YXIgcG9zaXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBvc2l0aW9uICs9IDE7XG4gICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICBuaWNrbmFtZTogcGxheWVyLm5pY2tuYW1lXG4gICAgICAgIH07XG4gICAgICAgIHZtLm5ld1B5cmFtaWQucGxheWVycy5wdXNoKGFkZFBsYXllcik7XG4gICAgICB9KTtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5jcmVhdGVQeXJhbWlkKHB5cmFtaWQpLnRoZW4oZnVuY3Rpb24gKG5ld1B5cmFtaWQpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICAgIHB5cmFtaWRJZDogbmV3UHlyYW1pZC5kYXRhLl9pZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdNeVB5cmFtaWRzQ3RybCcsIE15UHlyYW1pZHNDdHJsKTtcblxuICBmdW5jdGlvbiBNeVB5cmFtaWRzQ3RybCgkc3RhdGUsIHB5cmFtaWRzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkcyA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHNGb3JVc2VyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQeXJhbWlkQ3RybCcsIFB5cmFtaWRDdHJsKTtcblxuICBmdW5jdGlvbiBQeXJhbWlkQ3RybCgkc3RhdGVQYXJhbXMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWRJZCA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLnB5cmFtaWRJZCkge1xuICAgICAgICB2bS5weXJhbWlkSWQgPSAkc3RhdGVQYXJhbXMucHlyYW1pZElkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQeXJhbWlkc0N0cmwnLCBQeXJhbWlkc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIFB5cmFtaWRzQ3RybCgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWRzID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIFxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3RvZ2dsZVN1Ym1lbnUnLCB0b2dnbGVTdWJtZW51KTtcblxuICBmdW5jdGlvbiB0b2dnbGVTdWJtZW51KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwpIHtcbiAgICAgIGVsLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwubmV4dCgpLnNsaWRlVG9nZ2xlKDIwMCk7XG4gICAgICAgIGVsLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3YXZlc0VmZmVjdCcsIHdhdmVzRWZmZWN0KTtcblxuICBmdW5jdGlvbiB3YXZlc0VmZmVjdCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdDJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdidG4taWNvbicpIHx8IGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1mbG9hdCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWNpcmNsZSddKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWxpZ2h0JykpIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQsIFsnd2F2ZXMtbGlnaHQnXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIFdhdmVzLmluaXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdmZ0xpbmUnLCBmZ0xpbmUpO1xuXG4gIGZ1bmN0aW9uIGZnTGluZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdDJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpO1xuICAgICAgdmFyIGlzRmxvYXRMYWJlbCA9IGVsZW1lbnQucGFyZW50KCkuaGFzQ2xhc3MoJ2ZnLWZsb2F0Jyk7XG4gICAgICBpbnB1dC5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dC5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc0Zsb2F0TGFiZWwgfHwgKGlzRmxvYXRMYWJlbCAmJiBpbnB1dC52YWwoKS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZmctdG9nZ2xlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
