angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var i=this;i.$state=e,i.lockSidebar=t.get("sidebarLocked"),i.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,o,r){var a={superAdmin:n,admin:t,user:i};r.html5Mode(!0),o.otherwise("/"),o.when("/competitions/","/competitions"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("competitions",{url:"/competitions",views:{content:{controller:"CompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competitions.html"}}}).state("competitions.myCompetitions",{url:"/my-competitions",views:{"content@":{controller:"MyCompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/my-competitions.html"}},resolve:{auth:a.user}}).state("competitions.view",{url:"/view/:competitionId",views:{"content@":{controller:"CompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition.html"}}}).state("competitions.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"CompetitionStatsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-stats.html"}}}).state("competitions.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"CompetitionAdminCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-admin.html"}},resolve:{auth:a.user}}).state("competitions.create",{url:"/create",views:{"content@":{controller:"CreateCompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/create-competition.html"}},resolve:{auth:a.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:a.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function i(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],i.$inject=["authService"]}(),function(){"use strict";function e(e,t,n,i){e.$on("$stateChangeError",function(e,n,i,o,r,a){"not authorized"===a&&(t.go("login"),t.previous=n,t.prevParams=i)}),e.$on("$stateChangeStart",function(){i.setSidebarStatus(!1),n[0].body.scrollTop=n[0].documentElement.scrollTop=0})}e.$inject=["$rootScope","$state","$document","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(e,i){var r=n.defer();return t.post("/login",{username:e,password:i}).then(function(e){e.data.success?(o.currentUser=e.data.user,r.resolve(!0)):"unverified"===e.data.message?r.resolve("unverified"):r.resolve(!1)}),r.promise}function l(e){var i=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?i.resolve(!0):i.resolve(!1)},function(e){"Error: Email already in use"===e.data.reason&&r.error("Sorry, an account already exists with that email address.")}),i.promise}function s(){var i=n.defer();return t.post("/logout",{logout:!0}).then(function(){o.currentUser=void 0,i.resolve(),e.go("home")}),i.promise}function c(e){return!!o.isAuthorized(e)||n.reject("not authorized")}function p(){return!!o.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:a,createUser:l,logout:s,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:p};return u}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return _.forEach(e.data,function(e){e.displayName||(e.displayName=e.firstName+" "+e.lastName)}),e.data=_.sortBy(e.data,"displayName"),e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function i(t){return e.get("/api/user/password/link",{params:{username:t}})}function o(t,n,i){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:i})}function r(t){return e.put("/api/user",{user:t})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:i,resetPassword:o,updateUser:r};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i,o){t.authenticateUser(i,o).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("competitions.myCompetitions"):n.error("Username / password combinaiton incorrect")})}var r=this;r.login=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){r.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function l(t){n.generatePasswordResetLink(t).then(function(t){t.data?(i.success("Please check your email for a password reset link"),e.go("home")):i.error("Could not find that email address")})}function s(r){r.password!==r.confirmPassword?i.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,r.password).then(function(t){t.data&&o.authenticateUser(t.data.username,r.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=l,c.resetPassword=s,a()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){i.password!==i.confirmPassword?n.error("Passwords don't match!"):(i.displayName||(i.displayName=i.firstName+" "+i.lastName),t.createUser(i).then(function(){e.go("verify")}))}var r=this;r.register=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){t.userId&&t.verificationToken&&(o.verifying=!0,o.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?o.verified=!0:o.verified=!1}))}var o=this;o.verified=void 0,o.verifying=!1,i()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.competition",function(){o.competition&&i()})}function i(){o.challenges=[],t.getActiveChallengesByCompetition(o.competition._id).then(function(e){e.data.length>0&&(o.challenges=e.data,_.forEach(o.challenges,function(e){"versus"===e.type&&(o.competition.players.length>2?(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team):(e.challenger.displayName=_.find(o.competition.players,{position:e.challenger.team}).displayName,e.opponent.displayName=_.find(o.competition.players,{position:e.opponent.team}).displayName)),0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var o=this;o.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("wpmActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"=",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function i(){e.$watchGroup(["vm.challenges","vm.competition"],function(){a.challenges&&a.challenges.length>0&&a.competition&&a.competition.players&&o()})}function o(){_.forEach(a.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger","versus"===e.type&&(a.competition.players.length>2?(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team):(e.challenger.displayName=_.find(a.competition.players,{position:e.challenger.team}).displayName,e.opponent.displayName=_.find(a.competition.players,{position:e.opponent.team}).displayName)),e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"MMM DD YYYY"})})}function r(e,t){swal({title:"Delete Challenge Result?",text:"You'll still need to reorder the players on your own",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){n.deleteChallenge(a.competition._id,e).then(function(){a.challenges.splice(t,1)})})}var a=this;a.challenges=[],a.deleteChallenge=r,i()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("wpmCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){r.player&&(n(r.player),i(r.player),o(r.player))})}function n(e){for(var t=[],n=0;n<r.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var i=0;i<t.length;i++)if(e.position<t[i+1]){e.level=t.indexOf(t[i])+1;break}}function i(e){var t,n=0,i=!0;_.forEach(e.results,function(o){i&&("challenger"===o.winner&&o.challenger._id===e._id||"opponent"===o.winner&&o.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):i=!1:("opponent"===o.winner&&o.challenger._id===e._id||"challenger"===o.winner&&o.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):i=!1)),r.streak={type:t,value:n}})}function o(e){r.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),r.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),r.wins.total=r.wins.asChallenger+r.wins.asOpponent,r.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),r.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),r.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),r.loses.total=r.loses.asChallenger+r.loses.asOpponent,r.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var r=this;r.maxLevels=7,r.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmPlayerOverallResults",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"=",team:"=",challenges:"="},templateUrl:"/challenges/components/team-overall-results.html"};return e}function t(e){function t(){e.$watchCollection(["vm.challenges","vm.competition"],function(){o.challenges&&o.challenges.length>0&&(n(o.team,o.challenges),i(o.team,o.challenges),2===o.competition.players.length&&(o.singlePlayerTeams=!0,o.displayName=_.find(o.competition.players,{position:o.team}).displayName,o.playerName=_.find(o.competition.players,{position:o.team}).firstName+" "+_.find(o.competition.players,{position:o.team}).lastName))})}function n(e,t){var n,i=0,r=!0;_.forEach(t,function(t){r&&("challenger"===t.winner&&t.challenger.team===e||"opponent"===t.winner&&t.opponent.team===e?"losing"!==n?(i+=1,n="winning"):r=!1:("opponent"===t.winner&&t.challenger.team===e||"challenger"===t.winner&&t.opponent.team===e)&&("winning"!==n?(i+=1,n="losing"):r=!1)),o.streak={type:n,value:i}})}function i(e,t){o.wins.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"opponent"===t.winner})),o.wins.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"challenger"===t.winner})),o.wins.total=o.wins.asChallenger+o.wins.asOpponent,o.wins.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"challenger"===t.winner||t.opponent.team===e&&"opponent"===t.winner)})),o.loses.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"challenger"===t.winner})),o.loses.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"opponent"===t.winner})),o.loses.total=o.loses.asChallenger+o.loses.asOpponent,o.loses.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"opponent"===t.winner||t.opponent.team===e&&"challenger"===t.winner)}))}var o=this;o.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.streak={type:null,value:0},o.singlePlayerTeams=!1,t()}t.$inject=["$scope"],angular.module("app").directive("wpmTeamOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/pyramid/create",{challenge:t})}function n(t){return e.put("/api/challenges/pyramid/cancel",{challenge:t})}function i(t){return e.post("/api/challenges/versus/create",{challenge:t})}function o(t){return e.post("/api/challenges/pyramid/complete",{challenge:t})}function r(t){return e.post("/api/challenges/versus/complete",{challenge:t})}function a(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function l(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function s(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function c(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function p(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function u(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function m(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var d={createPyramidChallenge:t,createVersusChallenge:i,cancelPyramidChallenge:n,completePyramidChallenge:o,completeVersusChallenge:r,getChallengesByCompetition:a,getActiveChallengesByCompetition:l,getActiveChallengeByCompetitionByPlayer:s,getCompletedChallengesByCompetition:c,deleteActiveChallengeByCompetitionByPlayer:p,deleteChallenge:u,getPlayerResultsByCompetition:m};return d}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var i=this;i.indentity=e,i.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("wpmFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,i,o){function r(){a(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&a()})}function a(){u.alerts=[],n.isAuthenticated()&&o.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){u.alerts=e.data})}function l(e,t){o.clearAlert(e).then(function(){u.alerts.splice(t,1)})}function s(){o.clearAllAlertsByPlayer(n.currentUser._id).then(function(){u.alerts=[]})}function c(){t.setSidebarStatus(!u.sidebarStatus.left)}function p(){i.logout()}var u=this;u.indentity=n,u.logout=p,u.sidebarStatus=t.getSidebarStatus(),u.toggleSidebar=c,u.clearAlert=l,u.clearAllAlerts=s,u.alerts=[],r(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&a()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("wpmHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function i(){t.logout()}var o=this;o.indentity=e,o.logout=i,o.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("wpmSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var i in e)n.push(e[i]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function i(t){return e.put("/api/alerts/clear",{userId:t})}var o={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:i};return o}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var i;null!==e.bootstrappedUserObject&&(i=e.bootstrappedUserObject);var o={currentUser:i,isAuthenticated:t,isAuthorized:n};return o}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function o(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var r={info:e,success:t,warning:n,error:i,inverse:o};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85},delay:5e3}),r}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,i){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:i,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},i={getSidebarStatus:e,setSidebarStatus:t};return i}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function i(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function o(){a=new WebSocket(i()),a.onmessage=function(t){s=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},a.onclose=function(){s<l.length?(console.log("WebSocket closed. Reconnecting..."),n(o,1e3*l[s]),s+=1):console.log("Giving up on WebSocket")}}function r(e,t){var n=JSON.stringify({topic:e,data:t});a.send(n)}var a,l=[3,10,100,1e3],s=0,c={connect:o,send:r};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e,t){function n(){e.getPublicCompetitions().then(function(e){i.publicCompetitions=e.data}),t.isAuthorized("super-admin")&&e.getPrivateCompetitions().then(function(e){i.privateCompetitions=e.data})}var i=this;i.publicCompetitions=[],i.privateCompetitions=[],n()}e.$inject=["competitionsService","identityService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/competition-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("wpmCompetitionCompact",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=o.competition.players.length+1,e.approvePendingPlayer(o.competition._id,t)}function i(t){e.denyPendingPlayer(o.competition._id,t)}var o=this;o.pendingPlayers=[],o.approvePendingPlayer=n,o.denyPendingPlayer=i,t()}t.$inject=["competitionsService"],angular.module("app").directive("wpmPendingPlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/pyramid.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o,r,a){function l(){for(var t=A;t>0;--t)S.maxPlayers+=t;e.$watch("vm.competition",function(){S.competition&&(S.competitionId=S.competition._id,s(),c(),u(),m(),d())})}function s(){S.competition.players=i("orderBy")(S.competition.players,"position")}function c(){S.currentUserIsAdmin=!1,S.currentUserIsPending=!1,r.isAuthenticated()&&(S.currentUserIsAdmin=_.some(S.competition.admins,["_id",r.currentUser._id]),S.currentUserIsPending=_.some(S.competition.pendingPlayers,["_id",r.currentUser._id])),S.currentUserIsOnCompetition=!1,S.hasActiveChallenge=!1,_.forEach(S.competition.players,function(e){r.isAuthenticated()&&e._id===r.currentUser._id&&(S.currentUserIsOnCompetition=!0,e.class="current-user",S.currentUserPlayer=e,a.getActiveChallengeByCompetitionByPlayer(S.competitionId,e._id).then(function(t){if(t.data){S.hasActiveChallenge=!0,S.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger;var n=_.find(S.competition.players,{_id:S.activeChallengeOpponent._id});n.class=n.class?n.class+" current-opponent":"current-opponent"}}))}),a.getActiveChallengesByCompetition(S.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(S.competition.players,{_id:e.challenger._id});"available"===t.class&&(t.class=""),t.class=t.class?t.class+" unavailable":"unavailable",t.available=!1,t.challenge={position:"challenger"};var n=_.find(S.competition.players,{_id:e.opponent._id});if("available"===n.class&&(n.class=""),n.class=n.class?n.class+" unavailable":"unavailable",n.available=!1,n.challenge={position:"opponent"},0!==e.timeLimit){var i=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;i>0?n.challenge.expires=i:i<=0&&g(null,!0,n)}}),f()})}function p(){S.breakPoints=[];for(var e=0;e<A;e++)S.breakPoints.push(e*(e+1)/2+1)}function u(){var e=0;S.levels=[],p();for(var t=0;t<S.competition.players.length;t++)S.breakPoints.indexOf(t+1)>-1&&(e+=1,S.levels.push(e)),S.competition.players[t].level=e}function m(){S.numberOfBlocks=0;for(var e=_.last(S.levels);e>0;e--)S.numberOfBlocks+=e}function d(){S.numberOfRealPlayers=S.competition.players.length;for(var e=S.competition.players.length;e<S.numberOfBlocks;e++)S.competition.players.push({firstName:"Empty",lastName:"Spot",displayName:"Empty Spot",position:99,class:S.currentUserIsOnCompetition?"empty":"joinable empty"});u()}function f(){if(S.availableChallenges=!1,S.currentUserIsOnCompetition&&!S.hasActiveChallenge){var e=S.currentUserPlayer.level>1?S.currentUserPlayer.level-1:null;_.forEach(S.competition.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&t.available!==!1&&(S.availableChallenges=!0,t.available=!0,t.class="available")})}}function h(e){if(e.available){S.hasActiveChallenge=!0;var t={type:S.competition.type,competitionName:S.competition.name,competitionId:S.competitionId,complete:!1,forfeit:!1,timeLimit:S.competition.forfeitDays,challenger:{_id:S.currentUserPlayer._id,email:S.currentUserPlayer.email,firstName:S.currentUserPlayer.firstName,lastName:S.currentUserPlayer.lastName,displayName:S.currentUserPlayer.displayName,position:S.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position}};a.createPyramidChallenge(t).then(function(){S.competitionMenuToggle=!1})}else o.error("Sorry, that is not a valid challenge.")}function v(){a.getActiveChallengeByCompetitionByPlayer(S.competitionId,S.currentUserPlayer._id).then(function(e){e.data&&(e.data.challenger._id===S.currentUserPlayer._id?a.cancelPyramidChallenge(e.data).then(function(){S.hasActiveChallenge=!1}):swal("Challenger must cancel challenge","You'll have to ask "+e.data.challenger.displayName+" to cancel the challenge."))})}function g(e,t,i){var o=i||S.currentUserPlayer;a.getActiveChallengeByCompetitionByPlayer(S.competitionId,o._id).then(function(o){S.hasActiveChallenge=!1;var r=!1;t?(o.data.forfeit=!0,"opponent"===i.challenge.position?(o.data.winner="challenger",r=!0):o.data.winner="opponent"):e?o.data.challenger._id===S.currentUserPlayer._id?(o.data.winner="challenger",r=!0):o.data.winner="opponent":o.data.challenger._id===S.currentUserPlayer._id?o.data.winner="opponent":(o.data.winner="challenger",r=!0),r?n.swapPositions(S.competitionId,o.data.opponent,o.data.challenger).then(function(){a.completePyramidChallenge(o.data).then(function(){I&&P()})}):a.completePyramidChallenge(o.data).then(function(){I&&P()}),S.competitionMenuToggle=!1})}function y(e){g(null,!0,e)}function C(){if(r.isAuthenticated())if(S.numberOfRealPlayers<S.maxPlayers){var e={_id:r.currentUser._id,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,displayName:r.currentUser.displayName,email:r.currentUser.username,position:S.numberOfRealPlayers+1};S.competition.restrictJoins?swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetitionRequest(S.competition,e).then(function(){S.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")}):swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetition(S.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")})}else o.warning("Sorry, this competition is full");else o.warning("Please login to join a competition"),t.previous="competitions.view",t.prevParams={competitionId:S.competitionId},t.go("login")}function w(){swal({title:"Leave Competition?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){P(),swal("OK, you'r out!","You've been removed from the competition.","success")})}function P(){r.isAuthenticated()&&S.currentUserIsOnCompetition&&(I=!0,S.hasActiveChallenge?g(null,!0,S.currentUserPlayer):(S.currentUserIsOnCompetition=!1,S.hasActiveChallenge=!1,n.getCompetition(S.competitionId).then(function(e){var t=e.data,i=S.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=i&&(e.position-=1)});for(var o=_.remove(t.players,function(e){return e._id===S.currentUserPlayer._id}),r=[],a=0;a<S.numberOfRealPlayers-1;++a){var l={_id:t.players[a]._id,firstName:t.players[a].firstName,lastName:t.players[a].lastName,displayName:t.players[a].displayName,position:t.players[a].position};r.push(l)}n.removedPlayerFromCompetition(S.competitionId,o[0],r).then(function(){I=!1})})))}function b(e){99!==e.position||S.currentUserIsOnCompetition?e.showChallengeModal=!e.showChallengeModal:C()}function U(){n.getCompetition(S.competitionId).then(function(e){S.competition=e.data})}var A=7,S=this;S.competitionId=null,S.breakPoints=[],S.levels=[],S.numberOfBlocks=0,S.currentUserIsOnCompetition=!1,S.currentUserIsPending=!1,S.currentUserIsAdmin=!1,S.hasActiveChallenge=!1,S.activeChallengeOpponent=null,S.availableChallenges=!1,S.createChallenge=h,S.cancelChallenge=v,S.completeChallenge=g,S.challengeExpired=y,S.currentUserPlayer={},S.competitionMenuToggle=!1,S.addCurrentUserToCompetition=C,S.confirmRemoveCurrentUserFromCompetition=w,S.playerClick=b,S.numberOfRealPlayers=0,S.maxPlayers=0,l();var I=!1;e.$on("ws:competition_updated",function(e,t){S.competitionId===t.competitionId&&(o.info(t.description),U())})}t.$inject=["$scope","$state","competitionsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("wpmPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-admins.html"};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){d.competition&&(d.addedAdmins=_.cloneDeep(d.competition.admins),d.disableSubmit=!0,d.userIsPrimaryAdmin=_.find(d.competition.admins,{primary:!0})._id===o.currentUser._id,a())})}function a(){d.availableAdmins=[],u=[],i.getAllUsers().then(function(e){_.forEach(d.competition.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){d.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),m=_.cloneDeep(d.availableAdmins)})}function l(){d.competition.admins=d.addedAdmins,t.updateCompetition(d.competition).then(function(){d.disableSubmit=!0})}function s(){u=[],d.addedAdmins=_.cloneDeep(d.competition.admins),d.availableAdmins=_.cloneDeep(m)}function c(e){u.push(e),d.availableAdmins.push(_.remove(d.addedAdmins,{_id:e._id})[0]),d.disableSubmit=!1}function p(e){d.addedAdmins.push(_.remove(d.availableAdmins,{_id:e._id})[0]),d.disableSubmit=!1}var u=[],m=[],d=this;d.availableAdmins=[],d.addedAdmins=[],d.userIsPrimaryAdmin=!1,d.updateCompetition=l,d.cancelUpdate=s,d.removeAdmin=c,d.addAdmin=p,d.disableSubmit=!0,r()}t.$inject=["$scope","competitionsService","challengesService","userService","identityService"],angular.module("app").directive("wpmUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-players.html"};
return e}function t(e,t,n,i,o,r){function a(){for(var t=g;t>0;--t)y+=t;e.$watch("vm.competition",function(){C.competition&&(C.addedPlayers=_.cloneDeep(C.competition.players),C.disableSubmit=!0,l())})}function l(){C.availablePlayers=[],h=[],o.getAllUsers().then(function(e){_.forEach(C.competition.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){C.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),v=_.cloneDeep(C.availablePlayers)})}function s(){"versus"===C.competition.type&&C.addedPlayers.length%2>0?r.error("A Versus competition must have an even number of players"):C.addedPlayers.length>y?r.error("A competition can have a maximum of "+y+" players"):(_.forEach(h,function(e){i.deleteActiveChallengeByCompetitionByPlayer(C.competition._id,e._id)}),C.competition.players=C.addedPlayers,n.updateCompetition(C.competition).then(function(){C.disableSubmit=!0}))}function c(){h=[],C.addedPlayers=_.cloneDeep(C.competition.players),C.availablePlayers=_.cloneDeep(v)}function p(){"versus"===C.competition.type?m():"pyramid"===C.competition.type&&u(),C.disableSubmit=!1}function u(){var e=1;_.forEach(C.addedPlayers,function(t){t.position=e,++e})}function m(){_.forEach(C.addedPlayers,function(e){e.position=2});for(var e=0;e<C.addedPlayers.length/2;e++)C.addedPlayers[e].position=1}function d(e){h.push(e),C.availablePlayers.push(_.remove(C.addedPlayers,{_id:e._id})[0]),p()}function f(e){C.addedPlayers.push(_.remove(C.availablePlayers,{_id:e._id})[0]),p(),C.disableSubmit=!1}var h=[],v=[],g=7,y=null,C=this;C.availablePlayers=[],C.addedPlayers=[],C.updateCompetition=s,C.cancelUpdate=c,C.reorderPlayers=p,C.removePlayer=d,C.addPlayer=f,C.disableSubmit=!0,a()}t.$inject=["$scope","$filter","competitionsService","challengesService","userService","notifyService"],angular.module("app").directive("wpmUpdatePlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/versus.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){m.competition&&(m.competitionId=m.competition._id,m.showControls=!1,m.showChallengeModal=!1,a(),l())})}function a(){m.competition.teams=[{players:_.filter(m.competition.players,["position",1])},{players:_.filter(m.competition.players,["position",2])}],2===m.competition.players.length&&(m.singlePlayerTeams=!0)}function l(){m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,n.isAuthenticated()&&(m.currentUserIsAdmin=_.some(m.competition.admins,["_id",n.currentUser._id]),m.currentUserIsPending=_.some(m.competition.pendingPlayers,["_id",n.currentUser._id])),m.currentUserIsOnCompetition=!1,m.hasActiveChallenge=!1,_.forEach(m.competition.players,function(e){n.isAuthenticated()&&e._id===n.currentUser._id&&(m.currentUserIsOnCompetition=!0,e.class="current-user",m.currentUserPlayer=e,m.competition.teams[e.position-1].class="current-user-team",m.competition.class="current-user-on-competition")}),i.getActiveChallengesByCompetition(m.competitionId).then(function(e){if(e.data.length>0&&(m.activeChallenge=e.data[0],m.hasActiveChallenge=!0,0!==m.activeChallenge.timeLimit)){var t=moment().diff(moment(m.activeChallenge.created).add(m.activeChallenge.timeLimit,"d"),"s")*-1;t>0?m.challengeExpireTime=t:t<=0&&p(null,!0)}})}function s(){m.hasActiveChallenge&&m.currentUserIsOnCompetition&&(m.showControls=!m.showControls)}function c(e){if(m.showChallengeModal=!1,m.hasActiveChallenge)o.error("Sorry, you are already in an active challenge.");else{m.hasActiveChallenge=!0;var t={type:m.competition.type,competitionName:m.competition.name,competitionId:m.competitionId,complete:!1,forfeit:!1,timeLimit:m.competition.forfeitDays,challenger:{team:m.currentUserPlayer.position,_id:m.currentUserPlayer._id},opponent:{team:e}};i.createVersusChallenge(t).then(function(){m.competitionMenuToggle=!1})}}function p(e,t){m.hasActiveChallenge=!1;var n=m.activeChallenge;t?(n.forfeit=!0,n.winner="challenger"):m.activeChallenge.challenger.team===e?n.winner="challenger":n.winner="opponent",i.completeVersusChallenge(n),m.competitionMenuToggle=!1}function u(){t.getCompetition(m.competitionId).then(function(e){m.competition=e.data})}var m=this;m.competitionId=null,m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,m.currentUserIsOnCompetition=!1,m.activeChallenge=null,m.hasActiveChallenge=!1,m.currentUserPlayer=null,m.createChallenge=c,m.completeChallenge=p,m.challengeExpireTime=null,m.showControls=!1,m.showChallengeModal=!1,m.toggleControls=s,m.singlePlayerTeams=!1,r(),e.$on("ws:competition_updated",function(e,t){m.competitionId===t.competitionId&&(o.info(t.description),u())})}t.$inject=["$scope","competitionsService","identityService","challengesService","notifyService"],angular.module("app").directive("wpmVersus",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/competition",{params:{competitionId:t}})}function n(t){return e.get("/api/competitions/user",{params:{userId:t}})}function i(){return e.get("/api/competitions/public")}function o(){return e.get("/api/competitions/private")}function r(t){return e.post("/api/competitions/create",{competition:t})}function a(t){return e.post("/api/competitions/update",{competition:t})}function l(t){return e.delete("/api/competitions/delete",{params:{competitionId:t}})}function s(t,n,i){return e.post("/api/competitions/swapPositions",{competitionId:t,challenger:n,opponent:i})}function c(t,n){return e.post("/api/competitions/addPlayer",{competitionId:t,player:n})}function p(t,n){return e.post("/api/competitions/addPlayerRequest",{competition:t,player:n})}function u(t,n,i){return e.post("/api/competitions/removePlayer",{competitionId:t,removedPlayer:n,players:i})}function m(t,n){return e.post("/api/competitions/approvePlayer",{competitionId:t,player:n})}function d(t,n){return e.post("/api/competitions/denyPlayer",{competitionId:t,player:n})}var f={getCompetition:t,getCompetitionsForUser:n,getPublicCompetitions:i,getPrivateCompetitions:o,createCompetition:r,updateCompetition:a,deleteCompetition:l,swapPositions:s,addPlayerToCompetition:c,addPlayerToCompetitionRequest:p,removedPlayerFromCompetition:u,approvePendingPlayer:m,denyPendingPlayer:d};return f}e.$inject=["$http"],angular.module("app").factory("competitionsService",e)}(),function(){"use strict";function e(e,t,n,i,o,r,a,l){function s(){n.competitionId?(d.competitionId=n.competitionId,c()):t.go("competitions.myCompetitions")}function c(){o.getCompetition(d.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",r.currentUser._id])?(d.isAdmin=!0,e.data.players=i("orderBy")(e.data.players,"position"),d.competition=e.data):t.go("competitions.myCompetitions")}),l.getCompletedChallengesByCompetition(d.competitionId).then(function(e){d.challenges=e.data})}function p(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.restrictJoins=d.competition.restrictJoins,o.updateCompetition(t)})}function u(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.private=d.competition.private,o.updateCompetition(t)})}function m(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){o.deleteCompetition(d.competitionId).then(function(){t.go("competitions.myCompetitions")})})}var d=this;d.competitionId=null,d.updateCompetitionRestrictJoins=p,d.updateCompetitionPrivate=u,d.deleteCompetition=m,s(),e.$on("ws:competition_updated",function(e,t){d.competitionId===t.competitionId&&(a.info(t.description),c())}),e.$on("ws:competition_deleted",function(e,n){d.competitionId===n.competitionId&&(a.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","$filter","competitionsService","identityService","notifyService","challengesService"],angular.module("app").controller("CompetitionAdminCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){t.competitionId&&(s.competitionId=t.competitionId,l())}function l(){i.getCompetition(s.competitionId).then(function(e){e.data?(s.competition=e.data,"pyramid"===s.competition.type?_.forEach(s.competition.players,function(e){r.getPlayerResultsByCompetition(s.competitionId,e._id).then(function(t){e.results=t.data})}):"versus"===s.competition.type&&(s.teams=[{number:1},{number:2}])):n.go("competitions.myCompetitions")}),r.getCompletedChallengesByCompetition(s.competitionId).then(function(e){s.challenges=e.data})}var s=this;s.competitionId=null,s.competition={},s.playersResults=[],s.challenges=[],a(),e.$on("ws:competition_updated",function(e,t){s.competitionId===t.competitionId&&(o.info(t.description),l())}),e.$on("ws:competition_deleted",function(e,t){s.competitionId===t.competitionId&&(o.info(t.description),n.go("competitions.myCompetitions"))})}e.$inject=["$scope","$stateParams","$state","competitionsService","notifyService","challengesService"],angular.module("app").controller("CompetitionStatsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){n.competitionId&&(a.competitionId=n.competitionId,i.getCompetition(a.competitionId).then(function(e){e.data?a.competition=e.data:t.go("competitions.myCompetitions")}))}var a=this;a.competitionId=null,a.competition=null,r(),e.$on("ws:competition_deleted",function(e,n){a.competitionId===n.competitionId&&(o.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","competitionsService","notifyService"],angular.module("app").controller("CompetitionCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getPublicCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("CompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){t.getAllUsers().then(function(e){h.availablePlayers=e.data});for(var e=d;e>0;--e)f+=e;for(e=0;e<d;e++)m.push(e*(e+1)/2+1)}function a(e){h.addedPlayers.push(_.remove(h.availablePlayers,{_id:e._id})[0]),s()}function l(e){h.availablePlayers.push(_.remove(h.addedPlayers,{_id:e._id})[0]),s()}function s(){"versus"===h.newCompetition.type?p():"pyramid"===h.newCompetition.type&&c()}function c(){var e=1;_.forEach(h.addedPlayers,function(t){t.position=e,++e})}function p(){_.forEach(h.addedPlayers,function(e){e.position=2});for(var e=0;e<h.addedPlayers.length/2;e++)h.addedPlayers[e].position=1}function u(t){if("versus"===t.type&&h.addedPlayers.length%2>0)o.error("A Versus competition must have an even number of players");else if(h.addedPlayers.length>f)o.error("A competition can have a maximum of "+f+" players");else{angular.forEach(h.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position};t.players.push(n)}),t.admins=[{_id:i.currentUser._id,email:i.currentUser.username,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,displayName:i.currentUser.displayName,primary:!0}];for(var r=0;r<m.length;r++)if(t.players.length<m[r]){t.levels=r;break}n.createCompetition(t).then(function(t){e.go("competitions.view",{competitionId:t.data._id})})}}var m=[],d=7,f=null,h=this;h.newCompetition={players:[],restrictJoins:!1,private:!1},h.availablePlayers=[],h.addedPlayers=[],h.createCompetition=u,h.addPlayer=a,h.removePlayer=l,h.reorderPlayers=s,h.newCompetition.forfeitDays=1,h.competitionTypes=["pyramid","versus"],r()}e.$inject=["$state","userService","competitionsService","identityService","notifyService"],angular.module("app").controller("CreateCompetitionCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){a()}function a(){l=[],s.activeChallenge=null,i.isAuthenticated()&&t.getCompetitionsForUser(i.currentUser._id).then(function(e){s.competitions=e.data,_.forEach(s.competitions,function(e){l.push(e._id),"pyramid"===e.type?n.getActiveChallengeByCompetitionByPlayer(e._id,i.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))}):"versus"===e.type&&n.getActiveChallengesByCompetition(e._id).then(function(t){t.data.length>0&&(e.activeChallenge=t.data[0],0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var l=[],s=this;s.activeChallenge=null,r(),e.$on("ws:competition_updated",function(e,t){l.indexOf(t.competitionId)>=0&&(o.info(t.description),a())})}e.$inject=["$scope","competitionsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyCompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){e.currentUser.displayName||(r.user.displayName=e.currentUser.firstName+" "+e.currentUser.lastName)}function o(i){if(i.password!==i.confirmPassword)n.error("Passwords don't match!");else if(i.firstName.length<1||i.lastName.length<1||i.displayName.length<1)n.error("Don't leave names blank!  How will people know who you are?");else{var o={_id:i._id};(i.firstName!==e.currentUser.firstName&&i.firstName.length>0||i.lastName!==e.currentUser.lastName&&i.lastName.length>0||i.displayName!==e.currentUser.displayName&&i.displayName.length>0)&&(o.firstName=i.firstName,o.lastName=i.lastName,o.displayName=i.displayName),i.password&&i.password.lentgh>0&&(o.password=i.password),t.updateUser(o).then(function(){n.success("Your information has been updated"),r.userForm.$setPristine();var t=angular.copy(e.currentUser);angular.extend(t,o),e.currentUser=t,r.user.confirmPassword=r.user.password=""})}}var r=this;r.user={_id:e.currentUser._id,firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,displayName:e.currentUser.displayName},r.updateUser=o,r.userForm={},i()}e.$inject=["identityService","userService","notifyService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,i){var o=i.scrollaxis||"y",r=i.theme||"minimal-dark",a=i.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,r,o,a)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),i=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!i||i&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuZGlyZWN0aXZlLmpzIiwiY2hhbGxlbmdlcy9zZXJ2aWNlcy9jaGFsbGVuZ2VzLnNlcnZpY2UuanMiLCJjb21tb24vY29tcG9uZW50cy9mb290ZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2ZpbHRlcnMvb3JkZXItb2JqZWN0LWJ5LmZpbHRlci5qcyIsImNvbW1vbi9zZXJ2aWNlcy9hbGVydHMuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9pbmRlbnRpdHkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9ub3RpZnkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zY3JvbGxiYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zaWRlYmFyLnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvd2Vic29ja2V0LnNlcnZpY2UuanMiLCJjb21tb24vdmlld3MvaG9tZS5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvY29tcGV0aXRpb24tY29tcGFjdC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcHlyYW1pZC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3ZlcnN1cy5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvc2VydmljZXMvY29tcGV0aXRpb25zLnNlcnZpY2UuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24tYWRtaW4uY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1zdGF0cy5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY3JlYXRlLWNvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvbXktY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy92aWV3cy91c2VyLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tcG9uZW50cy91aS9zY3JvbGxiYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCIkaHR0cFByb3ZpZGVyIiwiJHVpYlRvb2x0aXBQcm92aWRlciIsIiRxUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCJvcHRpb25zIiwiYXBwZW5kVG9Cb2R5IiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwibG9jYWxTdG9yYWdlU2VydmljZSIsInRvZ2dsZVNpZGViYXJMb2NrZWQiLCJsb2NrZWQiLCJzZXQiLCJhcHBDdHJsIiwidGhpcyIsImxvY2tTaWRlYmFyIiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJzdXBlckFkbWluIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJhZG1pbiIsInJlcXVpcmVBZG1pbiIsInVzZXIiLCJyZXF1aXJlQXV0aCIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiY29udGVudEAiLCJyZXNvbHZlIiwiYXV0aCIsImF1dGhTZXJ2aWNlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsImF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCIkaW5qZWN0IiwiYXBwUnVuIiwiJHJvb3RTY29wZSIsIiRkb2N1bWVudCIsInNpZGViYXJTZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsInByZXZpb3VzIiwicHJldlBhcmFtcyIsInNldFNpZGViYXJTdGF0dXMiLCJib2R5Iiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50IiwicnVuIiwiJGh0dHAiLCIkcSIsInVzZXJTZXJ2aWNlIiwiaWRlbnRpdHlTZXJ2aWNlIiwibm90aWZ5U2VydmljZSIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2UiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwicmVhc29uIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsIl8iLCJmb3JFYWNoIiwiZGlzcGxheU5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInNvcnRCeSIsInZlcmlmeVVzZXIiLCJ1c2VySWQiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInBhcmFtcyIsImdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsiLCJyZXNldFBhc3N3b3JkIiwicHV0IiwidXBkYXRlVXNlciIsIkxvZ2luQ3RybCIsImFjdGl2YXRlIiwibG9naW4iLCJ2bSIsIlBhc3N3b3JkUmVzZXRDdHJsIiwiJHN0YXRlUGFyYW1zIiwidmVyaWZpZWQiLCJyZXNldFBhc3N3b3JkRm9ybSIsImNvbmZpcm1QYXNzd29yZCIsIlJlZ2lzdGVyQ3RybCIsInJlZ2lzdGVyIiwibmV3VXNlciIsIlZlcmlmaWNhdGlvbkN0cmwiLCJ2ZXJpZnlpbmciLCJ3cG1BY3RpdmVDaGFsbGVuZWdlcyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJjdHJsRnVuYyIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb21wZXRpdGlvbiIsIiRzY29wZSIsImNoYWxsZW5nZXNTZXJ2aWNlIiwiJHdhdGNoIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlcyIsImNoYWxsZW5nZXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsIl9pZCIsImxlbmd0aCIsImNoYWxsZW5nZSIsInR5cGUiLCJwbGF5ZXJzIiwiY2hhbGxlbmdlciIsInRlYW0iLCJvcHBvbmVudCIsImZpbmQiLCJwb3NpdGlvbiIsInRpbWVMaW1pdCIsImV4cGlyZXMiLCJtb21lbnQiLCJkaWZmIiwiY3JlYXRlZCIsImFkZCIsIndwbUNvbXBsZXRlZENoYWxsZW5lZ2VzIiwiYWxsb3dEZWxldGUiLCIkd2F0Y2hHcm91cCIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJjbG9zZU9uQ2FuY2VsIiwic3BsaWNlIiwid3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMiLCJwbGF5ZXIiLCJhc3NpZ25wbGF5ZXJzVG9MZXZlbHMiLCJjYWxjdWxhdGVTdHJlYWsiLCJjYWxjdWF0ZVdpbkFuZExvc2VzIiwiYnJlYWtQb2ludHMiLCJpIiwibWF4TGV2ZWxzIiwicHVzaCIsImxldmVsIiwiaiIsImluZGV4T2YiLCJzdHJlYWtUeXBlIiwic3RyZWFrIiwiY29udGludWVTdHJlYWsiLCJyZXN1bHRzIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsIndwbVRlYW1PdmVyYWxsUmVzdWx0cyIsIiR3YXRjaENvbGxlY3Rpb24iLCJzaW5nbGVQbGF5ZXJUZWFtcyIsInBsYXllck5hbWUiLCJjcmVhdGVQeXJhbWlkQ2hhbGxlbmdlIiwiY2FuY2VsUHlyYW1pZENoYWxsZW5nZSIsImNyZWF0ZVZlcnN1c0NoYWxsZW5nZSIsImNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZSIsImNvbXBsZXRlVmVyc3VzQ2hhbGxlbmdlIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJjb21wZXRpdGlvbklkIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwicGxheWVySWQiLCJnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsImxpbWl0IiwiZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwiZGVsZXRlIiwiZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24iLCJ3cG1Gb290ZXIiLCJpbmRlbnRpdHkiLCJ3cG1IZWFkZXIiLCJhbGVydHNTZXJ2aWNlIiwiZ2V0QWN0aXZlQWxlcnRzIiwiaGVhZGVyQ3RybCIsImFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyIiwiY2xlYXJBbGVydCIsImluZGV4IiwiY2xlYXJBbGxBbGVydHMiLCJjbGVhckFsbEFsZXJ0c0J5UGxheWVyIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJTdGF0dXMiLCJsZWZ0IiwiZ2V0U2lkZWJhclN0YXR1cyIsImUiLCJzb21lIiwid3BtU2lkZWJhciIsIm9yZGVyT2JqZWN0QnkiLCJpbnB1dCIsImF0dHJpYnV0ZSIsImlzT2JqZWN0IiwiYXJyYXkiLCJvYmplY3RLZXkiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsImFsZXJ0SWQiLCIkd2luZG93Iiwicm9sZXMiLCJib290c3RyYXBwZWRVc2VyT2JqZWN0IiwiaW5mbyIsInRhcmdldCIsIiQiLCJub3RpZnkiLCJ3YXJuaW5nIiwiaW52ZXJzZSIsIm5vdGlmeURlZmF1bHRzIiwibmV3ZXN0X29uX3RvcCIsIm9mZnNldCIsIngiLCJ5IiwiZGVsYXkiLCJzY3JvbGxiYXJTZXJ2aWNlIiwibWFsaWh1U2Nyb2xsIiwic2VsZWN0b3IiLCJ0aGVtZSIsInNjcm9sbGF4aXMiLCJtb3VzZXdoZWVsYXhpcyIsIm1DdXN0b21TY3JvbGxiYXIiLCJzY3JvbGxJbmVydGlhIiwiYXhpcyIsIm1vdXNlV2hlZWwiLCJlbmFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXR1cyIsInJpZ2h0Iiwid2Vic29ja2V0U2VydmljZSIsIiR0aW1lb3V0Iiwid2Vic29ja2V0SG9zdCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiY29ubmVjdCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJyZXRyeSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCIkYnJvYWRjYXN0IiwidG9waWMiLCJvbmNsb3NlIiwicmV0cnlTZWNvbmRzIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJqc29uIiwic3RyaW5naWZ5IiwiSG9tZUN0cmwiLCJjb21wZXRpdGlvbnNTZXJ2aWNlIiwiZ2V0UHVibGljQ29tcGV0aXRpb25zIiwiY29tcGV0aXRpb25zIiwicHVibGljQ29tcGV0aXRpb25zIiwiZ2V0UHJpdmF0ZUNvbXBldGl0aW9ucyIsInByaXZhdGVDb21wZXRpdGlvbnMiLCJ3cG1Db21wZXRpdGlvbkNvbXBhY3QiLCJ3cG1QZW5kaW5nUGxheWVycyIsImFwcHJvdmVQZW5kaW5nUGxheWVyIiwiZGVueVBlbmRpbmdQbGF5ZXIiLCJwZW5kaW5nUGxheWVycyIsIndwbVB5cmFtaWQiLCJyZXBsYWNlIiwiJGZpbHRlciIsIm1heFBsYXllcnMiLCJvcmRlclBsYXllcnMiLCJnZXRQbGF5ZXJzU3RhdHVzIiwiYXNzaWduTGV2ZWxzVG9QbGF5ZXJzIiwiY2FsY3VsYXRlQ29tcGV0aXRpb25CbG9ja3MiLCJmaWxsSW5FbXB0eUJsb2NrcyIsImN1cnJlbnRVc2VySXNBZG1pbiIsImN1cnJlbnRVc2VySXNQZW5kaW5nIiwiYWRtaW5zIiwiY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24iLCJoYXNBY3RpdmVDaGFsbGVuZ2UiLCJjbGFzcyIsImN1cnJlbnRVc2VyUGxheWVyIiwiYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQiLCJjdXJyZW50T3Bwb25lbnQiLCJhdmFpbGFibGUiLCJ0aW1lVG9FeHBpcmUiLCJjb21wbGV0ZUNoYWxsZW5nZSIsImZpbmRBdmFpbGFibGVDaGFsbGVuZ2VzIiwiY3JlYXRlQnJlYWtQb2ludHMiLCJsZXZlbHMiLCJudW1iZXJPZkJsb2NrcyIsImxhc3QiLCJudW1iZXJPZlJlYWxQbGF5ZXJzIiwiYXZhaWxhYmxlQ2hhbGxlbmdlcyIsImxldmVsQWJvdmUiLCJjcmVhdGVDaGFsbGVuZ2UiLCJjb21wZXRpdGlvbk5hbWUiLCJuYW1lIiwiY29tcGxldGUiLCJmb3JmZWl0RGF5cyIsImVtYWlsIiwiY29tcGV0aXRpb25NZW51VG9nZ2xlIiwiY2FuY2VsQ2hhbGxlbmdlIiwid2lubmVySXNDdXJyZW50VXNlciIsImZvcmZlaXRMb3NlciIsInN3YXBQb3NpdGlvbnMiLCJyZW1vdmluZ0N1cnJlbnRVc2VyIiwicmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24iLCJjaGFsbGVuZ2VFeHBpcmVkIiwiYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uIiwicmVzdHJpY3RKb2lucyIsImFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0IiwiYWRkUGxheWVyVG9Db21wZXRpdGlvbiIsImNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbiIsImNvbmZpcm1CdXR0b25DbGFzcyIsImdldENvbXBldGl0aW9uIiwicCIsIm9wZW5Qb3NpdGlvbiIsInJlbW92ZWRQbGF5ZXIiLCJyZW1vdmUiLCJ1cGRhdGVkUGxheWVycyIsInVwZGF0ZWRQbGF5ZXIiLCJyZW1vdmVkUGxheWVyRnJvbUNvbXBldGl0aW9uIiwicGxheWVyQ2xpY2siLCJzaG93Q2hhbGxlbmdlTW9kYWwiLCJyZWZyZXNoQ29tcGV0aXRpb24iLCJjaGFsbGVuZ2VEZXRhaWxzIiwiZGVzY3JpcHRpb24iLCJ3cG1VcGRhdGVBZG1pbnMiLCJhZGRlZEFkbWlucyIsImNsb25lRGVlcCIsImRpc2FibGVTdWJtaXQiLCJ1c2VySXNQcmltYXJ5QWRtaW4iLCJwcmltYXJ5IiwiZ2V0QXZhaWxhYmxlQWRtaW5zIiwiYXZhaWxhYmxlQWRtaW5zIiwicmVtb3ZlZEFkbWlucyIsImNvbXBldGl0aW9uQWRtaW4iLCJhdmFpbGFibGVBZG1pbiIsIm9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zIiwidXBkYXRlQ29tcGV0aXRpb24iLCJjYW5jZWxVcGRhdGUiLCJyZW1vdmVBZG1pbiIsImFkZEFkbWluIiwid3BtVXBkYXRlUGxheWVycyIsImFkZGVkUGxheWVycyIsImdldEF2YWlsYWJsZVBsYXllcnMiLCJhdmFpbGFibGVQbGF5ZXJzIiwicmVtb3ZlZFBsYXllcnMiLCJjb21wZXRpdGlvblBsYXllciIsImF2YWlsYWJsZVBsYXllciIsIm9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyIsInJlb3JkZXJQbGF5ZXJzIiwicmVvcmRlclZlcnN1c1BsYXllcnMiLCJyZW9yZGVyUHlyYW1pZFBsYXllcnMiLCJyZW1vdmVQbGF5ZXIiLCJhZGRQbGF5ZXIiLCJ3cG1WZXJzdXMiLCJzaG93Q29udHJvbHMiLCJncm91cFBsYXllcnMiLCJnZXRDdXJyZW50VXNlclN0YXR1cyIsInRlYW1zIiwiYWN0aXZlQ2hhbGxlbmdlIiwiY2hhbGxlbmdlRXhwaXJlVGltZSIsInRvZ2dsZUNvbnRyb2xzIiwid2lubmluZ1RlYW0iLCJnZXRDb21wZXRpdGlvbnNGb3JVc2VyIiwiY3JlYXRlQ29tcGV0aXRpb24iLCJkZWxldGVDb21wZXRpdGlvbiIsIkNvbXBldGl0aW9uQWRtaW5DdHJsIiwiaXNBZG1pbiIsInVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucyIsInVwZGF0ZWRDb21wZXRpdGlvbiIsInVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZSIsInByaXZhdGUiLCJjb21wZXRpdGlvbkRldGFpbHMiLCJDb21wZXRpdGlvblN0YXRzQ3RybCIsIm51bWJlciIsInBsYXllcnNSZXN1bHRzIiwiQ29tcGV0aXRpb25DdHJsIiwiQ29tcGV0aXRpb25zQ3RybCIsIkNyZWF0ZUNvbXBldGl0aW9uQ3RybCIsIm5ld0NvbXBldGl0aW9uIiwiY29tcGV0aXRpb25UeXBlcyIsIk15Q29tcGV0aXRpb25zQ3RybCIsIm15Q29tcGV0aXRpb25zIiwiVXNlckN0cmwiLCJ1c2VyVXBkYXRlcyIsImxlbnRnaCIsInVzZXJGb3JtIiwiJHNldFByaXN0aW5lIiwiY3VycmVudFVzZXJDbG9uZSIsImNvcHkiLCJleHRlbmQiLCJjT3ZlcmZsb3ciLCJsaW5rRnVuYyIsImVsZW1lbnQiLCJhdHRycyIsImhhc0NsYXNzIiwibGluayIsInRvZ2dsZVN1Ym1lbnUiLCJlbCIsImNsaWNrIiwibmV4dCIsInNsaWRlVG9nZ2xlIiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiLCJ3YXZlc0VmZmVjdCIsIldhdmVzIiwiYXR0YWNoIiwiaW5pdCIsImZnTGluZSIsImNoaWxkcmVuIiwiZmlyc3QiLCJpc0Zsb2F0TGFiZWwiLCJmb2N1cyIsImFkZENsYXNzIiwiYmx1ciIsInZhbCIsInJlbW92ZUNsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxPQUNBLFlBQ0EsZUFDQSxZQUNBLHNCQUNBLGFBQ0Esd0JBQ0EsUUFDQSxxQkFDQSx3QkFDQSxzQkNWQSx3QkFJQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRixFQUFBRyxTQUFBQyxRQUFBQyxNQUNBTCxFQUFBRyxTQUFBQyxRQUFBQyxRQUdBTCxFQUFBRyxTQUFBQyxRQUFBQyxJQUFBLHFCQUFBLGdDQUVBTCxFQUFBRyxTQUFBQyxRQUFBQyxJQUFBLGlCQUFBLFdBQ0FMLEVBQUFHLFNBQUFD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LEtBUUEsUUFBQUwsR0FBQTlULEVBQUFvVSxHQUNBQSxFQUFBQyxNQUFBLFdBQ0FELEVBQUFFLE9BQUFDLFlBQUEsS0FDQUgsRUFBQUksU0FBQUMsWUFBQSxhQVZBLEdBQUE3VSxJQUNBRyxTQUFBLElBQ0FtVSxLQUFBSixFQUdBLE9BQUFsVSxHQVZBakksUUFDQUMsT0FBQSxPQUNBZ0ksVUFBQSxnQkFBQXVVLE1DSkEsV0FDQSxZQUtBLFNBQUFPLEtBUUEsUUFBQVosR0FBQTlULEVBQUErVCxHQUNBQSxFQUFBRSxTQUFBLGFBQUFGLEVBQUFFLFNBQUEsYUFDQVUsTUFBQUMsT0FBQWIsR0FBQSxpQkFDQUEsRUFBQUUsU0FBQSxhQUNBVSxNQUFBQyxPQUFBYixHQUFBLGdCQUVBWSxNQUFBQyxPQUFBYixHQUdBWSxNQUFBRSxPQWhCQSxHQUFBalYsSUFDQUcsU0FBQSxJQUNBbVUsS0FBQUosRUFHQSxPQUFBbFUsR0FWQWpJLFFBQ0FDLE9BQUEsT0FDQWdJLFVBQUEsY0FBQThVLE1DSkEsV0FDQSxZQUtBLFNBQUFJLEtBUUEsUUFBQWhCLEdBQUE5VCxFQUFBK1QsR0FDQSxHQUFBNU0sR0FBQTRNLEVBQUFnQixXQUFBQyxRQUNBQyxFQUFBbEIsRUFBQVMsU0FBQVAsU0FBQSxXQUNBOU0sR0FBQStOLE1BQUEsV0FDQW5CLEVBQUFvQixTQUFBLGdCQUdBaE8sRUFBQWlPLEtBQUEsYUFDQUgsR0FBQUEsR0FBQSxJQUFBOU4sRUFBQWtPLE1BQUE1VSxTQUNBc1QsRUFBQXVCLFlBQUEsZ0JBaEJBLEdBQUExVixJQUNBRyxTQUFBLElBQ0FtVSxLQUFBSixFQUdBLE9BQUFsVSxHQVZBakksUUFDQUMsT0FBQSxPQUNBZ0ksVUFBQSxTQUFBa1YiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICd1aS5ib290c3RyYXAnLFxuICAnbmdBbmltYXRlJyxcbiAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAnbm91aXNsaWRlcicsXG4gICdsb2NhbHl0aWNzLmRpcmVjdGl2ZXMnLFxuICAndGltZXInLFxuICAnTG9jYWxTdG9yYWdlTW9kdWxlJyxcbiAgJ2FuZ3VsYXItc29ydGFibGUtdmlldycsXG4gICdhbmd1bGFyLnZlcnRpbGl6ZSdcbl0pOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0ICc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJhdGlvbik7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJhdGlvbigkaHR0cFByb3ZpZGVyLCAkdWliVG9vbHRpcFByb3ZpZGVyLCAkcVByb3ZpZGVyKSB7XG4gICAgLy9pbml0aWFsaXplIGdldCBpZiBub3QgdGhlcmVcbiAgICBpZiAoISRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQpIHtcbiAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7fTsgICAgXG4gICAgfSAgICBcbiAgICAvL2Rpc2FibGUgSUUgYWpheCByZXF1ZXN0IGNhY2hpbmdcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydJZi1Nb2RpZmllZC1TaW5jZSddID0gJ0ZyaSwgMDEgSmFuIDIwMTYgMDU6MDA6MDAgR01UJztcbiAgICAvLyBleHRyYVxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ0NhY2hlLUNvbnRyb2wnXSA9ICduby1jYWNoZSc7XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnUHJhZ21hJ10gPSAnbm8tY2FjaGUnO1xuXG4gICAgJHVpYlRvb2x0aXBQcm92aWRlci5vcHRpb25zKHsgYXBwZW5kVG9Cb2R5OiB0cnVlIH0pO1xuICAgICRxUHJvdmlkZXIuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMoZmFsc2UpO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcblxuICBmdW5jdGlvbiBBcHBDdHJsKCRzdGF0ZSwgbG9jYWxTdG9yYWdlU2VydmljZSkge1xuICAgIHZhciBhcHBDdHJsID0gdGhpcztcbiAgICAvLyBVc2UgdGhpcyBmb3IgU2lkZWJhciBtZW51XG4gICAgYXBwQ3RybC4kc3RhdGUgPSAkc3RhdGU7XG4gICAgLy8gTG9jayB0aGUgc2lkZWJhciBpbiB2aWV3XG4gICAgYXBwQ3RybC5sb2NrU2lkZWJhciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdzaWRlYmFyTG9ja2VkJyk7XG4gICAgYXBwQ3RybC50b2dnbGVTaWRlYmFyTG9ja2VkID0gdG9nZ2xlU2lkZWJhckxvY2tlZDtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXJMb2NrZWQobG9ja2VkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnc2lkZWJhckxvY2tlZCcsIGxvY2tlZCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhjb25maWd1cmVSb3V0ZXMpO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZVJvdXRlcygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XG4gICAgICBzdXBlckFkbWluOiByZXF1aXJlU3VwZXJBZG1pbixcbiAgICAgIGFkbWluOiByZXF1aXJlQWRtaW4sXG4gICAgICB1c2VyOiByZXF1aXJlQXV0aFxuICAgIH07XG5cbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAvLyBmb3IgYW55IHVubWF0Y2hlZCB1cmxcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIud2hlbignL2NvbXBldGl0aW9ucy8nLCAnL2NvbXBldGl0aW9ucycpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucycsIHtcbiAgICAgICAgdXJsOiAnL2NvbXBldGl0aW9ucycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29tcGV0aXRpb25zQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbnMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy9teS1jb21wZXRpdGlvbnMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUNvbXBldGl0aW9uc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvbXktY29tcGV0aXRpb25zLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy52aWV3Jywge1xuICAgICAgICB1cmw6ICcvdmlldy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy5zdGF0cycsIHtcbiAgICAgICAgdXJsOiAnL3N0YXRzLzpjb21wZXRpdGlvbklkJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29tcGV0aXRpb25TdGF0c0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24tc3RhdHMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuYWRtaW4nLCB7XG4gICAgICAgIHVybDogJy9hZG1pbi86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uQWRtaW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLWFkbWluLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy5jcmVhdGUnLCB7XG4gICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDcmVhdGVDb21wZXRpdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY3JlYXRlLWNvbXBldGl0aW9uLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3VzZXInLCB7XG4gICAgICAgIHVybDogJy91c2VyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3VzZXJzL3ZpZXdzL3VzZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvbG9naW4uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmeScsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmaWNhdGlvbicsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbi86dXNlcklkLzp2ZXJpZmljYXRpb25Ub2tlbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0LXJlcXVlc3QnLCB7XG4gICAgICAgIHVybDogJy9wYXNzd29yZC1yZXNldCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3dvcmRSZXNldEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0Jywge1xuICAgICAgICB1cmw6ICcvcGFzc3dvcmQtcmVzZXQvOnVzZXJJZC86dmVyaWZpY2F0aW9uVG9rZW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bhc3N3b3JkUmVzZXRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcGFzc3dvcmQtcmVzZXQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcmVxdWlyZUFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gIH1cblxuICByZXF1aXJlU3VwZXJBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVTdXBlckFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ3N1cGVyLWFkbWluJyk7XG4gIH1cblxuICByZXF1aXJlQXV0aC4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5ydW4oYXBwUnVuKTtcblxuICBmdW5jdGlvbiBhcHBSdW4oJHJvb3RTY29wZSwgJHN0YXRlLCAkZG9jdW1lbnQsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgaWYgKGVycm9yID09PSAnbm90IGF1dGhvcml6ZWQnKSB7XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gdG9TdGF0ZTtcbiAgICAgICAgJHN0YXRlLnByZXZQYXJhbXMgPSB0b1BhcmFtcztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNpZGViYXJTZXJ2aWNlLnNldFNpZGViYXJTdGF0dXMoZmFsc2UpO1xuICAgICAgLy8gU2Nyb2xsIHRvIHRoZSB0b3Agb24gcm91dGUgY2hhbmdlc1xuICAgICAgJGRvY3VtZW50WzBdLmJvZHkuc2Nyb2xsVG9wID0gJGRvY3VtZW50WzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwO1xuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRzdGF0ZSwgJGh0dHAsICRxLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBhdXRoZW50aWNhdGVVc2VyOiBhdXRoZW50aWNhdGVVc2VyLFxuICAgICAgY3JlYXRlVXNlcjogY3JlYXRlVXNlcixcbiAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSxcbiAgICAgIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGU6IGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGVcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywge1xuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICd1bnZlcmlmaWVkJykge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKCd1bnZlcmlmaWVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB7XG4gICAgICAgIHVzZXJEYXRhOiB1c2VyRGF0YVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWFzb24gPT09ICdFcnJvcjogRW1haWwgYWxyZWFkeSBpbiB1c2UnKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIGFuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MuJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ291dCcsIHtcbiAgICAgICAgbG9nb3V0OiB0cnVlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gdW5kZWZpbmVkO1xuICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUocm9sZSkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhvcml6ZWQocm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgndXNlclNlcnZpY2UnLCB1c2VyU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gdXNlclNlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2VycyxcbiAgICAgIHZlcmlmeVVzZXI6IHZlcmlmeVVzZXIsXG4gICAgICBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rOiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rLFxuICAgICAgcmVzZXRQYXNzd29yZDogcmVzZXRQYXNzd29yZCxcbiAgICAgIHVwZGF0ZVVzZXI6IHVwZGF0ZVVzZXJcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJykudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIGV2ZXJ5IHVzZXIgaGFzIGEgZGlzcGxheSBuYW1lXG4gICAgICAgIF8uZm9yRWFjaCh1c2Vycy5kYXRhLCBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAgIGlmICghdXNlci5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgdXNlci5kaXNwbGF5TmFtZSA9IHVzZXIuZmlyc3ROYW1lICsgJyAnICsgdXNlci5sYXN0TmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB1c2Vycy5kYXRhID0gXy5zb3J0QnkodXNlcnMuZGF0YSwgJ2Rpc3BsYXlOYW1lJyk7XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZlcmlmeVVzZXIodXNlcklkLCB2ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VyL3ZlcmlmaWNhdGlvbicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG4gICAgICAgIH1cbiAgICAgIH0pOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VyL3Bhc3N3b3JkL2xpbmsnLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVxuICAgICAgICB9XG4gICAgICB9KTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQodXNlcklkLCB2ZXJpZmljYXRpb25Ub2tlbiwgcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvdXNlci9wYXNzd29yZC9yZXNldCcsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIHZlcmlmaWNhdGlvblRva2VuOiB2ZXJpZmljYXRpb25Ub2tlbixcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9KTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVVzZXIodXNlcikge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS91c2VyJywge1xuICAgICAgICB1c2VyOiB1c2VyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignTG9naW5DdHJsJywgTG9naW5DdHJsKTtcblxuICBmdW5jdGlvbiBMb2dpbkN0cmwoJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubG9naW4gPSBsb2dpbjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignVXNlcm5hbWUgLyBwYXNzd29yZCBjb21iaW5haXRvbiBpbmNvcnJlY3QnKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSA9PT0gJ3VudmVyaWZpZWQnKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignWW91IG11c3QgdmVyaWZ5IHlvdXIgZW1haWwgYmVmb3JlIHlvdSBjYW4gbG9naW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoJHN0YXRlLnByZXZpb3VzKSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJHN0YXRlLnByZXZpb3VzLCAkc3RhdGUucHJldlBhcmFtcyk7XG4gICAgICAgICAgICAkc3RhdGUucHJldmlvdXMgPSBudWxsO1xuICAgICAgICAgICAgJHN0YXRlLnByZXZQYXJhbXMgPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1Bhc3N3b3JkUmVzZXRDdHJsJywgUGFzc3dvcmRSZXNldEN0cmwpO1xuXG4gIGZ1bmN0aW9uIFBhc3N3b3JkUmVzZXRDdHJsKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCB1c2VyU2VydmljZSwgbm90aWZ5U2VydmljZSwgYXV0aFNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0udXNlcm5hbWUgPSAnJztcbiAgICB2bS52ZXJpZmllZCA9IGZhbHNlO1xuICAgIHZtLnJlc2V0UGFzc3dvcmRGb3JtID0ge307XG4gICAgdm0uZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayA9IGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbms7XG4gICAgdm0ucmVzZXRQYXNzd29yZCA9IHJlc2V0UGFzc3dvcmQ7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSBlbHNlIGlmICgkc3RhdGVQYXJhbXMudXNlcklkICYmICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgICB1c2VyU2VydmljZS52ZXJpZnlVc2VyKCRzdGF0ZVBhcmFtcy51c2VySWQsICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgdm0udmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkge1xuICAgICAgdXNlclNlcnZpY2UuZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayh1c2VybmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignQ291bGQgbm90IGZpbmQgdGhhdCBlbWFpbCBhZGRyZXNzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5zdWNjZXNzKCdQbGVhc2UgY2hlY2sgeW91ciBlbWFpbCBmb3IgYSBwYXNzd29yZCByZXNldCBsaW5rJyk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQocmVzZXRQYXNzd29yZEZvcm0pIHtcbiAgICAgIGlmIChyZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCAhPT0gcmVzZXRQYXNzd29yZEZvcm0uY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlclNlcnZpY2UucmVzZXRQYXNzd29yZCgkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4sIHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHJlc3BvbnNlLmRhdGEudXNlcm5hbWUsIHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIFJlZ2lzdGVyQ3RybCk7XG5cbiAgZnVuY3Rpb24gUmVnaXN0ZXJDdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIobmV3VXNlcikge1xuICAgICAgaWYgKG5ld1VzZXIucGFzc3dvcmQgIT09IG5ld1VzZXIuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFuZXdVc2VyLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbmV3VXNlci5kaXNwbGF5TmFtZSA9IG5ld1VzZXIuZmlyc3ROYW1lICsgJyAnICsgbmV3VXNlci5sYXN0TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBhdXRoU2VydmljZS5jcmVhdGVVc2VyKG5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzdGF0ZS5nbygndmVyaWZ5Jyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdWZXJpZmljYXRpb25DdHJsJywgVmVyaWZpY2F0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gVmVyaWZpY2F0aW9uQ3RybCgkc3RhdGUsICRzdGF0ZVBhcmFtcywgdXNlclNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnZlcmlmaWVkID0gdW5kZWZpbmVkO1xuICAgIHZtLnZlcmlmeWluZyA9IGZhbHNlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy51c2VySWQgJiYgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICAgIHZtLnZlcmlmeWluZyA9IHRydWU7XG4gICAgICAgIHZtLnZlcmlmaWVkID0gbnVsbDtcbiAgICAgICAgdXNlclNlcnZpY2UudmVyaWZ5VXNlcigkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0udmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtQWN0aXZlQ2hhbGxlbmVnZXMnLCB3cG1BY3RpdmVDaGFsbGVuZWdlcyk7XG5cbiAgZnVuY3Rpb24gd3BtQWN0aXZlQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNvbXBldGl0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY29tcGV0aXRpb24pIHtcbiAgICAgICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbi5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZXMuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTsgICAgICAgICAgXG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UudHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICAgICAgLy8gSWYgbW9yZSB0aGFuIDEgcGxheWVyIHBlciB0ZWFtIHRoYW4gdXNlIFRlYW0gbmFtZVxuICAgICAgICAgICAgICBpZiAodm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbTtcbiAgICAgICAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW07XG4gICAgICAgICAgICAgIC8vIElmIG9ubHkgMSBwbGF5ZXIgcGVyIHRlYW0gdGhhbiBqdXN0IHVzZSB0aGUgcGxheWVycyBuYW1lc1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW19KS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuZGlzcGxheU5hbWUgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeyAncG9zaXRpb24nOiAgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW19KS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtQ29tcGxldGVkQ2hhbGxlbmVnZXMnLCB3cG1Db21wbGV0ZWRDaGFsbGVuZWdlcyk7XG5cbiAgZnVuY3Rpb24gd3BtQ29tcGxldGVkQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nLFxuICAgICAgICBhbGxvd0RlbGV0ZTogJz0nLFxuICAgICAgICBjaGFsbGVuZ2VzOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvY29tcGxldGVkLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkc3RhdGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgdm0uZGVsZXRlQ2hhbGxlbmdlID0gZGVsZXRlQ2hhbGxlbmdlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaEdyb3VwKFsndm0uY2hhbGxlbmdlcycsICd2bS5jb21wZXRpdGlvbiddLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHZtLmNoYWxsZW5nZXMgJiYgdm0uY2hhbGxlbmdlcy5sZW5ndGggPiAwICYmIHZtLmNvbXBldGl0aW9uICYmIHZtLmNvbXBldGl0aW9uLnBsYXllcnMpIHtcbiAgICAgICAgICBkaXNwbGF5Q29tcGxldGVkQ2hhbGxlbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Q29tcGxldGVkQ2hhbGxlbmdlcygpIHtcbiAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGNoYWxsZW5nZS5sb3NlciA9IGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyA/ICdvcHBvbmVudCcgOiAnY2hhbGxlbmdlcic7XG4gICAgICAgIGlmIChjaGFsbGVuZ2UudHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICAvLyBJZiBtb3JlIHRoYW4gMSBwbGF5ZXIgcGVyIHRlYW0gdGhhbiB1c2UgVGVhbSBuYW1lXG4gICAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbTtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5kaXNwbGF5TmFtZSA9ICdUZWFtICcgKyBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbTtcbiAgICAgICAgICAvLyBJZiBvbmx5IDEgcGxheWVyIHBlciB0ZWFtIHRoYW4ganVzdCB1c2UgdGhlIHBsYXllcnMgbmFtZXNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuZGlzcGxheU5hbWUgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeyAncG9zaXRpb24nOiAgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbX0pLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50LmRpc3BsYXlOYW1lID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtfSkuZGlzcGxheU5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoYWxsZW5nZS53aGVuQ29tcGxldGVkID0gbW9tZW50KGNoYWxsZW5nZS5jb21wbGV0ZWQpLmNhbGVuZGFyKG51bGwsIHtcbiAgICAgICAgICBzYW1lRGF5OiAnW1RvZGF5XScsXG4gICAgICAgICAgbmV4dERheTogJ1tUb21vcnJvd10nLFxuICAgICAgICAgIG5leHRXZWVrOiAnZGRkZCcsXG4gICAgICAgICAgbGFzdERheTogJ1tZZXN0ZXJkYXldJyxcbiAgICAgICAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkJyxcbiAgICAgICAgICBzYW1lRWxzZTogJ01NTSBERCBZWVlZJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2VJZCwgJGluZGV4KSB7XG4gICAgICBzd2FsKHtcbiAgICAgICAgdGl0bGU6ICdEZWxldGUgQ2hhbGxlbmdlIFJlc3VsdD8nLFxuICAgICAgICB0ZXh0OiAnWW91XFwnbGwgc3RpbGwgbmVlZCB0byByZW9yZGVyIHRoZSBwbGF5ZXJzIG9uIHlvdXIgb3duJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZGVsZXRlQ2hhbGxlbmdlKHZtLmNvbXBldGl0aW9uLl9pZCwgY2hhbGxlbmdlSWQpLnRoZW4gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2bS5jaGFsbGVuZ2VzLnNwbGljZSgkaW5kZXgsIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMnLCB3cG1QbGF5ZXJPdmVyYWxsUmVzdWx0cyk7XG5cbiAgZnVuY3Rpb24gd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBwbGF5ZXI6ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9wbGF5ZXItb3ZlcmFsbC1yZXN1bHRzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubWF4TGV2ZWxzID0gNztcbiAgICB2bS53aW5zID0ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhc0NoYWxsZW5nZXI6IDAsXG4gICAgICBhc09wcG9uZW50OiAwLFxuICAgICAgYnlGb3JmZWl0OiAwXG4gICAgfTtcbiAgICB2bS5sb3NlcyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0uc3RyZWFrID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIHZhbHVlOiAwXG4gICAgfTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLnBsYXllci5yZXN1bHRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0ucGxheWVyKSB7XG4gICAgICAgICAgYXNzaWducGxheWVyc1RvTGV2ZWxzKHZtLnBsYXllcik7XG4gICAgICAgICAgY2FsY3VsYXRlU3RyZWFrKHZtLnBsYXllcik7XG4gICAgICAgICAgY2FsY3VhdGVXaW5BbmRMb3Nlcyh2bS5wbGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc3NpZ25wbGF5ZXJzVG9MZXZlbHMocGxheWVyKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgYWxsIHRoZSBicmVhayBwb2ludHMgdG8gZmlndXJlIG91dCBsZXZlbHNcbiAgICAgIHZhciBicmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5tYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0IGFsbCBwbGF5ZXJzIHRvIHRoZSBsb3dlc3QgbGV2ZWxcbiAgICAgIHBsYXllci5sZXZlbCA9IGJyZWFrUG9pbnRzLmxlbmd0aDtcbiAgICAgIC8vIE5vdyBjaGVjayB0byBzZWUgaWYgdGhlIHBsYXllciBpcyBhdCBhIGhpZ2hlciBsZXZlbFxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBicmVha1BvaW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocGxheWVyLnBvc2l0aW9uIDwgYnJlYWtQb2ludHNbaiArIDFdKSB7XG4gICAgICAgICAgcGxheWVyLmxldmVsID0gYnJlYWtQb2ludHMuaW5kZXhPZihicmVha1BvaW50c1tqXSkgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlU3RyZWFrKHBsYXllcikge1xuICAgICAgLy8gRmlndXJlIG91dCB0aGUgcGxheWVyJ3MgY3VycmVudCBzdHJlYWtcbiAgICAgIHZhciBzdHJlYWsgPSAwO1xuICAgICAgdmFyIGNvbnRpbnVlU3RyZWFrID0gdHJ1ZTtcbiAgICAgIHZhciBzdHJlYWtUeXBlO1xuICAgICAgXy5mb3JFYWNoKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjb250aW51ZVN0cmVhaykge1xuICAgICAgICAgIC8vIFdpbm5pbmcgU3RyZWFrXG4gICAgICAgICAgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IG9uIGEgbG9zaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciB3aW5uaW5nIHN0cmVha1xuICAgICAgICAgICAgaWYgKHN0cmVha1R5cGUgIT09ICdsb3NpbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ3dpbm5pbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWVTdHJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvLyBMb3NpbmcgU3RyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JyAmJiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQpIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIHdpbm5pbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIGxvc2luZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnd2lubmluZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnbG9zaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZtLnN0cmVhayA9IHtcbiAgICAgICAgICB0eXBlOiBzdHJlYWtUeXBlLFxuICAgICAgICAgIHZhbHVlOiBzdHJlYWtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1YXRlV2luQW5kTG9zZXMocGxheWVyKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHdpbnMgYW5kIGxvc2VzXG4gICAgICB2bS53aW5zLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMudG90YWwgPSB2bS53aW5zLmFzQ2hhbGxlbmdlciArIHZtLndpbnMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ud2lucy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50J1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy50b3RhbCA9IHZtLmxvc2VzLmFzQ2hhbGxlbmdlciArIHZtLmxvc2VzLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLmxvc2VzLmJ5Rm9yZmVpdCA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSlcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVRlYW1PdmVyYWxsUmVzdWx0cycsIHdwbVRlYW1PdmVyYWxsUmVzdWx0cyk7XG5cbiAgZnVuY3Rpb24gd3BtVGVhbU92ZXJhbGxSZXN1bHRzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9JyxcbiAgICAgICAgdGVhbTogJz0nLFxuICAgICAgICBjaGFsbGVuZ2VzOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS53aW5zID0ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhc0NoYWxsZW5nZXI6IDAsXG4gICAgICBhc09wcG9uZW50OiAwLFxuICAgICAgYnlGb3JmZWl0OiAwXG4gICAgfTtcbiAgICB2bS5sb3NlcyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0uc3RyZWFrID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIHZhbHVlOiAwXG4gICAgfTtcbiAgICB2bS5zaW5nbGVQbGF5ZXJUZWFtcyA9IGZhbHNlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oWyd2bS5jaGFsbGVuZ2VzJywgJ3ZtLmNvbXBldGl0aW9uJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNoYWxsZW5nZXMgJiYgdm0uY2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY2FsY3VsYXRlU3RyZWFrKHZtLnRlYW0sIHZtLmNoYWxsZW5nZXMpO1xuICAgICAgICAgIGNhbGN1YXRlV2luQW5kTG9zZXModm0udGVhbSwgdm0uY2hhbGxlbmdlcyk7XG5cbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBvbmx5IDEgcGxheWVyIHBlciB0ZWFtIHRoYW4gdXNlIHBsYXllcidzIG5hbWVcbiAgICAgICAgICBpZiAodm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHZtLnNpbmdsZVBsYXllclRlYW1zID0gdHJ1ZTtcbiAgICAgICAgICAgIHZtLmRpc3BsYXlOYW1lID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIHZtLnRlYW19KS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHZtLnBsYXllck5hbWUgPSAgXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIHZtLnRlYW19KS5maXJzdE5hbWUgKyAnICcgKyAgXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIHZtLnRlYW19KS5sYXN0TmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN0cmVhayh0ZWFtLCBjaGFsbGVuZ2VzKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSB0ZWFtJ3MgY3VycmVudCBzdHJlYWtcbiAgICAgIHZhciBzdHJlYWsgPSAwO1xuICAgICAgdmFyIGNvbnRpbnVlU3RyZWFrID0gdHJ1ZTtcbiAgICAgIHZhciBzdHJlYWtUeXBlO1xuICAgICAgXy5mb3JFYWNoKGNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgaWYgKGNvbnRpbnVlU3RyZWFrKSB7XG4gICAgICAgICAgLy8gV2lubmluZyBTdHJlYWtcbiAgICAgICAgICBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0pKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIGxvc2luZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgd2lubmluZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnbG9zaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICd3aW5uaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLy8gTG9zaW5nIFN0cmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0pKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIHdpbm5pbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIGxvc2luZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnd2lubmluZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnbG9zaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZtLnN0cmVhayA9IHtcbiAgICAgICAgICB0eXBlOiBzdHJlYWtUeXBlLFxuICAgICAgICAgIHZhbHVlOiBzdHJlYWtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1YXRlV2luQW5kTG9zZXModGVhbSAsIGNoYWxsZW5nZXMpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgd2lucyBhbmQgbG9zZXNcbiAgICAgIHZtLndpbnMuYXNPcHBvbmVudCA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50J1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLmFzQ2hhbGxlbmdlciA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy50b3RhbCA9IHZtLndpbnMuYXNDaGFsbGVuZ2VyICsgdm0ud2lucy5hc09wcG9uZW50O1xuXG4gICAgICB2bS53aW5zLmJ5Rm9yZmVpdCA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykgfHxcbiAgICAgICAgICAoY2hhbGxlbmdlLm9wcG9uZW50LnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50J1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy50b3RhbCA9IHZtLmxvc2VzLmFzQ2hhbGxlbmdlciArIHZtLmxvc2VzLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLmxvc2VzLmJ5Rm9yZmVpdCA9IF8uc2l6ZShfLmZpbHRlcihjaGFsbGVuZ2VzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2NoYWxsZW5nZXNTZXJ2aWNlJywgY2hhbGxlbmdlc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNoYWxsZW5nZXNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjcmVhdGVQeXJhbWlkQ2hhbGxlbmdlOiBjcmVhdGVQeXJhbWlkQ2hhbGxlbmdlLFxuICAgICAgY3JlYXRlVmVyc3VzQ2hhbGxlbmdlOiBjcmVhdGVWZXJzdXNDaGFsbGVuZ2UsXG4gICAgICBjYW5jZWxQeXJhbWlkQ2hhbGxlbmdlOiBjYW5jZWxQeXJhbWlkQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlOiBjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UsXG4gICAgICBjb21wbGV0ZVZlcnN1c0NoYWxsZW5nZTogY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UsXG4gICAgICBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXI6IGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcixcbiAgICAgIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyLFxuICAgICAgZGVsZXRlQ2hhbGxlbmdlOiBkZWxldGVDaGFsbGVuZ2UsXG4gICAgICBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbjogZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb25cbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9weXJhbWlkL2NyZWF0ZScsIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbmNlbFB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NoYWxsZW5nZXMvcHlyYW1pZC9jYW5jZWwnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3ZlcnN1cy9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3B5cmFtaWQvY29tcGxldGUnLCAge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL3ZlcnN1cy9jb21wbGV0ZScsICB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXInLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBsaW1pdCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBsZXRlZC9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbi9wbGF5ZXIvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQ2hhbGxlbmdlKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZUlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NoYWxsZW5nZXMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjaGFsbGVuZ2VJZDogY2hhbGxlbmdlSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9yZXN1bHRzL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtRm9vdGVyJywgd3BtRm9vdGVyKTtcblxuICBmdW5jdGlvbiB3cG1Gb290ZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9mb290ZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIHZtLmxvZ291dCA9IGxvZ291dDtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtSGVhZGVyJywgd3BtSGVhZGVyKTtcblxuICBmdW5jdGlvbiB3cG1IZWFkZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ2hlYWRlckN0cmwnLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2hlYWRlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIHNpZGViYXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBhbGVydHNTZXJ2aWNlKSB7XG4gICAgdmFyIGhlYWRlckN0cmwgPSB0aGlzO1xuICAgIGhlYWRlckN0cmwuaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIGhlYWRlckN0cmwubG9nb3V0ID0gbG9nb3V0O1xuICAgIGhlYWRlckN0cmwuc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcbiAgICBoZWFkZXJDdHJsLnRvZ2dsZVNpZGViYXIgPSB0b2dnbGVTaWRlYmFyO1xuICAgIGhlYWRlckN0cmwuY2xlYXJBbGVydCA9IGNsZWFyQWxlcnQ7XG4gICAgaGVhZGVyQ3RybC5jbGVhckFsbEFsZXJ0cyA9IGNsZWFyQWxsQWxlcnRzO1xuICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgICRzY29wZS4kd2F0Y2goJ2hlYWRlckN0cmwuaW5kZW50aXR5LmN1cnJlbnRVc2VyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgZ2V0QWN0aXZlQWxlcnRzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUFsZXJ0cygpIHtcbiAgICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGFsZXJ0c1NlcnZpY2UuZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoYWxlcnRzKSB7XG4gICAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBhbGVydHMuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJBbGVydChjbGVhckFsZXJ0LCBpbmRleCkge1xuICAgICAgYWxlcnRzU2VydmljZS5jbGVhckFsZXJ0KGNsZWFyQWxlcnQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJBbGxBbGVydHMoKSB7XG4gICAgICBhbGVydHNTZXJ2aWNlLmNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckN0cmwuYWxlcnRzID0gW107XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICAgICAgc2lkZWJhclNlcnZpY2Uuc2V0U2lkZWJhclN0YXR1cyghaGVhZGVyQ3RybC5zaWRlYmFyU3RhdHVzLmxlZnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czp1cGRhdGVfYWxlcnRzJywgZnVuY3Rpb24gKGUsIGFsZXJ0cykge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBfLnNvbWUoYWxlcnRzLCBbJ3VzZXJJZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKSkge1xuICAgICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtU2lkZWJhcicsIHdwbVNpZGViYXIpO1xuXG4gIGZ1bmN0aW9uIHdwbVNpZGViYXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3NpZGViYXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmlsdGVyKCdvcmRlck9iamVjdEJ5Jywgb3JkZXJPYmplY3RCeSk7XG5cbiAgZnVuY3Rpb24gb3JkZXJPYmplY3RCeSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBhdHRyaWJ1dGUpIHtcbiAgICAgIGlmICghYW5ndWxhci5pc09iamVjdChpbnB1dCkpIHJldHVybiBpbnB1dDtcblxuICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICBmb3IgKHZhciBvYmplY3RLZXkgaW4gaW5wdXQpIHtcbiAgICAgICAgYXJyYXkucHVzaChpbnB1dFtvYmplY3RLZXldKTtcbiAgICAgIH1cblxuICAgICAgYXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBhID0gcGFyc2VJbnQoYVthdHRyaWJ1dGVdKTtcbiAgICAgICAgYiA9IHBhcnNlSW50KGJbYXR0cmlidXRlXSk7XG4gICAgICAgIHJldHVybiBhIC0gYjtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnYWxlcnRzU2VydmljZScsIGFsZXJ0c1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGFsZXJ0c1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyOiBnZXRBY3RpdmVBbGVydHNCeVBsYXllcixcbiAgICAgIGNsZWFyQWxlcnQ6IGNsZWFyQWxlcnQsXG4gICAgICBjbGVhckFsbEFsZXJ0c0J5UGxheWVyOiBjbGVhckFsbEFsZXJ0c0J5UGxheWVyXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB1bmNsZWFyZWQgYWxlcnRzIGZvciBhIHVzZXIgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgaWQgZm9yIHRoZSB1c2VyXG4gICAgICogQHJldHVybiB7QXJyYXl9IGFsZXJ0c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hbGVydHMvJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIGFsZXJ0cyBhcyBjbGVhcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxlcnRJZCBpZCBmb3IgdGhlIGFsZXJ0XG4gICAgICogQHJldHVybiB7U3RyaW5nfSBTdGF0dXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGVhckFsZXJ0KGFsZXJ0SWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYWxlcnQvY2xlYXInLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0SWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIGFsbCB1bnZpZXdlZCBhbGVydHMgYXMgdmlld2VkIGZvciBhIHVzZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWQgaWQgZm9yIHRoZSB1c2VyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBTdGF0dXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGVhckFsbEFsZXJ0c0J5UGxheWVyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9hbGVydHMvY2xlYXInLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnaWRlbnRpdHlTZXJ2aWNlJywgaWRlbnRpdHlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBpZGVudGl0eVNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBjdXJyZW50VXNlcjtcbiAgICBpZiAoJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICBjdXJyZW50VXNlciA9ICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdDtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKHJvbGUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ25vdGlmeVNlcnZpY2UnLCBub3RpZnlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBub3RpZnlTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgaW5mbzogaW5mbyxcbiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgaW52ZXJzZTogaW52ZXJzZVxuICAgIH07XG5cbiAgICAkLm5vdGlmeURlZmF1bHRzKHtcbiAgICAgIG5ld2VzdF9vbl90b3A6IHRydWUsXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9LFxuICAgICAgZGVsYXk6IDUwMDAsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3Njcm9sbGJhclNlcnZpY2UnLCBzY3JvbGxiYXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBzY3JvbGxiYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgbWFsaWh1U2Nyb2xsOiBtYWxpaHVTY3JvbGxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBtYWxpaHVTY3JvbGwoc2VsZWN0b3IsIHRoZW1lLCBzY3JvbGxheGlzLCBtb3VzZXdoZWVsYXhpcykge1xuICAgICAgJChzZWxlY3RvcikubUN1c3RvbVNjcm9sbGJhcih7XG4gICAgICAgIHRoZW1lOiB0aGVtZSxcbiAgICAgICAgc2Nyb2xsSW5lcnRpYTogMTAwLFxuICAgICAgICBheGlzOiBzY3JvbGxheGlzLFxuICAgICAgICBtb3VzZVdoZWVsOiB7XG4gICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgIGF4aXM6IG1vdXNld2hlZWxheGlzLFxuICAgICAgICAgIHByZXZlbnREZWZhdWx0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdzaWRlYmFyU2VydmljZScsIHNpZGViYXJTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBzaWRlYmFyU2VydmljZSgpIHtcbiAgICB2YXIgc2lkZWJhclN0YXR1cyA9IHtcbiAgICAgIGxlZnQ6IGZhbHNlLFxuICAgICAgcmlnaHQ6IGZhbHNlXG4gICAgfTtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldFNpZGViYXJTdGF0dXM6IGdldFNpZGViYXJTdGF0dXMsXG4gICAgICBzZXRTaWRlYmFyU3RhdHVzOiBzZXRTaWRlYmFyU3RhdHVzXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0U2lkZWJhclN0YXR1cygpIHtcbiAgICAgIHJldHVybiBzaWRlYmFyU3RhdHVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFNpZGViYXJTdGF0dXMoc3RhdHVzKSB7XG4gICAgICBzaWRlYmFyU3RhdHVzLmxlZnQgPSBzdGF0dXM7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3dlYnNvY2tldFNlcnZpY2UnLCB3ZWJzb2NrZXRTZXJ2aWNlKS5ydW4oZnVuY3Rpb24gKHdlYnNvY2tldFNlcnZpY2UpIHtcbiAgICB3ZWJzb2NrZXRTZXJ2aWNlLmNvbm5lY3QoKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gd2Vic29ja2V0U2VydmljZSgkcm9vdFNjb3BlLCAkd2luZG93LCAkdGltZW91dCkge1xuICAgIHZhciBjb25uZWN0aW9uO1xuICAgIHZhciByZXRyeVNlY29uZHMgPSBbMywgMTAsIDEwMCwgMTAwMF07XG4gICAgdmFyIHJldHJ5ID0gMDtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNvbm5lY3Q6IGNvbm5lY3QsXG4gICAgICBzZW5kOiBzZW5kXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gd2Vic29ja2V0SG9zdCgpIHtcbiAgICAgIGlmICgkd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgICAgICByZXR1cm4gJ3dzczovLycgKyAkd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQod2Vic29ja2V0SG9zdCgpKTtcblxuICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXRyeSA9IDA7XG4gICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnRvcGljLCBwYXlsb2FkLmRhdGEpO1xuICAgICAgfTtcblxuICAgICAgY29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmV0cnkgPCByZXRyeVNlY29uZHMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQuIFJlY29ubmVjdGluZy4uLicpO1xuICAgICAgICAgICR0aW1lb3V0KGNvbm5lY3QsIHJldHJ5U2Vjb25kc1tyZXRyeV0qMTAwMCk7XG4gICAgICAgICAgcmV0cnkgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2l2aW5nIHVwIG9uIFdlYlNvY2tldCcpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmQodG9waWMsIGRhdGEpIHtcbiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgY29ubmVjdGlvbi5zZW5kKGpzb24pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICBmdW5jdGlvbiBIb21lQ3RybChjb21wZXRpdGlvbnNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB1YmxpY0NvbXBldGl0aW9ucyA9IFtdO1xuICAgIHZtLnByaXZhdGVDb21wZXRpdGlvbnMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0UHVibGljQ29tcGV0aXRpb25zKCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgIHZtLnB1YmxpY0NvbXBldGl0aW9ucyA9IGNvbXBldGl0aW9ucy5kYXRhO1xuICAgICAgfSk7XG4gICAgICAvLyBHZXQgcHJpdmF0ZSBjb21wZXRpdGlvbnMgZm9yIHN1cGVyLWFkbWluc1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhvcml6ZWQoJ3N1cGVyLWFkbWluJykpIHtcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRQcml2YXRlQ29tcGV0aXRpb25zKCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgICAgdm0ucHJpdmF0ZUNvbXBldGl0aW9ucyA9IGNvbXBldGl0aW9ucy5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUNvbXBldGl0aW9uQ29tcGFjdCcsIHdwbUNvbXBldGl0aW9uQ29tcGFjdCk7XG5cbiAgZnVuY3Rpb24gd3BtQ29tcGV0aXRpb25Db21wYWN0KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9JyxcblxuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL2NvbXBldGl0aW9uLWNvbXBhY3QuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoKSB7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1QZW5kaW5nUGxheWVycycsIHdwbVBlbmRpbmdQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiB3cG1QZW5kaW5nUGxheWVycygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoY29tcGV0aXRpb25zU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucGVuZGluZ1BsYXllcnMgPSBbXTtcbiAgICB2bS5hcHByb3ZlUGVuZGluZ1BsYXllciA9IGFwcHJvdmVQZW5kaW5nUGxheWVyO1xuICAgIHZtLmRlbnlQZW5kaW5nUGxheWVyID0gZGVueVBlbmRpbmdQbGF5ZXI7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIocGxheWVyKSB7XG4gICAgICBwbGF5ZXIucG9zaXRpb24gPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aCArIDE7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmFwcHJvdmVQZW5kaW5nUGxheWVyKHZtLmNvbXBldGl0aW9uLl9pZCwgcGxheWVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZW55UGVuZGluZ1BsYXllcihwbGF5ZXIpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZGVueVBlbmRpbmdQbGF5ZXIodm0uY29tcGV0aXRpb24uX2lkLCBwbGF5ZXIpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVB5cmFtaWQnLCB3cG1QeXJhbWlkKTtcblxuICBmdW5jdGlvbiB3cG1QeXJhbWlkKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcHlyYW1pZC5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkc3RhdGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsICRmaWx0ZXIsIG5vdGlmeVNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgbWF4TGV2ZWxzID0gNztcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgdm0ubGV2ZWxzID0gW107XG4gICAgdm0ubnVtYmVyT2ZCbG9ja3MgPSAwO1xuICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IG51bGw7XG4gICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IGZhbHNlO1xuICAgIHZtLmNyZWF0ZUNoYWxsZW5nZSA9IGNyZWF0ZUNoYWxsZW5nZTtcbiAgICB2bS5jYW5jZWxDaGFsbGVuZ2UgPSBjYW5jZWxDaGFsbGVuZ2U7XG4gICAgdm0uY29tcGxldGVDaGFsbGVuZ2UgPSBjb21wbGV0ZUNoYWxsZW5nZTtcbiAgICB2bS5jaGFsbGVuZ2VFeHBpcmVkID0gY2hhbGxlbmdlRXhwaXJlZDtcbiAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHt9O1xuICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgIHZtLmFkZEN1cnJlbnRVc2VyVG9Db21wZXRpdGlvbiA9IGFkZEN1cnJlbnRVc2VyVG9Db21wZXRpdGlvbjtcbiAgICB2bS5jb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24gPSBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb247XG4gICAgdm0ucGxheWVyQ2xpY2sgPSBwbGF5ZXJDbGljaztcbiAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gMDtcbiAgICB2bS5tYXhQbGF5ZXJzID0gMDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIC8vIERldGVybWluZSB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGxheWVycyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGV2ZWxzXG4gICAgICBmb3IgKHZhciBpID0gbWF4TGV2ZWxzOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIHZtLm1heFBsYXllcnMgKz0gaTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSB2bS5jb21wZXRpdGlvbi5faWQ7XG4gICAgICAgICAgb3JkZXJQbGF5ZXJzKCk7XG4gICAgICAgICAgZ2V0UGxheWVyc1N0YXR1cygpO1xuICAgICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgICAgIGNhbGN1bGF0ZUNvbXBldGl0aW9uQmxvY2tzKCk7XG4gICAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3JkZXIgdGhlIHBsYXllcnMgYnkgdGhlIHBvc2l0aW9uIHByb3BlcnR5IG9mIHRoZSBwbGF5ZXJzIGFycmF5IGluIHRoZSBjb21wZXRpdGlvbiBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvcmRlclBsYXllcnMoKSB7XG4gICAgICB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzID0gJGZpbHRlcignb3JkZXJCeScpKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFBsYXllcnNTdGF0dXMoKSB7XG4gICAgICBcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IGZhbHNlO1xuICAgICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgYW4gYWRtaW4gb2YgdGhpcyBjb21wZXRpdGlvblxuICAgICAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBfLnNvbWUodm0uY29tcGV0aXRpb24uYWRtaW5zLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIGEgcGVuZGluZyByZXF1ZXN0IHRvIGpvaW5cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBfLnNvbWUodm0uY29tcGV0aXRpb24ucGVuZGluZ1BsYXllcnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pO1xuICAgICAgfVxuXG4gICAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IGZhbHNlO1xuICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IHVzZXIgaWYgdGhleSBhcmUgb24gdGhpcyBjb21wZXRpdGlvbiBhbmQgc2V0IHNvbWUgcHJvcGVydGllc1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIHBsYXllci5faWQgPT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IHRydWU7XG4gICAgICAgICAgcGxheWVyLmNsYXNzID0gJ2N1cnJlbnQtdXNlcic7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhKSB7XG4gICAgICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgIHZtLmFjdGl2ZUNoYWxsZW5nZU9wcG9uZW50ID0gY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgPyBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudCA6IGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXI7XG4gICAgICAgICAgICAgIC8vIEFkZCBhIGNsYXNzIHRvIHRoZSBjdXJyZW50IHVzZXIncyBvcHBvbmVudCdcbiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRPcHBvbmVudCA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7J19pZCc6IHZtLmFjdGl2ZUNoYWxsZW5nZU9wcG9uZW50Ll9pZH0pO1xuICAgICAgICAgICAgICBjdXJyZW50T3Bwb25lbnQuY2xhc3MgPSBjdXJyZW50T3Bwb25lbnQuY2xhc3MgPyBjdXJyZW50T3Bwb25lbnQuY2xhc3MgKyAnIGN1cnJlbnQtb3Bwb25lbnQnOiAnY3VycmVudC1vcHBvbmVudCc7XG4gICAgICAgICAgICAvLyBUaGUgdXNlciBkb2Vzbid0IGhhdmUgYW4gYWN0aXZlIGNoYWxsZW5nZSwgc28gZmluZCB0aGUgYXZhaWxhYmxlIGNoYWxsZW5nZXMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIF8uZm9yRWFjaChjaGFsbGVuZ2VzLmRhdGEsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcblxuICAgICAgICAgIHZhciBjaGFsbGVuZ2VyID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCB9KTtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlci5jbGFzcyA9PT0gJ2F2YWlsYWJsZScpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXIuY2xhc3MgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9IGNoYWxsZW5nZXIuY2xhc3MgPyBjaGFsbGVuZ2VyLmNsYXNzICsgJyB1bmF2YWlsYWJsZSc6ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgY2hhbGxlbmdlci5hdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnY2hhbGxlbmdlcidcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9wcG9uZW50ID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5vcHBvbmVudC5faWQgfSk7XG4gICAgICAgICAgaWYgKG9wcG9uZW50LmNsYXNzID09PSAnYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSBvcHBvbmVudC5jbGFzcyA/IG9wcG9uZW50LmNsYXNzICsgJyB1bmF2YWlsYWJsZSc6ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgb3Bwb25lbnQuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdvcHBvbmVudCdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gVHJhY2sgd2hlbiB0aGUgY2hhbGxlbmdlIHdpbGwgZXhwaXJlXG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksICdzJykgKiAtMTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgaGFzIG5vdCB5ZXQgZXhwaXJlZCBkaXNwbGF5IGEgY291bnRkb3duIG9uIHRoZSBvcHBvbmVudFxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlLmV4cGlyZXMgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBjb21wZXRpdGlvbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIGJ5IGZvcmZlaXRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVRvRXhwaXJlIDw9IDApIHtcbiAgICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgb3Bwb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE5vdyB0aGF0IHdlIGtub3cgYWJvdXQgYWxsIHRoZSBhY3RpdmUgY2hhbGxlbmdlcyBmaW5kIHRoZSBhdmFpbGFibGUgY2hhbGxlbmdlcyBmb3IgdGhlIHVjcnJlbnQgdXNlclxuICAgICAgICBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGVyZSB0byBzdGFydCBlYWNoIG5ldyByb3cgb24gdGhlIGNvbXBldGl0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQnJlYWtQb2ludHMoKSB7XG4gICAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICB2bS5icmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdpdmUgZWFjaCBwbGF5ZXIgYSBsZXZlbCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgYnJlYWsgcG9pbnRzXG4gICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdobyBvdGhlciBwbGF5ZXJzIGNhbiBjaGFsbGVuZ2VcbiAgICBmdW5jdGlvbiBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKSB7XG4gICAgICB2YXIgbGV2ZWwgPSAwO1xuICAgICAgdm0ubGV2ZWxzID0gW107XG4gICAgICBjcmVhdGVCcmVha1BvaW50cygpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh2bS5icmVha1BvaW50cy5pbmRleE9mKGkgKyAxKSA+IC0xKSB7XG4gICAgICAgICAgbGV2ZWwgKz0gMTtcbiAgICAgICAgICAvLyBTZXQgdGhlIG51bWJlciBvZiB0b3RhbCBsZXZlbHNcbiAgICAgICAgICB2bS5sZXZlbHMucHVzaChsZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsXG4gICAgICAgIHZtLmNvbXBldGl0aW9uLnBsYXllcnNbaV0ubGV2ZWwgPSBsZXZlbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIb3cgbWFueSB0b3RhbCBibG9ja3MgaW4gdGhpcyBjb21wZXRpdGlvblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUNvbXBldGl0aW9uQmxvY2tzKCkge1xuICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IF8ubGFzdCh2bS5sZXZlbHMpOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIHZtLm51bWJlck9mQmxvY2tzICs9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsbCBvdXQgdGhlIHJlbWFpbmluZyBibG9ja3Mgb2YgdGhlIGNvbXBldGl0aW9uIHdpdGggZW1wdHkgYmxvY2tzXG4gICAgZnVuY3Rpb24gZmlsbEluRW1wdHlCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gdm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gdm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGg7IGkgPCB2bS5udW1iZXJPZkJsb2NrczsgaSsrKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uLnBsYXllcnMucHVzaCh7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnRW1wdHknLFxuICAgICAgICAgIGxhc3ROYW1lOiAnU3BvdCcsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdFbXB0eSBTcG90JyxcbiAgICAgICAgICBwb3NpdGlvbjogOTksXG4gICAgICAgICAgY2xhc3M6IHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID8gJ2VtcHR5JzogJ2pvaW5hYmxlIGVtcHR5J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGhhdmUgdG8gZ2l2ZSBsZXZlbHMgdG8gdGhlIG5ldyBlbXB0eSBzcG90c1xuICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdGhlIHBsYXllcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIGJlIGNoYWxsZW5nZWQgYnkgdGhpcyB1c2VyXG4gICAgZnVuY3Rpb24gZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gZmFsc2U7XG4gICAgICBpZiAodm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gJiYgIXZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICB2YXIgbGV2ZWxBYm92ZSA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsID4gMSA/IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsIC0gMSA6IG51bGw7XG4gICAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgaWYgKHBsYXllci5sZXZlbCA9PT0gbGV2ZWxBYm92ZSAmJiBwbGF5ZXIucG9zaXRpb24gIT09IDk5ICYmIHBsYXllci5jbGFzcyAhPT0gJ3VuYXZhaWxhYmxlJyAmJiBwbGF5ZXIuYXZhaWxhYmxlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IHRydWU7XG4gICAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdhdmFpbGFibGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNoYWxsZW5nZSBiZXR3ZWVuIHRoZSBjdXJyZW50IHVzZXIgYW5kIHRoZSBwbGF5ZXIgc2VsZWN0ZWRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllciwgdGhlIGNoYWxsZW5nZWQgcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHBsYXllcikge1xuICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB0aGF0IGlzIG5vdCBhIHZhbGlkIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgdHlwZTogdm0uY29tcGV0aXRpb24udHlwZSxcbiAgICAgICAgICBjb21wZXRpdGlvbk5hbWU6IHZtLmNvbXBldGl0aW9uLm5hbWUsXG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5jb21wZXRpdGlvbi5mb3JmZWl0RGF5cyxcbiAgICAgICAgICBjaGFsbGVuZ2VyOiB7XG4gICAgICAgICAgICBfaWQ6IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiB2bS5jdXJyZW50VXNlclBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHBvbmVudDoge1xuICAgICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZW1haWw6IHBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcGxheWVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY3JlYXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBbGxvd3MgdGhlIGNoYWxsZW5nZXIgdG8gY2FuY2VsIGEgY2hhbGxlbmdlXG4gICAgLy8gSW5mb3JtcyB0aGUgb3Bwb25lbnQgdG8gYXNrIHRoZSBjaGFsbGVuZ2VyIHRvIGNhbmNlbCB0aGUgb3Bwb25lbnRcbiAgICBmdW5jdGlvbiBjYW5jZWxDaGFsbGVuZ2UoKSB7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhKSB7XG4gICAgICAgICAgLy8gQWxsb3cgdGhlIGNoYWxsZW5nZXIgdG8gY2FuY2VsIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY2FuY2VsUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gSW5mb3JtIHRoZSBvcHBvbmVudCB0byBhc2sgdGhlIGNoYWxsZW5nZXIgdG8gY2FuY2VsIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3dhbCgnQ2hhbGxlbmdlciBtdXN0IGNhbmNlbCBjaGFsbGVuZ2UnICwgJ1lvdVxcJ2xsIGhhdmUgdG8gYXNrICcgKyBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lICsgJyB0byBjYW5jZWwgdGhlIGNoYWxsZW5nZS4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSB3aW5uZXJJc0N1cnJlbnRVc2VyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmVySXNDdXJyZW50VXNlciwgZm9yZmVpdCwgZm9yZmVpdExvc2VyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdExvc2VyIHx8IHZtLmN1cnJlbnRVc2VyUGxheWVyO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGlmIChmb3JmZWl0TG9zZXIuY2hhbGxlbmdlLnBvc2l0aW9uID09PSAnb3Bwb25lbnQnKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRmlndXJlIG91dCB3aG8gdGhlIHdpbm5lciB3YXMgdG8gc3RvcmUgaW4gdGhlIGNoYWxsZW5nZSByZWNvcmRcbiAgICAgICAgfSBlbHNlIGlmICh3aW5uZXJJc0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3dhcCBwb3NpdGlvbnMgYW5kIHRoZW4gY29tcGxldGUgdGhlIGNoYWxsZW5nZSBvciBqdXN0IGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgaWYgKHN3YXBQb3NpdGlvbnMpIHtcbiAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnN3YXBQb3NpdGlvbnModm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQsIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBjb21wbGV0ZSBjaGFsbG5nZSBmdW5jdGlvbiB3aXRoIHRoZSBmb3JmZWl0aW5nIHBsYXllclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhbGxlbmdlRXhwaXJlZChwbGF5ZXIpIHtcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHBsYXllcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgY3VycmVudCB1c2VyIHRoZSBjb21wZXRpdGlvbiBcbiAgICAgKiBpZiB0aGV5J3JlIG5vdCBhbHJlYWR5IG9uIGl0IGFuZCB0aGVyZSdzIHNwYWNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBpZiAodm0ubnVtYmVyT2ZSZWFsUGxheWVycyA8IHZtLm1heFBsYXllcnMpIHtcbiAgICAgICAgICB2YXIgcGxheWVyID0ge1xuICAgICAgICAgICAgX2lkOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLm51bWJlck9mUmVhbFBsYXllcnMgKyAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoIXZtLmNvbXBldGl0aW9uLnJlc3RyaWN0Sm9pbnMpIHtcbiAgICAgICAgICAgIHN3YWwoe1xuICAgICAgICAgICAgICB0aXRsZTogJ0pvaW4gQ29tcGV0aXRpb24/JyxcbiAgICAgICAgICAgICAgdGV4dDogJ1lvdVxcJ2xsIGJlIGFkZGVkIHRvIHRoZSBib3R0b20nLFxuICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnSm9pbicsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5hZGRQbGF5ZXJUb0NvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllcik7XG4gICAgICAgICAgICAgIHN3YWwoJ1dlbGNvbWUgQWJvYXJkIScsICdOb3cgc3RhcnQgZmlnaHRpbmcgeW91ciB3YXkgdG8gdGhlIHRvcCcsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgdGl0bGU6ICdTZW5kIEpvaW4gUmVxdWVzdD8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnVGhpcyBpcyBhIGNsb3NlZCBjb21wZXRpdGlvbiBzbyBhbiBhZG1pbiBtdXN0IGFwcHJvdmUgeW91ciByZXF1ZXN0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgUmVxdWVzdCcsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5hZGRQbGF5ZXJUb0NvbXBldGl0aW9uUmVxdWVzdCh2bS5jb21wZXRpdGlvbiwgcGxheWVyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBzd2FsKCdSZXF1ZXN0IFNlbnQnLCAnWW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCBvbmNlIGFuIGFkbWluIHByb2Nlc3NlcyB0aGUgcmVxdWVzdC4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnU29ycnksIHRoaXMgY29tcGV0aXRpb24gaXMgZnVsbCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ1BsZWFzZSBsb2dpbiB0byBqb2luIGEgY29tcGV0aXRpb24nKTtcbiAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gJ2NvbXBldGl0aW9ucy52aWV3JztcbiAgICAgICAgJHN0YXRlLnByZXZQYXJhbXMgPSB7J2NvbXBldGl0aW9uSWQnOiB2bS5jb21wZXRpdGlvbklkfTtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgY29uZmlybWF0aW9uIG1vZGFsIGZvciBsZWF2aW5nIHRoZSBjb21wZXRpdGlvbiBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKSB7XG4gICAgICBzd2FsKHtcbiAgICAgICAgdGl0bGU6ICdMZWF2ZSBDb21wZXRpdGlvbj8nLFxuICAgICAgICB0ZXh0OiAnWW91IHdpbGwgbG9zZSB5b3VyIHNwb3QgYW5kIGZvcmZlaXQgYW55IGFjdGl2ZSBjaGFsbGVuZ2VzLicsXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWVzLCBsZWF2ZScsXG4gICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogJ2J0bi1kYW5nZXInLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm8sIHN0YXknLFxuICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKTtcbiAgICAgICAgc3dhbCgnT0ssIHlvdVxcJ3Igb3V0IScsICdZb3VcXCd2ZSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgY29tcGV0aXRpb24uJywgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGlzIHRvIGVuZm9yY2Ugb3JkZXIgb2Ygb3BlcmF0aW9ucyB3aGVuIHRoZSBwbGF5ZXIgdG8gYmUgcmVtb3ZlZCBoYWQgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgIHZhciByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHVzZXIgZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIG9uIHRoaXMgY29tcGV0aXRpb25cbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24pIHtcbiAgICAgICAgcmVtb3ZpbmdDdXJyZW50VXNlciA9IHRydWU7XG4gICAgICAgIC8vIEZvcmZlaXQgaWYgdGhleSBoYXZlIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHZtLmN1cnJlbnRVc2VyUGxheWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgcmVtb3ZpbmcgdGhlbSAuLi5cbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gR2V0IGFuIHVwZGF0ZWQgY29weSBvZiB0aGUgY29tcGV0aXRpb24gaW5jYXNlIGEgZm9yZmVpdCBoYXBwZW5lZFxuICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHVwZGF0ZWQgY29weSBsb2NhbGx5IHNvIGFzIG5vdCB0byBkaXN0cnVwdCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIC8vIHVudGlsIHRoZSBwbGF5ZXIgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgdmFyIGNvbXBldGl0aW9uID0gcC5kYXRhO1xuXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBzcG90IHRoZXkgd2VyZSBpbiBvbiB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIHZhciBvcGVuUG9zaXRpb24gPSB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvbjtcblxuICAgICAgICAgICAgLy8gTW92ZSBhbGwgdGhlIHBsYXllcnMgdXAgMSBwb3NpdGlvbiB0aGF0IHdlcmUgYmVoaW5kIHRoZSByZW1vdmVkIHBsYXllclxuICAgICAgICAgICAgXy5mb3JFYWNoKGNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA+PSBvcGVuUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucG9zaXRpb24gLT0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZWQgdGhlIHBsYXllciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAgICAgICAgdmFyIHJlbW92ZWRQbGF5ZXIgPSBfLnJlbW92ZShjb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwbGF5ZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFrZSBhIG5ldyBhcnJheSBvZiBhbGwgdGhlIHBsYXllcnMgc3RpbGwgb24gdGhlIGNvbXBldGl0aW9uXG4gICAgICAgICAgICAvLyBvbmx5IHVzZSB0aGUgcHJvcGVydGllcyB3ZSB3YW50IHRvIHN0b3JlIGluIHRoZSBjb21wZXRpdGlvbiBkb2N1bWVudFxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLm51bWJlck9mUmVhbFBsYXllcnMgLSAxOyArK2kpIHtcbiAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXIgPSB7XG4gICAgICAgICAgICAgICAgX2lkOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLl9pZCxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGNvbXBldGl0aW9uLnBsYXllcnNbaV0uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLnBvc2l0aW9uXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdXBkYXRlZFBsYXllcnMucHVzaCh1cGRhdGVkUGxheWVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsbCBzZXJ2aWNlIHRvIHJlbW92ZSB0aGUgcGxheWVyXG4gICAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCwgcmVtb3ZlZFBsYXllclswXSwgdXBkYXRlZFBsYXllcnMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hhdCB0aGUgYXBwcm9wcmlhdGUgYWN0aW9uIGlzIGJhc2VkIG9uIHRoZSBwbGF5ZXIgY2xpY2tpbmcgYW5kIHRoZSBwbGF5ZXIgYmVpbmcgY2xpY2tlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBsYXllckNsaWNrKHBsYXllcikge1xuICAgICAgLy8gY2xpY2tlZCBvbiBlbXB0eSBzcG90XG4gICAgICBpZiAocGxheWVyLnBvc2l0aW9uID09PSA5OSAmJiAhdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24pIHtcbiAgICAgICAgYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwbGF5ZXIuc2hvd0NoYWxsZW5nZU1vZGFsID0gIXBsYXllci5zaG93Q2hhbGxlbmdlTW9kYWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCB0aGUgY29tcGV0aXRpb24gYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoQ29tcGV0aXRpb24oKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtVXBkYXRlQWRtaW5zJywgd3BtVXBkYXRlQWRtaW5zKTtcblxuICBmdW5jdGlvbiB3cG1VcGRhdGVBZG1pbnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdXBkYXRlLWFkbWlucy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHJlbW92ZWRBZG1pbnMgPSBbXTtcbiAgICB2YXIgb3JpZ2luYWxBdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IFtdO1xuICAgIHZtLmFkZGVkQWRtaW5zID0gW107XG4gICAgdm0udXNlcklzUHJpbWFyeUFkbWluID0gZmFsc2U7XG4gICAgdm0udXBkYXRlQ29tcGV0aXRpb24gPSB1cGRhdGVDb21wZXRpdGlvbjtcbiAgICB2bS5jYW5jZWxVcGRhdGUgPSBjYW5jZWxVcGRhdGU7XG4gICAgdm0ucmVtb3ZlQWRtaW4gPSByZW1vdmVBZG1pbjtcbiAgICB2bS5hZGRBZG1pbiA9IGFkZEFkbWluO1xuICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24uYWRtaW5zKTtcbiAgICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICB2bS51c2VySXNQcmltYXJ5QWRtaW4gPSBfLmZpbmQodm0uY29tcGV0aXRpb24uYWRtaW5zLCB7J3ByaW1hcnknOiB0cnVlfSkuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkID8gdHJ1ZTogZmFsc2U7XG4gICAgICAgICAgZ2V0QXZhaWxhYmxlQWRtaW5zKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEF2YWlsYWJsZUFkbWlucygpIHtcbiAgICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IFtdO1xuICAgICAgcmVtb3ZlZEFkbWlucyA9IFtdO1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGN1cnJlbnQgYWRtaW5zIGZyb20gdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGFkbWluc1xuICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24uYWRtaW5zLCBmdW5jdGlvbiAoY29tcGV0aXRpb25BZG1pbikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVBZG1pbil7XG4gICAgICAgICAgICByZXR1cm4gY29tcGV0aXRpb25BZG1pbi5faWQgPT09IGF2YWlsYWJsZUFkbWluLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIGFkbWluIHJlY29yZFxuICAgICAgICBfLmZvckVhY2godXNlcnMuZGF0YSwgZnVuY3Rpb24gKGF2YWlsYWJsZUFkbWluKSB7XG4gICAgICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVBZG1pbi5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogYXZhaWxhYmxlQWRtaW4ubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogYXZhaWxhYmxlQWRtaW4uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogYXZhaWxhYmxlQWRtaW4udXNlcm5hbWUsXG4gICAgICAgICAgICBfaWQ6IGF2YWlsYWJsZUFkbWluLl9pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvcmlnaW5hbEF2YWlsYWJsZUFkbWlucyA9IF8uY2xvbmVEZWVwKHZtLmF2YWlsYWJsZUFkbWlucyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24uYWRtaW5zID0gdm0uYWRkZWRBZG1pbnM7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnVwZGF0ZUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICB9KTsgICBcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHJlbW92ZWRBZG1pbnMgPSBbXTtcbiAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24uYWRtaW5zKTtcbiAgICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IF8uY2xvbmVEZWVwKG9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGFkbWluIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICogUXVldWUgdXAgdGhlIGFkbWlucyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkbWluKSB7XG4gICAgICByZW1vdmVkQWRtaW5zLnB1c2goYWRtaW4pO1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goXy5yZW1vdmUodm0uYWRkZWRBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFkbWluIHRvIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gYWRtaW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRBZG1pbihhZG1pbikge1xuICAgICAgdm0uYWRkZWRBZG1pbnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVVwZGF0ZVBsYXllcnMnLCB3cG1VcGRhdGVQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiB3cG1VcGRhdGVQbGF5ZXJzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJGZpbHRlciwgY29tcGV0aXRpb25zU2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIHVzZXJTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHJlbW92ZWRQbGF5ZXJzID0gW107XG4gICAgdmFyIG9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciBtYXhQbGF5ZXJzID0gbnVsbDtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2bS5hZGRlZFBsYXllcnMgPSBbXTtcbiAgICB2bS51cGRhdGVDb21wZXRpdGlvbiA9IHVwZGF0ZUNvbXBldGl0aW9uO1xuICAgIHZtLmNhbmNlbFVwZGF0ZSA9IGNhbmNlbFVwZGF0ZTtcbiAgICB2bS5yZW9yZGVyUGxheWVycyA9IHJlb3JkZXJQbGF5ZXJzO1xuICAgIHZtLnJlbW92ZVBsYXllciA9IHJlbW92ZVBsYXllcjtcbiAgICB2bS5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG4gICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICBtYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uYWRkZWRQbGF5ZXJzID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24ucGxheWVycyk7XG4gICAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICAgICAgZ2V0QXZhaWxhYmxlUGxheWVycygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBdmFpbGFibGVQbGF5ZXJzKCkge1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgICAgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChjb21wZXRpdGlvblBsYXllcikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBldGl0aW9uUGxheWVyLl9pZCA9PT0gYXZhaWxhYmxlUGxheWVyLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIHBsYXllciByZWNvcmRcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGF2YWlsYWJsZVBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBhdmFpbGFibGVQbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogYXZhaWxhYmxlUGxheWVyLnVzZXJuYW1lLFxuICAgICAgICAgICAgX2lkOiBhdmFpbGFibGVQbGF5ZXIuX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgb3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzID0gXy5jbG9uZURlZXAodm0uYXZhaWxhYmxlUGxheWVycyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnICYmIHZtLmFkZGVkUGxheWVycy5sZW5ndGggJSAyID4gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIFZlcnN1cyBjb21wZXRpdGlvbiBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgcGxheWVycycpO1xuICAgICAgfSBlbHNlIGlmICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoID4gbWF4UGxheWVycykge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIGNvbXBldGl0aW9uIGNhbiBoYXZlIGEgbWF4aW11bSBvZiAnICsgbWF4UGxheWVycyArICcgcGxheWVycycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXy5mb3JFYWNoKHJlbW92ZWRQbGF5ZXJzLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb24uX2lkLCBwbGF5ZXIuX2lkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uLnBsYXllcnMgPSB2bS5hZGRlZFBsYXllcnM7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb24pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzID0gW107XG4gICAgICB2bS5hZGRlZFBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzKTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBfLmNsb25lRGVlcChvcmlnaW5hbEF2YWlsYWJsZVBsYXllcnMpO1xuICAgIH1cblxuICAgIC8vIFJlb3JkZXIgdGhlIHBsYXllcnMgYmFzZWQgb24gdGhlIGRyYWctZHJvcFxuICAgIGZ1bmN0aW9uIHJlb3JkZXJQbGF5ZXJzKCkge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgIHJlb3JkZXJWZXJzdXNQbGF5ZXJzKCk7XG4gICAgICB9IGVsc2UgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICdweXJhbWlkJykge1xuICAgICAgICByZW9yZGVyUHlyYW1pZFBsYXllcnMoKTtcbiAgICAgIH1cbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIHRoZSBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBkcmFnLWRyb3BcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUHlyYW1pZFBsYXllcnMoKSB7XG4gICAgICB2YXIgaSA9IDE7XG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IGk7XG4gICAgICAgICsraTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlb3JkZXJWZXJzdXNQbGF5ZXJzKCkge1xuICAgICAgLy8gU2V0IGFsbCBwbGF5ZXJzIHRvIHRlYW0gMlxuICAgICAgXy5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSAyO1xuICAgICAgfSk7XG4gICAgICAvLyBTZXQgdGhlIGZpcnN0IGhhbGYgb2YgdGhlIHBsYXllcnMgdG8gdGVhbSAxXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoIC8gMik7IGkrKykge1xuICAgICAgICB2bS5hZGRlZFBsYXllcnNbaV0ucG9zaXRpb24gPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwbGF5ZXIgZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgKiBRdWV1ZSB1cCB0aGUgcGxheWVycyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICByZW1vdmVkUGxheWVycy5wdXNoKHBsYXllcik7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGxheWVyIHRvIHRoZSBuZXcgY29tcGV0aXRpb25cbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVZlcnN1cycsIHdwbVZlcnN1cyk7XG5cbiAgZnVuY3Rpb24gd3BtVmVyc3VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdmVyc3VzLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gbnVsbDtcbiAgICB2bS5jcmVhdGVDaGFsbGVuZ2UgPSBjcmVhdGVDaGFsbGVuZ2U7XG4gICAgdm0uY29tcGxldGVDaGFsbGVuZ2UgPSBjb21wbGV0ZUNoYWxsZW5nZTtcbiAgICB2bS5jaGFsbGVuZ2VFeHBpcmVUaW1lID0gbnVsbDtcbiAgICB2bS5zaG93Q29udHJvbHMgPSBmYWxzZTtcbiAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICB2bS50b2dnbGVDb250cm9scyA9IHRvZ2dsZUNvbnRyb2xzO1xuICAgIHZtLnNpbmdsZVBsYXllclRlYW1zID0gZmFsc2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9IHZtLmNvbXBldGl0aW9uLl9pZDtcbiAgICAgICAgICB2bS5zaG93Q29udHJvbHMgPSBmYWxzZTtcbiAgICAgICAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICAgICAgICBncm91cFBsYXllcnMoKTtcbiAgICAgICAgICBnZXRDdXJyZW50VXNlclN0YXR1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHcm91cCBwbGF5ZXJzIGJ5IHRlYW1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBncm91cFBsYXllcnMoKSB7XG4gICAgICB2bS5jb21wZXRpdGlvbi50ZWFtcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHBsYXllcnM6IF8uZmlsdGVyKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIFsncG9zaXRpb24nLCAxXSksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwbGF5ZXJzOiBfLmZpbHRlcih2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBbJ3Bvc2l0aW9uJywgMl0pLFxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBpZiAodm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdm0uc2luZ2xlUGxheWVyVGVhbXMgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyU3RhdHVzKCkge1xuICAgICAgXG4gICAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFuIGFkbWluIG9mIHRoaXMgY29tcGV0aXRpb25cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHBlbmRpbmcgcmVxdWVzdCB0byBqb2luXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLnBlbmRpbmdQbGF5ZXJzLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgIH1cblxuICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgY29tcGV0aXRpb24gYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdjdXJyZW50LXVzZXInO1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gcGxheWVyO1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uLnRlYW1zW3BsYXllci5wb3NpdGlvbiAtIDFdLmNsYXNzID0gJ2N1cnJlbnQtdXNlci10ZWFtJztcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbi5jbGFzcyA9ICdjdXJyZW50LXVzZXItb24tY29tcGV0aXRpb24nO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gYWN0aXZlIGNoYWxsZW5nZSBmb3IgdGhpcyBjb21wZXRpdGlvblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGFbMF07XG4gICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFRyYWNrIHdoZW4gdGhlIGNoYWxsZW5nZSB3aWxsIGV4cGlyZVxuICAgICAgICAgIGlmICh2bS5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQodm0uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZCh2bS5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCAncycpICogLTE7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGhhcyBub3QgeWV0IGV4cGlyZWQgZGlzcGxheSBhIGNvdW50ZG93blxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgdm0uY2hhbGxlbmdlRXhwaXJlVGltZSA9IHRpbWVUb0V4cGlyZTtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBleHBpcmVkIHdoaWxlIG5vIG9uZSB3YXMgdmlld2luZyB0aGlzIGNvbXBldGl0aW9uIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xzKCkge1xuICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSAmJiB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbikge1xuICAgICAgICB2bS5zaG93Q29udHJvbHMgPSAhdm0uc2hvd0NvbnRyb2xzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZSh0ZWFtKSB7XG4gICAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICAgIGlmICh2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIHlvdSBhcmUgYWxyZWFkeSBpbiBhbiBhY3RpdmUgY2hhbGxlbmdlLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIGNoYWxsZW5nZSBtb2RhbFxuICAgICAgICB2YXIgY2hhbGxlbmdlID0ge1xuICAgICAgICAgIHR5cGU6IHZtLmNvbXBldGl0aW9uLnR5cGUsXG4gICAgICAgICAgY29tcGV0aXRpb25OYW1lOiB2bS5jb21wZXRpdGlvbi5uYW1lLFxuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IHZtLmNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgIGZvcmZlaXQ6IGZhbHNlLFxuICAgICAgICAgIHRpbWVMaW1pdDogdm0uY29tcGV0aXRpb24uZm9yZmVpdERheXMsXG4gICAgICAgICAgY2hhbGxlbmdlcjoge1xuICAgICAgICAgICAgdGVhbTogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb24sXG4gICAgICAgICAgICBfaWQ6IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3Bwb25lbnQ6IHtcbiAgICAgICAgICAgIHRlYW06IHRlYW1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIGNvbXBldGl0aW9uXG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZVZlcnN1c0NoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIENsb3NlIHRoZSBjb21wZXRpdGlvbiBzaWRlYmFyXG4gICAgICAgICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHdpbm5pbmdUZWFtXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmluZ1RlYW0sIGZvcmZlaXQpIHtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgdmFyIGNoYWxsZW5nZSA9IHZtLmFjdGl2ZUNoYWxsZW5nZTtcbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgaWYgKGZvcmZlaXQpIHtcbiAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICBjaGFsbGVuZ2Uud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgLy8gRmlndXJlIG91dCB3aG8gdGhlIHdpbm5lciB3YXMgdG8gc3RvcmUgaW4gdGhlIGNoYWxsZW5nZSByZWNvcmRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2bS5hY3RpdmVDaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB3aW5uaW5nVGVhbSkge1xuICAgICAgICAgIGNoYWxsZW5nZS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbGxlbmdlLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKTtcbiAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIGNvbXBldGl0aW9uIGJlY2FzdWUgb2YgYW4gdXBkYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnY29tcGV0aXRpb25zU2VydmljZScsIGNvbXBldGl0aW9uc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNvbXBldGl0aW9uc1NlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldENvbXBldGl0aW9uOiBnZXRDb21wZXRpdGlvbixcbiAgICAgIGdldENvbXBldGl0aW9uc0ZvclVzZXI6IGdldENvbXBldGl0aW9uc0ZvclVzZXIsXG4gICAgICBnZXRQdWJsaWNDb21wZXRpdGlvbnM6IGdldFB1YmxpY0NvbXBldGl0aW9ucyxcbiAgICAgIGdldFByaXZhdGVDb21wZXRpdGlvbnM6IGdldFByaXZhdGVDb21wZXRpdGlvbnMsXG4gICAgICBjcmVhdGVDb21wZXRpdGlvbjogY3JlYXRlQ29tcGV0aXRpb24sXG4gICAgICB1cGRhdGVDb21wZXRpdGlvbjogdXBkYXRlQ29tcGV0aXRpb24sXG4gICAgICBkZWxldGVDb21wZXRpdGlvbjogZGVsZXRlQ29tcGV0aXRpb24sXG4gICAgICBzd2FwUG9zaXRpb25zOiBzd2FwUG9zaXRpb25zLFxuICAgICAgYWRkUGxheWVyVG9Db21wZXRpdGlvbjogYWRkUGxheWVyVG9Db21wZXRpdGlvbixcbiAgICAgIGFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0OiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uUmVxdWVzdCxcbiAgICAgIHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb246IHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24sXG4gICAgICBhcHByb3ZlUGVuZGluZ1BsYXllcjogYXBwcm92ZVBlbmRpbmdQbGF5ZXIsXG4gICAgICBkZW55UGVuZGluZ1BsYXllcjogZGVueVBlbmRpbmdQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgY29tcGV0aXRpb24gZnJvbSB0aGUgZGF0YWJhc2UgKG9yIG1lbW9yeSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb21wZXRpdGlvbiBpZCBmb3IgdGhlIHJlcXVlc3RlZCBjb21wZXRpdGlvblxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvbXBldGl0aW9uJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGNvbXBldGl0aW9ucyBmcm9tIHRoZSBkYXRhYmFzZSB0aGF0IGEgcGFydGljdWxhciB1c2VyIGlzIGluY2x1ZGVkIGluXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3VzZXJJZH0gdGhlIHVzZXIgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgdXNlclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGV0aXRpb25zRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb25zL3VzZXInLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGFjdGl2ZSBwdWJsaWMgY29tcGV0aXRpb25zIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGNvbXBldGl0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB1YmxpY0NvbXBldGl0aW9ucygpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb25zL3B1YmxpYycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIHByaXZhdGUgY29tcGV0aXRpb25zIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGNvbXBldGl0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFByaXZhdGVDb21wZXRpdGlvbnMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvbXBldGl0aW9ucy9wcml2YXRlJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tcGV0aXRpb24oY29tcGV0aXRpb24pIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9jcmVhdGUnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uOiBjb21wZXRpdGlvblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlQ29tcGV0aXRpb24oY29tcGV0aXRpb24pIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy91cGRhdGUnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uOiBjb21wZXRpdGlvblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQ29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jb21wZXRpdGlvbnMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2FwUG9zaXRpb25zKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZXIsIG9wcG9uZW50KSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvc3dhcFBvc2l0aW9ucycsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgY2hhbGxlbmdlcjogY2hhbGxlbmdlcixcbiAgICAgICAgb3Bwb25lbnQ6IG9wcG9uZW50XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2FkZFBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0KGNvbXBldGl0aW9uLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9hZGRQbGF5ZXJSZXF1ZXN0Jywge1xuICAgICAgICBjb21wZXRpdGlvbjogY29tcGV0aXRpb24sXG4gICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVkUGxheWVyRnJvbUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXIsIHBsYXllcnMpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9yZW1vdmVQbGF5ZXInLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIHJlbW92ZWRQbGF5ZXI6IHJlbW92ZWRQbGF5ZXIsXG4gICAgICAgIHBsYXllcnM6IHBsYXllcnNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcHJvdmVQZW5kaW5nUGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2FwcHJvdmVQbGF5ZXInLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZW55UGVuZGluZ1BsYXllcihjb21wZXRpdGlvbklkLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9kZW55UGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uQWRtaW5DdHJsJywgQ29tcGV0aXRpb25BZG1pbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uQWRtaW5DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRmaWx0ZXIsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLnVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucyA9IHVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucztcbiAgICB2bS51cGRhdGVDb21wZXRpdGlvblByaXZhdGUgPSB1cGRhdGVDb21wZXRpdGlvblByaXZhdGU7XG4gICAgdm0uZGVsZXRlQ29tcGV0aXRpb24gPSBkZWxldGVDb21wZXRpdGlvbjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG4gICAgICAgIHJlZnJlc2hDb21wZXRpdGlvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoQ29tcGV0aXRpb24oKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIHVzZXIgaXMgYW4gYWRtaW4gb2YgdGhpcyBjb21wZXRpdGlvblxuICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSAmJiBfLnNvbWUoY29tcGV0aXRpb24uZGF0YS5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgICAgdm0uaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgLy8gRGlzcGxheSB0aGUgcGxheWVycyBpbiB0aGUgcHJvcGVyIG9yZGVyXG4gICAgICAgICAgY29tcGV0aXRpb24uZGF0YS5wbGF5ZXJzID0gJGZpbHRlcignb3JkZXJCeScpKGNvbXBldGl0aW9uLmRhdGEucGxheWVycywgJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvblJlc3RyaWN0Sm9pbnMoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZhciB1cGRhdGVkQ29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB1cGRhdGVkQ29tcGV0aXRpb24ucmVzdHJpY3RKb2lucyA9IHZtLmNvbXBldGl0aW9uLnJlc3RyaWN0Sm9pbnM7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odXBkYXRlZENvbXBldGl0aW9uKTtcbiAgICAgIH0pOyAgICAgIFxuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZXMgdGhhdCB3ZXJlIHJlcXVzdGVkXG4gICAgZnVuY3Rpb24gdXBkYXRlQ29tcGV0aXRpb25Qcml2YXRlKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICB2YXIgdXBkYXRlZENvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgICAgdXBkYXRlZENvbXBldGl0aW9uLnByaXZhdGUgPSB2bS5jb21wZXRpdGlvbi5wcml2YXRlO1xuICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnVwZGF0ZUNvbXBldGl0aW9uKHVwZGF0ZWRDb21wZXRpdGlvbik7XG4gICAgICB9KTsgICAgICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDb21wZXRpdGlvbigpIHtcbiAgICAgIHN3YWwoe1xuICAgICAgICB0aXRsZTogJ0RlbGV0ZSBDb21wZXRpdGlvbj8nLFxuICAgICAgICB0ZXh0OiAnVGhpcyBjYW4gbm90IGJlIHVuZG9uZScsXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnRGVsZXRlJyxcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgIGNsb3NlT25Db25maXJtOiB0cnVlLFxuICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZGVsZXRlQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjb21wZXRpdGlvbkRldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjb21wZXRpdGlvbkRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY29tcGV0aXRpb25EZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjb21wZXRpdGlvbkRldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjb21wZXRpdGlvbkRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY29tcGV0aXRpb25EZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvblN0YXRzQ3RybCcsIENvbXBldGl0aW9uU3RhdHNDdHJsKTtcblxuICBmdW5jdGlvbiBDb21wZXRpdGlvblN0YXRzQ3RybCgkc2NvcGUsICRzdGF0ZVBhcmFtcywgJHN0YXRlLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0uY29tcGV0aXRpb24gPSB7fTtcbiAgICB2bS5wbGF5ZXJzUmVzdWx0cyA9IFtdO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG4gICAgICAgIHJlZnJlc2hDb21wZXRpdGlvbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hDb21wZXRpdGlvbigpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgaWYgKGNvbXBldGl0aW9uLmRhdGEpIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICdweXJhbWlkJykge1xuICAgICAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHBsYXllci5yZXN1bHRzID0gcmVzdWx0cy5kYXRhO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICAgIHZtLnRlYW1zID0gW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiAxXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IDJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBVc2VkIGZvciB0aGUgY29tcGxldGVkIGNoYWxsZW5nZXMgZGlyZWN0aXZlXG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvbkN0cmwnLCBDb21wZXRpdGlvbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uQ3RybCgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5jb21wZXRpdGlvbiA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuXG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSkge1xuICAgICAgICAgICAgdm0uY29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNvbXBldGl0aW9uX2RlbGV0ZWQnLCBmdW5jdGlvbiAoXywgY29tcGV0aXRpb25EZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY29tcGV0aXRpb25EZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNvbXBldGl0aW9uRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ29tcGV0aXRpb25zQ3RybCcsIENvbXBldGl0aW9uc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uc0N0cmwoY29tcGV0aXRpb25zU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25zID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldFB1YmxpY0NvbXBldGl0aW9ucygpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9ucykge1xuICAgICAgICB2bS5jb21wZXRpdGlvbnMgPSBjb21wZXRpdGlvbnMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZXMgYSBjb21wZXRpdGlvblxuICovXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDcmVhdGVDb21wZXRpdGlvbkN0cmwnLCBDcmVhdGVDb21wZXRpdGlvbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIENyZWF0ZUNvbXBldGl0aW9uQ3RybCgkc3RhdGUsIHVzZXJTZXJ2aWNlLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2YXIgbWF4TGV2ZWxzID0gNztcbiAgICB2YXIgbWF4UGxheWVycyA9IG51bGw7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5uZXdDb21wZXRpdGlvbiA9IHtcbiAgICAgIHBsYXllcnM6IFtdLFxuICAgICAgcmVzdHJpY3RKb2luczogZmFsc2UsXG4gICAgICBwcml2YXRlOiBmYWxzZVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZUNvbXBldGl0aW9uID0gY3JlYXRlQ29tcGV0aXRpb247XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLnJlbW92ZVBsYXllciA9IHJlbW92ZVBsYXllcjtcbiAgICB2bS5yZW9yZGVyUGxheWVycyA9IHJlb3JkZXJQbGF5ZXJzO1xuICAgIHZtLm5ld0NvbXBldGl0aW9uLmZvcmZlaXREYXlzID0gMTtcbiAgICB2bS5jb21wZXRpdGlvblR5cGVzID0gWydweXJhbWlkJywgJ3ZlcnN1cyddO1xuXG4gICAgYWN0aXZhdGUoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBSdW5zIG9uIGNvbnRyb2xsZXIgaW5zdGFudGlhdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gdXNlcnMuZGF0YTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICBtYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBicmVhayBwb2ludHMgYXJyYXlcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBjb21wZXRpdGlvblxuICAgICAqIENoZWNrcyB0byBtYWtlIHN1cmUgeW91IGFyZSBub3QgYWRkaW5nIHRvbyBtYW55IHBsYXllcnNcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwcmV2aXVvc2x5IGFkZGVkIHBsYXllciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmFkZGVkUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBjaGFuZ2VzIGJhc2VkIG9uIHRoZSBjb21wZXRpdGlvbiB0eXBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlclBsYXllcnMoKSB7XG4gICAgICBpZiAodm0ubmV3Q29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgcmVvcmRlclZlcnN1c1BsYXllcnMoKTtcbiAgICAgIH0gZWxzZSBpZiAodm0ubmV3Q29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgIHJlb3JkZXJQeXJhbWlkUGxheWVycygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlb3JkZXIgdGhlIHBsYXllcnMgYmFzZWQgb24gdGhlIGRyYWctZHJvcFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlb3JkZXJQeXJhbWlkUGxheWVycygpIHtcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gaTtcbiAgICAgICAgKytpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVvcmRlclZlcnN1c1BsYXllcnMoKSB7XG4gICAgICAvLyBTZXQgYWxsIHBsYXllcnMgdG8gdGVhbSAyXG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IDI7XG4gICAgICB9KTtcbiAgICAgIC8vIFNldCB0aGUgZmlyc3QgaGFsZiBvZiB0aGUgcGxheWVycyB0byB0ZWFtIDFcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggLyAyKTsgaSsrKSB7XG4gICAgICAgIHZtLmFkZGVkUGxheWVyc1tpXS5wb3NpdGlvbiA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnICYmIHZtLmFkZGVkUGxheWVycy5sZW5ndGggJSAyID4gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIFZlcnN1cyBjb21wZXRpdGlvbiBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgcGxheWVycycpO1xuICAgICAgfSBlbHNlIGlmICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoID4gbWF4UGxheWVycykge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIGNvbXBldGl0aW9uIGNhbiBoYXZlIGEgbWF4aW11bSBvZiAnICsgbWF4UGxheWVycyArICcgcGxheWVycycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBlbWFpbDogcGxheWVyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogcGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb21wZXRpdGlvbi5wbGF5ZXJzLnB1c2goYWRkUGxheWVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbXBldGl0aW9uLmFkbWlucyA9IFt7XG4gICAgICAgICAgX2lkOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgICAgIGVtYWlsOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICBwcmltYXJ5OiB0cnVlXG4gICAgICAgIH1dO1xuXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBvZiBsZXZlbHMgYmFzZWQgb24gdGhlIG51bWJlciBvZiBwbGF5ZXJzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggPCBicmVha1BvaW50c1tpXSkge1xuICAgICAgICAgICAgY29tcGV0aXRpb24ubGV2ZWxzID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuY3JlYXRlQ29tcGV0aXRpb24oY29tcGV0aXRpb24pLnRoZW4oZnVuY3Rpb24gKG5ld0NvbXBldGl0aW9uKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMudmlldycsIHtcbiAgICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IG5ld0NvbXBldGl0aW9uLmRhdGEuX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdNeUNvbXBldGl0aW9uc0N0cmwnLCBNeUNvbXBldGl0aW9uc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIE15Q29tcGV0aXRpb25zQ3RybCgkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgbXlDb21wZXRpdGlvbnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGV0aXRpb25zRm9yVXNlcigpIHtcbiAgICAgIG15Q29tcGV0aXRpb25zID0gW107XG4gICAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uc0ZvclVzZXIoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25zID0gY29tcGV0aXRpb25zLmRhdGE7XG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9ucywgZnVuY3Rpb24oY29tcGV0aXRpb24pIHtcbiAgICAgICAgICAgIG15Q29tcGV0aXRpb25zLnB1c2goY29tcGV0aXRpb24uX2lkKTtcbiAgICAgICAgICAgIGlmIChjb21wZXRpdGlvbi50eXBlID09PSAncHlyYW1pZCcpIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uLl9pZCwgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UgPSBjaGFsbGVuZ2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS5leHBpcmVzID0gKG1vbWVudCgpLmRpZmYobW9tZW50KGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwncycpKSAqIC0xO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhWzBdO1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNvbXBldGl0aW9uX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKG15Q29tcGV0aXRpb25zLmluZGV4T2YoY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSA+PSAwKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgZ2V0Q29tcGV0aXRpb25zRm9yVXNlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJywgVXNlckN0cmwpO1xuXG4gIGZ1bmN0aW9uIFVzZXJDdHJsKGlkZW50aXR5U2VydmljZSwgdXNlclNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnVzZXIgPSAge1xuICAgICAgX2lkOiAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgIGZpcnN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICBkaXNwbGF5TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lXG4gICAgfTtcbiAgICB2bS51cGRhdGVVc2VyID0gdXBkYXRlVXNlcjtcbiAgICB2bS51c2VyRm9ybSA9IHt9O1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCFpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgdm0udXNlci5kaXNwbGF5TmFtZSA9IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUgKyAnICcgKyBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVXNlciAodXNlcikge1xuICAgICAgaWYgKHVzZXIucGFzc3dvcmQgIT09IHVzZXIuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIGlmICh1c2VyLmZpcnN0TmFtZS5sZW5ndGggPCAxIHx8IHVzZXIubGFzdE5hbWUubGVuZ3RoIDwgMSB8fCB1c2VyLmRpc3BsYXlOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignRG9uXFwndCBsZWF2ZSBuYW1lcyBibGFuayEgIEhvdyB3aWxsIHBlb3BsZSBrbm93IHdobyB5b3UgYXJlPycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgYW55IG9mIHRoZSBuYW1lcyB3ZXJlIHVwZGF0ZWQgd2UnbGwgbmVlZCB0byB1cGRhdGUgdGhlbSBpbiB0aGUgb3RoZXIgY29sbGVjdGlvbnMnXG4gICAgICAgIHZhciB1c2VyVXBkYXRlcyA9IHtcbiAgICAgICAgICBfaWQ6IHVzZXIuX2lkXG4gICAgICAgIH07XG4gICAgICAgIGlmICgodXNlci5maXJzdE5hbWUgIT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUgJiYgdXNlci5maXJzdE5hbWUubGVuZ3RoID4gMCkgfHwgKHVzZXIubGFzdE5hbWUgIT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSAmJiB1c2VyLmxhc3ROYW1lLmxlbmd0aCA+IDApIHx8ICh1c2VyLmRpc3BsYXlOYW1lICE9PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWUgJiYgdXNlci5kaXNwbGF5TmFtZS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lO1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTtcbiAgICAgICAgICB1c2VyVXBkYXRlcy5kaXNwbGF5TmFtZSA9IHVzZXIuZGlzcGxheU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIucGFzc3dvcmQgJiYgdXNlci5wYXNzd29yZC5sZW50Z2ggPiAwKSB7XG4gICAgICAgICAgdXNlclVwZGF0ZXMucGFzc3dvcmQgPSB1c2VyLnBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIodXNlclVwZGF0ZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uuc3VjY2VzcygnWW91ciBpbmZvcm1hdGlvbiBoYXMgYmVlbiB1cGRhdGVkJyk7XG4gICAgICAgICAgdm0udXNlckZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgdXBkYXRlZCBkYXRhXG4gICAgICAgICAgdmFyIGN1cnJlbnRVc2VyQ2xvbmUgPSBhbmd1bGFyLmNvcHkoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjdXJyZW50VXNlckNsb25lLCB1c2VyVXBkYXRlcyk7XG4gICAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXJDbG9uZTtcbiAgICAgICAgICB2bS51c2VyLmNvbmZpcm1QYXNzd29yZCA9IHZtLnVzZXIucGFzc3dvcmQgPSAnJztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnY092ZXJmbG93JywgY092ZXJmbG93KTtcblxuICBmdW5jdGlvbiBjT3ZlcmZsb3coc2Nyb2xsYmFyU2VydmljZSkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBzY3JvbGxheGlzID0gYXR0cnMuc2Nyb2xsYXhpcyB8fCAneSc7XG4gICAgICB2YXIgdGhlbWUgPSBhdHRycy50aGVtZSB8fCAnbWluaW1hbC1kYXJrJztcbiAgICAgIHZhciBtb3VzZXdoZWVsYXhpcyA9IGF0dHJzLm1vdXNld2hlZWxheGlzIHx8ICd5JztcbiAgICAgIGlmICghJCgnaHRtbCcpLmhhc0NsYXNzKCdpc21vYmlsZScpKSB7XG4gICAgICAgIHNjcm9sbGJhclNlcnZpY2UubWFsaWh1U2Nyb2xsKGVsZW1lbnQsIHRoZW1lLCBzY3JvbGxheGlzLCBtb3VzZXdoZWVsYXhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9nZ2xlU3VibWVudScsIHRvZ2dsZVN1Ym1lbnUpO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZVN1Ym1lbnUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCkge1xuICAgICAgZWwuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBlbC5uZXh0KCkuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgZWwucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dhdmVzRWZmZWN0Jywgd2F2ZXNFZmZlY3QpO1xuXG4gIGZ1bmN0aW9uIHdhdmVzRWZmZWN0KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1pY29uJykgfHwgZWxlbWVudC5oYXNDbGFzcygnYnRuLWZsb2F0JykpIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQsIFsnd2F2ZXMtY2lyY2xlJ10pO1xuICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdidG4tbGlnaHQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1saWdodCddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgV2F2ZXMuaW5pdCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2ZnTGluZScsIGZnTGluZSk7XG5cbiAgZnVuY3Rpb24gZmdMaW5lKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudC5jaGlsZHJlbigpLmZpcnN0KCk7XG4gICAgICB2YXIgaXNGbG9hdExhYmVsID0gZWxlbWVudC5wYXJlbnQoKS5oYXNDbGFzcygnZmctZmxvYXQnKTtcbiAgICAgIGlucHV0LmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnZmctdG9nZ2xlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0LmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzRmxvYXRMYWJlbCB8fCAoaXNGbG9hdExhYmVsICYmIGlucHV0LnZhbCgpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiXX0=
