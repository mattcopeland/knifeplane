angular.module("app",["ui.router","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer"]),function(){"use strict ";function e(){}angular.module("app").config(e)}(),function(){"use strict";function e(e){function t(){r.sidebarToggle.left=!r.sidebarToggle.left}var r=this;r.toggleSidebar=t,r.$state=e,r.sidebarToggle={left:!1,right:!1}}e.$inject=["$state"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,i,a){var o={superAdmin:r,admin:t,user:n};a.html5Mode(!0),i.otherwise("/"),i.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:pyramidId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function r(e){return e.authorizeCurrentUserForRoute("super-admin")}function n(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],r.$inject=["authService"],n.$inject=["authService"]}(),function(){"use strict";function e(e,t){e.$on("$stateChangeError",function(e,r,n,i,a,o){"not authorized"===o&&(t.go("login"),t.previous=r)})}e.$inject=["$rootScope","$state"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,r,n,i){function a(e,n){var a=r.defer();return t.post("/login",{username:e,password:n}).then(function(e){e.data.success?(i.currentUser=e.data.user,a.resolve(!0)):a.resolve(!1)}),a.promise}function o(e){var n=r.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?(i.currentUser=e.data,n.resolve(!0)):n.resolve(!1)}),n.promise}function l(){var n=r.defer();return t.post("/logout",{logout:!0}).then(function(){i.currentUser=void 0,n.resolve(),e.go("home")}),n.promise}function s(e){return!!i.isAuthorized(e)||r.reject("not authorized")}function c(){return!!i.isAuthenticated()||r.reject("not authorized")}var u={authenticateUser:a,createUser:o,logout:l,authorizeCurrentUserForRoute:s,authenticatedUserForRoute:c};return u}e.$inject=["$state","$http","$q","userService","identityService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e,t){function r(){return e.get("/api/users").then(function(e){return e})}var n={getAllUsers:r};return n}e.$inject=["$http","identityService"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,r){function n(){}function i(n,i){t.authenticateUser(n,i).then(function(t){t?(r.success("Login successful.  Welcome to Knifeplane!"),e.previous?e.go(e.previous):e.go("home")):r.error("Username / password combinaiton incorrect")})}var a=this;a.login=i,n()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,r){function n(){}function i(e){r.createUser(e).then(function(e){t.go("home")})}var a=this;a.register=i,n()}e.$inject=["$scope","$state","authService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{competitionId:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,r,n,i,a){function o(){t.getPyramid(g.competitionId).then(function(e){g.pyramid=e.data,g.levels=[];for(var t=1;t<=e.data.levels;++t)g.levels.push(t);l(),s(),u(),d(),p()})}function l(){g.pyramid.players=r("orderBy")(g.pyramid.players,"position")}function s(){_.forEach(g.pyramid.players,function(e){i.currentUser&&e._id===i.currentUser._id&&(g.isCurrentUserOnPyramid=!0,e.class="current-user",g.currentUserPlayer=e,a.getActiveChallengeByCompetitionByPlayer(g.competitionId,e._id).then(function(e){e.data&&(g.hasActiveChallenge=!0)}))}),a.getActiveChallengesByCompetition(g.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(g.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var r=_.find(g.pyramid.players,{_id:e.opponent._id});r.class="unavailable",r.challenge={position:"opponent"};var n=moment().diff(moment(e.created).add(e.timeLimit,"h"),"s")*-1;n>0?r.challenge.expires=n:n<=0&&y(null,!0,t)})})}function c(){g.breakPoints=[];for(var e=0;e<g.pyramid.levels;e++)g.breakPoints.push(e*(e+1)/2+1)}function u(){g.numberOfBlocks=0;for(var e=g.pyramid.levels;e>0;e--)g.numberOfBlocks+=e}function d(){for(var e=g.pyramid.players.length;e<g.numberOfBlocks;e++)g.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"})}function p(){var e=0;c();for(var t=0;t<g.pyramid.players.length;t++)g.breakPoints.indexOf(t+1)>-1&&(e+=1),g.pyramid.players[t].level=e}function m(e){e?g.showCreateChallengeOptions=!1:g.showCreateChallengeOptions=!0;var t=g.currentUserPlayer.level>1?g.currentUserPlayer.level-1:null;_.forEach(g.pyramid.players,function(r){r.level===t&&99!==r.position&&"unavailable"!=r.class&&(g.availableChallenges=!0,e?(r.class="",r.available=!1):(r.class="available",r.available=!0))})}function f(e){if(g.showCreateChallengeOptions)if(e.available){g.showCreateChallengeOptions=!1,g.hasActiveChallenge=!0;var t={competitionId:g.competitionId,complete:!1,forfeit:!1,timeLimit:24,challenger:{_id:g.currentUserPlayer._id,firstName:g.currentUserPlayer.firstName,lastName:g.currentUserPlayer.lastName,nickname:g.currentUserPlayer.nickname,position:g.currentUserPlayer.position},opponent:{_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname,position:e.position}};a.createChallenge(t).then(function(){h()})}else n.error("Sorry, that is not a valid challenge.")}function y(e,r,n){var i=n||g.currentUserPlayer;a.getActiveChallengeByCompetitionByPlayer(g.competitionId,i._id).then(function(n){g.hasActiveChallenge=!1,g.showCreateChallengeOptions=!1,g.showCompleteChallengeOptions=!1;var i=!1;r?(n.data.forfeit=!0,n.data.challenger.winner=!0,i=!0):e?n.data.challenger._id===g.currentUserPlayer._id?(n.data.challenger.winner=!0,i=!0):n.data.opponent.winner=!0:n.data.challenger._id===g.currentUserPlayer._id?n.data.opponent.winner=!0:(n.data.challenger.winner=!0,i=!0),a.completeChallenge(n.data).then(function(e){i?t.swapPositions(g.competitionId,e.data.opponent,e.data.challenger).then(h):h()})})}function v(){y(null,!0)}function h(){t.getPyramid(g.competitionId).then(function(e){g.pyramid=e.data,l(),s(),d(),p()})}var g=this;g.pyramid={},g.breakPoints=[],g.numberOfBlocks=0,g.isCurrentUserOnPyramid=!1,g.hasActiveChallenge=!1,g.showCreateChallengeOptions=!1,g.showCompleteChallengeOptions=!1,g.availableChallenges=!1,g.startChallenge=m,g.createChallenge=f,g.completeChallenge=y,g.challengeExpired=v,g.currentUserPlayer={},o(),e.$on("ws:challenge_created",function(e,t){g.competitionId===t.competitionId&&(n.info(t.description),h())}),e.$on("ws:challenge_completed",function(e,t){g.competitionId===t.competitionId&&(n.info(t.description),h())})}t.$inject=["$scope","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{pyramidId:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,r,n,i){function a(){t.getPyramid(y.pyramidId).then(function(e){y.pyramid=e.data,g=y.pyramid.players.length,_.find(y.pyramid.players,["_id",i.currentUser._id])&&(y.isPlayerOnPyramid=!0),s(),c(),u(),d(),p(),y.isPlayerOnPyramid&&m()})}function o(e){if(i.isAuthenticated()&&y.isPlayerOnPyramid)if(_.isEmpty(v)&&99!==e.position&&i.isAuthorized("admin"))v=e,v.class="active";else if(v===e&&i.isAuthorized("admin"))v.class="",v={};else if(e.level===v.level||e.level<v.level-1||e.level>v.level+1||99===e.position)n.error("Sorry, thats not allowed!");else{var r=v.position,a=v.level;h=e,v.position=e.position,v.level=e.level,h.position=r,h.level=a,t.swapPositions(y.pyramidId,v,h),v.class="",v={},h={}}else i.isAuthenticated()&&!y.isPlayerOnPyramid&&99===e.position?l():n.error("You can not update this pyramid.<br>You must join the pyramid first.")}function l(){var e={position:g+1,_id:i.currentUser._id,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,nickname:i.currentUser.nickname};t.addPlayerToPyramid(y.pyramidId,e).then(function(e){y.isPlayerOnPyramid=!0,f()})}function s(){y.pyramid.players=r("orderBy")(y.pyramid.players,"position")}function c(){y.breakPoints=[];for(var e=0;e<y.pyramid.levels;e++)y.breakPoints.push(e*(e+1)/2+1)}function u(){y.numberOfBlocks=0;for(var e=y.pyramid.levels;e>0;e--)y.numberOfBlocks+=e}function d(){for(var e=y.pyramid.players.length;e<y.numberOfBlocks;e++)y.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"})}function p(){y.level=0;for(var e=0;e<y.pyramid.players.length;e++)y.breakPoints.indexOf(e+1)>-1&&(y.level+=1),y.pyramid.players[e].level=y.level}function m(){!i.isAuthorized("admin")&&i.isAuthenticated()&&y.isPlayerOnPyramid&&(v=_.find(y.pyramid.players,["_id",i.currentUser._id]),v.class="active")}function f(){t.getPyramid(y.pyramidId).then(function(e){y.pyramid=e.data,s(),d(),p(),m()})}var y=this;y.pyramid={},y.breakPoints=[],y.numberOfBlocks=0,y.level=0,y.updatePyramid=o,y.isPlayerOnPyramid=!1;var v={},h={},g=0;a(),e.$on("ws:match_results",function(e,t){n.info(t),f()})}angular.module("app").directive("_kpPyramid",e),t.$inject=["$scope","pyramidsService","$filter","Notification","identityService"]}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{pyramidId:t}})}function r(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function n(t){return e.post("/api/pyramids/create",{pyramid:t})}function i(t,r,n){return e.post("/api/pyramids/swapPositions",{pyramidId:t,challenger:r,opponent:n})}function a(t,r){return e.post("/api/pyramids/addPlayer",{pyramidId:t,player:r})}var o={getPyramid:t,getPyramidsForUser:r,createPyramid:n,swapPositions:i,addPlayerToPyramid:a};return o}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(e,t,r,n){function i(){r.getAllUsers().then(function(e){l.availablePlayers=e.data})}function a(e){s+=1;var t={position:s,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};l.newPyramid.players.push(t),_.remove(l.availablePlayers,{_id:e._id})}function o(t){n.createPyramid(t).then(function(t){e.go("pyramids.view",{pyramidId:t.data._id})})}var l=this;l.availablePlayers=[],l.addPlayerToPyramid=a,l.createPyramid=o,i();var s=0}e.$inject=["$state","$stateParams","userService","pyramidsService"],angular.module("app").controller("AddPlayerCtrl",e)}(),function(){"use strict";function e(e,t,r){function n(){t.getAllUsers().then(function(e){a.availablePlayers=e.data})}function i(t){angular.forEach(a.addedPlayers,function(e){o+=1;var t={position:o,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};a.newPyramid.players.push(t)}),r.createPyramid(t).then(function(t){e.go("pyramids.view",{pyramidId:t.data._id})})}var a=this;a.newPyramid={players:[]},a.availablePlayers=[],a.addedPlayers=[],a.createPyramid=i,a.newPyramid.levels=4,n();var o=0}e.$inject=["$state","userService","pyramidsService"],angular.module("app").controller("CreatePyramidCtrl",e)}(),function(){"use strict";function e(e,t,r){function n(){t.getPyramidsForUser(r.currentUser._id).then(function(e){i.pyramids=e.data})}var i=this;i.pyramids=null,n()}e.$inject=["$state","pyramidsService","identityService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e){function t(){e.pyramidId&&(r.pyramidId=e.pyramidId)}var r=this;r.pyramidId=null,t()}e.$inject=["$stateParams"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(){function e(){}var t=this;t.pyramids=null,e()}angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@"},templateUrl:"/common/components/challenges.html"};return e}function t(e,t){function r(){n()}function n(){t.getActiveChallengesByCompetition(i.competitionId).then(function(e){i.challenges=[],e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){e.expires=moment().diff(moment(e.created).add(e.timeLimit,"h"),"s")*-1}))})}var i=this;i.challenges=[],r(),e.$on("ws:challenge_created",function(e,t){i.competitionId===t.competitionId&&n()}),e.$on("ws:challenge_completed",function(e,t){i.competitionId===t.competitionId&&n()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function r(){t.logout()}var n=this;n.indentity=e,n.logout=r}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(){}angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t){function r(){t.logout()}var n=this;n.indentity=e,n.logout=r}t.$inject=["identityService","authService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function r(t){return e.post("/api/challenges/complete",{challenge:t})}function n(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function i(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function a(t,r){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:r}})}var o={createChallenge:t,completeChallenge:r,getChallengesByCompetition:n,getActiveChallengesByCompetition:i,getActiveChallengeByCompetitionByPlayer:a};return o}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function r(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var n;null!==e.bootstrappedUserObject&&(n=e.bootstrappedUserObject);var i={currentUser:n,isAuthenticated:t,isAuthorized:r};return i}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,r){$.notify({icon:"zmdi zmdi-alert-circle-o",message:e,url:t,target:r},{type:"info"})}function t(e,t,r){$.notify({icon:"zmdi zmdi-check",message:e,url:t,target:r},{type:"success"})}function r(e,t,r){$.notify({icon:"zmdi zmdi-alert-triangle",message:e,url:t,target:r},{type:"warning"})}function n(e,t,r){$.notify({icon:"zmdi zmdi-alert-octagon",message:e,url:t,target:r},{type:"danger"})}function i(e,t,r){$.notify({message:e,url:t,target:r},{type:"inverse"})}var a={info:e,success:t,warning:r,error:n,inverse:i};return $.notifyDefaults({offset:{x:20,y:85}}),a}angular.module("app").factory("notifyService",e)}(),angular.module("app").service("websocketService",["$rootScope","$window",function(e,t){function r(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}var n;this.connect=function(){n=new WebSocket(r()),n.onmessage=function(t){var r=JSON.parse(t.data);e.$broadcast("ws:"+r.topic,r.data)}},this.send=function(e,t){var r=JSON.stringify({topic:e,data:t});n.send(r)}}]).run(["websocketService",function(e){e.connect()}]),function(){"use strict";function e(){function e(){}e()}angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var r=t.children().first(),n=t.parent().hasClass("fg-float");r.focus(function(){t.addClass("fg-toggled")}),r.blur(function(){(!n||n&&0===r.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvY29tcG9uZW50cy9weXJhbWlkLmRpcmVjdGl2ZS5qcyIsInB5cmFtaWRzL2NvbXBvbmVudHMvX3B5cmFtaWQuZGlyZWN0aXZlLmpzIiwicHlyYW1pZHMvc2VydmljZXMvcHlyYW1pZHMuc2VydmljZS5qcyIsInB5cmFtaWRzL3ZpZXdzL2FkZC1wbGF5ZXIuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL2NyZWF0ZS1weXJhbWlkLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9teS1weXJhbWlkcy5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvcHlyYW1pZC5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvcHlyYW1pZHMuY29udHJvbGxlci5qcyIsImNvbW1vbi9jb21wb25lbnRzL2NoYWxsZW5nZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2hlYWRlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9jaGFsbGVuZ2VzLnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvaW5kZW50aXR5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvbm90aWZ5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvd2Vic29ja2V0LnNlcnZpY2UuanMiLCJjb21tb24vdmlld3MvaG9tZS5jb250cm9sbGVyLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwidG9nZ2xlU2lkZWJhciIsImFwcEN0cmwiLCJzaWRlYmFyVG9nZ2xlIiwibGVmdCIsInRoaXMiLCJyaWdodCIsImNvbnRyb2xsZXIiLCJjb25maWd1cmVSb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwicm91dGVSb2xlQ2hlY2tzIiwic3VwZXJBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIiwiYWRtaW4iLCJyZXF1aXJlQWRtaW4iLCJ1c2VyIiwicmVxdWlyZUF1dGgiLCJodG1sNU1vZGUiLCJvdGhlcndpc2UiLCJ3aGVuIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRlbnRAIiwicmVzb2x2ZSIsImF1dGgiLCJhdXRoU2VydmljZSIsImF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUiLCJhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlIiwiJGluamVjdCIsImFwcFJ1biIsIiRyb290U2NvcGUiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJlcnJvciIsImdvIiwicHJldmlvdXMiLCJydW4iLCIkaHR0cCIsIiRxIiwidXNlclNlcnZpY2UiLCJpZGVudGl0eVNlcnZpY2UiLCJhdXRoZW50aWNhdGVVc2VyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRmZCIsImRlZmVyIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJzdWNjZXNzIiwiY3VycmVudFVzZXIiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJnZXQiLCJ1c2VycyIsIkxvZ2luQ3RybCIsIm5vdGlmeVNlcnZpY2UiLCJhY3RpdmF0ZSIsImxvZ2luIiwidm0iLCJSZWdpc3RlckN0cmwiLCIkc2NvcGUiLCJyZWdpc3RlciIsIm5ld1VzZXIiLCJrcFB5cmFtaWQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJzY29wZSIsImNvbXBldGl0aW9uSWQiLCJjdHJsRnVuYyIsImJpbmRUb0NvbnRyb2xsZXIiLCJweXJhbWlkc1NlcnZpY2UiLCIkZmlsdGVyIiwiY2hhbGxlbmdlc1NlcnZpY2UiLCJnZXRQeXJhbWlkIiwicHlyYW1pZCIsImxldmVscyIsImkiLCJwdXNoIiwib3JkZXJQbGF5ZXJzIiwiZ2V0UGxheWVyc1N0YXR1cyIsImNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MiLCJmaWxsSW5FbXB0eUJsb2NrcyIsImFzc2lnbkxldmVsc1RvUGxheWVycyIsInBsYXllcnMiLCJfIiwiZm9yRWFjaCIsInBsYXllciIsIl9pZCIsImlzQ3VycmVudFVzZXJPblB5cmFtaWQiLCJjbGFzcyIsImN1cnJlbnRVc2VyUGxheWVyIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwiY2hhbGxlbmdlIiwiaGFzQWN0aXZlQ2hhbGxlbmdlIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJjaGFsbGVuZ2VzIiwiY2hhbGxlbmdlciIsImZpbmQiLCJwb3NpdGlvbiIsIm9wcG9uZW50IiwidGltZVRvRXhwaXJlIiwibW9tZW50IiwiZGlmZiIsImNyZWF0ZWQiLCJhZGQiLCJ0aW1lTGltaXQiLCJleHBpcmVzIiwiY29tcGxldGVDaGFsbGVuZ2UiLCJjcmVhdGVCcmVha1BvaW50cyIsImJyZWFrUG9pbnRzIiwibnVtYmVyT2ZCbG9ja3MiLCJsZW5ndGgiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImxldmVsIiwiaW5kZXhPZiIsInN0YXJ0Q2hhbGxlbmdlIiwiY2FuY2VsIiwic2hvd0NyZWF0ZUNoYWxsZW5nZU9wdGlvbnMiLCJsZXZlbEFib3ZlIiwiYXZhaWxhYmxlQ2hhbGxlbmdlcyIsImF2YWlsYWJsZSIsImNyZWF0ZUNoYWxsZW5nZSIsImNvbXBsZXRlIiwiZm9yZmVpdCIsIm5pY2tuYW1lIiwicmVmcmVzaFB5cmFtaWQiLCJ3aW5uZXJJc0N1cnJlbnRVc2VyIiwiZm9yZmVpdFdpbm5lciIsInNob3dDb21wbGV0ZUNoYWxsZW5nZU9wdGlvbnMiLCJzd2FwUG9zaXRpb25zIiwid2lubmVyIiwiY2hhbGxlbmdlRXhwaXJlZCIsImNoYWxsZW5nZURldGFpbHMiLCJpbmZvIiwiZGVzY3JpcHRpb24iLCJfa3BQeXJhbWlkIiwicHlyYW1pZElkIiwiTm90aWZpY2F0aW9uIiwibnVtYmVyT2ZBY3R1YWxQbGF5ZXJzIiwiaXNQbGF5ZXJPblB5cmFtaWQiLCJhc3NpZ25QbGF5ZXJPbmUiLCJ1cGRhdGVQeXJhbWlkIiwiaXNFbXB0eSIsInBsYXllcjEiLCJwbGF5ZXIxT2xkUG9zaXRpb24iLCJwbGF5ZXIxT2xkTGV2ZWwiLCJwbGF5ZXIyIiwiYWRkUGxheWVyVG9QeXJhbWlkIiwibmV3UGxheWVyIiwicmVzdWx0IiwicGFyYW1zIiwiZ2V0UHlyYW1pZHNGb3JVc2VyIiwidXNlcklkIiwiY3JlYXRlUHlyYW1pZCIsIkFkZFBsYXllckN0cmwiLCIkc3RhdGVQYXJhbXMiLCJhdmFpbGFibGVQbGF5ZXJzIiwiYWRkUGxheWVyIiwibmV3UHlyYW1pZCIsInJlbW92ZSIsIkNyZWF0ZVB5cmFtaWRDdHJsIiwiYWRkZWRQbGF5ZXJzIiwiTXlQeXJhbWlkc0N0cmwiLCJweXJhbWlkcyIsIlB5cmFtaWRDdHJsIiwiUHlyYW1pZHNDdHJsIiwia3BDaGFsbGVuZWdlcyIsImdldEFjdGl2ZUNoYWxsZW5nZXMiLCJrcEZvb3RlciIsImluZGVudGl0eSIsImtwSGVhZGVyIiwia3BTaWRlYmFyIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJwbGF5ZXJJZCIsIiR3aW5kb3ciLCJyb2xlcyIsImJvb3RzdHJhcHBlZFVzZXJPYmplY3QiLCJtZXNzYWdlIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsImljb24iLCJ0eXBlIiwid2FybmluZyIsImludmVyc2UiLCJub3RpZnlEZWZhdWx0cyIsIm9mZnNldCIsIngiLCJ5Iiwid2Vic29ja2V0SG9zdCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiY29ubmVjdGlvbiIsImNvbm5lY3QiLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyIsInNlbmQiLCJqc29uIiwic3RyaW5naWZ5Iiwid2Vic29ja2V0U2VydmljZSIsIkhvbWVDdHJsIiwidG9nZ2xlU3VibWVudSIsImxpbmtGdW5jIiwiZWwiLCJjbGljayIsIm5leHQiLCJzbGlkZVRvZ2dsZSIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwibGluayIsIndhdmVzRWZmZWN0IiwiZWxlbWVudCIsImhhc0NsYXNzIiwiV2F2ZXMiLCJhdHRhY2giLCJpbml0IiwiZmdMaW5lIiwiaW5wdXQiLCJjaGlsZHJlbiIsImZpcnN0IiwiaXNGbG9hdExhYmVsIiwiZm9jdXMiLCJhZGRDbGFzcyIsImJsdXIiLCJ2YWwiLCJyZW1vdmVDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQUNBLFlBQ0Esc0JBQ0EsYUFDQSx3QkFDQSxVQ05BLFdBQ0EsYUFHQSxTQUFBQyxNQUZBRixRQUFBQyxPQUFBLE9BQUFFLE9BQUFELE1DRkEsdUJBSUEsU0FBQUUsR0FBQUMsR0FVQSxRQUFBQyxLQUNBQyxFQUFBQyxjQUFBQyxNQUFBRixFQUFBQyxjQUFBQyxLQVZBLEdBQUFGLEdBQUFHLElBQ0FILEdBQUFELGNBQUFBLEVBQ0FDLEVBQUFGLE9BQUFBLEVBRUFFLEVBQUFDLGVBQ0FDLE1BQUEsRUFDQUUsT0FBQSx3QkFUQVgsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLFVBQUFSLE1DRkEsdUJBSUEsU0FBQVMsR0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxJQUNBQyxXQUFBQyxFQUNBQyxNQUFBQyxFQUNBQyxLQUFBQyxFQUdBUCxHQUFBUSxXQUFBLEdBR0FULEVBQUFVLFVBQUEsS0FFQVYsRUFBQVcsS0FBQSxhQUFBLGFBRUFaLEVBQ0FhLE1BQUEsUUFDQUMsSUFBQSxJQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxXQUNBbUIsYUFBQSxLQUNBQyxZQUFBLDZCQUdBTCxNQUFBLFlBQ0FDLElBQUEsWUFDQUMsT0FDQUMsU0FDQWxCLFdBQUEsZUFDQW1CLGFBQUEsS0FDQUMsWUFBQSxtQ0FHQUwsTUFBQSx1QkFDQUMsSUFBQSxlQUNBQyxPQUNBSSxZQUNBckIsV0FBQSxpQkFDQW1CLGFBQUEsS0FDQUMsWUFBQSxvQ0FHQUUsU0FDQUMsS0FBQWxCLEVBQUFLLFFBRUFLLE1BQUEsaUJBQ0FDLElBQUEsbUJBQ0FDLE9BQ0FJLFlBQ0FyQixXQUFBLGNBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsa0NBR0FMLE1BQUEsbUJBQ0FDLElBQUEsVUFDQUMsT0FDQUksWUFDQXJCLFdBQUEsb0JBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsdUNBR0FFLFNBQ0FDLEtBQUFsQixFQUFBSyxRQUVBSyxNQUFBLFNBQ0FDLElBQUEsU0FDQUMsT0FDQUMsU0FDQWxCLFdBQUEsWUFDQW1CLGFBQUEsS0FDQUMsWUFBQSxzQ0FHQUwsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLE9BQ0FDLFNBQ0FsQixXQUFBLGVBQ0FtQixhQUFBLEtBQ0FDLFlBQUEseUNBUUEsUUFBQVgsR0FBQWUsR0FDQSxNQUFBQSxHQUFBQyw2QkFBQSxTQUtBLFFBQUFsQixHQUFBaUIsR0FDQSxNQUFBQSxHQUFBQyw2QkFBQSxlQUtBLFFBQUFkLEdBQUFhLEdBQ0EsTUFBQUEsR0FBQUUsa0dBeEdBdEMsUUFBQUMsT0FBQSxPQUFBRSxPQUFBVSxHQXlGQVEsRUFBQWtCLFNBQUEsZUFNQXBCLEVBQUFvQixTQUFBLGVBTUFoQixFQUFBZ0IsU0FBQSxrQkN2R0EsdUJBSUEsU0FBQUMsR0FBQUMsRUFBQXBDLEdBQ0FvQyxFQUFBQyxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsbUJBQUFBLElBQ0EzQyxFQUFBNEMsR0FBQSxTQUNBNUMsRUFBQTZDLFNBQUFOLHVDQU5BNUMsUUFBQUMsT0FBQSxPQUFBa0QsSUFBQVgsTUNGQSx1QkFJQSxTQUFBSixHQUFBL0IsRUFBQStDLEVBQUFDLEVBQUFDLEVBQUFDLEdBVUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBTixFQUFBTyxPQVlBLE9BWEFSLEdBQUFTLEtBQUEsVUFDQUosU0FBQUEsRUFDQUMsU0FBQUEsSUFDQUksS0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxLQUFBQyxTQUNBVixFQUFBVyxZQUFBSCxFQUFBQyxLQUFBMUMsS0FDQXFDLEVBQUF6QixTQUFBLElBRUF5QixFQUFBekIsU0FBQSxLQUdBeUIsRUFBQVEsUUFHQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFWLEdBQUFOLEVBQUFPLE9BV0EsT0FWQVIsR0FBQVMsS0FBQSxjQUNBUSxTQUFBQSxJQUNBUCxLQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLE1BQ0FULEVBQUFXLFlBQUFILEVBQUFDLEtBQ0FMLEVBQUF6QixTQUFBLElBRUF5QixFQUFBekIsU0FBQSxLQUdBeUIsRUFBQVEsUUFHQSxRQUFBRyxLQUNBLEdBQUFYLEdBQUFOLEVBQUFPLE9BUUEsT0FQQVIsR0FBQVMsS0FBQSxXQUNBUyxRQUFBLElBQ0FSLEtBQUEsV0FDQVAsRUFBQVcsWUFBQUssT0FDQVosRUFBQXpCLFVBQ0E3QixFQUFBNEMsR0FBQSxVQUVBVSxFQUFBUSxRQUdBLFFBQUE5QixHQUFBbUMsR0FDQSxRQUFBakIsRUFBQWtCLGFBQUFELElBR0FuQixFQUFBcUIsT0FBQSxrQkFJQSxRQUFBcEMsS0FDQSxRQUFBaUIsRUFBQW9CLG1CQUdBdEIsRUFBQXFCLE9BQUEsa0JBaEVBLEdBQUFFLElBQ0FwQixpQkFBQUEsRUFDQVksV0FBQUEsRUFDQUUsT0FBQUEsRUFDQWpDLDZCQUFBQSxFQUNBQywwQkFBQUEsRUFFQSxPQUFBc0MscUVBVkE1RSxRQUFBQyxPQUFBLE9BQUE0RSxRQUFBLGNBQUF6QyxNQ0ZBLHVCQUlBLFNBQUFrQixHQUFBRixFQUFBRyxHQU1BLFFBQUF1QixLQUNBLE1BQUExQixHQUFBMkIsSUFBQSxjQUFBakIsS0FBQSxTQUFBa0IsR0FDQSxNQUFBQSxLQVBBLEdBQUFKLElBQ0FFLFlBQUFBLEVBRUEsT0FBQUYseUNBTkE1RSxRQUFBQyxPQUFBLE9BQUE0RSxRQUFBLGNBQUF2QixNQ0ZBLHVCQUlBLFNBQUEyQixHQUFBNUUsRUFBQStCLEVBQUE4QyxHQU1BLFFBQUFDLE1BR0EsUUFBQUMsR0FBQTNCLEVBQUFDLEdBQ0F0QixFQUFBb0IsaUJBQUFDLEVBQUFDLEdBQUFJLEtBQUEsU0FBQUMsR0FDQUEsR0FHQW1CLEVBQUFqQixRQUFBLDZDQUNBNUQsRUFBQTZDLFNBQ0E3QyxFQUFBNEMsR0FBQTVDLEVBQUE2QyxVQUVBN0MsRUFBQTRDLEdBQUEsU0FOQWlDLEVBQUFsQyxNQUFBLCtDQVhBLEdBQUFxQyxHQUFBM0UsSUFDQTJFLEdBQUFELE1BQUFBLEVBRUFELHVEQU5BbkYsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLFlBQUFxRSxNQ0ZBLHVCQUlBLFNBQUFLLEdBQUFDLEVBQUFsRixFQUFBK0IsR0FNQSxRQUFBK0MsTUFFQSxRQUFBSyxHQUFBQyxHQUNBckQsRUFBQWdDLFdBQUFxQixHQUFBM0IsS0FBQSxTQUFBQyxHQUNBMUQsRUFBQTRDLEdBQUEsVUFUQSxHQUFBb0MsR0FBQTNFLElBQ0EyRSxHQUFBRyxTQUFBQSxFQUVBTCxnREFOQW5GLFFBQUFDLE9BQUEsT0FBQVcsV0FBQSxlQUFBMEUsTUNGQSx1QkFNQSxTQUFBSSxLQUNBLEdBQUFDLElBQ0FDLFNBQUEsSUFDQTVELFlBQUEsb0NBQ0E2RCxTQUFBLEVBQ0FDLE9BQ0FDLGNBQUEsS0FFQW5GLFdBQUFvRixFQUNBakUsYUFBQSxLQUNBa0Usa0JBQUEsRUFHQSxPQUFBTixHQUlBLFFBQUFLLEdBQUFULEVBQUFXLEVBQUFDLEVBQUFqQixFQUFBM0IsRUFBQTZDLEdBa0JBLFFBQUFqQixLQUNBZSxFQUFBRyxXQUFBaEIsRUFBQVUsZUFBQWpDLEtBQUEsU0FBQXdDLEdBQ0FqQixFQUFBaUIsUUFBQUEsRUFBQXRDLEtBRUFxQixFQUFBa0IsU0FDQSxLQUFBLEdBQUFDLEdBQUEsRUFBQUEsR0FBQUYsRUFBQXRDLEtBQUF1QyxTQUFBQyxFQUNBbkIsRUFBQWtCLE9BQUFFLEtBQUFELEVBR0FFLEtBQ0FDLElBQ0FDLElBQ0FDLElBQ0FDLE1BT0EsUUFBQUosS0FDQXJCLEVBQUFpQixRQUFBUyxRQUFBWixFQUFBLFdBQUFkLEVBQUFpQixRQUFBUyxRQUFBLFlBTUEsUUFBQUosS0FDQUssRUFBQUMsUUFBQTVCLEVBQUFpQixRQUFBUyxRQUFBLFNBQUFHLEdBR0EzRCxFQUFBVyxhQUFBZ0QsRUFBQUMsTUFBQTVELEVBQUFXLFlBQUFpRCxNQUNBOUIsRUFBQStCLHdCQUFBLEVBQ0FGLEVBQUFHLE1BQUEsZUFDQWhDLEVBQUFpQyxrQkFBQUosRUFFQWQsRUFBQW1CLHdDQUFBbEMsRUFBQVUsY0FBQW1CLEVBQUFDLEtBQUFyRCxLQUFBLFNBQUEwRCxHQUNBQSxFQUFBeEQsT0FDQXFCLEVBQUFvQyxvQkFBQSxRQU1BckIsRUFBQXNCLGlDQUFBckMsRUFBQVUsZUFBQWpDLEtBQUEsU0FBQTZELEdBQ0FYLEVBQUFDLFFBQUFVLEVBQUEzRCxLQUFBLFNBQUF3RCxHQUVBLEdBQUFJLEdBQUFaLEVBQUFhLEtBQUF4QyxFQUFBaUIsUUFBQVMsU0FBQUksSUFBQUssRUFBQUksV0FBQVQsS0FDQVMsR0FBQVAsTUFBQSxjQUNBTyxFQUFBSixXQUNBTSxTQUFBLGFBR0EsSUFBQUMsR0FBQWYsRUFBQWEsS0FBQXhDLEVBQUFpQixRQUFBUyxTQUFBSSxJQUFBSyxFQUFBTyxTQUFBWixLQUNBWSxHQUFBVixNQUFBLGNBQ0FVLEVBQUFQLFdBQ0FNLFNBQUEsV0FJQSxJQUFBRSxHQUFBQyxTQUFBQyxLQUFBRCxPQUFBVCxFQUFBVyxTQUFBQyxJQUFBWixFQUFBYSxVQUFBLEtBQUEsTUFBQSxDQUVBTCxHQUFBLEVBQ0FELEVBQUFQLFVBQUFjLFFBQUFOLEVBRUFBLEdBQUEsR0FDQU8sRUFBQSxNQUFBLEVBQUFYLE9BU0EsUUFBQVksS0FDQW5ELEVBQUFvRCxjQUNBLEtBQUEsR0FBQWpDLEdBQUEsRUFBQUEsRUFBQW5CLEVBQUFpQixRQUFBQyxPQUFBQyxJQUNBbkIsRUFBQW9ELFlBQUFoQyxLQUFBRCxHQUFBQSxFQUFBLEdBQUEsRUFBQSxHQUtBLFFBQUFJLEtBQ0F2QixFQUFBcUQsZUFBQSxDQUNBLEtBQUEsR0FBQWxDLEdBQUFuQixFQUFBaUIsUUFBQUMsT0FBQUMsRUFBQSxFQUFBQSxJQUNBbkIsRUFBQXFELGdCQUFBbEMsRUFLQSxRQUFBSyxLQUNBLElBQUEsR0FBQUwsR0FBQW5CLEVBQUFpQixRQUFBUyxRQUFBNEIsT0FBQW5DLEVBQUFuQixFQUFBcUQsZUFBQWxDLElBQ0FuQixFQUFBaUIsUUFBQVMsUUFBQU4sTUFDQW1DLFVBQUEsUUFDQUMsU0FBQSxPQUNBZixTQUFBLEdBQ0FULE1BQUEsVUFPQSxRQUFBUCxLQUNBLEdBQUFnQyxHQUFBLENBQ0FOLElBQ0EsS0FBQSxHQUFBaEMsR0FBQSxFQUFBQSxFQUFBbkIsRUFBQWlCLFFBQUFTLFFBQUE0QixPQUFBbkMsSUFDQW5CLEVBQUFvRCxZQUFBTSxRQUFBdkMsRUFBQSxJQUFBLElBQ0FzQyxHQUFBLEdBRUF6RCxFQUFBaUIsUUFBQVMsUUFBQVAsR0FBQXNDLE1BQUFBLEVBSUEsUUFBQUUsR0FBQUMsR0FDQUEsRUFHQTVELEVBQUE2RCw0QkFBQSxFQUZBN0QsRUFBQTZELDRCQUFBLENBTUEsSUFBQUMsR0FBQTlELEVBQUFpQyxrQkFBQXdCLE1BQUEsRUFBQXpELEVBQUFpQyxrQkFBQXdCLE1BQUEsRUFBQSxJQUNBOUIsR0FBQUMsUUFBQTVCLEVBQUFpQixRQUFBUyxRQUFBLFNBQUFHLEdBQ0FBLEVBQUE0QixRQUFBSyxHQUFBLEtBQUFqQyxFQUFBWSxVQUFBLGVBQUFaLEVBQUFHLFFBQ0FoQyxFQUFBK0QscUJBQUEsRUFDQUgsR0FJQS9CLEVBQUFHLE1BQUEsR0FDQUgsRUFBQW1DLFdBQUEsSUFKQW5DLEVBQUFHLE1BQUEsWUFDQUgsRUFBQW1DLFdBQUEsTUFTQSxRQUFBQyxHQUFBcEMsR0FDQSxHQUFBN0IsRUFBQTZELDJCQUNBLEdBQUFoQyxFQUFBbUMsVUFFQSxDQUNBaEUsRUFBQTZELDRCQUFBLEVBQ0E3RCxFQUFBb0Msb0JBQUEsQ0FDQSxJQUFBRCxJQUNBekIsY0FBQVYsRUFBQVUsY0FDQXdELFVBQUEsRUFDQUMsU0FBQSxFQUNBbkIsVUFBQSxHQUNBVCxZQUNBVCxJQUFBOUIsRUFBQWlDLGtCQUFBSCxJQUNBeUIsVUFBQXZELEVBQUFpQyxrQkFBQXNCLFVBQ0FDLFNBQUF4RCxFQUFBaUMsa0JBQUF1QixTQUNBWSxTQUFBcEUsRUFBQWlDLGtCQUFBbUMsU0FDQTNCLFNBQUF6QyxFQUFBaUMsa0JBQUFRLFVBRUFDLFVBQ0FaLElBQUFELEVBQUFDLElBQ0F5QixVQUFBMUIsRUFBQTBCLFVBQ0FDLFNBQUEzQixFQUFBMkIsU0FDQVksU0FBQXZDLEVBQUF1QyxTQUNBM0IsU0FBQVosRUFBQVksVUFHQTFCLEdBQUFrRCxnQkFBQTlCLEdBQUExRCxLQUFBLFdBQ0E0RixVQXpCQXhFLEdBQUFsQyxNQUFBLHlDQXFDQSxRQUFBdUYsR0FBQW9CLEVBQUFILEVBQUFJLEdBQ0EsR0FBQTFDLEdBQUEwQyxHQUFBdkUsRUFBQWlDLGlCQUNBbEIsR0FBQW1CLHdDQUFBbEMsRUFBQVUsY0FBQW1CLEVBQUFDLEtBQUFyRCxLQUFBLFNBQUEwRCxHQUNBbkMsRUFBQW9DLG9CQUFBLEVBQ0FwQyxFQUFBNkQsNEJBQUEsRUFDQTdELEVBQUF3RSw4QkFBQSxDQUVBLElBQUFDLElBQUEsQ0FHQU4sSUFDQWhDLEVBQUF4RCxLQUFBd0YsU0FBQSxFQUNBaEMsRUFBQXhELEtBQUE0RCxXQUFBbUMsUUFBQSxFQUNBRCxHQUFBLEdBRUFILEVBQ0FuQyxFQUFBeEQsS0FBQTRELFdBQUFULE1BQUE5QixFQUFBaUMsa0JBQUFILEtBQ0FLLEVBQUF4RCxLQUFBNEQsV0FBQW1DLFFBQUEsRUFDQUQsR0FBQSxHQUVBdEMsRUFBQXhELEtBQUErRCxTQUFBZ0MsUUFBQSxFQUdBdkMsRUFBQXhELEtBQUE0RCxXQUFBVCxNQUFBOUIsRUFBQWlDLGtCQUFBSCxJQUNBSyxFQUFBeEQsS0FBQStELFNBQUFnQyxRQUFBLEdBRUF2QyxFQUFBeEQsS0FBQTRELFdBQUFtQyxRQUFBLEVBQ0FELEdBQUEsR0FLQTFELEVBQUFtQyxrQkFBQWYsRUFBQXhELE1BQUFGLEtBQUEsU0FBQTBELEdBSUFzQyxFQUNBNUQsRUFBQTRELGNBQUF6RSxFQUFBVSxjQUFBeUIsRUFBQXhELEtBQUErRCxTQUFBUCxFQUFBeEQsS0FBQTRELFlBQUE5RCxLQUFBNEYsR0FFQUEsUUFNQSxRQUFBTSxLQUNBekIsRUFBQSxNQUFBLEdBSUEsUUFBQW1CLEtBQ0F4RCxFQUFBRyxXQUFBaEIsRUFBQVUsZUFBQWpDLEtBQUEsU0FBQXdDLEdBQ0FqQixFQUFBaUIsUUFBQUEsRUFBQXRDLEtBQ0EwQyxJQUNBQyxJQUNBRSxJQUNBQyxNQTNQQSxHQUFBekIsR0FBQTNFLElBQ0EyRSxHQUFBaUIsV0FDQWpCLEVBQUFvRCxlQUNBcEQsRUFBQXFELGVBQUEsRUFDQXJELEVBQUErQix3QkFBQSxFQUNBL0IsRUFBQW9DLG9CQUFBLEVBQ0FwQyxFQUFBNkQsNEJBQUEsRUFDQTdELEVBQUF3RSw4QkFBQSxFQUNBeEUsRUFBQStELHFCQUFBLEVBQ0EvRCxFQUFBMkQsZUFBQUEsRUFDQTNELEVBQUFpRSxnQkFBQUEsRUFDQWpFLEVBQUFrRCxrQkFBQUEsRUFDQWxELEVBQUEyRSxpQkFBQUEsRUFDQTNFLEVBQUFpQyxxQkFFQW5DLElBaVBBSSxFQUFBN0MsSUFBQSx1QkFBQSxTQUFBc0UsRUFBQWlELEdBQ0E1RSxFQUFBVSxnQkFBQWtFLEVBQUFsRSxnQkFDQWIsRUFBQWdGLEtBQUFELEVBQUFFLGFBQ0FULE9BS0FuRSxFQUFBN0MsSUFBQSx5QkFBQSxTQUFBc0UsRUFBQWlELEdBQ0E1RSxFQUFBVSxnQkFBQWtFLEVBQUFsRSxnQkFDQWIsRUFBQWdGLEtBQUFELEVBQUFFLGFBQ0FULDhHQWpTQTFKLFFBQ0FDLE9BQUEsT0FDQTBGLFVBQUEsWUFBQUQsTUNKQSxXQUNBLFlBR0EsU0FBQTBFLEtBQ0EsR0FBQXpFLElBQ0FDLFNBQUEsSUFDQTVELFlBQUEsb0NBQ0E2RCxTQUFBLEVBQ0FDLE9BQ0F1RSxVQUFBLEtBRUF6SixXQUFBb0YsRUFDQWpFLGFBQUEsS0FDQWtFLGtCQUFBLEVBR0EsT0FBQU4sR0FLQSxRQUFBSyxHQUFBVCxFQUFBVyxFQUFBQyxFQUFBbUUsRUFBQS9HLEdBZ0JBLFFBQUE0QixLQUNBZSxFQUFBRyxXQUFBaEIsRUFBQWdGLFdBQUF2RyxLQUFBLFNBQUF3QyxHQUNBakIsRUFBQWlCLFFBQUFBLEVBQUF0QyxLQUNBdUcsRUFBQWxGLEVBQUFpQixRQUFBUyxRQUFBNEIsT0FFQTNCLEVBQUFhLEtBQUF4QyxFQUFBaUIsUUFBQVMsU0FBQSxNQUFBeEQsRUFBQVcsWUFBQWlELFFBQ0E5QixFQUFBbUYsbUJBQUEsR0FHQTlELElBQ0E4QixJQUNBNUIsSUFDQUMsSUFDQUMsSUFDQXpCLEVBQUFtRixtQkFDQUMsTUFLQSxRQUFBQyxHQUFBeEQsR0FDQSxHQUFBM0QsRUFBQW9CLG1CQUFBVSxFQUFBbUYsa0JBRUEsR0FBQXhELEVBQUEyRCxRQUFBQyxJQUFBLEtBQUExRCxFQUFBWSxVQUFBdkUsRUFBQWtCLGFBQUEsU0FDQW1HLEVBQUExRCxFQUNBMEQsRUFBQXZELE1BQUEsYUFFQSxJQUFBdUQsSUFBQTFELEdBQUEzRCxFQUFBa0IsYUFBQSxTQUNBbUcsRUFBQXZELE1BQUEsR0FDQXVELFNBRUEsSUFBQTFELEVBQUE0QixRQUFBOEIsRUFBQTlCLE9BQUE1QixFQUFBNEIsTUFBQThCLEVBQUE5QixNQUFBLEdBQUE1QixFQUFBNEIsTUFBQThCLEVBQUE5QixNQUFBLEdBQUEsS0FBQTVCLEVBQUFZLFNBQ0F3QyxFQUFBdEgsTUFBQSxpQ0FHQSxDQUNBLEdBQUE2SCxHQUFBRCxFQUFBOUMsU0FDQWdELEVBQUFGLEVBQUE5QixLQUNBaUMsR0FBQTdELEVBRUEwRCxFQUFBOUMsU0FBQVosRUFBQVksU0FDQThDLEVBQUE5QixNQUFBNUIsRUFBQTRCLE1BRUFpQyxFQUFBakQsU0FBQStDLEVBQ0FFLEVBQUFqQyxNQUFBZ0MsRUFFQTVFLEVBQUE0RCxjQUFBekUsRUFBQWdGLFVBQUFPLEVBQUFHLEdBRUFILEVBQUF2RCxNQUFBLEdBQ0F1RCxLQUNBRyxTQUVBeEgsR0FBQW9CLG9CQUFBVSxFQUFBbUYsbUJBQUEsS0FBQXRELEVBQUFZLFNBQ0FrRCxJQUVBVixFQUFBdEgsTUFBQSx3RUFJQSxRQUFBZ0ksS0FDQSxHQUFBQyxJQUNBbkQsU0FBQXlDLEVBQUEsRUFDQXBELElBQUE1RCxFQUFBVyxZQUFBaUQsSUFDQXlCLFVBQUFyRixFQUFBVyxZQUFBMEUsVUFDQUMsU0FBQXRGLEVBQUFXLFlBQUEyRSxTQUNBWSxTQUFBbEcsRUFBQVcsWUFBQXVGLFNBRUF2RCxHQUFBOEUsbUJBQUEzRixFQUFBZ0YsVUFBQVksR0FBQW5ILEtBQUEsU0FBQUMsR0FDQXNCLEVBQUFtRixtQkFBQSxFQUNBZCxNQUtBLFFBQUFoRCxLQUNBckIsRUFBQWlCLFFBQUFTLFFBQUFaLEVBQUEsV0FBQWQsRUFBQWlCLFFBQUFTLFFBQUEsWUFJQSxRQUFBeUIsS0FDQW5ELEVBQUFvRCxjQUNBLEtBQUEsR0FBQWpDLEdBQUEsRUFBQUEsRUFBQW5CLEVBQUFpQixRQUFBQyxPQUFBQyxJQUNBbkIsRUFBQW9ELFlBQUFoQyxLQUFBRCxHQUFBQSxFQUFBLEdBQUEsRUFBQSxHQUtBLFFBQUFJLEtBQ0F2QixFQUFBcUQsZUFBQSxDQUNBLEtBQUEsR0FBQWxDLEdBQUFuQixFQUFBaUIsUUFBQUMsT0FBQUMsRUFBQSxFQUFBQSxJQUNBbkIsRUFBQXFELGdCQUFBbEMsRUFLQSxRQUFBSyxLQUNBLElBQUEsR0FBQUwsR0FBQW5CLEVBQUFpQixRQUFBUyxRQUFBNEIsT0FBQW5DLEVBQUFuQixFQUFBcUQsZUFBQWxDLElBQ0FuQixFQUFBaUIsUUFBQVMsUUFBQU4sTUFDQW1DLFVBQUEsUUFDQUMsU0FBQSxPQUNBZixTQUFBLEdBQ0FULE1BQUEsVUFNQSxRQUFBUCxLQUNBekIsRUFBQXlELE1BQUEsQ0FDQSxLQUFBLEdBQUF0QyxHQUFBLEVBQUFBLEVBQUFuQixFQUFBaUIsUUFBQVMsUUFBQTRCLE9BQUFuQyxJQUNBbkIsRUFBQW9ELFlBQUFNLFFBQUF2QyxFQUFBLElBQUEsSUFDQW5CLEVBQUF5RCxPQUFBLEdBRUF6RCxFQUFBaUIsUUFBQVMsUUFBQVAsR0FBQXNDLE1BQUF6RCxFQUFBeUQsTUFLQSxRQUFBMkIsTUFDQWxILEVBQUFrQixhQUFBLFVBQUFsQixFQUFBb0IsbUJBQUFVLEVBQUFtRixvQkFDQUksRUFBQTVELEVBQUFhLEtBQUF4QyxFQUFBaUIsUUFBQVMsU0FBQSxNQUFBeEQsRUFBQVcsWUFBQWlELE1BQ0F5RCxFQUFBdkQsTUFBQSxVQUlBLFFBQUFxQyxLQUNBeEQsRUFBQUcsV0FBQWhCLEVBQUFnRixXQUFBdkcsS0FBQSxTQUFBd0MsR0FDQWpCLEVBQUFpQixRQUFBQSxFQUFBdEMsS0FDQTBDLElBQ0FHLElBQ0FDLElBQ0EyRCxNQWpKQSxHQUFBcEYsR0FBQTNFLElBQ0EyRSxHQUFBaUIsV0FDQWpCLEVBQUFvRCxlQUNBcEQsRUFBQXFELGVBQUEsRUFDQXJELEVBQUF5RCxNQUFBLEVBQ0F6RCxFQUFBcUYsY0FBQUEsRUFDQXJGLEVBQUFtRixtQkFBQSxDQUVBLElBQUFJLE1BQ0FHLEtBQ0FSLEVBQUEsQ0FFQXBGLEtBeUlBSSxFQUFBN0MsSUFBQSxtQkFBQSxTQUFBc0UsRUFBQWtFLEdBQ0FaLEVBQUFKLEtBQUFnQixHQUNBeEIsTUE3S0ExSixRQUFBQyxPQUFBLE9BQUEwRixVQUFBLGFBQUF5RSxHQWtCQXBFLEVBQUF6RCxTQUFBLFNBQUEsa0JBQUEsVUFBQSxlQUFBLHNCQ3BCQSx1QkFJQSxTQUFBMkQsR0FBQTlDLEdBaUJBLFFBQUFpRCxHQUFBZ0UsR0FDQSxNQUFBakgsR0FBQTJCLElBQUEsZ0JBQ0FvRyxRQUNBZCxVQUFBQSxLQVdBLFFBQUFlLEdBQUFDLEdBQ0EsTUFBQWpJLEdBQUEyQixJQUFBLHNCQUNBb0csUUFDQUUsT0FBQUEsS0FLQSxRQUFBQyxHQUFBaEYsR0FDQSxNQUFBbEQsR0FBQVMsS0FBQSx3QkFDQXlDLFFBQUFBLElBSUEsUUFBQXdELEdBQUFPLEVBQUF6QyxFQUFBRyxHQUNBLE1BQUEzRSxHQUFBUyxLQUFBLCtCQUNBd0csVUFBQUEsRUFDQXpDLFdBQUFBLEVBQ0FHLFNBQUFBLElBSUEsUUFBQWlELEdBQUFYLEVBQUFuRCxHQUNBLE1BQUE5RCxHQUFBUyxLQUFBLDJCQUNBd0csVUFBQUEsRUFDQW5ELE9BQUFBLElBdkRBLEdBQUF0QyxJQUNBeUIsV0FBQUEsRUFDQStFLG1CQUFBQSxFQUNBRSxjQUFBQSxFQUNBeEIsY0FBQUEsRUFDQWtCLG1CQUFBQSxFQUdBLE9BQUFwRyx1QkFYQTVFLFFBQUFDLE9BQUEsT0FBQTRFLFFBQUEsa0JBQUFxQixNQ0ZBLHVCQUlBLFNBQUFxRixHQUFBbEwsRUFBQW1MLEVBQUFsSSxFQUFBNEMsR0FRQSxRQUFBZixLQUNBN0IsRUFBQXdCLGNBQUFoQixLQUFBLFNBQUFrQixHQUNBSyxFQUFBb0csaUJBQUF6RyxFQUFBaEIsT0FNQSxRQUFBZ0gsR0FBQTlELEdBRUFZLEdBQUEsQ0FDQSxJQUFBNEQsSUFDQTVELFNBQUFBLEVBQ0FYLElBQUFELEVBQUFDLElBQ0F5QixVQUFBMUIsRUFBQTBCLFVBQ0FDLFNBQUEzQixFQUFBMkIsU0FDQVksU0FBQXZDLEVBQUF1QyxTQUVBcEUsR0FBQXNHLFdBQUE1RSxRQUFBTixLQUFBaUYsR0FFQTFFLEVBQUE0RSxPQUFBdkcsRUFBQW9HLGtCQUNBdEUsSUFBQUQsRUFBQUMsTUFJQSxRQUFBbUUsR0FBQWhGLEdBQ0FKLEVBQUFvRixjQUFBaEYsR0FBQXhDLEtBQUEsU0FBQTZILEdBQ0F0TCxFQUFBNEMsR0FBQSxpQkFDQW9ILFVBQUFzQixFQUFBM0gsS0FBQW1ELFFBbkNBLEdBQUE5QixHQUFBM0UsSUFDQTJFLEdBQUFvRyxvQkFDQXBHLEVBQUEyRixtQkFBQUEsRUFDQTNGLEVBQUFpRyxjQUFBQSxFQUVBbkcsR0FRQSxJQUFBMkMsR0FBQSxzRUFoQkE5SCxRQUFBQyxPQUFBLE9BQUFXLFdBQUEsZ0JBQUEySyxNQ0ZBLHVCQUlBLFNBQUFNLEdBQUF4TCxFQUFBaUQsRUFBQTRDLEdBWUEsUUFBQWYsS0FDQTdCLEVBQUF3QixjQUFBaEIsS0FBQSxTQUFBa0IsR0FDQUssRUFBQW9HLGlCQUFBekcsRUFBQWhCLE9BTUEsUUFBQXNILEdBQUFoRixHQUNBdEcsUUFBQWlILFFBQUE1QixFQUFBeUcsYUFBQSxTQUFBNUUsR0FDQVksR0FBQSxDQUNBLElBQUE0RCxJQUNBNUQsU0FBQUEsRUFDQVgsSUFBQUQsRUFBQUMsSUFDQXlCLFVBQUExQixFQUFBMEIsVUFDQUMsU0FBQTNCLEVBQUEyQixTQUNBWSxTQUFBdkMsRUFBQXVDLFNBRUFwRSxHQUFBc0csV0FBQTVFLFFBQUFOLEtBQUFpRixLQUVBeEYsRUFBQW9GLGNBQUFoRixHQUFBeEMsS0FBQSxTQUFBNkgsR0FDQXRMLEVBQUE0QyxHQUFBLGlCQUNBb0gsVUFBQXNCLEVBQUEzSCxLQUFBbUQsUUFqQ0EsR0FBQTlCLEdBQUEzRSxJQUNBMkUsR0FBQXNHLFlBQ0E1RSxZQUVBMUIsRUFBQW9HLG9CQUNBcEcsRUFBQXlHLGdCQUNBekcsRUFBQWlHLGNBQUFBLEVBQ0FqRyxFQUFBc0csV0FBQXBGLE9BQUEsRUFFQXBCLEdBUUEsSUFBQTJDLEdBQUEsdURBcEJBOUgsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLG9CQUFBaUwsTUNGQSx1QkFJQSxTQUFBRSxHQUFBMUwsRUFBQTZGLEVBQUEzQyxHQU1BLFFBQUE0QixLQUNBZSxFQUFBa0YsbUJBQUE3SCxFQUFBVyxZQUFBaUQsS0FBQXJELEtBQUEsU0FBQWtJLEdBQ0EzRyxFQUFBMkcsU0FBQUEsRUFBQWhJLE9BUEEsR0FBQXFCLEdBQUEzRSxJQUNBMkUsR0FBQTJHLFNBQUEsS0FFQTdHLDZEQU5BbkYsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLGlCQUFBbUwsTUNGQSx1QkFJQSxTQUFBRSxHQUFBVCxHQU1BLFFBQUFyRyxLQUNBcUcsRUFBQW5CLFlBQ0FoRixFQUFBZ0YsVUFBQW1CLEVBQUFuQixXQVBBLEdBQUFoRixHQUFBM0UsSUFDQTJFLEdBQUFnRixVQUFBLEtBRUFsRiwrQkFOQW5GLFFBQUFDLE9BQUEsT0FBQVcsV0FBQSxjQUFBcUwsTUNGQSxXQUNBLFlBR0EsU0FBQUMsS0FNQSxRQUFBL0csTUFMQSxHQUFBRSxHQUFBM0UsSUFDQTJFLEdBQUEyRyxTQUFBLEtBRUE3RyxJQU5BbkYsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLGVBQUFzTCxNQ0ZBLFdBQ0EsWUFNQSxTQUFBQyxLQUNBLEdBQUF4RyxJQUNBTSxrQkFBQSxFQUNBckYsV0FBQW9GLEVBQ0FqRSxhQUFBLEtBQ0E2RCxTQUFBLElBQ0FFLE9BQ0FDLGNBQUEsS0FFQS9ELFlBQUEscUNBRUEsT0FBQTJELEdBSUEsUUFBQUssR0FBQVQsRUFBQWEsR0FNQSxRQUFBakIsS0FDQWlILElBR0EsUUFBQUEsS0FDQWhHLEVBQUFzQixpQ0FBQXJDLEVBQUFVLGVBQUFqQyxLQUFBLFNBQUE2RCxHQUNBdEMsRUFBQXNDLGNBQ0FBLEVBQUEzRCxLQUFBMkUsT0FBQSxJQUNBdEQsRUFBQXNDLFdBQUFBLEVBQUEzRCxLQUNBZ0QsRUFBQUMsUUFBQTVCLEVBQUFzQyxXQUFBLFNBQUFILEdBQ0FBLEVBQUFjLFFBQUFMLFNBQUFDLEtBQUFELE9BQUFULEVBQUFXLFNBQUFDLElBQUFaLEVBQUFhLFVBQUEsS0FBQSxNQUFBLE9BZkEsR0FBQWhELEdBQUEzRSxJQUNBMkUsR0FBQXNDLGNBRUF4QyxJQW1CQUksRUFBQTdDLElBQUEsdUJBQUEsU0FBQXNFLEVBQUFpRCxHQUNBNUUsRUFBQVUsZ0JBQUFrRSxFQUFBbEUsZUFDQXFHLE1BS0E3RyxFQUFBN0MsSUFBQSx5QkFBQSxTQUFBc0UsRUFBQWlELEdBQ0E1RSxFQUFBVSxnQkFBQWtFLEVBQUFsRSxlQUNBcUcsK0NBbkRBcE0sUUFDQUMsT0FBQSxPQUNBMEYsVUFBQSxnQkFBQXdHLE1DTEEsV0FDQSxZQU1BLFNBQUFFLEtBQ0EsR0FBQTFHLElBQ0FNLGtCQUFBLEVBQ0FyRixXQUFBb0YsRUFDQWpFLGFBQUEsS0FDQTZELFNBQUEsSUFDQTVELFlBQUEsaUNBRUEsT0FBQTJELEdBSUEsUUFBQUssR0FBQXpDLEVBQUFuQixHQUtBLFFBQUFrQyxLQUNBbEMsRUFBQWtDLFNBTEEsR0FBQWUsR0FBQTNFLElBQ0EyRSxHQUFBaUgsVUFBQS9JLEVBQ0E4QixFQUFBZixPQUFBQSw4Q0FuQkF0RSxRQUNBQyxPQUFBLE9BQ0EwRixVQUFBLFdBQUEwRyxNQ0xBLFdBQ0EsWUFNQSxTQUFBRSxLQUNBLEdBQUE1RyxJQUNBTSxrQkFBQSxFQUNBckYsV0FBQW9GLEVBQ0FqRSxhQUFBLEtBQ0E2RCxTQUFBLElBQ0E1RCxZQUFBLGlDQUVBLE9BQUEyRCxHQUlBLFFBQUFLLE1BaEJBaEcsUUFDQUMsT0FBQSxPQUNBMEYsVUFBQSxXQUFBNEcsTUNMQSxXQUNBLFlBTUEsU0FBQUMsS0FDQSxHQUFBN0csSUFDQU0sa0JBQUEsRUFDQXJGLFdBQUFvRixFQUNBakUsYUFBQSxLQUNBNkQsU0FBQSxJQUNBNUQsWUFBQSxrQ0FFQSxPQUFBMkQsR0FJQSxRQUFBSyxHQUFBekMsRUFBQW5CLEdBS0EsUUFBQWtDLEtBQ0FsQyxFQUFBa0MsU0FMQSxHQUFBZSxHQUFBM0UsSUFDQTJFLEdBQUFpSCxVQUFBL0ksRUFDQThCLEVBQUFmLE9BQUFBLDhDQW5CQXRFLFFBQ0FDLE9BQUEsT0FDQTBGLFVBQUEsWUFBQTZHLE1DTEEsdUJBTUEsU0FBQXBHLEdBQUFoRCxHQVdBLFFBQUFrRyxHQUFBOUIsR0FDQSxNQUFBcEUsR0FBQVMsS0FBQSwwQkFDQTJELFVBQUFBLElBSUEsUUFBQWUsR0FBQWYsR0FDQSxNQUFBcEUsR0FBQVMsS0FBQSw0QkFDQTJELFVBQUFBLElBSUEsUUFBQWlGLEdBQUExRyxHQUNBLE1BQUEzQyxHQUFBMkIsSUFBQSwrQkFDQW9HLFFBQ0FwRixjQUFBQSxLQUtBLFFBQUEyQixHQUFBM0IsR0FDQSxNQUFBM0MsR0FBQTJCLElBQUEsc0NBQ0FvRyxRQUNBcEYsY0FBQUEsS0FLQSxRQUFBd0IsR0FBQXhCLEVBQUEyRyxHQUNBLE1BQUF0SixHQUFBMkIsSUFBQSw2Q0FDQW9HLFFBQ0FwRixjQUFBQSxFQUNBMkcsU0FBQUEsS0ExQ0EsR0FBQTlILElBQ0EwRSxnQkFBQUEsRUFDQWYsa0JBQUFBLEVBQ0FrRSwyQkFBQUEsRUFDQS9FLGlDQUFBQSxFQUNBSCx3Q0FBQUEsRUFHQSxPQUFBM0MsdUJBYkE1RSxRQUNBQyxPQUFBLE9BQ0E0RSxRQUFBLG9CQUFBdUIsTUNKQSx1QkFJQSxTQUFBN0MsR0FBQW9KLEdBWUEsUUFBQWhJLEtBQ0EsUUFBQWpFLEtBQUF3RCxZQUdBLFFBQUFPLEdBQUFELEdBQ0EsUUFBQTlELEtBQUF3RCxhQUFBeEQsS0FBQXdELFlBQUEwSSxNQUFBN0QsUUFBQXZFLElBQUEsRUFoQkEsR0FBQU4sRUFDQSxRQUFBeUksRUFBQUUseUJBQ0EzSSxFQUFBeUksRUFBQUUsdUJBRUEsSUFBQWpJLElBQ0FWLFlBQUFBLEVBQ0FTLGdCQUFBQSxFQUNBRixhQUFBQSxFQUVBLE9BQUFHLHlCQVpBNUUsUUFBQUMsT0FBQSxPQUFBNEUsUUFBQSxrQkFBQXRCLE1DRkEsV0FDQSxZQUtBLFNBQUEyQixLQWtCQSxRQUFBZ0YsR0FBQTRDLEVBQUFsTCxFQUFBbUwsR0FDQUMsRUFBQUMsUUFFQUMsS0FBQSwyQkFDQUosUUFBQUEsRUFDQWxMLElBQUFBLEVBQ0FtTCxPQUFBQSxJQUdBSSxLQUFBLFNBSUEsUUFBQWxKLEdBQUE2SSxFQUFBbEwsRUFBQW1MLEdBQ0FDLEVBQUFDLFFBRUFDLEtBQUEsa0JBQ0FKLFFBQUFBLEVBQ0FsTCxJQUFBQSxFQUNBbUwsT0FBQUEsSUFHQUksS0FBQSxZQUlBLFFBQUFDLEdBQUFOLEVBQUFsTCxFQUFBbUwsR0FDQUMsRUFBQUMsUUFFQUMsS0FBQSwyQkFDQUosUUFBQUEsRUFDQWxMLElBQUFBLEVBQ0FtTCxPQUFBQSxJQUdBSSxLQUFBLFlBSUEsUUFBQW5LLEdBQUE4SixFQUFBbEwsRUFBQW1MLEdBQ0FDLEVBQUFDLFFBRUFDLEtBQUEsMEJBQ0FKLFFBQUFBLEVBQ0FsTCxJQUFBQSxFQUNBbUwsT0FBQUEsSUFHQUksS0FBQSxXQUlBLFFBQUFFLEdBQUFQLEVBQUFsTCxFQUFBbUwsR0FDQUMsRUFBQUMsUUFFQUgsUUFBQUEsRUFDQWxMLElBQUFBLEVBQ0FtTCxPQUFBQSxJQUdBSSxLQUFBLFlBN0VBLEdBQUF2SSxJQUNBc0YsS0FBQUEsRUFDQWpHLFFBQUFBLEVBQ0FtSixRQUFBQSxFQUNBcEssTUFBQUEsRUFDQXFLLFFBQUFBLEVBVUEsT0FQQUwsR0FBQU0sZ0JBQ0FDLFFBQ0FDLEVBQUEsR0FDQUMsRUFBQSxNQUlBN0ksRUFwQkE1RSxRQUNBQyxPQUFBLE9BQ0E0RSxRQUFBLGdCQUFBSyxNQ0pBbEYsUUFBQUMsT0FBQSxPQUNBMkUsUUFBQSxvQkFBQSxhQUFBLFVBQUEsU0FBQW5DLEVBQUFrSyxHQUNBLFFBQUFlLEtBQ0EsTUFBQSxXQUFBZixFQUFBZ0IsU0FBQUMsU0FDQSxTQUFBakIsRUFBQWdCLFNBQUFFLEtBRUEsUUFBQWxCLEVBQUFnQixTQUFBRSxLQUlBLEdBQUFDLEVBQ0FwTixNQUFBcU4sUUFBQSxXQUNBRCxFQUFBLEdBQUFFLFdBQUFOLEtBRUFJLEVBQUFHLFVBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBQyxLQUFBQyxNQUFBSCxFQUFBbEssS0FDQXZCLEdBQUE2TCxXQUFBLE1BQUFILEVBQUFJLE1BQUFKLEVBQUFuSyxRQUlBdEQsS0FBQThOLEtBQUEsU0FBQUQsRUFBQXZLLEdBQ0EsR0FBQXlLLEdBQUFMLEtBQUFNLFdBQ0FILE1BQUFBLEVBQ0F2SyxLQUFBQSxHQUVBOEosR0FBQVUsS0FBQUMsT0FFQXRMLEtBQUEsbUJBQUEsU0FBQXdMLEdBQ0FBLEVBQUFaLGFDNUJBLFdBQ0EsWUFHQSxTQUFBYSxLQUtBLFFBQUF6SixNQUZBQSxJQUxBbkYsUUFBQUMsT0FBQSxPQUFBVyxXQUFBLFdBQUFnTyxNQ0ZBLFdBQ0EsWUFLQSxTQUFBQyxLQVFBLFFBQUFDLEdBQUFoSixFQUFBaUosR0FDQUEsRUFBQUMsTUFBQSxXQUNBRCxFQUFBRSxPQUFBQyxZQUFBLEtBQ0FILEVBQUFJLFNBQUFDLFlBQUEsYUFWQSxHQUFBekosSUFDQUMsU0FBQSxJQUNBeUosS0FBQVAsRUFHQSxPQUFBbkosR0FWQTNGLFFBQ0FDLE9BQUEsT0FDQTBGLFVBQUEsZ0JBQUFrSixNQ0pBLFdBQ0EsWUFLQSxTQUFBUyxLQVFBLFFBQUFSLEdBQUFoSixFQUFBeUosR0FDQUEsRUFBQUMsU0FBQSxhQUFBRCxFQUFBQyxTQUFBLGFBQ0FDLE1BQUFDLE9BQUFILEdBQUEsaUJBQ0FBLEVBQUFDLFNBQUEsYUFDQUMsTUFBQUMsT0FBQUgsR0FBQSxnQkFFQUUsTUFBQUMsT0FBQUgsR0FHQUUsTUFBQUUsT0FoQkEsR0FBQWhLLElBQ0FDLFNBQUEsSUFDQXlKLEtBQUFQLEVBR0EsT0FBQW5KLEdBVkEzRixRQUNBQyxPQUFBLE9BQ0EwRixVQUFBLGNBQUEySixNQ0pBLFdBQ0EsWUFLQSxTQUFBTSxLQVFBLFFBQUFkLEdBQUFoSixFQUFBeUosR0FDQSxHQUFBTSxHQUFBTixFQUFBTyxXQUFBQyxRQUNBQyxFQUFBVCxFQUFBSixTQUFBSyxTQUFBLFdBQ0FLLEdBQUFJLE1BQUEsV0FDQVYsRUFBQVcsU0FBQSxnQkFHQUwsRUFBQU0sS0FBQSxhQUNBSCxHQUFBQSxHQUFBLElBQUFILEVBQUFPLE1BQUF6SCxTQUNBNEcsRUFBQWMsWUFBQSxnQkFoQkEsR0FBQTFLLElBQ0FDLFNBQUEsSUFDQXlKLEtBQUFQLEVBR0EsT0FBQW5KLEdBVkEzRixRQUNBQyxPQUFBLE9BQ0EwRixVQUFBLFNBQUFpSyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAndWkucm91dGVyJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJ1xuXSk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QgJztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhjb25maWd1cmF0aW9uKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmF0aW9uKCkge1xuXG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQXBwQ3RybCcsIEFwcEN0cmwpO1xuXG4gIGZ1bmN0aW9uIEFwcEN0cmwoJHN0YXRlKSB7XG4gICAgdmFyIGFwcEN0cmwgPSB0aGlzO1xuICAgIGFwcEN0cmwudG9nZ2xlU2lkZWJhciA9IHRvZ2dsZVNpZGViYXI7XG4gICAgYXBwQ3RybC4kc3RhdGUgPSAkc3RhdGU7XG4gICAgLy8gQnkgZGVmYXVsdCBTaWRiYXJzIGFyZSBoaWRkZW4gaW4gYm94ZWQgbGF5b3V0IGFuZCBpbiB3aWRlIGxheW91dCBvbmx5IHRoZSByaWdodCBzaWRlYmFyIGlzIGhpZGRlbi5cbiAgICBhcHBDdHJsLnNpZGViYXJUb2dnbGUgPSB7XG4gICAgICBsZWZ0OiBmYWxzZSxcbiAgICAgIHJpZ2h0OiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICAgICAgYXBwQ3RybC5zaWRlYmFyVG9nZ2xlLmxlZnQgPSAhYXBwQ3RybC5zaWRlYmFyVG9nZ2xlLmxlZnQ7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhjb25maWd1cmVSb3V0ZXMpO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZVJvdXRlcygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XG4gICAgICBzdXBlckFkbWluOiByZXF1aXJlU3VwZXJBZG1pbixcbiAgICAgIGFkbWluOiByZXF1aXJlQWRtaW4sXG4gICAgICB1c2VyOiByZXF1aXJlQXV0aFxuICAgIH07XG5cbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAvLyBmb3IgYW55IHVubWF0Y2hlZCB1cmxcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIud2hlbignL3B5cmFtaWRzLycsICcvcHlyYW1pZHMnKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tbW9uL3ZpZXdzL2hvbWUuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcycsIHtcbiAgICAgICAgdXJsOiAnL3B5cmFtaWRzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQeXJhbWlkc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9weXJhbWlkcy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLm15UHlyYW1pZHMnLCB7XG4gICAgICAgIHVybDogJy9teS1weXJhbWlkcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ015UHlyYW1pZHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvbXktcHlyYW1pZHMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMudmlldycsIHtcbiAgICAgICAgdXJsOiAnL3ZpZXcvOnB5cmFtaWRJZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvcHlyYW1pZC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLmNyZWF0ZScsIHtcbiAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NyZWF0ZVB5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvY3JlYXRlLXB5cmFtaWQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvbG9naW4uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICByZXF1aXJlQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVTdXBlckFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZVN1cGVyQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnc3VwZXItYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVBdXRoLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUF1dGgoYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLnJ1bihhcHBSdW4pO1xuXG4gIGZ1bmN0aW9uIGFwcFJ1bigkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgPT09ICdub3QgYXV0aG9yaXplZCcpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSB0b1N0YXRlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRzdGF0ZSwgJGh0dHAsICRxLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBhdXRoZW50aWNhdGVVc2VyOiBhdXRoZW50aWNhdGVVc2VyLFxuICAgICAgY3JlYXRlVXNlcjogY3JlYXRlVXNlcixcbiAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSxcbiAgICAgIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGU6IGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGVcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywge1xuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVVzZXIodXNlckRhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgICAgdXNlckRhdGE6IHVzZXJEYXRhXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7XG4gICAgICAgIGxvZ291dDogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgdXNlclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHVzZXJTZXJ2aWNlKCRodHRwLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGdldEFsbFVzZXJzOiBnZXRBbGxVc2Vyc1xuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignTG9naW5DdHJsJywgTG9naW5DdHJsKTtcblxuICBmdW5jdGlvbiBMb2dpbkN0cmwoJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubG9naW4gPSBsb2dpbjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignVXNlcm5hbWUgLyBwYXNzd29yZCBjb21iaW5haXRvbiBpbmNvcnJlY3QnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLnN1Y2Nlc3MoJ0xvZ2luIHN1Y2Nlc3NmdWwuICBXZWxjb21lIHRvIEtuaWZlcGxhbmUhJyk7XG4gICAgICAgICAgaWYgKCRzdGF0ZS5wcmV2aW91cykge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCRzdGF0ZS5wcmV2aW91cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIFJlZ2lzdGVyQ3RybCk7XG5cbiAgZnVuY3Rpb24gUmVnaXN0ZXJDdHJsKCRzY29wZSwgJHN0YXRlLCBhdXRoU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiByZWdpc3RlcihuZXdVc2VyKSB7XG4gICAgICBhdXRoU2VydmljZS5jcmVhdGVVc2VyKG5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BQeXJhbWlkJywga3BQeXJhbWlkKTtcblxuICBmdW5jdGlvbiBrcFB5cmFtaWQoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQuaHRtbCcsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogJ0AnXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBweXJhbWlkc1NlcnZpY2UsICRmaWx0ZXIsIG5vdGlmeVNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWQgPSB7fTtcbiAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICB2bS5pc0N1cnJlbnRVc2VyT25QeXJhbWlkID0gZmFsc2U7XG4gICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgdm0uc2hvd0NyZWF0ZUNoYWxsZW5nZU9wdGlvbnMgPSBmYWxzZTtcbiAgICB2bS5zaG93Q29tcGxldGVDaGFsbGVuZ2VPcHRpb25zID0gZmFsc2U7XG4gICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IGZhbHNlO1xuICAgIHZtLnN0YXJ0Q2hhbGxlbmdlID0gc3RhcnRDaGFsbGVuZ2U7XG4gICAgdm0uY3JlYXRlQ2hhbGxlbmdlID0gY3JlYXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNvbXBsZXRlQ2hhbGxlbmdlID0gY29tcGxldGVDaGFsbGVuZ2U7XG4gICAgdm0uY2hhbGxlbmdlRXhwaXJlZCA9IGNoYWxsZW5nZUV4cGlyZWQ7XG4gICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSB7fTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcblxuICAgICAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcHlyYW1pZC5kYXRhLmxldmVsczsgKytpKSB7XG4gICAgICAgICAgdm0ubGV2ZWxzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcmRlclBsYXllcnMoKTtcbiAgICAgICAgZ2V0UGxheWVyc1N0YXR1cygpO1xuICAgICAgICBjYWxjdWxhdGVQeXJhbWlkQmxvY2tzKCk7XG4gICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3JkZXIgdGhlIHBsYXllcnMgYnkgdGhlIHBvc2l0aW9uIHByb3BlcnR5IG9mIHRoZSBwbGF5ZXJzIGFycmF5IGluIHRoZSBweXJhbWlkIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9yZGVyUGxheWVycygpIHtcbiAgICAgIHZtLnB5cmFtaWQucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5weXJhbWlkLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFBsYXllcnNTdGF0dXMoKSB7XG4gICAgICBfLmZvckVhY2godm0ucHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgcHlyYW1pZCBhbmQgc2V0IHNvbWUgcHJvcGVydGllc1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyICYmIHBsYXllci5faWQgPT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgICB2bS5pc0N1cnJlbnRVc2VyT25QeXJhbWlkID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcblxuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBfLmZvckVhY2goY2hhbGxlbmdlcy5kYXRhLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG5cbiAgICAgICAgICB2YXIgY2hhbGxlbmdlciA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsnX2lkJzogY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkfSk7XG4gICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgY2hhbGxlbmdlci5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2NoYWxsZW5nZXInXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvcHBvbmVudCA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsnX2lkJzogY2hhbGxlbmdlLm9wcG9uZW50Ll9pZH0pO1xuICAgICAgICAgIG9wcG9uZW50LmNsYXNzID0gJ3VuYXZhaWxhYmxlJztcbiAgICAgICAgICBvcHBvbmVudC5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ29wcG9uZW50J1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBUcmFjayB3aGVuIHRoZSBjaGFsbGVuZ2Ugd2lsbCBleHBpcmVcbiAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnaCcpLCAncycpICogLTE7XG4gICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBoYXMgbm90IHlldCBleHBpcmVkIGRpc3BsYXkgYSBjb3VudGRvd24gb24gdGhlIG9wcG9uZW50XG4gICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZS5leHBpcmVzID0gdGltZVRvRXhwaXJlO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBleHBpcmVkIHdoaWxlIG5vIG9uZSB3YXMgdmlld2luZyB0aGlzIHB5cmFtaWQgY29tcGxldGUgdGhlIGNoYWxsZW5nZSBieSBmb3JmZWl0XG4gICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgY2hhbGxlbmdlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hlcmUgdG8gc3RhcnQgZWFjaCBuZXcgcm93IG9uIHRoZSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQnJlYWtQb2ludHMoKSB7XG4gICAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5weXJhbWlkLmxldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSG93IG1hbnkgdG90YWwgYmxvY2tzIGluIHRoaXMgcHlyYW1pZFxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5sZXZlbHM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgcHlyYW1pZCB3aXRoIGVtcHR5IGJsb2Nrc1xuICAgIGZ1bmN0aW9uIGZpbGxJbkVtcHR5QmxvY2tzKCkge1xuICAgICAgZm9yICh2YXIgaSA9IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkgPCB2bS5udW1iZXJPZkJsb2NrczsgaSsrKSB7XG4gICAgICAgIHZtLnB5cmFtaWQucGxheWVycy5wdXNoKHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdFbXB0eScsXG4gICAgICAgICAgbGFzdE5hbWU6ICdTcG90JyxcbiAgICAgICAgICBwb3NpdGlvbjogOTksXG4gICAgICAgICAgY2xhc3M6ICdlbXB0eSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBicmVhayBwb2ludHNcbiAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hvIG90aGVyIHBsYXllcnMgY2FuIGNoYWxsZW5nZVxuICAgIGZ1bmN0aW9uIGFzc2lnbkxldmVsc1RvUGxheWVycygpIHtcbiAgICAgIHZhciBsZXZlbCA9IDA7XG4gICAgICBjcmVhdGVCcmVha1BvaW50cygpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5weXJhbWlkLnBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZtLmJyZWFrUG9pbnRzLmluZGV4T2YoaSArIDEpID4gLTEpIHtcbiAgICAgICAgICBsZXZlbCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHZtLnB5cmFtaWQucGxheWVyc1tpXS5sZXZlbCA9IGxldmVsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0Q2hhbGxlbmdlKGNhbmNlbCkge1xuICAgICAgaWYgKCFjYW5jZWwpIHtcbiAgICAgICAgdm0uc2hvd0NyZWF0ZUNoYWxsZW5nZU9wdGlvbnMgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uc2hvd0NyZWF0ZUNoYWxsZW5nZU9wdGlvbnMgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0aGUgcGxheWVycyBhdmFpbGFibGUgdG8gYmUgY2hhbGxlbmdlZFxuICAgICAgdmFyIGxldmVsQWJvdmUgPSB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCA+IDEgPyB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCAtIDEgOiBudWxsO1xuICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBpZiAocGxheWVyLmxldmVsID09PSBsZXZlbEFib3ZlICYmIHBsYXllci5wb3NpdGlvbiAhPT0gOTkgJiYgcGxheWVyLmNsYXNzICE9ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIWNhbmNlbCkge1xuICAgICAgICAgICAgcGxheWVyLmNsYXNzID0gJ2F2YWlsYWJsZSc7XG4gICAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGxheWVyLmNsYXNzID0gJyc7XG4gICAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UocGxheWVyKSB7XG4gICAgICBpZiAodm0uc2hvd0NyZWF0ZUNoYWxsZW5nZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIHRoYXQgaXMgbm90IGEgdmFsaWQgY2hhbGxlbmdlLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dDcmVhdGVDaGFsbGVuZ2VPcHRpb25zID0gZmFsc2U7XG4gICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgIGZvcmZlaXQ6IGZhbHNlLFxuICAgICAgICAgICAgdGltZUxpbWl0OiAyNCxcbiAgICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgICAgX2lkOiB2bS5jdXJyZW50VXNlclBsYXllci5faWQsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICBsYXN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICAgIG5pY2tuYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgcG9zaXRpb246IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3Bwb25lbnQ6IHtcbiAgICAgICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICAgIG5pY2tuYW1lOiBwbGF5ZXIubmlja25hbWUsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNyZWF0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wbGV0ZSBhIGNoYWxsZW5nZSBieSBhIHVzZXIgaW50ZXJhY3Rpb24gb3IgYSBmb3JmZWl0XG4gICAgICogXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gd2lubmVySXNDdXJyZW50VXNlclxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IGZvcmZlaXRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGZvcmZlaXRXaW5uZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZSh3aW5uZXJJc0N1cnJlbnRVc2VyLCBmb3JmZWl0LCBmb3JmZWl0V2lubmVyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdFdpbm5lciB8fCB2bS5jdXJyZW50VXNlclBsYXllcjtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgICAgIHZtLnNob3dDcmVhdGVDaGFsbGVuZ2VPcHRpb25zID0gZmFsc2U7XG4gICAgICAgIHZtLnNob3dDb21wbGV0ZUNoYWxsZW5nZU9wdGlvbnMgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdCB0aGFuIHN3YXAgcG9zaXRpb24gYW5kIG1ha2UgdGhlIGNoYWxsZW5nZXIgdGhlIHdpbm5lclxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIud2lubmVyID0gdHJ1ZTtcbiAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdobyB0aGUgd2lubmVyIHdhcyB0byBzdG9yZSBpbiB0aGUgY2hhbGxlbmdlIHJlY29yZFxuICAgICAgICB9IGVsc2UgaWYgKHdpbm5lcklzQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50Lndpbm5lciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudC53aW5uZXIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLndpbm5lciA9IHRydWU7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYXJrIHRoZSBjaGFsbGVuZ2UgYXMgY29tcGxldGUgYW5kIG5vdGUgdGhlIHdpbm5lclxuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdXNlciBpcyB0aGUgd2lubmVyIGFuZCB3YXMgdGhlIGNoYWxsZW5nZXJcbiAgICAgICAgICAvLyBvciB0aGUgY3VycmVudCB1c2VyIGlzIE5PVCB0aGUgd2lubmVyIGFuZCB3YXMgdGhlIG9wcG9uZW50XG4gICAgICAgICAgLy8gdGhlbiBzd2FwIHBvc2l0aW9uc1xuICAgICAgICAgIGlmIChzd2FwUG9zaXRpb25zKSB7XG4gICAgICAgICAgICBweXJhbWlkc1NlcnZpY2Uuc3dhcFBvc2l0aW9ucyh2bS5jb21wZXRpdGlvbklkLCBjaGFsbGVuZ2UuZGF0YS5vcHBvbmVudCwgY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlcikudGhlbihyZWZyZXNoUHlyYW1pZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYWxsZW5nZUV4cGlyZWQoKSB7XG4gICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBSZWZyZXNoIHRoZSBweXJhbWlkIGJlY2FzdWUgb2YgYW4gdXBkYXRlXG4gICAgZnVuY3Rpb24gcmVmcmVzaFB5cmFtaWQoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkKSB7XG4gICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG4gICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICBnZXRQbGF5ZXJzU3RhdHVzKCk7XG4gICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jcmVhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNoYWxsZW5nZV9jb21wbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCdfa3BQeXJhbWlkJywgX2twUHlyYW1pZCk7XG5cbiAgZnVuY3Rpb24gX2twUHlyYW1pZCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3B5cmFtaWRzL2NvbXBvbmVudHMvcHlyYW1pZC5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkSWQ6ICdAJ1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgY3RybEZ1bmMuJGluamVjdCA9IFsnJHNjb3BlJywgJ3B5cmFtaWRzU2VydmljZScsICckZmlsdGVyJywgJ05vdGlmaWNhdGlvbicsICdpZGVudGl0eVNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIHB5cmFtaWRzU2VydmljZSwgJGZpbHRlciwgTm90aWZpY2F0aW9uLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICAvKmpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWQgPSB7fTtcbiAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICB2bS5sZXZlbCA9IDA7XG4gICAgdm0udXBkYXRlUHlyYW1pZCA9IHVwZGF0ZVB5cmFtaWQ7XG4gICAgdm0uaXNQbGF5ZXJPblB5cmFtaWQgPSBmYWxzZTtcblxuICAgIHZhciBwbGF5ZXIxID0ge307XG4gICAgdmFyIHBsYXllcjIgPSB7fTtcbiAgICB2YXIgbnVtYmVyT2ZBY3R1YWxQbGF5ZXJzID0gMDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLnB5cmFtaWRJZCkudGhlbihmdW5jdGlvbiAocHlyYW1pZCkge1xuICAgICAgICB2bS5weXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICBudW1iZXJPZkFjdHVhbFBsYXllcnMgPSB2bS5weXJhbWlkLnBsYXllcnMubGVuZ3RoO1xuXG4gICAgICAgIGlmIChfLmZpbmQodm0ucHlyYW1pZC5wbGF5ZXJzLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKSkge1xuICAgICAgICAgIHZtLmlzUGxheWVyT25QeXJhbWlkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICBjcmVhdGVCcmVha1BvaW50cygpO1xuICAgICAgICBjYWxjdWxhdGVQeXJhbWlkQmxvY2tzKCk7XG4gICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgICBpZiAodm0uaXNQbGF5ZXJPblB5cmFtaWQpIHtcbiAgICAgICAgICBhc3NpZ25QbGF5ZXJPbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHlyYW1pZChwbGF5ZXIpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdm0uaXNQbGF5ZXJPblB5cmFtaWQpIHtcbiAgICAgICAgLy8gQWxsb3cgYWRtaW5zIHRvIHNlbGVjdCB0aGUgZmlyc3QgcGxheWVyXG4gICAgICAgIGlmIChfLmlzRW1wdHkocGxheWVyMSkgJiYgcGxheWVyLnBvc2l0aW9uICE9PSA5OSAmJiBpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKCdhZG1pbicpKSB7XG4gICAgICAgICAgcGxheWVyMSA9IHBsYXllcjtcbiAgICAgICAgICBwbGF5ZXIxLmNsYXNzID0gJ2FjdGl2ZSc7XG4gICAgICAgICAgLy8gQWxsb3cgYWRtaW5zIHRvIGRlc2VsZWN0IHRoZSBmaXJzdCBwbGF5ZXJcbiAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIxID09PSBwbGF5ZXIgJiYgaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aG9yaXplZCgnYWRtaW4nKSkge1xuICAgICAgICAgIHBsYXllcjEuY2xhc3MgPSAnJztcbiAgICAgICAgICBwbGF5ZXIxID0ge307XG4gICAgICAgICAgLy8gT25seSBhbGxvdyBzd2FwcGluZyB3aXRoIChyZWFsKSBwbGF5ZXJzIDEgbGV2ZWwgYWJvdmUgb3IgYmVsb3dcbiAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIubGV2ZWwgPT09IHBsYXllcjEubGV2ZWwgfHwgcGxheWVyLmxldmVsIDwgcGxheWVyMS5sZXZlbCAtIDEgfHwgcGxheWVyLmxldmVsID4gcGxheWVyMS5sZXZlbCArIDEgfHwgcGxheWVyLnBvc2l0aW9uID09PSA5OSkge1xuICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcignU29ycnksIHRoYXRzIG5vdCBhbGxvd2VkIScpO1xuICAgICAgICAgIC8vIERvIHRoZSBzd2FwcGluZyBhbmQgc2F2ZSB0byB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAvLyBUaGVuIHJlc2V0IHRvIGRvIGl0IGFsbCBvdmVyIGFnYWluXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHBsYXllcjFPbGRQb3NpdGlvbiA9IHBsYXllcjEucG9zaXRpb247XG4gICAgICAgICAgdmFyIHBsYXllcjFPbGRMZXZlbCA9IHBsYXllcjEubGV2ZWw7XG4gICAgICAgICAgcGxheWVyMiA9IHBsYXllcjtcblxuICAgICAgICAgIHBsYXllcjEucG9zaXRpb24gPSBwbGF5ZXIucG9zaXRpb247XG4gICAgICAgICAgcGxheWVyMS5sZXZlbCA9IHBsYXllci5sZXZlbDtcblxuICAgICAgICAgIHBsYXllcjIucG9zaXRpb24gPSBwbGF5ZXIxT2xkUG9zaXRpb247XG4gICAgICAgICAgcGxheWVyMi5sZXZlbCA9IHBsYXllcjFPbGRMZXZlbDtcblxuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5zd2FwUG9zaXRpb25zKHZtLnB5cmFtaWRJZCwgcGxheWVyMSwgcGxheWVyMik7XG5cbiAgICAgICAgICBwbGF5ZXIxLmNsYXNzID0gJyc7XG4gICAgICAgICAgcGxheWVyMSA9IHt9O1xuICAgICAgICAgIHBsYXllcjIgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgIXZtLmlzUGxheWVyT25QeXJhbWlkICYmIHBsYXllci5wb3NpdGlvbiA9PT0gOTkpIHtcbiAgICAgICAgYWRkUGxheWVyVG9QeXJhbWlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBOb3RpZmljYXRpb24uZXJyb3IoJ1lvdSBjYW4gbm90IHVwZGF0ZSB0aGlzIHB5cmFtaWQuPGJyPllvdSBtdXN0IGpvaW4gdGhlIHB5cmFtaWQgZmlyc3QuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9QeXJhbWlkKCkge1xuICAgICAgdmFyIG5ld1BsYXllciA9IHtcbiAgICAgICAgcG9zaXRpb246IG51bWJlck9mQWN0dWFsUGxheWVycyArIDEsXG4gICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICBuaWNrbmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLm5pY2tuYW1lXG4gICAgICB9O1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmFkZFBsYXllclRvUHlyYW1pZCh2bS5weXJhbWlkSWQsIG5ld1BsYXllcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdm0uaXNQbGF5ZXJPblB5cmFtaWQgPSB0cnVlO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3JkZXIgdGhlIHBsYXllcnMgYnkgdGhlIHBvc2l0aW9uIHByb3BlcnR5IG9mIHRoZSBwbGF5ZXJzIGFycmF5IGluIHRoZSBweXJhbWlkIG9iamVjdFxuICAgIGZ1bmN0aW9uIG9yZGVyUGxheWVycygpIHtcbiAgICAgIHZtLnB5cmFtaWQucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5weXJhbWlkLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgIH1cblxuICAgIC8vIEZpZ3VyZSBvdXQgd2hlcmUgdG8gc3RhcnQgZWFjaCBuZXcgcm93IG9uIHRoZSBweXJhbWlkXG4gICAgZnVuY3Rpb24gY3JlYXRlQnJlYWtQb2ludHMoKSB7XG4gICAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5weXJhbWlkLmxldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSG93IG1hbnkgdG90YWwgYmxvY2tzIGluIHRoaXMgcHlyYW1pZFxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gdm0ucHlyYW1pZC5sZXZlbHM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgcHlyYW1pZCB3aXRoIGVtcHR5IGJsb2Nrc1xuICAgIGZ1bmN0aW9uIGZpbGxJbkVtcHR5QmxvY2tzKCkge1xuICAgICAgZm9yICh2YXIgaSA9IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkgPCB2bS5udW1iZXJPZkJsb2NrczsgaSsrKSB7XG4gICAgICAgIHZtLnB5cmFtaWQucGxheWVycy5wdXNoKHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdFbXB0eScsXG4gICAgICAgICAgbGFzdE5hbWU6ICdTcG90JyxcbiAgICAgICAgICBwb3NpdGlvbjogOTksXG4gICAgICAgICAgY2xhc3M6ICdlbXB0eSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBicmVhayBwb2ludHNcbiAgICBmdW5jdGlvbiBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKSB7XG4gICAgICB2bS5sZXZlbCA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodm0uYnJlYWtQb2ludHMuaW5kZXhPZihpICsgMSkgPiAtMSkge1xuICAgICAgICAgIHZtLmxldmVsICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzW2ldLmxldmVsID0gdm0ubGV2ZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhIHBsYXllciBvbiB0aGlzIHB5cmFtaWQgbWFrZSB0aGVtIHBsYXllciAxXG4gICAgZnVuY3Rpb24gYXNzaWduUGxheWVyT25lKCkge1xuICAgICAgaWYgKCFpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKCdhZG1pbicpICYmIGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiB2bS5pc1BsYXllck9uUHlyYW1pZCkge1xuICAgICAgICBwbGF5ZXIxID0gXy5maW5kKHZtLnB5cmFtaWQucGxheWVycywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIHBsYXllcjEuY2xhc3MgPSAnYWN0aXZlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLnB5cmFtaWRJZCkudGhlbihmdW5jdGlvbiAocHlyYW1pZCkge1xuICAgICAgICB2bS5weXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICBvcmRlclBsYXllcnMoKTtcbiAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgICAgIGFzc2lnblBsYXllck9uZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignd3M6bWF0Y2hfcmVzdWx0cycsIGZ1bmN0aW9uIChfLCByZXN1bHQpIHtcbiAgICAgIE5vdGlmaWNhdGlvbi5pbmZvKHJlc3VsdCk7XG4gICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3B5cmFtaWRzU2VydmljZScsIHB5cmFtaWRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gcHlyYW1pZHNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRQeXJhbWlkOiBnZXRQeXJhbWlkLFxuICAgICAgZ2V0UHlyYW1pZHNGb3JVc2VyOiBnZXRQeXJhbWlkc0ZvclVzZXIsXG4gICAgICBjcmVhdGVQeXJhbWlkOiBjcmVhdGVQeXJhbWlkLFxuICAgICAgc3dhcFBvc2l0aW9uczogc3dhcFBvc2l0aW9ucyxcbiAgICAgIGFkZFBsYXllclRvUHlyYW1pZDogYWRkUGxheWVyVG9QeXJhbWlkXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIHB5cmFtaWQgZnJvbSB0aGUgZGF0YWJhc2UgKG9yIG1lbW9yeSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBweXJhbWlkIGlkIGZvciB0aGUgcmVxdWVzdGVkIHB5cmFtaWRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkKHB5cmFtaWRJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9weXJhbWlkJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBweXJhbWlkSWQ6IHB5cmFtaWRJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBweXJhbWlkcyBmcm9tIHRoZSBkYXRhYmFzZSB0aGUgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWRzRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZHMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9jcmVhdGUnLCB7XG4gICAgICAgIHB5cmFtaWQ6IHB5cmFtaWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3YXBQb3NpdGlvbnMocHlyYW1pZElkLCBjaGFsbGVuZ2VyLCBvcHBvbmVudCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvc3dhcFBvc2l0aW9ucycsIHtcbiAgICAgICAgcHlyYW1pZElkOiBweXJhbWlkSWQsXG4gICAgICAgIGNoYWxsZW5nZXI6IGNoYWxsZW5nZXIsXG4gICAgICAgIG9wcG9uZW50OiBvcHBvbmVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9QeXJhbWlkKHB5cmFtaWRJZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9hZGRQbGF5ZXInLCB7XG4gICAgICAgIHB5cmFtaWRJZDogcHlyYW1pZElkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FkZFBsYXllckN0cmwnLCBBZGRQbGF5ZXJDdHJsKTtcblxuICBmdW5jdGlvbiBBZGRQbGF5ZXJDdHJsKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCB1c2VyU2VydmljZSwgcHlyYW1pZHNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdm0uYWRkUGxheWVyVG9QeXJhbWlkID0gYWRkUGxheWVyVG9QeXJhbWlkO1xuICAgIHZtLmNyZWF0ZVB5cmFtaWQgPSBjcmVhdGVQeXJhbWlkO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gdXNlcnMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwb3NpdGlvbiA9IDA7XG5cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXJUb1B5cmFtaWQocGxheWVyKSB7XG4gICAgICAvLyBBZGQgdGhlIHNlbGVjdGVkIHBsYXllciB0byB0aGUgcGxheWVycyBhcnJheVxuICAgICAgcG9zaXRpb24gKz0gMTtcbiAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgIG5pY2tuYW1lOiBwbGF5ZXIubmlja25hbWVcbiAgICAgIH07XG4gICAgICB2bS5uZXdQeXJhbWlkLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgLy8gUmVtb3ZlIHRoZSBzZWxlY3RlZCBwbGF5ZXIgZnJvbSB0aGUgYXZhaWxhYmxlIHBsYXllcnNcbiAgICAgIF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtcbiAgICAgICAgX2lkOiBwbGF5ZXIuX2lkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQeXJhbWlkKHB5cmFtaWQpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5jcmVhdGVQeXJhbWlkKHB5cmFtaWQpLnRoZW4oZnVuY3Rpb24gKG5ld1B5cmFtaWQpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICAgIHB5cmFtaWRJZDogbmV3UHlyYW1pZC5kYXRhLl9pZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDcmVhdGVQeXJhbWlkQ3RybCcsIENyZWF0ZVB5cmFtaWRDdHJsKTtcblxuICBmdW5jdGlvbiBDcmVhdGVQeXJhbWlkQ3RybCgkc3RhdGUsIHVzZXJTZXJ2aWNlLCBweXJhbWlkc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm5ld1B5cmFtaWQgPSB7XG4gICAgICBwbGF5ZXJzOiBbXVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZVB5cmFtaWQgPSBjcmVhdGVQeXJhbWlkO1xuICAgIHZtLm5ld1B5cmFtaWQubGV2ZWxzID0gNDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHVzZXJzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb24gPSAwO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBvc2l0aW9uICs9IDE7XG4gICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICBuaWNrbmFtZTogcGxheWVyLm5pY2tuYW1lXG4gICAgICAgIH07XG4gICAgICAgIHZtLm5ld1B5cmFtaWQucGxheWVycy5wdXNoKGFkZFBsYXllcik7XG4gICAgICB9KTtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5jcmVhdGVQeXJhbWlkKHB5cmFtaWQpLnRoZW4oZnVuY3Rpb24gKG5ld1B5cmFtaWQpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICAgIHB5cmFtaWRJZDogbmV3UHlyYW1pZC5kYXRhLl9pZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdNeVB5cmFtaWRzQ3RybCcsIE15UHlyYW1pZHNDdHJsKTtcblxuICBmdW5jdGlvbiBNeVB5cmFtaWRzQ3RybCgkc3RhdGUsIHB5cmFtaWRzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkcyA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHNGb3JVc2VyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQeXJhbWlkQ3RybCcsIFB5cmFtaWRDdHJsKTtcblxuICBmdW5jdGlvbiBQeXJhbWlkQ3RybCgkc3RhdGVQYXJhbXMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWRJZCA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLnB5cmFtaWRJZCkge1xuICAgICAgICB2bS5weXJhbWlkSWQgPSAkc3RhdGVQYXJhbXMucHlyYW1pZElkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQeXJhbWlkc0N0cmwnLCBQeXJhbWlkc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIFB5cmFtaWRzQ3RybCgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnB5cmFtaWRzID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIFxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BDaGFsbGVuZWdlcycsIGtwQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIGtwQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbklkOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzKCkge1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgICAgIGlmIChjaGFsbGVuZ2VzLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5leHBpcmVzID0gKG1vbWVudCgpLmRpZmYobW9tZW50KGNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2gnKSwncycpKSAqIC0xO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NyZWF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NvbXBsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BGb290ZXInLCBrcEZvb3Rlcik7XG5cbiAgZnVuY3Rpb24ga3BGb290ZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9mb290ZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIHZtLmxvZ291dCA9IGxvZ291dDtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BIZWFkZXInLCBrcEhlYWRlcik7XG5cbiAgZnVuY3Rpb24ga3BIZWFkZXIoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9oZWFkZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoKSB7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twU2lkZWJhcicsIGtwU2lkZWJhcik7XG5cbiAgZnVuY3Rpb24ga3BTaWRlYmFyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2NoYWxsZW5nZXNTZXJ2aWNlJywgY2hhbGxlbmdlc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNoYWxsZW5nZXNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjcmVhdGVDaGFsbGVuZ2U6IGNyZWF0ZUNoYWxsZW5nZSxcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlOiBjb21wbGV0ZUNoYWxsZW5nZSxcbiAgICAgIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGxldGUnLCAge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24vcGxheWVyJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2lkZW50aXR5U2VydmljZScsIGlkZW50aXR5U2VydmljZSk7XG5cbiAgZnVuY3Rpb24gaWRlbnRpdHlTZXJ2aWNlKCR3aW5kb3cpIHtcbiAgICB2YXIgY3VycmVudFVzZXI7XG4gICAgaWYgKCR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdCAhPT0gbnVsbCkge1xuICAgICAgY3VycmVudFVzZXIgPSAkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3Q7XG4gICAgfVxuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxuICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgICBpc0F1dGhvcml6ZWQ6IGlzQXV0aG9yaXplZFxuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQXV0aG9yaXplZChyb2xlKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIucm9sZXMuaW5kZXhPZihyb2xlKSA+IC0xO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdub3RpZnlTZXJ2aWNlJywgbm90aWZ5U2VydmljZSk7XG5cbiAgZnVuY3Rpb24gbm90aWZ5U2VydmljZSgpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGluZm86IGluZm8sXG4gICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgd2FybmluZzogd2FybmluZyxcbiAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgIGludmVyc2U6IGludmVyc2VcbiAgICB9O1xuXG4gICAgJC5ub3RpZnlEZWZhdWx0cyh7XG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBpY29uOiAnem1kaSB6bWRpLWFsZXJ0LWNpcmNsZS1vJyxcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIGljb246ICd6bWRpIHptZGktY2hlY2snLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgaWNvbjogJ3ptZGkgem1kaS1hbGVydC10cmlhbmdsZScsXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgaWNvbjogJ3ptZGkgem1kaS1hbGVydC1vY3RhZ29uJyxcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuc2VydmljZSgnd2Vic29ja2V0U2VydmljZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkd2luZG93KSB7XG4gICAgZnVuY3Rpb24gd2Vic29ja2V0SG9zdCgpIHtcbiAgICAgIGlmICgkd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jykge1xuICAgICAgICByZXR1cm4gJ3dzczovLycgKyAkd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29ubmVjdGlvbjtcbiAgICB0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh3ZWJzb2NrZXRIb3N0KCkpO1xuXG4gICAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnRvcGljLCBwYXlsb2FkLmRhdGEpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKHRvcGljLCBkYXRhKSB7XG4gICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9KTtcbiAgICAgIGNvbm5lY3Rpb24uc2VuZChqc29uKTtcbiAgICB9O1xuICB9KS5ydW4oZnVuY3Rpb24gKHdlYnNvY2tldFNlcnZpY2UpIHtcbiAgICB3ZWJzb2NrZXRTZXJ2aWNlLmNvbm5lY3QoKTtcbiAgfSk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignSG9tZUN0cmwnLCBIb21lQ3RybCk7XG5cbiAgZnVuY3Rpb24gSG9tZUN0cmwoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGVTdWJtZW51JywgdG9nZ2xlU3VibWVudSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlU3VibWVudSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsKSB7XG4gICAgICBlbC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLm5leHQoKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICBlbC5wYXJlbnQoKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd2F2ZXNFZmZlY3QnLCB3YXZlc0VmZmVjdCk7XG5cbiAgZnVuY3Rpb24gd2F2ZXNFZmZlY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWljb24nKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdidG4tZmxvYXQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1jaXJjbGUnXSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1saWdodCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWxpZ2h0J10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBXYXZlcy5pbml0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZmdMaW5lJywgZmdMaW5lKTtcblxuICBmdW5jdGlvbiBmZ0xpbmUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKTtcbiAgICAgIHZhciBpc0Zsb2F0TGFiZWwgPSBlbGVtZW50LnBhcmVudCgpLmhhc0NsYXNzKCdmZy1mbG9hdCcpO1xuICAgICAgaW5wdXQuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQuYmx1cihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGbG9hdExhYmVsIHx8IChpc0Zsb2F0TGFiZWwgJiYgaW5wdXQudmFsKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
