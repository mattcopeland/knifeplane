angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var r=this;r.$state=e,r.lockSidebar=t.get("sidebarLocked"),r.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,i,a){var o={superAdmin:n,admin:t,user:r};a.html5Mode(!0),i.otherwise("/"),i.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:competitionId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"StatsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/stats.html"}}}).state("pyramids.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"AdminCtrl",controllerAs:"vm",templateUrl:"pyramids/views/admin.html"}},resolve:{auth:o.user}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function r(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],r.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,r,i,a,o){"not authorized"===o&&(t.go("login"),t.previous=n,t.prevParams=r)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(e,r){var a=n.defer();return t.post("/login",{username:e,password:r}).then(function(e){e.data.success?(i.currentUser=e.data.user,a.resolve(!0)):"unverified"===e.data.message?a.resolve("unverified"):a.resolve(!1)}),a.promise}function s(e){var r=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?r.resolve(!0):r.resolve(!1)},function(e){"Error: Duplicate Username"===e.data.reason&&a.error("Sorry, an account already exists with that email address.")}),r.promise}function l(){var r=n.defer();return t.post("/logout",{logout:!0}).then(function(){i.currentUser=void 0,r.resolve(),e.go("home")}),r.promise}function c(e){return!!i.isAuthorized(e)||n.reject("not authorized")}function d(){return!!i.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:o,createUser:s,logout:l,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:d};return u}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function r(t){return e.get("/api/user/password/link",{params:{username:t}})}function i(t,n,r){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:r})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:r,resetPassword:i};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function r(){}function i(r,i){t.authenticateUser(r,i).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("pyramids.myPyramids"):n.error("Username / password combinaiton incorrect")})}var a=this;a.login=i,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(){a.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function s(t){n.generatePasswordResetLink(t).then(function(t){t.data?(r.success("Please check your email for a password reset link"),e.go("home")):r.error("Could not find that email address")})}function l(a){a.password!==a.confirmPassword?r.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,a.password).then(function(t){t.data&&i.authenticateUser(t.data.username,a.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=s,c.resetPassword=l,o()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){}function i(r){r.password!==r.confirmPassword?n.error("Passwords don't match!"):t.createUser(r).then(function(){e.go("verify")})}var a=this;a.register=i,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){t.userId&&t.verificationToken&&(i.verifying=!0,i.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?i.verified=!0:i.verified=!1}))}var i=this;i.verified=void 0,i.verifying=!1,r()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.pyramid",function(){i.pyramid&&r()})}function r(){i.challenges=[],t.getActiveChallengesByCompetition(i.pyramid._id).then(function(e){e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var i=this;i.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function r(){e.$watch("vm.challenges",function(){o.challenges&&o.challenges.length>0&&i()})}function i(){_.forEach(o.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger",e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})})}function a(e,t){n.deleteChallenge(o.competitionId,e).then(function(){o.challenges.splice(t,1)})}var o=this;o.challenges=[],o.deleteChallenge=a,r()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("kpCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){a.player&&(n(a.player),r(a.player),i(a.player))})}function n(e){for(var t=[],n=0;n<a.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var r=0;r<t.length;r++)if(e.position<t[r+1]){e.level=t.indexOf(t[r])+1;break}}function r(e){var t,n=0,r=!0;_.forEach(e.results,function(i){r&&("challenger"===i.winner&&i.challenger._id===e._id||"opponent"===i.winner&&i.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):r=!1:("opponent"===i.winner&&i.challenger._id===e._id||"challenger"===i.winner&&i.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):r=!1)),a.streak={type:t,value:n}})}function i(e){a.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),a.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),a.wins.total=a.wins.asChallenger+a.wins.asOpponent,a.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),a.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),a.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),a.loses.total=a.loses.asChallenger+a.loses.asOpponent,a.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var a=this;a.maxLevels=10,a.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},a.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},a.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("kpPlayerOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function n(t){return e.post("/api/challenges/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function i(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function a(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function o(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function s(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function l(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function c(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var d={createChallenge:t,completeChallenge:n,getChallengesByCompetition:r,getActiveChallengesByCompetition:i,getActiveChallengeByCompetitionByPlayer:a,getCompletedChallengesByCompetition:o,deleteActiveChallengeByCompetitionByPlayer:s,deleteChallenge:l,getPlayerResultsByCompetition:c};return d}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var r=this;r.indentity=e,r.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,r,i){function a(){o(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&o()})}function o(){u.alerts=[],n.isAuthenticated()&&i.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){u.alerts=e.data})}function s(e,t){i.clearAlert(e).then(function(){u.alerts.splice(t,1)})}function l(){i.clearAllAlertsByPlayer(n.currentUser._id).then(function(){u.alerts=[]})}function c(){t.setSidebarStatus(!u.sidebarStatus.left)}function d(){r.logout()}var u=this;u.indentity=n,u.logout=d,u.sidebarStatus=t.getSidebarStatus(),u.toggleSidebar=c,u.clearAlert=s,u.clearAllAlerts=l,u.alerts=[],a(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&o()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function r(){t.logout()}var i=this;i.indentity=e,i.logout=r,i.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var r in e)n.push(e[r]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function r(t){return e.put("/api/alerts/clear",{userId:t})}var i={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:r};return i}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var r;null!==e.bootstrappedUserObject&&(r=e.bootstrappedUserObject);var i={currentUser:r,isAuthenticated:t,isAuthorized:n};return i}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function r(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var a={info:e,success:t,warning:n,error:r,inverse:i};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85}}),a}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,r){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:r,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},r={getSidebarStatus:e,setSidebarStatus:t};return r}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function r(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function i(){o=new WebSocket(r()),o.onmessage=function(t){l=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},o.onclose=function(){l<s.length?(console.log("WebSocket closed. Reconnecting..."),n(i,1e3*s[l]),l+=1):console.log("Giving up on WebSocket")}}function a(e,t){var n=JSON.stringify({topic:e,data:t});o.send(n)}var o,s=[3,10,100,1e3],l=0,c={connect:i,send:a};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e){function t(){e.getPyramids().then(function(e){n.pyramids=e.data})}var n=this;n.pyramids=[],t()}e.$inject=["pyramidsService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=i.pyramid.players.length+1,e.approvePendingPlayer(i.pyramid._id,t)}function r(t){e.denyPendingPlayer(i.pyramid._id,t)}var i=this;i.pendingPlayers=[],i.approvePendingPlayer=n,i.denyPendingPlayer=r,t()}t.$inject=["pyramidsService"],angular.module("app").directive("kpPendingPlayers",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/pyramid-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("kpPyramidCompact",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{pyramid:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,r,i,a,o){function s(){for(var t=S;t>0;--t)$.maxPlayers+=t;e.$watch("vm.pyramid",function(){$.pyramid&&($.competitionId=$.pyramid._id,l(),c(),u(),p(),m())})}function l(){$.pyramid.players=r("orderBy")($.pyramid.players,"position")}function c(){$.currentUserIsAdmin=!1,$.currentUserIsPending=!1,a.isAuthenticated()&&($.currentUserIsAdmin=_.some($.pyramid.admins,["_id",a.currentUser._id]),$.currentUserIsPending=_.some($.pyramid.pendingPlayers,["_id",a.currentUser._id])),$.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,_.forEach($.pyramid.players,function(e){a.isAuthenticated()&&e._id===a.currentUser._id&&($.currentUserIsOnPyramid=!0,e.class="current-user",$.currentUserPlayer=e,o.getActiveChallengeByCompetitionByPlayer($.competitionId,e._id).then(function(t){t.data&&($.hasActiveChallenge=!0,$.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger)}))}),o.getActiveChallengesByCompetition($.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find($.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var n=_.find($.pyramid.players,{_id:e.opponent._id});if(n.class="unavailable",n.challenge={position:"opponent"},0!==e.timeLimit){var r=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;r>0?n.challenge.expires=r:r<=0&&v(null,!0,n)}}),f()})}function d(){$.breakPoints=[];for(var e=0;e<S;e++)$.breakPoints.push(e*(e+1)/2+1)}function u(){var e=0;$.levels=[],d();for(var t=0;t<$.pyramid.players.length;t++)$.breakPoints.indexOf(t+1)>-1&&(e+=1,$.levels.push(e)),$.pyramid.players[t].level=e}function p(){$.numberOfBlocks=0;for(var e=_.last($.levels);e>0;e--)$.numberOfBlocks+=e}function m(){$.numberOfRealPlayers=$.pyramid.players.length;for(var e=$.pyramid.players.length;e<$.numberOfBlocks;e++)$.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"});u()}function f(){if($.currentUserIsOnPyramid&&!$.hasActiveChallenge){var e=$.currentUserPlayer.level>1?$.currentUserPlayer.level-1:null;_.forEach($.pyramid.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&($.availableChallenges=!0,t.available=!0,t.class="available")})}}function y(e){if(e.available){$.hasActiveChallenge=!0;var t={competitionName:$.pyramid.name,competitionId:$.competitionId,complete:!1,forfeit:!1,timeLimit:$.pyramid.forfeitDays,challenger:{_id:$.currentUserPlayer._id,email:$.currentUserPlayer.email,firstName:$.currentUserPlayer.firstName,lastName:$.currentUserPlayer.lastName,position:$.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,position:e.position}};o.createChallenge(t).then(function(){$.pyramidMenuToggle=!1})}else i.error("Sorry, that is not a valid challenge.")}function v(e,t,r){var i=r||$.currentUserPlayer;o.getActiveChallengeByCompetitionByPlayer($.competitionId,i._id).then(function(i){$.hasActiveChallenge=!1;var a=!1;t?(i.data.forfeit=!0,"opponent"===r.challenge.position?(i.data.winner="challenger",a=!0):i.data.winner="opponent"):e?i.data.challenger._id===$.currentUserPlayer._id?(i.data.winner="challenger",a=!0):i.data.winner="opponent":i.data.challenger._id===$.currentUserPlayer._id?i.data.winner="opponent":(i.data.winner="challenger",a=!0),a?n.swapPositions($.competitionId,i.data.opponent,i.data.challenger).then(function(){o.completeChallenge(i.data).then(function(){U&&C()})}):o.completeChallenge(i.data).then(function(){U&&C()}),$.pyramidMenuToggle=!1})}function h(e){v(null,!0,e)}function g(){if(a.isAuthenticated())if($.numberOfRealPlayers<$.maxPlayers){var e={_id:a.currentUser._id,firstName:a.currentUser.firstName,lastName:a.currentUser.lastName,email:a.currentUser.username,position:$.numberOfRealPlayers+1};$.pyramid.restrictJoins?swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToPyramidRequest($.pyramid,e).then(function(){$.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")}):swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToPyramid($.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")})}else i.warning("Sorry, this pyramid is full");else i.warning("Please login to join a competition"),t.previous="pyramids.view",t.prevParams={competitionId:$.competitionId},t.go("login")}function P(){swal({title:"Leave Pyramid?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){C(),swal("OK, you'r out!","You've been removed from the pyramid.","success")})}function C(){a.isAuthenticated()&&$.currentUserIsOnPyramid&&(U=!0,$.hasActiveChallenge?v(null,!0,$.currentUserPlayer):($.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,n.getPyramid($.competitionId).then(function(e){var t=e.data,r=$.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=r&&(e.position-=1)});for(var i=_.remove(t.players,function(e){return e._id===$.currentUserPlayer._id}),a=[],o=0;o<$.numberOfRealPlayers-1;++o){var s={_id:t.players[o]._id,firstName:t.players[o].firstName,lastName:t.players[o].lastName,position:t.players[o].position};a.push(s)}n.removedPlayerFromPyramid($.competitionId,i[0],a).then(function(){U=!1})})))}function w(e){99!==e.position||$.currentUserIsOnPyramid||g(),e.available===!0&&$.currentUserIsOnPyramid&&!$.hasActiveChallenge&&swal({title:"Challenge Request",text:"Challenge "+e.firstName+" "+e.lastName+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Send Challenge",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){y(e),swal("Challenge Sent",e.firstName+" "+e.lastName+" has been notified of the challenge.","success")})}function b(){n.getPyramid($.competitionId).then(function(e){$.pyramid=e.data})}var S=10,$=this;$.competitionId=null,$.breakPoints=[],$.levels=[],$.numberOfBlocks=0,$.currentUserIsOnPyramid=!1,$.currentUserIsPending=!1,$.currentUserIsAdmin=!1,$.hasActiveChallenge=!1,$.activeChallengeOpponent=null,$.availableChallenges=!1,$.createChallenge=y,$.completeChallenge=v,$.challengeExpired=h,$.currentUserPlayer={},$.pyramidMenuToggle=!1,$.addCurrentUserToPyramid=g,$.confirmRemoveCurrentUserFromPyramid=P,$.playerClick=w,$.numberOfRealPlayers=0,$.maxPlayers=0,s();var U=!1;e.$on("ws:pyramid_updated",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),b())})}t.$inject=["$scope","$state","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/update-admins.html"};return e}function t(e,t,n,r,i){function a(){e.$watch("vm.pyramid",function(){p.pyramid&&(p.addedAdmins=_.cloneDeep(p.pyramid.admins),p.disableSubmit=!0,p.userIsPrimaryAdmin=_.find(p.pyramid.admins,{primary:!0})._id===i.currentUser._id,o())})}function o(){r.getAllUsers().then(function(e){_.forEach(p.pyramid.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){p.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,email:e.username,_id:e._id})})})}function s(){p.pyramid.admins=p.addedAdmins,t.updatePyramid(p.pyramid).then(function(){p.disableSubmit=!0})}function l(){p.addedAdmins=_.cloneDeep(p.pyramid.admins)}function c(e){u.push(e),p.availableAdmins.push(_.remove(p.addedAdmins,{_id:e._id})[0]),p.disableSubmit=!1}function d(e){p.addedAdmins.push(_.remove(p.availableAdmins,{_id:e._id})[0]),p.disableSubmit=!1}var u=[],p=this;p.availableAdmins=[],p.addedAdmins=[],p.userIsPrimaryAdmin=!1,p.updatePyramid=s,p.cancelUpdate=l,p.removeAdmin=c,p.addAdmin=d,p.disableSubmit=!0,a()}t.$inject=["$scope","pyramidsService","challengesService","userService","identityService"],angular.module("app").directive("kpUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{pyramid:"="},templateUrl:"/pyramids/components/update-players.html"};return e}function t(e,t,n,r,i){function a(){e.$watch("vm.pyramid",function(){m.pyramid&&(m.addedPlayers=_.cloneDeep(m.pyramid.players),m.disableSubmit=!0,o())})}function o(){i.getAllUsers().then(function(e){_.forEach(m.pyramid.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){m.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,email:e.username,_id:e._id})})})}function s(){_.forEach(p,function(e){r.deleteActiveChallengeByCompetitionByPlayer(m.pyramid._id,e._id)}),m.pyramid.players=m.addedPlayers,n.updatePyramid(m.pyramid).then(function(){m.disableSubmit=!0})}function l(){m.addedPlayers=_.cloneDeep(m.pyramid.players)}function c(){var e=1;_.forEach(m.addedPlayers,function(t){t.position=e,++e}),m.disableSubmit=!1}function d(e){p.push(e),m.availablePlayers.push(_.remove(m.addedPlayers,{_id:e._id})[0]),c()}function u(e){e.position=m.addedPlayers.length+1,m.addedPlayers.push(_.remove(m.availablePlayers,{_id:e._id})[0]),m.disableSubmit=!1}var p=[],m=this;m.availablePlayers=[],m.addedPlayers=[],m.updatePyramid=s,m.cancelUpdate=l,m.reorderPlayers=c,m.removePlayer=d,m.addPlayer=u,m.disableSubmit=!0,a()}t.$inject=["$scope","$filter","pyramidsService","challengesService","userService"],angular.module("app").directive("kpUpdatePlayers",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{competitionId:t}})}function n(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function r(){return e.get("/api/pyramids")}function i(t){return e.post("/api/pyramids/create",{pyramid:t})}function a(t){return e.post("/api/pyramids/update",{pyramid:t})}function o(t){return e.delete("/api/pyramids/delete",{params:{competitionId:t}})}function s(t,n,r){return e.post("/api/pyramids/swapPositions",{competitionId:t,challenger:n,opponent:r})}function l(t,n){return e.post("/api/pyramids/addPlayer",{competitionId:t,player:n})}function c(t,n){return e.post("/api/pyramids/addPlayerRequest",{competition:t,player:n})}function d(t,n,r){return e.post("/api/pyramids/removePlayer",{competitionId:t,removedPlayer:n,players:r})}function u(t,n){return e.post("/api/pyramids/approvePlayer",{competitionId:t,player:n})}function p(t,n){return e.post("/api/pyramids/denyPlayer",{competitionId:t,player:n})}var m={getPyramid:t,getPyramidsForUser:n,getPyramids:r,createPyramid:i,updatePyramid:a,deletePyramid:o,swapPositions:s,addPlayerToPyramid:l,addPlayerToPyramidRequest:c,removedPlayerFromPyramid:d,approvePendingPlayer:u,denyPendingPlayer:p};return m}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(e,t,n,r,i,a,o,s){function l(){n.competitionId?(p.competitionId=n.competitionId,c()):t.go("pyramids.myPyramids")}function c(){i.getPyramid(p.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",a.currentUser._id])?(p.isAdmin=!0,e.data.players=r("orderBy")(e.data.players,"position"),p.pyramid=e.data):t.go("pyramids.myPyramids")}),s.getCompletedChallengesByCompetition(p.competitionId).then(function(e){p.challenges=e.data})}function d(){i.getPyramid(p.competitionId).then(function(e){var t=e.data;t.restrictJoins=p.pyramid.restrictJoins,i.updatePyramid(t)})}function u(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){i.deletePyramid(p.competitionId).then(function(){t.go("pyramids.myPyramids")})})}var p=this;p.competitionId=null,p.updatePyramidRestrictJoins=d,p.deletePyramid=u,l(),e.$on("ws:pyramid_updated",function(e,t){p.competitionId===t.competitionId&&(o.info(t.description),c())}),e.$on("ws:pyramid_deleted",function(e,n){p.competitionId===n.competitionId&&(o.info(n.description),t.go("pyramids.myPyramids"))})}e.$inject=["$scope","$state","$stateParams","$filter","pyramidsService","identityService","notifyService","challengesService"],angular.module("app").controller("AdminCtrl",e)}(),function(){"use strict";function e(e,t,n,r){function i(){t.getAllUsers().then(function(e){u.availablePlayers=e.data});for(var e=0;e<d;e++)c.push(e*(e+1)/2+1)}function a(e){e.position=u.addedPlayers.length+1,u.addedPlayers.push(_.remove(u.availablePlayers,{_id:e._id})[0])}function o(e){u.availablePlayers.push(_.remove(u.addedPlayers,{_id:e._id})[0]),s()}function s(){var e=1;_.forEach(u.addedPlayers,function(t){t.position=e,++e})}function l(t){angular.forEach(u.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,position:e.position};t.players.push(n)}),t.admins=[{_id:r.currentUser._id,email:r.currentUser.username,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,primary:!0}];for(var i=0;i<c.length;i++)if(t.players.length<c[i]){t.levels=i;break}n.createPyramid(t).then(function(t){e.go("pyramids.view",{competitionId:t.data._id})})}var c=[],d=10,u=this;u.newPyramid={players:[],restrictJoins:!1},u.availablePlayers=[],u.addedPlayers=[],u.createPyramid=l,u.addPlayer=a,u.removePlayer=o,u.reorderPlayers=s,u.newPyramid.forfeitDays=1,i()}e.$inject=["$state","userService","pyramidsService","identityService"],angular.module("app").controller("CreatePyramidCtrl",e);
}(),function(){"use strict";function e(e,t,n,r,i){function a(){o()}function o(){s=[],l.activeChallenge=null,r.isAuthenticated()&&t.getPyramidsForUser(r.currentUser._id).then(function(e){l.pyramids=e.data,_.forEach(l.pyramids,function(e){s.push(e._id),n.getActiveChallengeByCompetitionByPlayer(e._id,r.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var s=[],l=this;l.activeChallenge=null,a(),e.$on("ws:pyramid_updated",function(e,t){s.indexOf(t.competitionId)>=0&&(i.info(t.description),o())})}e.$inject=["$scope","pyramidsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i){function a(){n.competitionId&&(o.competitionId=n.competitionId,r.getPyramid(o.competitionId).then(function(e){e.data?o.pyramid=e.data:t.go("pyramids.myPyramids")}))}var o=this;o.competitionId=null,o.pyramid=null,a(),e.$on("ws:pyramid_deleted",function(e,n){o.competitionId===n.competitionId&&(i.info(n.description),t.go("pyramids.myPyramids"))})}e.$inject=["$scope","$state","$stateParams","pyramidsService","notifyService"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getPyramids().then(function(e){n.pyramids=e.data})}var n=this;n.pyramids=[],t()}e.$inject=["pyramidsService"],angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(e,t,n,r,i,a){function o(){t.competitionId&&(l.competitionId=t.competitionId,s())}function s(){r.getPyramid(l.competitionId).then(function(e){e.data?(l.pyramid=e.data,_.forEach(l.pyramid.players,function(e){a.getPlayerResultsByCompetition(l.competitionId,e._id).then(function(t){e.results=t.data})})):n.go("pyramids.myPyramids")}),a.getCompletedChallengesByCompetition(l.competitionId).then(function(e){l.challenges=e.data})}var l=this;l.competitionId=null,l.pyramid={},l.playersResults=[],l.challenges=[],o(),e.$on("ws:pyramid_updated",function(e,t){l.competitionId===t.competitionId&&(i.info(t.description),s())}),e.$on("ws:pyramid_deleted",function(e,t){l.competitionId===t.competitionId&&(i.info(t.description),n.go("pyramids.myPyramids"))})}e.$inject=["$scope","$stateParams","$state","pyramidsService","notifyService","challengesService"],angular.module("app").controller("StatsCtrl",e)}(),function(){"use strict";function e(e){function t(){}var n=this;n.indentity=e,t()}e.$inject=["identityService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,r){var i=r.scrollaxis||"y",a=r.theme||"minimal-dark",o=r.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,a,i,o)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),r=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!r||r&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL3NlcnZpY2VzL2NoYWxsZW5nZXMuc2VydmljZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9oZWFkZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5kaXJlY3RpdmUuanMiLCJjb21tb24vZmlsdGVycy9vcmRlci1vYmplY3QtYnkuZmlsdGVyLmpzIiwiY29tbW9uL3NlcnZpY2VzL2FsZXJ0cy5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL2luZGVudGl0eS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL25vdGlmeS5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3Njcm9sbGJhci5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3NpZGViYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy93ZWJzb2NrZXQuc2VydmljZS5qcyIsImNvbW1vbi92aWV3cy9ob21lLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3BlbmRpbmctcGxheWVycy5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQtY29tcGFjdC5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQuZGlyZWN0aXZlLmpzIiwicHlyYW1pZHMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmRpcmVjdGl2ZS5qcyIsInB5cmFtaWRzL2NvbXBvbmVudHMvdXBkYXRlLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwicHlyYW1pZHMvc2VydmljZXMvcHlyYW1pZHMuc2VydmljZS5qcyIsInB5cmFtaWRzL3ZpZXdzL2FkbWluLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9jcmVhdGUtcHlyYW1pZC5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvbXktcHlyYW1pZHMuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWQuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9zdGF0cy5jb250cm9sbGVyLmpzIiwidXNlcnMvdmlld3MvdXNlci5jb250cm9sbGVyLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvc2Nyb2xsYmFyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3RvZ2dsZS1zdWJtZW51LmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3dhdmVzLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL2Zvcm1zL2ZnLWxpbmUuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWd1cmF0aW9uIiwiJGh0dHBQcm92aWRlciIsIiR1aWJUb29sdGlwUHJvdmlkZXIiLCIkcVByb3ZpZGVyIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiZ2V0Iiwib3B0aW9ucyIsImFwcGVuZFRvQm9keSIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiY29uZmlnIiwiQXBwQ3RybCIsIiRzdGF0ZSIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJ0b2dnbGVTaWRlYmFyTG9ja2VkIiwibG9ja2VkIiwic2V0IiwiYXBwQ3RybCIsInRoaXMiLCJsb2NrU2lkZWJhciIsImNvbnRyb2xsZXIiLCJjb25maWd1cmVSb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwicm91dGVSb2xlQ2hlY2tzIiwic3VwZXJBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIiwiYWRtaW4iLCJyZXF1aXJlQWRtaW4iLCJ1c2VyIiwicmVxdWlyZUF1dGgiLCJodG1sNU1vZGUiLCJvdGhlcndpc2UiLCJ3aGVuIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRlbnRAIiwicmVzb2x2ZSIsImF1dGgiLCJhdXRoU2VydmljZSIsImF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUiLCJhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlIiwiJGluamVjdCIsImFwcFJ1biIsIiRyb290U2NvcGUiLCJzaWRlYmFyU2VydmljZSIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImVycm9yIiwiZ28iLCJwcmV2aW91cyIsInByZXZQYXJhbXMiLCJzZXRTaWRlYmFyU3RhdHVzIiwicnVuIiwiJGh0dHAiLCIkcSIsInVzZXJTZXJ2aWNlIiwiaWRlbnRpdHlTZXJ2aWNlIiwibm90aWZ5U2VydmljZSIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2UiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwicmVhc29uIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsInZlcmlmeVVzZXIiLCJ1c2VySWQiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInBhcmFtcyIsImdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsiLCJyZXNldFBhc3N3b3JkIiwicHV0IiwiTG9naW5DdHJsIiwiYWN0aXZhdGUiLCJsb2dpbiIsInZtIiwiUGFzc3dvcmRSZXNldEN0cmwiLCIkc3RhdGVQYXJhbXMiLCJ2ZXJpZmllZCIsInJlc2V0UGFzc3dvcmRGb3JtIiwiY29uZmlybVBhc3N3b3JkIiwiUmVnaXN0ZXJDdHJsIiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiVmVyaWZpY2F0aW9uQ3RybCIsInZlcmlmeWluZyIsImtwQWN0aXZlQ2hhbGxlbmVnZXMiLCJkaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiY3RybEZ1bmMiLCJyZXN0cmljdCIsInNjb3BlIiwicHlyYW1pZCIsIiRzY29wZSIsImNoYWxsZW5nZXNTZXJ2aWNlIiwiJHdhdGNoIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlcyIsImNoYWxsZW5nZXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsIl9pZCIsImxlbmd0aCIsIl8iLCJmb3JFYWNoIiwiY2hhbGxlbmdlIiwidGltZUxpbWl0IiwiZXhwaXJlcyIsIm1vbWVudCIsImRpZmYiLCJjcmVhdGVkIiwiYWRkIiwia3BDb21wbGV0ZWRDaGFsbGVuZWdlcyIsImNvbXBldGl0aW9uSWQiLCJhbGxvd0RlbGV0ZSIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInNwbGljZSIsImtwUGxheWVyT3ZlcmFsbFJlc3VsdHMiLCJwbGF5ZXIiLCJhc3NpZ25wbGF5ZXJzVG9MZXZlbHMiLCJjYWxjdWxhdGVTdHJlYWsiLCJjYWxjdWF0ZVdpbkFuZExvc2VzIiwiYnJlYWtQb2ludHMiLCJpIiwibWF4TGV2ZWxzIiwicHVzaCIsImxldmVsIiwiaiIsInBvc2l0aW9uIiwiaW5kZXhPZiIsInN0cmVha1R5cGUiLCJzdHJlYWsiLCJjb250aW51ZVN0cmVhayIsInJlc3VsdHMiLCJjaGFsbGVuZ2VyIiwib3Bwb25lbnQiLCJ0eXBlIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsImNyZWF0ZUNoYWxsZW5nZSIsImNvbXBsZXRlQ2hhbGxlbmdlIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJwbGF5ZXJJZCIsImdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwibGltaXQiLCJkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJkZWxldGUiLCJnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbiIsImtwRm9vdGVyIiwiaW5kZW50aXR5Iiwia3BIZWFkZXIiLCJhbGVydHNTZXJ2aWNlIiwiZ2V0QWN0aXZlQWxlcnRzIiwiaGVhZGVyQ3RybCIsImFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyIiwiY2xlYXJBbGVydCIsImluZGV4IiwiY2xlYXJBbGxBbGVydHMiLCJjbGVhckFsbEFsZXJ0c0J5UGxheWVyIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJTdGF0dXMiLCJsZWZ0IiwiZ2V0U2lkZWJhclN0YXR1cyIsImUiLCJzb21lIiwia3BTaWRlYmFyIiwib3JkZXJPYmplY3RCeSIsImlucHV0IiwiYXR0cmlidXRlIiwiaXNPYmplY3QiLCJhcnJheSIsIm9iamVjdEtleSIsInNvcnQiLCJhIiwiYiIsInBhcnNlSW50IiwiYWxlcnRJZCIsIiR3aW5kb3ciLCJyb2xlcyIsImJvb3RzdHJhcHBlZFVzZXJPYmplY3QiLCJpbmZvIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsIndhcm5pbmciLCJpbnZlcnNlIiwibm90aWZ5RGVmYXVsdHMiLCJuZXdlc3Rfb25fdG9wIiwib2Zmc2V0IiwieCIsInkiLCJzY3JvbGxiYXJTZXJ2aWNlIiwibWFsaWh1U2Nyb2xsIiwic2VsZWN0b3IiLCJ0aGVtZSIsInNjcm9sbGF4aXMiLCJtb3VzZXdoZWVsYXhpcyIsIm1DdXN0b21TY3JvbGxiYXIiLCJzY3JvbGxJbmVydGlhIiwiYXhpcyIsIm1vdXNlV2hlZWwiLCJlbmFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXR1cyIsInJpZ2h0Iiwid2Vic29ja2V0U2VydmljZSIsIiR0aW1lb3V0Iiwid2Vic29ja2V0SG9zdCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiY29ubmVjdCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJyZXRyeSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCIkYnJvYWRjYXN0IiwidG9waWMiLCJvbmNsb3NlIiwicmV0cnlTZWNvbmRzIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJqc29uIiwic3RyaW5naWZ5IiwiSG9tZUN0cmwiLCJweXJhbWlkc1NlcnZpY2UiLCJnZXRQeXJhbWlkcyIsInB5cmFtaWRzIiwia3BQZW5kaW5nUGxheWVycyIsImFwcHJvdmVQZW5kaW5nUGxheWVyIiwicGxheWVycyIsImRlbnlQZW5kaW5nUGxheWVyIiwicGVuZGluZ1BsYXllcnMiLCJrcFB5cmFtaWRDb21wYWN0Iiwia3BQeXJhbWlkIiwicmVwbGFjZSIsIiRmaWx0ZXIiLCJtYXhQbGF5ZXJzIiwib3JkZXJQbGF5ZXJzIiwiZ2V0UGxheWVyc1N0YXR1cyIsImFzc2lnbkxldmVsc1RvUGxheWVycyIsImNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MiLCJmaWxsSW5FbXB0eUJsb2NrcyIsImN1cnJlbnRVc2VySXNBZG1pbiIsImN1cnJlbnRVc2VySXNQZW5kaW5nIiwiYWRtaW5zIiwiY3VycmVudFVzZXJJc09uUHlyYW1pZCIsImhhc0FjdGl2ZUNoYWxsZW5nZSIsImNsYXNzIiwiY3VycmVudFVzZXJQbGF5ZXIiLCJhY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCIsImZpbmQiLCJ0aW1lVG9FeHBpcmUiLCJmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcyIsImNyZWF0ZUJyZWFrUG9pbnRzIiwibGV2ZWxzIiwibnVtYmVyT2ZCbG9ja3MiLCJsYXN0IiwibnVtYmVyT2ZSZWFsUGxheWVycyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibGV2ZWxBYm92ZSIsImF2YWlsYWJsZUNoYWxsZW5nZXMiLCJhdmFpbGFibGUiLCJjb21wZXRpdGlvbk5hbWUiLCJuYW1lIiwiY29tcGxldGUiLCJmb3JmZWl0RGF5cyIsImVtYWlsIiwicHlyYW1pZE1lbnVUb2dnbGUiLCJ3aW5uZXJJc0N1cnJlbnRVc2VyIiwiZm9yZmVpdExvc2VyIiwic3dhcFBvc2l0aW9ucyIsInJlbW92aW5nQ3VycmVudFVzZXIiLCJyZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkIiwiY2hhbGxlbmdlRXhwaXJlZCIsImFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkIiwicmVzdHJpY3RKb2lucyIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJjbG9zZU9uQ2FuY2VsIiwiYWRkUGxheWVyVG9QeXJhbWlkUmVxdWVzdCIsImFkZFBsYXllclRvUHlyYW1pZCIsImNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkIiwiY29uZmlybUJ1dHRvbkNsYXNzIiwiZ2V0UHlyYW1pZCIsInAiLCJvcGVuUG9zaXRpb24iLCJyZW1vdmVkUGxheWVyIiwicmVtb3ZlIiwidXBkYXRlZFBsYXllcnMiLCJ1cGRhdGVkUGxheWVyIiwicmVtb3ZlZFBsYXllckZyb21QeXJhbWlkIiwicGxheWVyQ2xpY2siLCJyZWZyZXNoUHlyYW1pZCIsImNoYWxsZW5nZURldGFpbHMiLCJkZXNjcmlwdGlvbiIsImtwVXBkYXRlQWRtaW5zIiwiYWRkZWRBZG1pbnMiLCJjbG9uZURlZXAiLCJkaXNhYmxlU3VibWl0IiwidXNlcklzUHJpbWFyeUFkbWluIiwicHJpbWFyeSIsImdldEF2YWlsYWJsZUFkbWlucyIsInB5cmFtaWRBZG1pbiIsImF2YWlsYWJsZUFkbWluIiwiYXZhaWxhYmxlQWRtaW5zIiwidXBkYXRlUHlyYW1pZCIsImNhbmNlbFVwZGF0ZSIsInJlbW92ZUFkbWluIiwicmVtb3ZlZEFkbWlucyIsImFkZEFkbWluIiwia3BVcGRhdGVQbGF5ZXJzIiwiYWRkZWRQbGF5ZXJzIiwiZ2V0QXZhaWxhYmxlUGxheWVycyIsInB5cmFtaWRQbGF5ZXIiLCJhdmFpbGFibGVQbGF5ZXIiLCJhdmFpbGFibGVQbGF5ZXJzIiwicmVtb3ZlZFBsYXllcnMiLCJyZW9yZGVyUGxheWVycyIsInJlbW92ZVBsYXllciIsImFkZFBsYXllciIsImdldFB5cmFtaWRzRm9yVXNlciIsImNyZWF0ZVB5cmFtaWQiLCJkZWxldGVQeXJhbWlkIiwiY29tcGV0aXRpb24iLCJBZG1pbkN0cmwiLCJpc0FkbWluIiwidXBkYXRlUHlyYW1pZFJlc3RyaWN0Sm9pbnMiLCJ1cGRhdGVkUHlyYW1pZCIsIkNyZWF0ZVB5cmFtaWRDdHJsIiwibmV3UHlyYW1pZCIsIk15UHlyYW1pZHNDdHJsIiwibXlQeXJhbWlkcyIsImFjdGl2ZUNoYWxsZW5nZSIsIlB5cmFtaWRDdHJsIiwiUHlyYW1pZHNDdHJsIiwiU3RhdHNDdHJsIiwicGxheWVyc1Jlc3VsdHMiLCJVc2VyQ3RybCIsImNPdmVyZmxvdyIsImxpbmtGdW5jIiwiZWxlbWVudCIsImF0dHJzIiwiaGFzQ2xhc3MiLCJsaW5rIiwidG9nZ2xlU3VibWVudSIsImVsIiwiY2xpY2siLCJuZXh0Iiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsIndhdmVzRWZmZWN0IiwiV2F2ZXMiLCJhdHRhY2giLCJpbml0IiwiZmdMaW5lIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzRmxvYXRMYWJlbCIsImZvY3VzIiwiYWRkQ2xhc3MiLCJibHVyIiwidmFsIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFlBQ0Esc0JBQ0EsYUFDQSx3QkFDQSxRQUNBLHFCQUNBLHdCQUNBLHNCQ1ZBLHdCQUlBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFGLEVBQUFHLFNBQUFDLFFBQUFDLE1BQ0FMLEVBQUFHLFNBQUFDLFFBQUFDLFFBR0FMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEscUJBQUEsZ0NBRUFMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEsaUJBQUEsV0FDQUwsRUFBQUcsU0FBQUMsUUFBQUMsSUFBQSxPQUFBLFdBRUFKLEVBQUFLLFNBQUFDLGNBQUEsSUFDQUwsRUFBQU0sNEJBQUEsa0VBZEFYLFFBQUFDLE9BQUEsT0FBQVcsT0FBQVYsTUNGQSx1QkFJQSxTQUFBVyxHQUFBQyxFQUFBQyxHQVFBLFFBQUFDLEdBQUFDLEdBQ0FGLEVBQUFHLElBQUEsZ0JBQUFELEdBUkEsR0FBQUUsR0FBQUMsSUFFQUQsR0FBQUwsT0FBQUEsRUFFQUssRUFBQUUsWUFBQU4sRUFBQVAsSUFBQSxpQkFDQVcsRUFBQUgsb0JBQUFBLDZDQVJBaEIsUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxVQUFBVCxNQ0ZB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QUFBclQsSUFDQUcsU0FBQSxJQUNBOFIsS0FBQUosRUFHQSxPQUFBN1IsR0FWQXRILFFBQ0FDLE9BQUEsT0FDQXFILFVBQUEsU0FBQTZTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkuYm9vdHN0cmFwJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJyxcbiAgJ0xvY2FsU3RvcmFnZU1vZHVsZScsXG4gICdhbmd1bGFyLXNvcnRhYmxlLXZpZXcnLFxuICAnYW5ndWxhci52ZXJ0aWxpemUnXG5dKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCAnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYXRpb24oJGh0dHBQcm92aWRlciwgJHVpYlRvb2x0aXBQcm92aWRlciwgJHFQcm92aWRlcikge1xuICAgIC8vaW5pdGlhbGl6ZSBnZXQgaWYgbm90IHRoZXJlXG4gICAgaWYgKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KSB7XG4gICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0ge307ICAgIFxuICAgIH0gICAgXG4gICAgLy9kaXNhYmxlIElFIGFqYXggcmVxdWVzdCBjYWNoaW5nXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnSWYtTW9kaWZpZWQtU2luY2UnXSA9ICdGcmksIDAxIEphbiAyMDE2IDA1OjAwOjAwIEdNVCc7XG4gICAgLy8gZXh0cmFcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydDYWNoZS1Db250cm9sJ10gPSAnbm8tY2FjaGUnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ1ByYWdtYSddID0gJ25vLWNhY2hlJztcblxuICAgICR1aWJUb29sdGlwUHJvdmlkZXIub3B0aW9ucyh7IGFwcGVuZFRvQm9keTogdHJ1ZSB9KTtcbiAgICAkcVByb3ZpZGVyLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKGZhbHNlKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XG5cbiAgZnVuY3Rpb24gQXBwQ3RybCgkc3RhdGUsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcbiAgICB2YXIgYXBwQ3RybCA9IHRoaXM7XG4gICAgLy8gVXNlIHRoaXMgZm9yIFNpZGViYXIgbWVudVxuICAgIGFwcEN0cmwuJHN0YXRlID0gJHN0YXRlO1xuICAgIC8vIExvY2sgdGhlIHNpZGViYXIgaW4gdmlld1xuICAgIGFwcEN0cmwubG9ja1NpZGViYXIgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnc2lkZWJhckxvY2tlZCcpO1xuICAgIGFwcEN0cmwudG9nZ2xlU2lkZWJhckxvY2tlZCA9IHRvZ2dsZVNpZGViYXJMb2NrZWQ7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyTG9ja2VkKGxvY2tlZCkge1xuICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ3NpZGViYXJMb2NrZWQnLCBsb2NrZWQpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJlUm91dGVzKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmVSb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB2YXIgcm91dGVSb2xlQ2hlY2tzID0ge1xuICAgICAgc3VwZXJBZG1pbjogcmVxdWlyZVN1cGVyQWRtaW4sXG4gICAgICBhZG1pbjogcmVxdWlyZUFkbWluLFxuICAgICAgdXNlcjogcmVxdWlyZUF1dGhcbiAgICB9O1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy8gZm9yIGFueSB1bm1hdGNoZWQgdXJsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJy9weXJhbWlkcy8nLCAnL3B5cmFtaWRzJyk7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbW1vbi92aWV3cy9ob21lLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMnLCB7XG4gICAgICAgIHVybDogJy9weXJhbWlkcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHlyYW1pZHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvcHlyYW1pZHMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy5teVB5cmFtaWRzJywge1xuICAgICAgICB1cmw6ICcvbXktcHlyYW1pZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeVB5cmFtaWRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL215LXB5cmFtaWRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLnZpZXcnLCB7XG4gICAgICAgIHVybDogJy92aWV3Lzpjb21wZXRpdGlvbklkJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHlyYW1pZEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9weXJhbWlkLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMuc3RhdHMnLCB7XG4gICAgICAgIHVybDogJy9zdGF0cy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1N0YXRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL3N0YXRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMuYWRtaW4nLCB7XG4gICAgICAgIHVybDogJy9hZG1pbi86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0FkbWluQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL2FkbWluLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLmNyZWF0ZScsIHtcbiAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NyZWF0ZVB5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvY3JlYXRlLXB5cmFtaWQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgndXNlcicsIHtcbiAgICAgICAgdXJsOiAnL3VzZXInLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndXNlcnMvdmlld3MvdXNlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9sb2dpbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3JlZ2lzdGVyLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgndmVyaWZ5Jywge1xuICAgICAgICB1cmw6ICcvdmVyaWZpY2F0aW9uJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWZXJpZmljYXRpb25DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvdmVyaWZpY2F0aW9uLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgndmVyaWZpY2F0aW9uJywge1xuICAgICAgICB1cmw6ICcvdmVyaWZpY2F0aW9uLzp1c2VySWQvOnZlcmlmaWNhdGlvblRva2VuJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWZXJpZmljYXRpb25DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvdmVyaWZpY2F0aW9uLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncGFzc3dvcmQtcmVzZXQtcmVxdWVzdCcsIHtcbiAgICAgICAgdXJsOiAnL3Bhc3N3b3JkLXJlc2V0JyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQYXNzd29yZFJlc2V0Q3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3Bhc3N3b3JkLXJlc2V0Lmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncGFzc3dvcmQtcmVzZXQnLCB7XG4gICAgICAgIHVybDogJy9wYXNzd29yZC1yZXNldC86dXNlcklkLzp2ZXJpZmljYXRpb25Ub2tlbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3dvcmRSZXNldEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICByZXF1aXJlQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVTdXBlckFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZVN1cGVyQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnc3VwZXItYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVBdXRoLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUF1dGgoYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLnJ1bihhcHBSdW4pO1xuXG4gIGZ1bmN0aW9uIGFwcFJ1bigkcm9vdFNjb3BlLCAkc3RhdGUsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgaWYgKGVycm9yID09PSAnbm90IGF1dGhvcml6ZWQnKSB7XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gdG9TdGF0ZTtcbiAgICAgICAgJHN0YXRlLnByZXZQYXJhbXMgPSB0b1BhcmFtcztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNpZGViYXJTZXJ2aWNlLnNldFNpZGViYXJTdGF0dXMoZmFsc2UpO1xuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRzdGF0ZSwgJGh0dHAsICRxLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBhdXRoZW50aWNhdGVVc2VyOiBhdXRoZW50aWNhdGVVc2VyLFxuICAgICAgY3JlYXRlVXNlcjogY3JlYXRlVXNlcixcbiAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSxcbiAgICAgIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGU6IGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGVcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywge1xuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICd1bnZlcmlmaWVkJykge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKCd1bnZlcmlmaWVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB7XG4gICAgICAgIHVzZXJEYXRhOiB1c2VyRGF0YVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWFzb24gPT09ICdFcnJvcjogRHVwbGljYXRlIFVzZXJuYW1lJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCBhbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhhdCBlbWFpbCBhZGRyZXNzLicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7XG4gICAgICAgIGxvZ291dDogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgdXNlclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHVzZXJTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRBbGxVc2VyczogZ2V0QWxsVXNlcnMsXG4gICAgICB2ZXJpZnlVc2VyOiB2ZXJpZnlVc2VyLFxuICAgICAgZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluazogZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayxcbiAgICAgIHJlc2V0UGFzc3dvcmQ6IHJlc2V0UGFzc3dvcmRcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJykudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmVyaWZ5VXNlcih1c2VySWQsIHZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXIvdmVyaWZpY2F0aW9uJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICB2ZXJpZmljYXRpb25Ub2tlbjogdmVyaWZpY2F0aW9uVG9rZW5cbiAgICAgICAgfVxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXIvcGFzc3dvcmQvbGluaycsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgICAgIH1cbiAgICAgIH0pOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRQYXNzd29yZCh1c2VySWQsIHZlcmlmaWNhdGlvblRva2VuLCBwYXNzd29yZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS91c2VyL3Bhc3N3b3JkL3Jlc2V0Jywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW46IHZlcmlmaWNhdGlvblRva2VuLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pOyAgXG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIExvZ2luQ3RybCk7XG5cbiAgZnVuY3Rpb24gTG9naW5DdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmxvZ2luID0gbG9naW47XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1VzZXJuYW1lIC8gcGFzc3dvcmQgY29tYmluYWl0b24gaW5jb3JyZWN0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgPT09ICd1bnZlcmlmaWVkJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1lvdSBtdXN0IHZlcmlmeSB5b3VyIGVtYWlsIGJlZm9yZSB5b3UgY2FuIGxvZ2luJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCRzdGF0ZS5wcmV2aW91cykge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCRzdGF0ZS5wcmV2aW91cywgJHN0YXRlLnByZXZQYXJhbXMpO1xuICAgICAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gbnVsbDtcbiAgICAgICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUGFzc3dvcmRSZXNldEN0cmwnLCBQYXNzd29yZFJlc2V0Q3RybCk7XG5cbiAgZnVuY3Rpb24gUGFzc3dvcmRSZXNldEN0cmwoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBhdXRoU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS51c2VybmFtZSA9ICcnO1xuICAgIHZtLnZlcmlmaWVkID0gZmFsc2U7XG4gICAgdm0ucmVzZXRQYXNzd29yZEZvcm0gPSB7fTtcbiAgICB2bS5nZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rID0gZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluaztcbiAgICB2bS5yZXNldFBhc3N3b3JkID0gcmVzZXRQYXNzd29yZDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9IGVsc2UgaWYgKCRzdGF0ZVBhcmFtcy51c2VySWQgJiYgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnZlcmlmeVVzZXIoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKSB7XG4gICAgICB1c2VyU2VydmljZS5nZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rKHVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdDb3VsZCBub3QgZmluZCB0aGF0IGVtYWlsIGFkZHJlc3MnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLnN1Y2Nlc3MoJ1BsZWFzZSBjaGVjayB5b3VyIGVtYWlsIGZvciBhIHBhc3N3b3JkIHJlc2V0IGxpbmsnKTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChyZXNldFBhc3N3b3JkRm9ybSkge1xuICAgICAgaWYgKHJlc2V0UGFzc3dvcmRGb3JtLnBhc3N3b3JkICE9PSByZXNldFBhc3N3b3JkRm9ybS5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1c2VyU2VydmljZS5yZXNldFBhc3N3b3JkKCRzdGF0ZVBhcmFtcy51c2VySWQsICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbiwgcmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIocmVzcG9uc2UuZGF0YS51c2VybmFtZSwgcmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgUmVnaXN0ZXJDdHJsKTtcblxuICBmdW5jdGlvbiBSZWdpc3RlckN0cmwoJHN0YXRlLCBhdXRoU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHt9XG5cbiAgICBmdW5jdGlvbiByZWdpc3RlcihuZXdVc2VyKSB7XG4gICAgICBpZiAobmV3VXNlci5wYXNzd29yZCAhPT0gbmV3VXNlci5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdXRoU2VydmljZS5jcmVhdGVVc2VyKG5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzdGF0ZS5nbygndmVyaWZ5Jyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdWZXJpZmljYXRpb25DdHJsJywgVmVyaWZpY2F0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gVmVyaWZpY2F0aW9uQ3RybCgkc3RhdGUsICRzdGF0ZVBhcmFtcywgdXNlclNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnZlcmlmaWVkID0gdW5kZWZpbmVkO1xuICAgIHZtLnZlcmlmeWluZyA9IGZhbHNlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy51c2VySWQgJiYgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKSB7XG4gICAgICAgIHZtLnZlcmlmeWluZyA9IHRydWU7XG4gICAgICAgIHZtLnZlcmlmaWVkID0gbnVsbDtcbiAgICAgICAgdXNlclNlcnZpY2UudmVyaWZ5VXNlcigkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0udmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BBY3RpdmVDaGFsbGVuZWdlcycsIGtwQWN0aXZlQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIGtwQWN0aXZlQ2hhbGxlbmVnZXMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvYWN0aXZlLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0ucHlyYW1pZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnB5cmFtaWQpIHtcbiAgICAgICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5weXJhbWlkLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBpZiAoY2hhbGxlbmdlcy5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksJ3MnKSkgKiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcENvbXBsZXRlZENoYWxsZW5lZ2VzJywga3BDb21wbGV0ZWRDaGFsbGVuZWdlcyk7XG5cbiAgZnVuY3Rpb24ga3BDb21wbGV0ZWRDaGFsbGVuZWdlcygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJyxcbiAgICAgICAgYWxsb3dEZWxldGU6ICc9JyxcbiAgICAgICAgY2hhbGxlbmdlczogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2NvbXBsZXRlZC1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgIHZtLmRlbGV0ZUNoYWxsZW5nZSA9IGRlbGV0ZUNoYWxsZW5nZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNoYWxsZW5nZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHZtLmNoYWxsZW5nZXMgJiYgdm0uY2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKSB7XG4gICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBjaGFsbGVuZ2UubG9zZXIgPSBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgPyAnb3Bwb25lbnQnIDogJ2NoYWxsZW5nZXInO1xuICAgICAgICBjaGFsbGVuZ2Uud2hlbkNvbXBsZXRlZCA9IG1vbWVudChjaGFsbGVuZ2UuY29tcGxldGVkKS5jYWxlbmRhcihudWxsLCB7XG4gICAgICAgICAgc2FtZURheTogJ1tUb2RheV0nLFxuICAgICAgICAgIG5leHREYXk6ICdbVG9tb3Jyb3ddJyxcbiAgICAgICAgICBuZXh0V2VlazogJ2RkZGQnLFxuICAgICAgICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5XScsXG4gICAgICAgICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCcsXG4gICAgICAgICAgc2FtZUVsc2U6ICdERC9NTS9ZWVlZJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2VJZCwgJGluZGV4KSB7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVDaGFsbGVuZ2Uodm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlSWQpLnRoZW4gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uY2hhbGxlbmdlcy5zcGxpY2UoJGluZGV4LCAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BQbGF5ZXJPdmVyYWxsUmVzdWx0cycsIGtwUGxheWVyT3ZlcmFsbFJlc3VsdHMpO1xuXG4gIGZ1bmN0aW9uIGtwUGxheWVyT3ZlcmFsbFJlc3VsdHMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBwbGF5ZXI6ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9wbGF5ZXItb3ZlcmFsbC1yZXN1bHRzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubWF4TGV2ZWxzID0gMTA7XG4gICAgdm0ud2lucyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0ubG9zZXMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLnN0cmVhayA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICB2YWx1ZTogMFxuICAgIH07XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5wbGF5ZXIucmVzdWx0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnBsYXllcikge1xuICAgICAgICAgIGFzc2lnbnBsYXllcnNUb0xldmVscyh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1bGF0ZVN0cmVhayh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1YXRlV2luQW5kTG9zZXModm0ucGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXNzaWducGxheWVyc1RvTGV2ZWxzKHBsYXllcikge1xuICAgICAgLy8gRGV0ZXJtaW5lIGFsbCB0aGUgYnJlYWsgcG9pbnRzIHRvIGZpZ3VyZSBvdXQgbGV2ZWxzXG4gICAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubWF4TGV2ZWxzOyBpKyspIHtcbiAgICAgICAgYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBhbGwgcGxheWVycyB0byB0aGUgbG93ZXN0IGxldmVsXG4gICAgICBwbGF5ZXIubGV2ZWwgPSBicmVha1BvaW50cy5sZW5ndGg7XG4gICAgICAvLyBOb3cgY2hlY2sgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaXMgYXQgYSBoaWdoZXIgbGV2ZWxcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA8IGJyZWFrUG9pbnRzW2ogKyAxXSkge1xuICAgICAgICAgIHBsYXllci5sZXZlbCA9IGJyZWFrUG9pbnRzLmluZGV4T2YoYnJlYWtQb2ludHNbal0pICsgMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN0cmVhayhwbGF5ZXIpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHBsYXllcidzIGN1cnJlbnQgc3RyZWFrXG4gICAgICB2YXIgc3RyZWFrID0gMDtcbiAgICAgIHZhciBjb250aW51ZVN0cmVhayA9IHRydWU7XG4gICAgICB2YXIgc3RyZWFrVHlwZTtcbiAgICAgIF8uZm9yRWFjaChwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY29udGludWVTdHJlYWspIHtcbiAgICAgICAgICAvLyBXaW5uaW5nIFN0cmVha1xuICAgICAgICAgIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIGxvc2luZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgd2lubmluZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnbG9zaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICd3aW5uaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLy8gTG9zaW5nIFN0cmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSB3aW5uaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciBsb3Npbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ3dpbm5pbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ2xvc2luZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2bS5zdHJlYWsgPSB7XG4gICAgICAgICAgdHlwZTogc3RyZWFrVHlwZSxcbiAgICAgICAgICB2YWx1ZTogc3RyZWFrXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWF0ZVdpbkFuZExvc2VzKHBsYXllcikge1xuICAgICAgLy8gRmlndXJlIG91dCB3aW5zIGFuZCBsb3Nlc1xuICAgICAgdm0ud2lucy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLnRvdGFsID0gdm0ud2lucy5hc0NoYWxsZW5nZXIgKyB2bS53aW5zLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLndpbnMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMudG90YWwgPSB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgKyB2bS5sb3Nlcy5hc09wcG9uZW50O1xuXG4gICAgICB2bS5sb3Nlcy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2NoYWxsZW5nZXNTZXJ2aWNlJywgY2hhbGxlbmdlc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNoYWxsZW5nZXNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjcmVhdGVDaGFsbGVuZ2U6IGNyZWF0ZUNoYWxsZW5nZSxcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlOiBjb21wbGV0ZUNoYWxsZW5nZSxcbiAgICAgIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyLFxuICAgICAgZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyOiBkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIsXG4gICAgICBkZWxldGVDaGFsbGVuZ2U6IGRlbGV0ZUNoYWxsZW5nZSxcbiAgICAgIGdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uOiBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvblxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvY3JlYXRlJywge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBsZXRlJywgIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIGxpbWl0KSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGxldGVkL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBsaW1pdDogbGltaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uL3BsYXllci9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDaGFsbGVuZ2UoY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvY2hhbGxlbmdlcy9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIGNoYWxsZW5nZUlkOiBjaGFsbGVuZ2VJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL3Jlc3VsdHMvY29tcGV0aXRpb24vcGxheWVyJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcEZvb3RlcicsIGtwRm9vdGVyKTtcblxuICBmdW5jdGlvbiBrcEZvb3RlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcEhlYWRlcicsIGtwSGVhZGVyKTtcblxuICBmdW5jdGlvbiBrcEhlYWRlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnaGVhZGVyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgc2lkZWJhclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIGFsZXJ0c1NlcnZpY2UpIHtcbiAgICB2YXIgaGVhZGVyQ3RybCA9IHRoaXM7XG4gICAgaGVhZGVyQ3RybC5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgaGVhZGVyQ3RybC5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgaGVhZGVyQ3RybC5zaWRlYmFyU3RhdHVzID0gc2lkZWJhclNlcnZpY2UuZ2V0U2lkZWJhclN0YXR1cygpO1xuICAgIGhlYWRlckN0cmwudG9nZ2xlU2lkZWJhciA9IHRvZ2dsZVNpZGViYXI7XG4gICAgaGVhZGVyQ3RybC5jbGVhckFsZXJ0ID0gY2xlYXJBbGVydDtcbiAgICBoZWFkZXJDdHJsLmNsZWFyQWxsQWxlcnRzID0gY2xlYXJBbGxBbGVydHM7XG4gICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgJHNjb3BlLiR3YXRjaCgnaGVhZGVyQ3RybC5pbmRlbnRpdHkuY3VycmVudFVzZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzKCkge1xuICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgYWxlcnRzU2VydmljZS5nZXRBY3RpdmVBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChhbGVydHMpIHtcbiAgICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IGFsZXJ0cy5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsZXJ0KGNsZWFyQWxlcnQsIGluZGV4KSB7XG4gICAgICBhbGVydHNTZXJ2aWNlLmNsZWFyQWxlcnQoY2xlYXJBbGVydCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckN0cmwuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsbEFsZXJ0cygpIHtcbiAgICAgIGFsZXJ0c1NlcnZpY2UuY2xlYXJBbGxBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKCFoZWFkZXJDdHJsLnNpZGViYXJTdGF0dXMubGVmdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnVwZGF0ZV9hbGVydHMnLCBmdW5jdGlvbiAoZSwgYWxlcnRzKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIF8uc29tZShhbGVydHMsIFsndXNlcklkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcFNpZGViYXInLCBrcFNpZGViYXIpO1xuXG4gIGZ1bmN0aW9uIGtwU2lkZWJhcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnc2lkZWJhckN0cmwnLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSwgc2lkZWJhclNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgdm0uc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5maWx0ZXIoJ29yZGVyT2JqZWN0QnknLCBvcmRlck9iamVjdEJ5KTtcblxuICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGF0dHJpYnV0ZSkge1xuICAgICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KGlucHV0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIGZvciAodmFyIG9iamVjdEtleSBpbiBpbnB1dCkge1xuICAgICAgICBhcnJheS5wdXNoKGlucHV0W29iamVjdEtleV0pO1xuICAgICAgfVxuXG4gICAgICBhcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGEgPSBwYXJzZUludChhW2F0dHJpYnV0ZV0pO1xuICAgICAgICBiID0gcGFyc2VJbnQoYlthdHRyaWJ1dGVdKTtcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhbGVydHNTZXJ2aWNlJywgYWxlcnRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gYWxlcnRzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXI6IGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyLFxuICAgICAgY2xlYXJBbGVydDogY2xlYXJBbGVydCxcbiAgICAgIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXI6IGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHVuY2xlYXJlZCBhbGVydHMgZm9yIGEgdXNlciBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYWxlcnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FsZXJ0cy8nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgYWxlcnRzIGFzIGNsZWFyZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGVydElkIGlkIGZvciB0aGUgYWxlcnRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxlcnQoYWxlcnRJZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9hbGVydC9jbGVhcicsIHtcbiAgICAgICAgYWxlcnRJZDogYWxlcnRJZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFya3MgYWxsIHVudmlld2VkIGFsZXJ0cyBhcyB2aWV3ZWQgZm9yIGEgdXNlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL2FsZXJ0cy9jbGVhcicsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdpZGVudGl0eVNlcnZpY2UnLCBpZGVudGl0eVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGlkZW50aXR5U2VydmljZSgkd2luZG93KSB7XG4gICAgdmFyIGN1cnJlbnRVc2VyO1xuICAgIGlmICgkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3QgIT09IG51bGwpIHtcbiAgICAgIGN1cnJlbnRVc2VyID0gJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0O1xuICAgIH1cbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkLFxuICAgICAgaXNBdXRob3JpemVkOiBpc0F1dGhvcml6ZWRcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQocm9sZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2Yocm9sZSkgPiAtMTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnbm90aWZ5U2VydmljZScsIG5vdGlmeVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIG5vdGlmeVNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBpbmZvOiBpbmZvLFxuICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXG4gICAgICBlcnJvcjogZXJyb3IsXG4gICAgICBpbnZlcnNlOiBpbnZlcnNlXG4gICAgfTtcblxuICAgICQubm90aWZ5RGVmYXVsdHMoe1xuICAgICAgbmV3ZXN0X29uX3RvcDogdHJ1ZSxcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB4OiAyMCxcbiAgICAgICAgeTogODVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnaW5mbydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2RhbmdlcidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludmVyc2UobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2ludmVyc2UnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnc2Nyb2xsYmFyU2VydmljZScsIHNjcm9sbGJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNjcm9sbGJhclNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBtYWxpaHVTY3JvbGw6IG1hbGlodVNjcm9sbFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIG1hbGlodVNjcm9sbChzZWxlY3RvciwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKSB7XG4gICAgICAkKHNlbGVjdG9yKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAgICAgdGhlbWU6IHRoZW1lLFxuICAgICAgICBzY3JvbGxJbmVydGlhOiAxMDAsXG4gICAgICAgIGF4aXM6IHNjcm9sbGF4aXMsXG4gICAgICAgIG1vdXNlV2hlZWw6IHtcbiAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgYXhpczogbW91c2V3aGVlbGF4aXMsXG4gICAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnd2Vic29ja2V0U2VydmljZScsIHdlYnNvY2tldFNlcnZpY2UpLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTtcblxuICBmdW5jdGlvbiB3ZWJzb2NrZXRTZXJ2aWNlKCRyb290U2NvcGUsICR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIGNvbm5lY3Rpb247XG4gICAgdmFyIHJldHJ5U2Vjb25kcyA9IFszLCAxMCwgMTAwLCAxMDAwXTtcbiAgICB2YXIgcmV0cnkgPSAwO1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY29ubmVjdDogY29ubmVjdCxcbiAgICAgIHNlbmQ6IHNlbmRcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgICBjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh3ZWJzb2NrZXRIb3N0KCkpO1xuXG4gICAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHJ5ID0gMDtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuXG4gICAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZXRyeSA8IHJldHJ5U2Vjb25kcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNsb3NlZC4gUmVjb25uZWN0aW5nLi4uJyk7XG4gICAgICAgICAgJHRpbWVvdXQoY29ubmVjdCwgcmV0cnlTZWNvbmRzW3JldHJ5XSoxMDAwKTtcbiAgICAgICAgICByZXRyeSArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXZpbmcgdXAgb24gV2ViU29ja2V0Jyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VuZCh0b3BpYywgZGF0YSkge1xuICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgICBjb25uZWN0aW9uLnNlbmQoanNvbik7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgSG9tZUN0cmwpO1xuXG4gIGZ1bmN0aW9uIEhvbWVDdHJsKHB5cmFtaWRzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucHlyYW1pZHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkcygpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BQZW5kaW5nUGxheWVycycsIGtwUGVuZGluZ1BsYXllcnMpO1xuXG4gIGZ1bmN0aW9uIGtwUGVuZGluZ1BsYXllcnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3BlbmRpbmctcGxheWVycy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhweXJhbWlkc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnBlbmRpbmdQbGF5ZXJzID0gW107XG4gICAgdm0uYXBwcm92ZVBlbmRpbmdQbGF5ZXIgPSBhcHByb3ZlUGVuZGluZ1BsYXllcjtcbiAgICB2bS5kZW55UGVuZGluZ1BsYXllciA9IGRlbnlQZW5kaW5nUGxheWVyO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIGFwcHJvdmVQZW5kaW5nUGxheWVyKHBsYXllcikge1xuICAgICAgcGxheWVyLnBvc2l0aW9uID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aCArIDE7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuYXBwcm92ZVBlbmRpbmdQbGF5ZXIodm0ucHlyYW1pZC5faWQsIHBsYXllcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVueVBlbmRpbmdQbGF5ZXIocGxheWVyKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZGVueVBlbmRpbmdQbGF5ZXIodm0ucHlyYW1pZC5faWQsIHBsYXllcik7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcFB5cmFtaWRDb21wYWN0Jywga3BQeXJhbWlkQ29tcGFjdCk7XG5cbiAgZnVuY3Rpb24ga3BQeXJhbWlkQ29tcGFjdCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHB5cmFtaWQ6ICc9JyxcblxuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3B5cmFtaWRzL2NvbXBvbmVudHMvcHlyYW1pZC1jb21wYWN0Lmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCkge1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twUHlyYW1pZCcsIGtwUHlyYW1pZCk7XG5cbiAgZnVuY3Rpb24ga3BQeXJhbWlkKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy9weXJhbWlkLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHB5cmFtaWQ6ICc9J1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBweXJhbWlkc1NlcnZpY2UsICRmaWx0ZXIsIG5vdGlmeVNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgbWF4TGV2ZWxzID0gMTA7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgIHZtLmxldmVscyA9IFtdO1xuICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IG51bGw7XG4gICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IGZhbHNlO1xuICAgIHZtLmNyZWF0ZUNoYWxsZW5nZSA9IGNyZWF0ZUNoYWxsZW5nZTtcbiAgICB2bS5jb21wbGV0ZUNoYWxsZW5nZSA9IGNvbXBsZXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNoYWxsZW5nZUV4cGlyZWQgPSBjaGFsbGVuZ2VFeHBpcmVkO1xuICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0ge307XG4gICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICB2bS5hZGRDdXJyZW50VXNlclRvUHlyYW1pZCA9IGFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkO1xuICAgIHZtLmNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkID0gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQ7XG4gICAgdm0ucGxheWVyQ2xpY2sgPSBwbGF5ZXJDbGljaztcbiAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gMDtcbiAgICB2bS5tYXhQbGF5ZXJzID0gMDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIC8vIERldGVybWluZSB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGxheWVycyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGV2ZWxzXG4gICAgICBmb3IgKHZhciBpID0gbWF4TGV2ZWxzOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIHZtLm1heFBsYXllcnMgKz0gaTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLiR3YXRjaCgndm0ucHlyYW1pZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnB5cmFtaWQpIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gdm0ucHlyYW1pZC5faWQ7XG4gICAgICAgICAgb3JkZXJQbGF5ZXJzKCk7XG4gICAgICAgICAgZ2V0UGxheWVyc1N0YXR1cygpO1xuICAgICAgICAgIGFzc2lnbkxldmVsc1RvUGxheWVycygpO1xuICAgICAgICAgIGNhbGN1bGF0ZVB5cmFtaWRCbG9ja3MoKTtcbiAgICAgICAgICBmaWxsSW5FbXB0eUJsb2NrcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcmRlciB0aGUgcGxheWVycyBieSB0aGUgcG9zaXRpb24gcHJvcGVydHkgb2YgdGhlIHBsYXllcnMgYXJyYXkgaW4gdGhlIHB5cmFtaWQgb2JqZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gb3JkZXJQbGF5ZXJzKCkge1xuICAgICAgdm0ucHlyYW1pZC5wbGF5ZXJzID0gJGZpbHRlcignb3JkZXJCeScpKHZtLnB5cmFtaWQucGxheWVycywgJ3Bvc2l0aW9uJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCBpZiBlYWNoIHBsYXllciBpcyBhbHJlYWR5IGNoYWxsZW5nZWQgYW5kIHNldCBzb21lIHN0dWZmXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UGxheWVyc1N0YXR1cygpIHtcbiAgICAgIFxuICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIHB5cmFtaWRcbiAgICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gXy5zb21lKHZtLnB5cmFtaWQuYWRtaW5zLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIGEgcGVuZGluZyByZXF1ZXN0IHRvIGpvaW5cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBfLnNvbWUodm0ucHlyYW1pZC5wZW5kaW5nUGxheWVycywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICB9XG5cbiAgICAgIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQgPSBmYWxzZTtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IHVzZXIgaWYgdGhleSBhcmUgb24gdGhpcyBweXJhbWlkIGFuZCBzZXQgc29tZSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgcGxheWVyLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkge1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQgPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdjdXJyZW50LXVzZXInO1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gcGxheWVyO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkID8gY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQgOiBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBfLmZvckVhY2goY2hhbGxlbmdlcy5kYXRhLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG5cbiAgICAgICAgICB2YXIgY2hhbGxlbmdlciA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCB9KTtcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNsYXNzID0gJ3VuYXZhaWxhYmxlJztcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnY2hhbGxlbmdlcidcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9wcG9uZW50ID0gXy5maW5kKHZtLnB5cmFtaWQucGxheWVycywgeyAnX2lkJzogY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCB9KTtcbiAgICAgICAgICBvcHBvbmVudC5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdvcHBvbmVudCdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gVHJhY2sgd2hlbiB0aGUgY2hhbGxlbmdlIHdpbGwgZXhwaXJlXG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksICdzJykgKiAtMTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgaGFzIG5vdCB5ZXQgZXhwaXJlZCBkaXNwbGF5IGEgY291bnRkb3duIG9uIHRoZSBvcHBvbmVudFxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlLmV4cGlyZXMgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBweXJhbWlkIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBvcHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm93IHRoYXQgd2Uga25vdyB3aGljaCBwbGF5ZXJzIGFyZSBpbiBjaGFsbGVuZ2VzIGFuZCB3aGljaCBhcmVuJ3RcbiAgICAgICAgLy8gZmluZCB0aGUgYXZhaWxhYmxlIGNoYWxsZW5nZXMgZm9yIHRoaXMgdXNlclxuICAgICAgICBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGVyZSB0byBzdGFydCBlYWNoIG5ldyByb3cgb24gdGhlIHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCcmVha1BvaW50cygpIHtcbiAgICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heExldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBicmVhayBwb2ludHNcbiAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hvIG90aGVyIHBsYXllcnMgY2FuIGNoYWxsZW5nZVxuICAgIGZ1bmN0aW9uIGFzc2lnbkxldmVsc1RvUGxheWVycygpIHtcbiAgICAgIHZhciBsZXZlbCA9IDA7XG4gICAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICAgIGNyZWF0ZUJyZWFrUG9pbnRzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodm0uYnJlYWtQb2ludHMuaW5kZXhPZihpICsgMSkgPiAtMSkge1xuICAgICAgICAgIGxldmVsICs9IDE7XG4gICAgICAgICAgLy8gU2V0IHRoZSBudW1iZXIgb2YgdG90YWwgbGV2ZWxzXG4gICAgICAgICAgdm0ubGV2ZWxzLnB1c2gobGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdpdmUgZWFjaCBwbGF5ZXIgYSBsZXZlbFxuICAgICAgICB2bS5weXJhbWlkLnBsYXllcnNbaV0ubGV2ZWwgPSBsZXZlbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIb3cgbWFueSB0b3RhbCBibG9ja3MgaW4gdGhpcyBweXJhbWlkXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHlyYW1pZEJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSBfLmxhc3Qodm0ubGV2ZWxzKTsgaSA+IDA7IGktLSkge1xuICAgICAgICB2bS5udW1iZXJPZkJsb2NrcyArPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbGwgb3V0IHRoZSByZW1haW5pbmcgYmxvY2tzIG9mIHRoZSBweXJhbWlkIHdpdGggZW1wdHkgYmxvY2tzXG4gICAgZnVuY3Rpb24gZmlsbEluRW1wdHlCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5weXJhbWlkLnBsYXllcnMubGVuZ3RoOyBpIDwgdm0ubnVtYmVyT2ZCbG9ja3M7IGkrKykge1xuICAgICAgICB2bS5weXJhbWlkLnBsYXllcnMucHVzaCh7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnRW1wdHknLFxuICAgICAgICAgIGxhc3ROYW1lOiAnU3BvdCcsXG4gICAgICAgICAgcG9zaXRpb246IDk5LFxuICAgICAgICAgIGNsYXNzOiAnZW1wdHknXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gV2UgaGF2ZSB0byBnaXZlIGxldmVscyB0byB0aGUgbmV3IGVtcHR5IHNwb3RzXG4gICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIGFsbCB0aGUgcGxheWVycyB0aGF0IGFyZSBhdmFpbGFibGUgdG8gYmUgY2hhbGxlbmdlZCBieSB0aGlzIHVzZXJcbiAgICBmdW5jdGlvbiBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpIHtcbiAgICAgIGlmICh2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkICYmICF2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgdmFyIGxldmVsQWJvdmUgPSB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCA+IDEgPyB2bS5jdXJyZW50VXNlclBsYXllci5sZXZlbCAtIDEgOiBudWxsO1xuICAgICAgICBfLmZvckVhY2godm0ucHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgaWYgKHBsYXllci5sZXZlbCA9PT0gbGV2ZWxBYm92ZSAmJiBwbGF5ZXIucG9zaXRpb24gIT09IDk5ICYmIHBsYXllci5jbGFzcyAhPT0gJ3VuYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IHRydWU7XG4gICAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdhdmFpbGFibGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHBsYXllcikge1xuICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB0aGF0IGlzIG5vdCBhIHZhbGlkIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgY29tcGV0aXRpb25OYW1lOiB2bS5weXJhbWlkLm5hbWUsXG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5weXJhbWlkLmZvcmZlaXREYXlzLFxuICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgIF9pZDogdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZW1haWw6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmVtYWlsLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wcG9uZW50OiB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBlbWFpbDogcGxheWVyLmVtYWlsLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIHB5cmFtaWRcbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY3JlYXRlQ2hhbGxlbmdlKGNoYWxsZW5nZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSB3aW5uZXJJc0N1cnJlbnRVc2VyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmVySXNDdXJyZW50VXNlciwgZm9yZmVpdCwgZm9yZmVpdExvc2VyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdExvc2VyIHx8IHZtLmN1cnJlbnRVc2VyUGxheWVyO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGlmIChmb3JmZWl0TG9zZXIuY2hhbGxlbmdlLnBvc2l0aW9uID09PSAnb3Bwb25lbnQnKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRmlndXJlIG91dCB3aG8gdGhlIHdpbm5lciB3YXMgdG8gc3RvcmUgaW4gdGhlIGNoYWxsZW5nZSByZWNvcmRcbiAgICAgICAgfSBlbHNlIGlmICh3aW5uZXJJc0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3dhcCBwb3NpdGlvbnMgYW5kIHRoZW4gY29tcGxldGUgdGhlIGNoYWxsZW5nZSBvciBqdXN0IGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgcHlyYW1pZFxuICAgICAgICBpZiAoc3dhcFBvc2l0aW9ucykge1xuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5zd2FwUG9zaXRpb25zKHZtLmNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50LCBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLnB5cmFtaWRNZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIGNvbXBsZXRlIGNoYWxsbmdlIGZ1bmN0aW9uIHdpdGggdGhlIGZvcmZlaXRpbmcgcGxheWVyXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGFsbGVuZ2VFeHBpcmVkKHBsYXllcikge1xuICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgcGxheWVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgY3VycmVudCB1c2VyIHRoZSBweXJhbWlkIFxuICAgICAqIGlmIHRoZXkncmUgbm90IGFscmVhZHkgb24gaXQgYW5kIHRoZXJlJ3Mgc3BhY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRDdXJyZW50VXNlclRvUHlyYW1pZCgpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgaWYgKHZtLm51bWJlck9mUmVhbFBsYXllcnMgPCB2bS5tYXhQbGF5ZXJzKSB7XG4gICAgICAgICAgdmFyIHBsYXllciA9IHtcbiAgICAgICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBlbWFpbDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLm51bWJlck9mUmVhbFBsYXllcnMgKyAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoIXZtLnB5cmFtaWQucmVzdHJpY3RKb2lucykge1xuICAgICAgICAgICAgc3dhbCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAnSm9pbiBDb21wZXRpdGlvbj8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnWW91XFwnbGwgYmUgYWRkZWQgdG8gdGhlIGJvdHRvbScsXG4gICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdKb2luJyxcbiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBweXJhbWlkc1NlcnZpY2UuYWRkUGxheWVyVG9QeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllcik7XG4gICAgICAgICAgICAgIHN3YWwoJ1dlbGNvbWUgQWJvYXJkIScsICdOb3cgc3RhcnQgZmlnaHRpbmcgeW91ciB3YXkgdG8gdGhlIHRvcCcsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgdGl0bGU6ICdTZW5kIEpvaW4gUmVxdWVzdD8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnVGhpcyBpcyBhIGNsb3NlZCBjb21wZXRpdGlvbiBzbyBhbiBhZG1pbiBtdXN0IGFwcHJvdmUgeW91ciByZXF1ZXN0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgUmVxdWVzdCcsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLmFkZFBsYXllclRvUHlyYW1pZFJlcXVlc3Qodm0ucHlyYW1pZCwgcGxheWVyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBzd2FsKCdSZXF1ZXN0IFNlbnQnLCAnWW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCBvbmNlIGFuIGFkbWluIHByb2Nlc3NlcyB0aGUgcmVxdWVzdC4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnU29ycnksIHRoaXMgcHlyYW1pZCBpcyBmdWxsJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnUGxlYXNlIGxvZ2luIHRvIGpvaW4gYSBjb21wZXRpdGlvbicpO1xuICAgICAgICAkc3RhdGUucHJldmlvdXMgPSAncHlyYW1pZHMudmlldyc7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0geydjb21wZXRpdGlvbklkJzogdm0uY29tcGV0aXRpb25JZH07XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpIHtcbiAgICAgIHN3YWwoe1xuICAgICAgICB0aXRsZTogJ0xlYXZlIFB5cmFtaWQ/JyxcbiAgICAgICAgdGV4dDogJ1lvdSB3aWxsIGxvc2UgeW91ciBzcG90IGFuZCBmb3JmZWl0IGFueSBhY3RpdmUgY2hhbGxlbmdlcy4nLFxuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcywgbGVhdmUnLFxuICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4tZGFuZ2VyJyxcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05vLCBzdGF5JyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKTtcbiAgICAgICAgc3dhbCgnT0ssIHlvdVxcJ3Igb3V0IScsICdZb3VcXCd2ZSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcHlyYW1pZC4nLCAnc3VjY2VzcycpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVXNlIHRoaXMgdG8gZW5mb3JjZSBvcmRlciBvZiBvcGVyYXRpb25zIHdoZW4gdGhlIHBsYXllciB0byBiZSByZW1vdmVkIGhhZCBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgdmFyIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBvbiB0aGlzIHB5cmFtaWRcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdm0uY3VycmVudFVzZXJJc09uUHlyYW1pZCkge1xuICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gdHJ1ZTtcbiAgICAgICAgLy8gRm9yZmVpdCBpZiB0aGV5IGhhdmUgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICBpZiAodm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgdm0uY3VycmVudFVzZXJQbGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIHdlIGFyZSByZW1vdmluZyB0aGVtIC4uLlxuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQgPSBmYWxzZTtcbiAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEdldCBhbiB1cGRhdGVkIGNvcHkgb2YgdGhlIHB5cmFtaWQgaW5jYXNlIGEgZm9yZmVpdCBoYXBwZW5lZFxuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSB1cGRhdGVkIGNvcHkgbG9jYWxseSBzbyBhcyBub3QgdG8gZGlzdHJ1cHQgdGhlIHB5cmFtaWRcbiAgICAgICAgICAgIC8vIHVudGlsIHRoZSBwbGF5ZXIgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgdmFyIHB5cmFtaWQgPSBwLmRhdGE7XG5cbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIHNwb3QgdGhleSB3ZXJlIGluIG9uIHRoZSBweXJhbWlkXG4gICAgICAgICAgICB2YXIgb3BlblBvc2l0aW9uID0gdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb247XG5cbiAgICAgICAgICAgIC8vIE1vdmUgYWxsIHRoZSBwbGF5ZXJzIHVwIDEgcG9zaXRpb24gdGhhdCB3ZXJlIGJlaGluZCB0aGUgcmVtb3ZlZCBwbGF5ZXJcbiAgICAgICAgICAgIF8uZm9yRWFjaChweXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA+PSBvcGVuUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucG9zaXRpb24gLT0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZWQgdGhlIHBsYXllciBmcm9tIHRoZSBweXJhbWlkXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZFBsYXllciA9IF8ucmVtb3ZlKHB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICByZXR1cm4gcGxheWVyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgYSBuZXcgYXJyYXkgb2YgYWxsIHRoZSBwbGF5ZXJzIHN0aWxsIG9uIHRoZSBweXJhbWlkXG4gICAgICAgICAgICAvLyBvbmx5IHVzZSB0aGUgcHJvcGVydGllcyB3ZSB3YW50IHRvIHN0b3JlIGluIHRoZSBweXJhbWlkIGRvY3VtZW50XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyAtIDE7ICsraSkge1xuICAgICAgICAgICAgICB2YXIgdXBkYXRlZFBsYXllciA9IHtcbiAgICAgICAgICAgICAgICBfaWQ6IHB5cmFtaWQucGxheWVyc1tpXS5faWQsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBweXJhbWlkLnBsYXllcnNbaV0uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBweXJhbWlkLnBsYXllcnNbaV0ubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHB5cmFtaWQucGxheWVyc1tpXS5wb3NpdGlvblxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHVwZGF0ZWRQbGF5ZXJzLnB1c2godXBkYXRlZFBsYXllcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENhbGwgc2VydmljZSB0byByZW1vdmUgdGhlIHBsYXllclxuICAgICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLnJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZCh2bS5jb21wZXRpdGlvbklkLCByZW1vdmVkUGxheWVyWzBdLCB1cGRhdGVkUGxheWVycykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJlbW92aW5nQ3VycmVudFVzZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGF0IHRoZSBhcHByb3ByaWF0ZSBhY3Rpb24gaXMgYmFzZWQgb24gdGhlIHBsYXllciBjbGlja2luZyBhbmQgdGhlIHBsYXllciBiZWluZyBjbGlja2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGxheWVyQ2xpY2socGxheWVyKSB7XG4gICAgICAvLyBjbGlja2VkIG9uIGVtcHR5IHNwb3RcbiAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPT09IDk5ICYmICF2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkKSB7XG4gICAgICAgIGFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkKCk7XG4gICAgICB9XG4gICAgICBpZiAocGxheWVyLmF2YWlsYWJsZSA9PT0gdHJ1ZSAmJiB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkICYmICF2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgc3dhbCh7XG4gICAgICAgICAgdGl0bGU6ICdDaGFsbGVuZ2UgUmVxdWVzdCcsXG4gICAgICAgICAgdGV4dDogJ0NoYWxsZW5nZSAnICsgcGxheWVyLmZpcnN0TmFtZSArICcgJyArIHBsYXllci5sYXN0TmFtZSArICc/JyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgQ2hhbGxlbmdlJyxcbiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3JlYXRlQ2hhbGxlbmdlKHBsYXllcik7XG4gICAgICAgICAgc3dhbCgnQ2hhbGxlbmdlIFNlbnQnLCBwbGF5ZXIuZmlyc3ROYW1lICsgJyAnICsgcGxheWVyLmxhc3ROYW1lICsgJyBoYXMgYmVlbiBub3RpZmllZCBvZiB0aGUgY2hhbGxlbmdlLicsICdzdWNjZXNzJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIHB5cmFtaWQgYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twVXBkYXRlQWRtaW5zJywga3BVcGRhdGVBZG1pbnMpO1xuXG4gIGZ1bmN0aW9uIGtwVXBkYXRlQWRtaW5zKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcHlyYW1pZDogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvcHlyYW1pZHMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciByZW1vdmVkQWRtaW5zID0gW107XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICB2bS5hZGRlZEFkbWlucyA9IFtdO1xuICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IGZhbHNlO1xuICAgIHZtLnVwZGF0ZVB5cmFtaWQgPSB1cGRhdGVQeXJhbWlkO1xuICAgIHZtLmNhbmNlbFVwZGF0ZSA9IGNhbmNlbFVwZGF0ZTtcbiAgICB2bS5yZW1vdmVBZG1pbiA9IHJlbW92ZUFkbWluO1xuICAgIHZtLmFkZEFkbWluID0gYWRkQWRtaW47XG4gICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5weXJhbWlkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0ucHlyYW1pZCkge1xuICAgICAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0ucHlyYW1pZC5hZG1pbnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IF8uZmluZCh2bS5weXJhbWlkLmFkbWlucywgeydwcmltYXJ5JzogdHJ1ZX0pLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCA/IHRydWU6IGZhbHNlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZUFkbWlucygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBdmFpbGFibGVBZG1pbnMoKSB7XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBhZG1pbnMgZnJvbSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgYWRtaW5zXG4gICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLmFkbWlucywgZnVuY3Rpb24gKHB5cmFtaWRBZG1pbikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVBZG1pbil7XG4gICAgICAgICAgICByZXR1cm4gcHlyYW1pZEFkbWluLl9pZCA9PT0gYXZhaWxhYmxlQWRtaW4uX2lkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gT25seSB1c2UgY2VydGFpbiBwcm9wZXJ0aWVzIG9mIHRoZSB1c2VyIGZvciB0aGUgYWRtaW4gcmVjb3JkXG4gICAgICAgIF8uZm9yRWFjaCh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlQWRtaW4pIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVBZG1pbnMucHVzaCh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGF2YWlsYWJsZUFkbWluLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhdmFpbGFibGVBZG1pbi5sYXN0TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVBZG1pbi51c2VybmFtZSxcbiAgICAgICAgICAgIF9pZDogYXZhaWxhYmxlQWRtaW4uX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVQeXJhbWlkKCkge1xuICAgICAgdm0ucHlyYW1pZC5hZG1pbnMgPSB2bS5hZGRlZEFkbWlucztcbiAgICAgIHB5cmFtaWRzU2VydmljZS51cGRhdGVQeXJhbWlkKHZtLnB5cmFtaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgIH0pOyAgIFxuICAgIH1cblxuICAgIC8vIENhbmNlbCB0aGUgdXBkYXRlIGFuZCBwdXQgZXZlcnl0aGluZyBiYWNrIHRvIHRoZSBvcmdpbmFsXG4gICAgZnVuY3Rpb24gY2FuY2VsVXBkYXRlKCkge1xuICAgICAgdm0uYWRkZWRBZG1pbnMgPSBfLmNsb25lRGVlcCh2bS5weXJhbWlkLmFkbWlucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBhZG1pbiBmcm9tIHRoZSBweXJhbWlkXG4gICAgICogUXVldWUgdXAgdGhlIGFkbWlucyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkbWluKSB7XG4gICAgICByZW1vdmVkQWRtaW5zLnB1c2goYWRtaW4pO1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goXy5yZW1vdmUodm0uYWRkZWRBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFkbWluIHRvIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEFkbWluKGFkbWluKSB7XG4gICAgICB2bS5hZGRlZEFkbWlucy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZUFkbWlucywge19pZDogYWRtaW4uX2lkfSlbMF0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BVcGRhdGVQbGF5ZXJzJywga3BVcGRhdGVQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiBrcFVwZGF0ZVBsYXllcnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBweXJhbWlkOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJGZpbHRlciwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UpIHtcbiAgICB2YXIgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2bS5hZGRlZFBsYXllcnMgPSBbXTtcbiAgICB2bS51cGRhdGVQeXJhbWlkID0gdXBkYXRlUHlyYW1pZDtcbiAgICB2bS5jYW5jZWxVcGRhdGUgPSBjYW5jZWxVcGRhdGU7XG4gICAgdm0ucmVvcmRlclBsYXllcnMgPSByZW9yZGVyUGxheWVycztcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0ucHlyYW1pZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnB5cmFtaWQpIHtcbiAgICAgICAgICB2bS5hZGRlZFBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5weXJhbWlkLnBsYXllcnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZVBsYXllcnMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlUGxheWVycygpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgXy5mb3JFYWNoKHZtLnB5cmFtaWQucGxheWVycywgZnVuY3Rpb24gKHB5cmFtaWRQbGF5ZXIpIHtcbiAgICAgICAgICBfLnJlbW92ZSh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlUGxheWVyKXtcbiAgICAgICAgICAgIHJldHVybiBweXJhbWlkUGxheWVyLl9pZCA9PT0gYXZhaWxhYmxlUGxheWVyLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIHBsYXllciByZWNvcmRcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGF2YWlsYWJsZVBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBhdmFpbGFibGVQbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBfaWQ6IGF2YWlsYWJsZVBsYXllci5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZVB5cmFtaWQoKSB7XG4gICAgICBfLmZvckVhY2gocmVtb3ZlZFBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0ucHlyYW1pZC5faWQsIHBsYXllci5faWQpO1xuICAgICAgfSk7XG4gICAgICB2bS5weXJhbWlkLnBsYXllcnMgPSB2bS5hZGRlZFBsYXllcnM7XG4gICAgICBweXJhbWlkc1NlcnZpY2UudXBkYXRlUHlyYW1pZCh2bS5weXJhbWlkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICB9KTsgICBcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycyA9IF8uY2xvbmVEZWVwKHZtLnB5cmFtaWQucGxheWVycyk7XG4gICAgfVxuXG4gICAgLy8gUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgZnVuY3Rpb24gcmVvcmRlclBsYXllcnMoKSB7XG4gICAgICB2YXIgaSA9IDE7XG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IGk7XG4gICAgICAgICsraTtcbiAgICAgIH0pO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwbGF5ZXIgZnJvbSB0aGUgcHlyYW1pZFxuICAgICAqIFF1ZXVlIHVwIHRoZSBwbGF5ZXJzIHRvIGJlIHJlbW92ZWQgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzLnB1c2gocGxheWVyKTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hZGRlZFBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXIocGxheWVyKSB7XG4gICAgICBwbGF5ZXIucG9zaXRpb24gPSB2bS5hZGRlZFBsYXllcnMubGVuZ3RoICsgMTtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3B5cmFtaWRzU2VydmljZScsIHB5cmFtaWRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gcHlyYW1pZHNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRQeXJhbWlkOiBnZXRQeXJhbWlkLFxuICAgICAgZ2V0UHlyYW1pZHNGb3JVc2VyOiBnZXRQeXJhbWlkc0ZvclVzZXIsXG4gICAgICBnZXRQeXJhbWlkczogZ2V0UHlyYW1pZHMsXG4gICAgICBjcmVhdGVQeXJhbWlkOiBjcmVhdGVQeXJhbWlkLFxuICAgICAgdXBkYXRlUHlyYW1pZDogdXBkYXRlUHlyYW1pZCxcbiAgICAgIGRlbGV0ZVB5cmFtaWQ6IGRlbGV0ZVB5cmFtaWQsXG4gICAgICBzd2FwUG9zaXRpb25zOiBzd2FwUG9zaXRpb25zLFxuICAgICAgYWRkUGxheWVyVG9QeXJhbWlkOiBhZGRQbGF5ZXJUb1B5cmFtaWQsXG4gICAgICBhZGRQbGF5ZXJUb1B5cmFtaWRSZXF1ZXN0OiBhZGRQbGF5ZXJUb1B5cmFtaWRSZXF1ZXN0LFxuICAgICAgcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkOiByZW1vdmVkUGxheWVyRnJvbVB5cmFtaWQsXG4gICAgICBhcHByb3ZlUGVuZGluZ1BsYXllcjogYXBwcm92ZVBlbmRpbmdQbGF5ZXIsXG4gICAgICBkZW55UGVuZGluZ1BsYXllcjogZGVueVBlbmRpbmdQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcHlyYW1pZCBmcm9tIHRoZSBkYXRhYmFzZSAob3IgbWVtb3J5KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHB5cmFtaWQgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgcHlyYW1pZFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcHlyYW1pZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWQoY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9weXJhbWlkJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIHB5cmFtaWRzIGZyb20gdGhlIGRhdGFiYXNlIHRoYXQgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWRzRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZHMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYWN0aXZlIHB5cmFtaWRzIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHB5cmFtaWRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHlyYW1pZHMoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3B5cmFtaWRzJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9jcmVhdGUnLCB7XG4gICAgICAgIHB5cmFtaWQ6IHB5cmFtaWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVB5cmFtaWQocHlyYW1pZCkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvdXBkYXRlJywge1xuICAgICAgICBweXJhbWlkOiBweXJhbWlkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQeXJhbWlkKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvcHlyYW1pZHMvZGVsZXRlJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2FwUG9zaXRpb25zKGNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZXIsIG9wcG9uZW50KSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9zd2FwUG9zaXRpb25zJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZChjb21wZXRpdGlvbklkLCBwbGF5ZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL2FkZFBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvUHlyYW1pZFJlcXVlc3QoY29tcGV0aXRpb24sIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvYWRkUGxheWVyUmVxdWVzdCcsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkKGNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXIsIHBsYXllcnMpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcmVtb3ZlZFBsYXllcjogcmVtb3ZlZFBsYXllcixcbiAgICAgICAgcGxheWVyczogcGxheWVyc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9hcHByb3ZlUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVueVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9kZW55UGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FkbWluQ3RybCcsIEFkbWluQ3RybCk7XG5cbiAgZnVuY3Rpb24gQWRtaW5DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRmaWx0ZXIsIHB5cmFtaWRzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0udXBkYXRlUHlyYW1pZFJlc3RyaWN0Sm9pbnMgPSB1cGRhdGVQeXJhbWlkUmVzdHJpY3RKb2lucztcbiAgICB2bS5kZWxldGVQeXJhbWlkID0gZGVsZXRlUHlyYW1pZDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIGlmIChweXJhbWlkLmRhdGEgJiYgXy5zb21lKHB5cmFtaWQuZGF0YS5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgICAgdm0uaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgLy8gRGlzcGxheSB0aGUgcGxheWVycyBpbiB0aGUgcHJvcGVyIG9yZGVyXG4gICAgICAgICAgcHlyYW1pZC5kYXRhLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5JykocHlyYW1pZC5kYXRhLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICB2bS5jaGFsbGVuZ2VzID0gY2hhbGxlbmdlcy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVQeXJhbWlkUmVzdHJpY3RKb2lucygpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRQeXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICB1cGRhdGVkUHlyYW1pZC5yZXN0cmljdEpvaW5zID0gdm0ucHlyYW1pZC5yZXN0cmljdEpvaW5zO1xuICAgICAgICBweXJhbWlkc1NlcnZpY2UudXBkYXRlUHlyYW1pZCh1cGRhdGVkUHlyYW1pZCk7XG4gICAgICB9KTsgICAgICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQeXJhbWlkKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdUaGlzIGNhbiBub3QgYmUgdW5kb25lJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLmRlbGV0ZVB5cmFtaWQodm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX2RlbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMubXlQeXJhbWlkcycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIHB5cmFtaWRcbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ3JlYXRlUHlyYW1pZEN0cmwnLCBDcmVhdGVQeXJhbWlkQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlUHlyYW1pZEN0cmwoJHN0YXRlLCB1c2VyU2VydmljZSwgcHlyYW1pZHNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICB2YXIgbWF4TGV2ZWxzID0gMTA7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5uZXdQeXJhbWlkID0ge1xuICAgICAgcGxheWVyczogW10sXG4gICAgICByZXN0cmljdEpvaW5zOiBmYWxzZVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZVB5cmFtaWQgPSBjcmVhdGVQeXJhbWlkO1xuICAgIHZtLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0ucmVvcmRlclBsYXllcnMgPSByZW9yZGVyUGxheWVycztcbiAgICB2bS5uZXdQeXJhbWlkLmZvcmZlaXREYXlzID0gMTtcblxuICAgIGFjdGl2YXRlKCk7XG4gICAgXG4gICAgLyoqXG4gICAgICogUnVucyBvbiBjb250cm9sbGVyIGluc3RhbnRpYXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IHVzZXJzLmRhdGE7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIGJyZWFrIHBvaW50cyBhcnJheVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwbGF5ZXIgdG8gdGhlIG5ldyBweXJhbWlkXG4gICAgICogQ2hlY2tzIHRvIG1ha2Ugc3VyZSB5b3UgYXJlIG5vdCBhZGRpbmcgdG9vIG1hbnkgcGxheWVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgcGxheWVyLnBvc2l0aW9uID0gdm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCArIDE7XG4gICAgICB2bS5hZGRlZFBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwcmV2aXVvc2x5IGFkZGVkIHBsYXllciBmcm9tIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIHRoZSBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBkcmFnLWRyb3BcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUGxheWVycygpIHtcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gaTtcbiAgICAgICAgKytpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBweXJhbWlkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBweXJhbWlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHZhciBhZGRQbGF5ZXIgPSB7XG4gICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgIGVtYWlsOiBwbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvblxuICAgICAgICB9O1xuICAgICAgICBweXJhbWlkLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgfSk7XG4gICAgICBweXJhbWlkLmFkbWlucyA9IFt7XG4gICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICBwcmltYXJ5OiB0cnVlXG4gICAgICB9XTtcblxuICAgICAgLy8gRmlndXJlIG91dCB0aGUgbnVtYmVyIG9mIGxldmVscyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHBsYXllcnNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHB5cmFtaWQucGxheWVycy5sZW5ndGggPCBicmVha1BvaW50c1tpXSkge1xuICAgICAgICAgIHB5cmFtaWQubGV2ZWxzID0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBweXJhbWlkc1NlcnZpY2UuY3JlYXRlUHlyYW1pZChweXJhbWlkKS50aGVuKGZ1bmN0aW9uIChuZXdQeXJhbWlkKSB7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMudmlldycsIHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBuZXdQeXJhbWlkLmRhdGEuX2lkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ015UHlyYW1pZHNDdHJsJywgTXlQeXJhbWlkc0N0cmwpO1xuXG4gIGZ1bmN0aW9uIE15UHlyYW1pZHNDdHJsKCRzY29wZSwgcHlyYW1pZHNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIG15UHlyYW1pZHMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRQeXJhbWlkc0ZvclVzZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkc0ZvclVzZXIoKSB7XG4gICAgICBteVB5cmFtaWRzID0gW107XG4gICAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHNGb3JVc2VyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZHMgPSBweXJhbWlkcy5kYXRhO1xuICAgICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkcywgZnVuY3Rpb24ocHlyYW1pZCkge1xuICAgICAgICAgICAgbXlQeXJhbWlkcy5wdXNoKHB5cmFtaWQuX2lkKTtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcihweXJhbWlkLl9pZCwgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICAgIHB5cmFtaWQuYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKHB5cmFtaWQuYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcHlyYW1pZC5hY3RpdmVDaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChweXJhbWlkLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQocHlyYW1pZC5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAobXlQeXJhbWlkcy5pbmRleE9mKGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkgPj0gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIGdldFB5cmFtaWRzRm9yVXNlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1B5cmFtaWRDdHJsJywgUHlyYW1pZEN0cmwpO1xuXG4gIGZ1bmN0aW9uIFB5cmFtaWRDdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHB5cmFtaWRzU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0ucHlyYW1pZCA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuXG4gICAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgICBpZiAocHlyYW1pZC5kYXRhKSB7XG4gICAgICAgICAgICB2bS5weXJhbWlkID0gcHlyYW1pZC5kYXRhO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpweXJhbWlkX2RlbGV0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgICRzdGF0ZS5nbygncHlyYW1pZHMubXlQeXJhbWlkcycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1B5cmFtaWRzQ3RybCcsIFB5cmFtaWRzQ3RybCk7XG5cbiAgZnVuY3Rpb24gUHlyYW1pZHNDdHJsKHB5cmFtaWRzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucHlyYW1pZHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkcygpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdTdGF0c0N0cmwnLCBTdGF0c0N0cmwpO1xuXG4gIGZ1bmN0aW9uIFN0YXRzQ3RybCgkc2NvcGUsICRzdGF0ZVBhcmFtcywgJHN0YXRlLCBweXJhbWlkc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5weXJhbWlkID0ge307XG4gICAgdm0ucGxheWVyc1Jlc3VsdHMgPSBbXTtcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hQeXJhbWlkKCkge1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmdldFB5cmFtaWQodm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAocHlyYW1pZCkge1xuICAgICAgICBpZiAocHlyYW1pZC5kYXRhKSB7XG4gICAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcblxuICAgICAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgcGxheWVyLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6cHlyYW1pZF91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoUHlyYW1pZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnB5cmFtaWRfZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVXNlckN0cmwnLCBVc2VyQ3RybCk7XG5cbiAgZnVuY3Rpb24gVXNlckN0cmwoaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnY092ZXJmbG93JywgY092ZXJmbG93KTtcblxuICBmdW5jdGlvbiBjT3ZlcmZsb3coc2Nyb2xsYmFyU2VydmljZSkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBzY3JvbGxheGlzID0gYXR0cnMuc2Nyb2xsYXhpcyB8fCAneSc7XG4gICAgICB2YXIgdGhlbWUgPSBhdHRycy50aGVtZSB8fCAnbWluaW1hbC1kYXJrJztcbiAgICAgIHZhciBtb3VzZXdoZWVsYXhpcyA9IGF0dHJzLm1vdXNld2hlZWxheGlzIHx8ICd5JztcbiAgICAgIGlmICghJCgnaHRtbCcpLmhhc0NsYXNzKCdpc21vYmlsZScpKSB7XG4gICAgICAgIHNjcm9sbGJhclNlcnZpY2UubWFsaWh1U2Nyb2xsKGVsZW1lbnQsIHRoZW1lLCBzY3JvbGxheGlzLCBtb3VzZXdoZWVsYXhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9nZ2xlU3VibWVudScsIHRvZ2dsZVN1Ym1lbnUpO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZVN1Ym1lbnUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCkge1xuICAgICAgZWwuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBlbC5uZXh0KCkuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgZWwucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dhdmVzRWZmZWN0Jywgd2F2ZXNFZmZlY3QpO1xuXG4gIGZ1bmN0aW9uIHdhdmVzRWZmZWN0KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1pY29uJykgfHwgZWxlbWVudC5oYXNDbGFzcygnYnRuLWZsb2F0JykpIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQsIFsnd2F2ZXMtY2lyY2xlJ10pO1xuICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdidG4tbGlnaHQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1saWdodCddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgV2F2ZXMuaW5pdCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2ZnTGluZScsIGZnTGluZSk7XG5cbiAgZnVuY3Rpb24gZmdMaW5lKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWxlbWVudCkge1xuICAgICAgdmFyIGlucHV0ID0gZWxlbWVudC5jaGlsZHJlbigpLmZpcnN0KCk7XG4gICAgICB2YXIgaXNGbG9hdExhYmVsID0gZWxlbWVudC5wYXJlbnQoKS5oYXNDbGFzcygnZmctZmxvYXQnKTtcbiAgICAgIGlucHV0LmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnZmctdG9nZ2xlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0LmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzRmxvYXRMYWJlbCB8fCAoaXNGbG9hdExhYmVsICYmIGlucHV0LnZhbCgpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
