angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var i=this;i.$state=e,i.lockSidebar=t.get("sidebarLocked"),i.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,o,r){var a={superAdmin:n,admin:t,user:i};r.html5Mode(!0),o.otherwise("/"),o.when("/competitions/","/competitions"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("competitions",{url:"/competitions",views:{content:{controller:"CompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competitions.html"}}}).state("competitions.myCompetitions",{url:"/my-competitions",views:{"content@":{controller:"MyCompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/my-competitions.html"}},resolve:{auth:a.user}}).state("competitions.view",{url:"/view/:competitionId",views:{"content@":{controller:"CompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition.html"}}}).state("competitions.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"CompetitionStatsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-stats.html"}}}).state("competitions.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"CompetitionAdminCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-admin.html"}},resolve:{auth:a.user}}).state("competitions.create",{url:"/create",views:{"content@":{controller:"CreateCompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/create-competition.html"}},resolve:{auth:a.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:a.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function i(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],i.$inject=["authService"]}(),function(){"use strict";function e(e,t,n,i){e.$on("$stateChangeError",function(e,n,i,o,r,a){"not authorized"===a&&(t.go("login"),t.previous=n,t.prevParams=i)}),e.$on("$stateChangeStart",function(){i.setSidebarStatus(!1),n[0].body.scrollTop=n[0].documentElement.scrollTop=0})}e.$inject=["$rootScope","$state","$document","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(e,i){var r=n.defer();return t.post("/login",{username:e,password:i}).then(function(e){e.data.success?(o.currentUser=e.data.user,r.resolve(!0)):"unverified"===e.data.message?r.resolve("unverified"):r.resolve(!1)}),r.promise}function l(e){var i=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?i.resolve(!0):i.resolve(!1)},function(e){"Error: Email already in use"===e.data.reason&&r.error("Sorry, an account already exists with that email address.")}),i.promise}function s(){var i=n.defer();return t.post("/logout",{logout:!0}).then(function(){o.currentUser=void 0,i.resolve(),e.go("home")}),i.promise}function c(e){return!!o.isAuthorized(e)||n.reject("not authorized")}function p(){return!!o.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:a,createUser:l,logout:s,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:p};return u}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return _.forEach(e.data,function(e){e.displayName||(e.displayName=e.firstName+" "+e.lastName)}),e.data=_.sortBy(e.data,"displayName"),e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function i(t){return e.get("/api/user/password/link",{params:{username:t}})}function o(t,n,i){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:i})}function r(t){return e.put("/api/user",{user:t})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:i,resetPassword:o,updateUser:r};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i,o){t.authenticateUser(i,o).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("competitions.myCompetitions"):n.error("Username / password combinaiton incorrect")})}var r=this;r.login=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){r.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function l(t){n.generatePasswordResetLink(t).then(function(t){t.data?(i.success("Please check your email for a password reset link"),e.go("home")):i.error("Could not find that email address")})}function s(r){r.password!==r.confirmPassword?i.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,r.password).then(function(t){t.data&&o.authenticateUser(t.data.username,r.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=l,c.resetPassword=s,a()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){i.password!==i.confirmPassword?n.error("Passwords don't match!"):(i.displayName||(i.displayName=i.firstName+" "+i.lastName),t.createUser(i).then(function(){e.go("verify")}))}var r=this;r.register=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){t.userId&&t.verificationToken&&(o.verifying=!0,o.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?o.verified=!0:o.verified=!1}))}var o=this;o.verified=void 0,o.verifying=!1,i()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.competition",function(){o.competition&&i()})}function i(){o.challenges=[],t.getActiveChallengesByCompetition(o.competition._id).then(function(e){e.data.length>0&&(o.challenges=e.data,_.forEach(o.challenges,function(e){if("versus"===e.type&&(o.competition.players.length>2?(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team):(e.challenger.displayName=_.find(o.competition.players,{position:e.challenger.team}).displayName,e.opponent.displayName=_.find(o.competition.players,{position:e.opponent.team}).displayName)),0!==e.timeLimit){var t=moment().diff(moment(e.created).add(e.timeLimit,"d"))*-1;e.expires=moment.duration(t).asHours()}}))})}var o=this;o.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("wpmActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"=",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function i(){e.$watchGroup(["vm.challenges","vm.competition"],function(){a.challenges&&a.challenges.length>0&&a.competition&&a.competition.players&&o()})}function o(){_.forEach(a.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger","versus"===e.type&&(a.competition.players.length>2?(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team):(e.challenger.displayName=_.find(a.competition.players,{position:e.challenger.team}).displayName,e.opponent.displayName=_.find(a.competition.players,{position:e.opponent.team}).displayName)),e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"MMM DD YYYY"})})}function r(e,t){swal({title:"Delete Challenge Result?",text:"You'll still need to reorder the players on your own",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){n.deleteChallenge(a.competition._id,e).then(function(){a.challenges.splice(t,1)})})}var a=this;a.challenges=[],a.deleteChallenge=r,i()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("wpmCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){r.player&&(n(r.player),i(r.player),o(r.player))})}function n(e){for(var t=[],n=0;n<r.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var i=0;i<t.length;i++)if(e.position<t[i+1]){e.level=t.indexOf(t[i])+1;break}}function i(e){var t,n=0,i=!0;_.forEach(e.results,function(o){i&&("challenger"===o.winner&&o.challenger._id===e._id||"opponent"===o.winner&&o.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):i=!1:("opponent"===o.winner&&o.challenger._id===e._id||"challenger"===o.winner&&o.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):i=!1)),r.streak={type:t,value:n}})}function o(e){r.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),r.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),r.wins.total=r.wins.asChallenger+r.wins.asOpponent,r.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),r.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),r.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),r.loses.total=r.loses.asChallenger+r.loses.asOpponent,r.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var r=this;r.maxLevels=7,r.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmPlayerOverallResults",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"=",team:"=",challenges:"="},templateUrl:"/challenges/components/team-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.challenges",function(){o.challenges&&o.challenges.length>0&&o.competition&&(n(o.team,o.challenges),i(o.team,o.challenges),2===o.competition.players.length&&(o.singlePlayerTeams=!0,o.displayName=_.find(o.competition.players,{position:o.team}).displayName,o.playerName=_.find(o.competition.players,{position:o.team}).firstName+" "+_.find(o.competition.players,{position:o.team}).lastName))})}function n(e,t){var n,i=0,r=!0;_.forEach(t,function(t){r&&("challenger"===t.winner&&t.challenger.team===e||"opponent"===t.winner&&t.opponent.team===e?"losing"!==n?(i+=1,n="winning"):r=!1:("opponent"===t.winner&&t.challenger.team===e||"challenger"===t.winner&&t.opponent.team===e)&&("winning"!==n?(i+=1,n="losing"):r=!1)),o.streak={type:n,value:i}})}function i(e,t){o.wins.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"opponent"===t.winner})),o.wins.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"challenger"===t.winner})),o.wins.total=o.wins.asChallenger+o.wins.asOpponent,o.wins.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"challenger"===t.winner||t.opponent.team===e&&"opponent"===t.winner)})),o.loses.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"challenger"===t.winner})),o.loses.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"opponent"===t.winner})),o.loses.total=o.loses.asChallenger+o.loses.asOpponent,o.loses.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"opponent"===t.winner||t.opponent.team===e&&"challenger"===t.winner)}))}var o=this;o.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.streak={type:null,value:0},o.singlePlayerTeams=!1,t()}t.$inject=["$scope"],angular.module("app").directive("wpmTeamOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/pyramid/create",{challenge:t})}function n(t){return e.put("/api/challenges/pyramid/cancel",{challenge:t})}function i(t){return e.post("/api/challenges/versus/create",{challenge:t})}function o(t){return e.post("/api/challenges/pyramid/complete",{challenge:t})}function r(t){return e.post("/api/challenges/versus/complete",{challenge:t})}function a(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function l(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function s(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function c(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function p(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function u(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function m(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var d={createPyramidChallenge:t,createVersusChallenge:i,cancelPyramidChallenge:n,completePyramidChallenge:o,completeVersusChallenge:r,getChallengesByCompetition:a,getActiveChallengesByCompetition:l,getActiveChallengeByCompetitionByPlayer:s,getCompletedChallengesByCompetition:c,deleteActiveChallengeByCompetitionByPlayer:p,deleteChallenge:u,getPlayerResultsByCompetition:m};return d}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var i=this;i.indentity=e,i.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("wpmFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,i,o){function r(){a(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&a()})}function a(){u.alerts=[],n.isAuthenticated()&&o.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){u.alerts=e.data})}function l(e,t){o.clearAlert(e).then(function(){u.alerts.splice(t,1)})}function s(){o.clearAllAlertsByPlayer(n.currentUser._id).then(function(){u.alerts=[]})}function c(){t.setSidebarStatus(!u.sidebarStatus.left)}function p(){i.logout()}var u=this;u.indentity=n,u.logout=p,u.sidebarStatus=t.getSidebarStatus(),u.toggleSidebar=c,u.clearAlert=l,u.clearAllAlerts=s,u.alerts=[],r(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&a()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("wpmHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function i(){t.logout()}var o=this;o.indentity=e,o.logout=i,o.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("wpmSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var i in e)n.push(e[i]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function i(t){return e.put("/api/alerts/clear",{userId:t})}var o={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:i};return o}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var i;null!==e.bootstrappedUserObject&&(i=e.bootstrappedUserObject);var o={currentUser:i,isAuthenticated:t,isAuthorized:n};return o}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function o(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var r={info:e,success:t,warning:n,error:i,inverse:o};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85},delay:5e3}),r}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,i){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:i,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},i={getSidebarStatus:e,setSidebarStatus:t};return i}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function i(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function o(){a=new WebSocket(i()),a.onmessage=function(t){s=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},a.onclose=function(){s<l.length?(console.log("WebSocket closed. Reconnecting..."),n(o,1e3*l[s]),s+=1):console.log("Giving up on WebSocket")}}function r(e,t){var n=JSON.stringify({topic:e,data:t});a.send(n)}var a,l=[3,10,100,1e3],s=0,c={connect:o,send:r};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e,t){function n(){e.getPublicCompetitions().then(function(e){i.publicCompetitions=e.data}),t.isAuthorized("super-admin")&&e.getPrivateCompetitions().then(function(e){i.privateCompetitions=e.data})}var i=this;i.publicCompetitions=[],i.privateCompetitions=[],n()}e.$inject=["competitionsService","identityService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/competition-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("wpmCompetitionCompact",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=o.competition.players.length+1,e.approvePendingPlayer(o.competition._id,t)}function i(t){e.denyPendingPlayer(o.competition._id,t)}var o=this;o.pendingPlayers=[],o.approvePendingPlayer=n,o.denyPendingPlayer=i,t()}t.$inject=["competitionsService"],angular.module("app").directive("wpmPendingPlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/pyramid.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o,r,a){function l(){for(var t=A;t>0;--t)S.maxPlayers+=t;e.$watch("vm.competition",function(){S.competition&&(S.competitionId=S.competition._id,s(),c(),u(),m(),d())})}function s(){S.competition.players=i("orderBy")(S.competition.players,"position")}function c(){S.currentUserIsAdmin=!1,S.currentUserIsPending=!1,r.isAuthenticated()&&(S.currentUserIsAdmin=_.some(S.competition.admins,["_id",r.currentUser._id]),S.currentUserIsPending=_.some(S.competition.pendingPlayers,["_id",r.currentUser._id])),S.currentUserIsOnCompetition=!1,S.hasActiveChallenge=!1,_.forEach(S.competition.players,function(e){r.isAuthenticated()&&e._id===r.currentUser._id&&(S.currentUserIsOnCompetition=!0,e.class="current-user",S.currentUserPlayer=e,a.getActiveChallengeByCompetitionByPlayer(S.competitionId,e._id).then(function(t){if(t.data){S.hasActiveChallenge=!0,S.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger;var n=_.find(S.competition.players,{_id:S.activeChallengeOpponent._id});n.class=n.class?n.class+" current-opponent":"current-opponent"}}))}),a.getActiveChallengesByCompetition(S.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(S.competition.players,{_id:e.challenger._id});"available"===t.class&&(t.class=""),t.class=t.class?t.class+" unavailable":"unavailable",t.available=!1,t.challenge={position:"challenger"};var n=_.find(S.competition.players,{_id:e.opponent._id});if("available"===n.class&&(n.class=""),n.class=n.class?n.class+" unavailable":"unavailable",n.available=!1,n.challenge={position:"opponent"},0!==e.timeLimit){var i=moment().diff(moment(e.created).add(e.timeLimit,"d"))*-1,o=moment.duration(i).asHours();i>0?n.challenge.expires=o:i<=0&&g(null,!0,n)}}),f()})}function p(){S.breakPoints=[];for(var e=0;e<A;e++)S.breakPoints.push(e*(e+1)/2+1)}function u(){var e=0;S.levels=[],p();for(var t=0;t<S.competition.players.length;t++)S.breakPoints.indexOf(t+1)>-1&&(e+=1,S.levels.push(e)),S.competition.players[t].level=e}function m(){S.numberOfBlocks=0;for(var e=_.last(S.levels);e>0;e--)S.numberOfBlocks+=e}function d(){S.numberOfRealPlayers=S.competition.players.length;for(var e=S.competition.players.length;e<S.numberOfBlocks;e++)S.competition.players.push({firstName:"Empty",lastName:"Spot",displayName:"Empty Spot",position:99,class:"empty"});u()}function f(){if(S.availableChallenges=!1,S.currentUserIsOnCompetition&&!S.hasActiveChallenge){var e=S.currentUserPlayer.level>1?S.currentUserPlayer.level-1:null;_.forEach(S.competition.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&t.available!==!1&&(S.availableChallenges=!0,t.available=!0,t.class="available")})}}function h(e){if(e.available){S.hasActiveChallenge=!0;var t={type:S.competition.type,competitionName:S.competition.name,competitionId:S.competitionId,complete:!1,forfeit:!1,timeLimit:S.competition.forfeitDays,challenger:{_id:S.currentUserPlayer._id,email:S.currentUserPlayer.email,firstName:S.currentUserPlayer.firstName,lastName:S.currentUserPlayer.lastName,displayName:S.currentUserPlayer.displayName,position:S.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position}};a.createPyramidChallenge(t).then(function(){S.competitionMenuToggle=!1})}else o.error("Sorry, that is not a valid challenge.")}function v(){a.getActiveChallengeByCompetitionByPlayer(S.competitionId,S.currentUserPlayer._id).then(function(e){e.data&&e.data.challenger._id===S.currentUserPlayer._id&&a.cancelPyramidChallenge(e.data).then(function(){S.hasActiveChallenge=!1})})}function g(e,t,i){var o=i||S.currentUserPlayer;a.getActiveChallengeByCompetitionByPlayer(S.competitionId,o._id).then(function(o){S.hasActiveChallenge=!1;var r=!1;t?(o.data.forfeit=!0,"opponent"===i.challenge.position?(o.data.winner="challenger",r=!0):o.data.winner="opponent"):e?o.data.challenger._id===S.currentUserPlayer._id?(o.data.winner="challenger",r=!0):o.data.winner="opponent":o.data.challenger._id===S.currentUserPlayer._id?o.data.winner="opponent":(o.data.winner="challenger",r=!0),r?n.swapPositions(S.competitionId,o.data.opponent,o.data.challenger).then(function(){a.completePyramidChallenge(o.data).then(function(){$&&P()})}):a.completePyramidChallenge(o.data).then(function(){$&&P()}),S.competitionMenuToggle=!1})}function y(e){g(null,!0,e)}function C(){if(r.isAuthenticated())if(S.numberOfRealPlayers<S.maxPlayers){var e={_id:r.currentUser._id,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,displayName:r.currentUser.displayName,email:r.currentUser.username,position:S.numberOfRealPlayers+1};S.competition.restrictJoins?swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetitionRequest(S.competition,e).then(function(){S.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")}):swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetition(S.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")})}else o.warning("Sorry, this competition is full");else o.warning("Please login to join a competition"),t.previous="competitions.view",t.prevParams={competitionId:S.competitionId},t.go("login")}function w(){swal({title:"Leave Competition?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){P(),swal("OK, you'r out!","You've been removed from the competition.","success")})}function P(){r.isAuthenticated()&&S.currentUserIsOnCompetition&&($=!0,S.hasActiveChallenge?g(null,!0,S.currentUserPlayer):(S.currentUserIsOnCompetition=!1,S.hasActiveChallenge=!1,n.getCompetition(S.competitionId).then(function(e){var t=e.data,i=S.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=i&&(e.position-=1)});for(var o=_.remove(t.players,function(e){return e._id===S.currentUserPlayer._id}),r=[],a=0;a<S.numberOfRealPlayers-1;++a){var l={_id:t.players[a]._id,firstName:t.players[a].firstName,lastName:t.players[a].lastName,displayName:t.players[a].displayName,position:t.players[a].position};r.push(l)}n.removedPlayerFromCompetition(S.competitionId,o[0],r).then(function(){$=!1})})))}function b(e){99!==e.position||S.currentUserIsOnCompetition?e.showChallengeModal=!e.showChallengeModal:C()}function U(){n.getCompetition(S.competitionId).then(function(e){S.competition=e.data})}var A=7,S=this;S.competitionId=null,S.breakPoints=[],S.levels=[],S.numberOfBlocks=0,S.currentUserIsOnCompetition=!1,S.currentUserIsPending=!1,S.currentUserIsAdmin=!1,S.hasActiveChallenge=!1,S.activeChallengeOpponent=null,S.availableChallenges=!1,S.createChallenge=h,S.cancelChallenge=v,S.completeChallenge=g,S.forfeitChallenge=y,S.currentUserPlayer={},S.competitionMenuToggle=!1,S.addCurrentUserToCompetition=C,S.confirmRemoveCurrentUserFromCompetition=w,S.playerClick=b,S.numberOfRealPlayers=0,S.maxPlayers=0,l();var $=!1;e.$on("ws:competition_updated",function(e,t){S.competitionId===t.competitionId&&(o.info(t.description),U())})}t.$inject=["$scope","$state","competitionsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("wpmPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-admins.html"};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){d.competition&&(d.addedAdmins=_.cloneDeep(d.competition.admins),d.disableSubmit=!0,d.userIsPrimaryAdmin=_.find(d.competition.admins,{primary:!0})._id===o.currentUser._id,a())})}function a(){d.availableAdmins=[],u=[],i.getAllUsers().then(function(e){_.forEach(d.competition.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){d.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),m=_.cloneDeep(d.availableAdmins)})}function l(){d.competition.admins=d.addedAdmins,t.updateCompetition(d.competition).then(function(){d.disableSubmit=!0})}function s(){u=[],d.addedAdmins=_.cloneDeep(d.competition.admins),d.availableAdmins=_.cloneDeep(m)}function c(e){u.push(e),d.availableAdmins.push(_.remove(d.addedAdmins,{_id:e._id})[0]),d.disableSubmit=!1}function p(e){d.addedAdmins.push(_.remove(d.availableAdmins,{_id:e._id})[0]),d.disableSubmit=!1}var u=[],m=[],d=this;d.availableAdmins=[],d.addedAdmins=[],d.userIsPrimaryAdmin=!1,d.updateCompetition=l,d.cancelUpdate=s,d.removeAdmin=c,d.addAdmin=p,d.disableSubmit=!0,r()}t.$inject=["$scope","competitionsService","challengesService","userService","identityService"],angular.module("app").directive("wpmUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-players.html"};return e}function t(e,t,n,i,o,r){function a(){for(var t=g;t>0;--t)y+=t;e.$watch("vm.competition",function(){C.competition&&(C.addedPlayers=_.cloneDeep(C.competition.players),
C.disableSubmit=!0,l())})}function l(){C.availablePlayers=[],h=[],o.getAllUsers().then(function(e){_.forEach(C.competition.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){C.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),v=_.cloneDeep(C.availablePlayers)})}function s(){"versus"===C.competition.type&&C.addedPlayers.length%2>0?r.error("A Versus competition must have an even number of players"):C.addedPlayers.length>y?r.error("A competition can have a maximum of "+y+" players"):(_.forEach(h,function(e){i.deleteActiveChallengeByCompetitionByPlayer(C.competition._id,e._id)}),C.competition.players=C.addedPlayers,n.updateCompetition(C.competition).then(function(){C.disableSubmit=!0}))}function c(){h=[],C.addedPlayers=_.cloneDeep(C.competition.players),C.availablePlayers=_.cloneDeep(v)}function p(){"versus"===C.competition.type?m():"pyramid"===C.competition.type&&u(),C.disableSubmit=!1}function u(){var e=1;_.forEach(C.addedPlayers,function(t){t.position=e,++e})}function m(){_.forEach(C.addedPlayers,function(e){e.position=2});for(var e=0;e<C.addedPlayers.length/2;e++)C.addedPlayers[e].position=1}function d(e){h.push(e),C.availablePlayers.push(_.remove(C.addedPlayers,{_id:e._id})[0]),p()}function f(e){C.addedPlayers.push(_.remove(C.availablePlayers,{_id:e._id})[0]),p(),C.disableSubmit=!1}var h=[],v=[],g=7,y=null,C=this;C.availablePlayers=[],C.addedPlayers=[],C.updateCompetition=s,C.cancelUpdate=c,C.reorderPlayers=p,C.removePlayer=d,C.addPlayer=f,C.disableSubmit=!0,a()}t.$inject=["$scope","$filter","competitionsService","challengesService","userService","notifyService"],angular.module("app").directive("wpmUpdatePlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/versus.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){m.competition&&(m.competitionId=m.competition._id,m.showControls=!1,m.showChallengeModal=!1,a(),l())})}function a(){m.competition.teams=[{players:_.filter(m.competition.players,["position",1])},{players:_.filter(m.competition.players,["position",2])}],2===m.competition.players.length&&(m.singlePlayerTeams=!0)}function l(){m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,n.isAuthenticated()&&(m.currentUserIsAdmin=_.some(m.competition.admins,["_id",n.currentUser._id]),m.currentUserIsPending=_.some(m.competition.pendingPlayers,["_id",n.currentUser._id])),m.currentUserIsOnCompetition=!1,m.hasActiveChallenge=!1,_.forEach(m.competition.players,function(e){n.isAuthenticated()&&e._id===n.currentUser._id&&(m.currentUserIsOnCompetition=!0,e.class="current-user",m.currentUserPlayer=e,m.competition.teams[e.position-1].class="current-user-team",m.competition.class="current-user-on-competition")}),i.getActiveChallengesByCompetition(m.competitionId).then(function(e){if(e.data.length>0&&(m.activeChallenge=e.data[0],m.hasActiveChallenge=!0,0!==m.activeChallenge.timeLimit)){var t=moment().diff(moment(m.activeChallenge.created).add(m.activeChallenge.timeLimit,"d"))*-1,n=moment.duration(t).asHours();t>0?m.challengeExpireTime=n:t<=0&&p(null,!0)}})}function s(){m.hasActiveChallenge&&m.currentUserIsOnCompetition&&(m.showControls=!m.showControls)}function c(e){if(m.showChallengeModal=!1,m.hasActiveChallenge)o.error("Sorry, you are already in an active challenge.");else{m.hasActiveChallenge=!0;var t={type:m.competition.type,competitionName:m.competition.name,competitionId:m.competitionId,complete:!1,forfeit:!1,timeLimit:m.competition.forfeitDays,challenger:{team:m.currentUserPlayer.position,_id:m.currentUserPlayer._id},opponent:{team:e}};i.createVersusChallenge(t).then(function(){m.competitionMenuToggle=!1})}}function p(e,t){m.hasActiveChallenge=!1;var n=m.activeChallenge;t?(n.forfeit=!0,n.winner="challenger"):m.activeChallenge.challenger.team===e?n.winner="challenger":n.winner="opponent",i.completeVersusChallenge(n),m.competitionMenuToggle=!1}function u(){t.getCompetition(m.competitionId).then(function(e){m.competition=e.data})}var m=this;m.competitionId=null,m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,m.currentUserIsOnCompetition=!1,m.activeChallenge=null,m.hasActiveChallenge=!1,m.currentUserPlayer=null,m.createChallenge=c,m.completeChallenge=p,m.challengeExpireTime=null,m.showControls=!1,m.showChallengeModal=!1,m.toggleControls=s,m.singlePlayerTeams=!1,r(),e.$on("ws:competition_updated",function(e,t){m.competitionId===t.competitionId&&(o.info(t.description),u())})}t.$inject=["$scope","competitionsService","identityService","challengesService","notifyService"],angular.module("app").directive("wpmVersus",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/competition",{params:{competitionId:t}})}function n(t){return e.get("/api/competitions/user",{params:{userId:t}})}function i(){return e.get("/api/competitions/public")}function o(){return e.get("/api/competitions/private")}function r(t){return e.post("/api/competitions/create",{competition:t})}function a(t){return e.post("/api/competitions/update",{competition:t})}function l(t){return e.delete("/api/competitions/delete",{params:{competitionId:t}})}function s(t,n,i){return e.post("/api/competitions/swapPositions",{competitionId:t,challenger:n,opponent:i})}function c(t,n){return e.post("/api/competitions/addPlayer",{competitionId:t,player:n})}function p(t,n){return e.post("/api/competitions/addPlayerRequest",{competition:t,player:n})}function u(t,n,i){return e.post("/api/competitions/removePlayer",{competitionId:t,removedPlayer:n,players:i})}function m(t,n){return e.post("/api/competitions/approvePlayer",{competitionId:t,player:n})}function d(t,n){return e.post("/api/competitions/denyPlayer",{competitionId:t,player:n})}var f={getCompetition:t,getCompetitionsForUser:n,getPublicCompetitions:i,getPrivateCompetitions:o,createCompetition:r,updateCompetition:a,deleteCompetition:l,swapPositions:s,addPlayerToCompetition:c,addPlayerToCompetitionRequest:p,removedPlayerFromCompetition:u,approvePendingPlayer:m,denyPendingPlayer:d};return f}e.$inject=["$http"],angular.module("app").factory("competitionsService",e)}(),function(){"use strict";function e(e,t,n,i,o,r,a,l){function s(){n.competitionId?(d.competitionId=n.competitionId,c()):t.go("competitions.myCompetitions")}function c(){o.getCompetition(d.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",r.currentUser._id])?(d.isAdmin=!0,e.data.players=i("orderBy")(e.data.players,"position"),d.competition=e.data):t.go("competitions.myCompetitions")}),l.getCompletedChallengesByCompetition(d.competitionId).then(function(e){d.challenges=e.data})}function p(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.restrictJoins=d.competition.restrictJoins,o.updateCompetition(t)})}function u(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.private=d.competition.private,o.updateCompetition(t)})}function m(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){o.deleteCompetition(d.competitionId).then(function(){t.go("competitions.myCompetitions")})})}var d=this;d.competitionId=null,d.updateCompetitionRestrictJoins=p,d.updateCompetitionPrivate=u,d.deleteCompetition=m,s(),e.$on("ws:competition_updated",function(e,t){d.competitionId===t.competitionId&&(a.info(t.description),c())}),e.$on("ws:competition_deleted",function(e,n){d.competitionId===n.competitionId&&(a.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","$filter","competitionsService","identityService","notifyService","challengesService"],angular.module("app").controller("CompetitionAdminCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){t.competitionId&&(s.competitionId=t.competitionId,l())}function l(){i.getCompetition(s.competitionId).then(function(e){e.data?(s.competition=e.data,"pyramid"===s.competition.type?_.forEach(s.competition.players,function(e){r.getPlayerResultsByCompetition(s.competitionId,e._id).then(function(t){e.results=t.data})}):"versus"===s.competition.type&&(s.teams=[{number:1},{number:2}])):n.go("competitions.myCompetitions")}),r.getCompletedChallengesByCompetition(s.competitionId).then(function(e){s.challenges=e.data})}var s=this;s.competitionId=null,s.competition={},s.playersResults=[],s.challenges=[],a(),e.$on("ws:competition_updated",function(e,t){s.competitionId===t.competitionId&&(o.info(t.description),l())}),e.$on("ws:competition_deleted",function(e,t){s.competitionId===t.competitionId&&(o.info(t.description),n.go("competitions.myCompetitions"))})}e.$inject=["$scope","$stateParams","$state","competitionsService","notifyService","challengesService"],angular.module("app").controller("CompetitionStatsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){n.competitionId&&(a.competitionId=n.competitionId,i.getCompetition(a.competitionId).then(function(e){e.data?a.competition=e.data:t.go("competitions.myCompetitions")}))}var a=this;a.competitionId=null,a.competition=null,r(),e.$on("ws:competition_deleted",function(e,n){a.competitionId===n.competitionId&&(o.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","competitionsService","notifyService"],angular.module("app").controller("CompetitionCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getPublicCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("CompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){t.getAllUsers().then(function(e){h.availablePlayers=e.data});for(var e=d;e>0;--e)f+=e;for(e=0;e<d;e++)m.push(e*(e+1)/2+1)}function a(e){h.addedPlayers.push(_.remove(h.availablePlayers,{_id:e._id})[0]),s()}function l(e){h.availablePlayers.push(_.remove(h.addedPlayers,{_id:e._id})[0]),s()}function s(){"versus"===h.newCompetition.type?p():"pyramid"===h.newCompetition.type&&c()}function c(){var e=1;_.forEach(h.addedPlayers,function(t){t.position=e,++e})}function p(){_.forEach(h.addedPlayers,function(e){e.position=2});for(var e=0;e<h.addedPlayers.length/2;e++)h.addedPlayers[e].position=1}function u(t){if("versus"===t.type&&h.addedPlayers.length%2>0)o.error("A Versus competition must have an even number of players");else if(h.addedPlayers.length>f)o.error("A competition can have a maximum of "+f+" players");else{angular.forEach(h.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position};t.players.push(n)}),t.admins=[{_id:i.currentUser._id,email:i.currentUser.username,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,displayName:i.currentUser.displayName,primary:!0}];for(var r=0;r<m.length;r++)if(t.players.length<m[r]){t.levels=r;break}n.createCompetition(t).then(function(t){e.go("competitions.view",{competitionId:t.data._id})})}}var m=[],d=7,f=null,h=this;h.newCompetition={players:[],restrictJoins:!1,private:!1},h.availablePlayers=[],h.addedPlayers=[],h.createCompetition=u,h.addPlayer=a,h.removePlayer=l,h.reorderPlayers=s,h.newCompetition.forfeitDays=1,h.competitionTypes=["pyramid","versus"],r()}e.$inject=["$state","userService","competitionsService","identityService","notifyService"],angular.module("app").controller("CreateCompetitionCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){a()}function a(){l=[],s.activeChallenge=null,i.isAuthenticated()&&t.getCompetitionsForUser(i.currentUser._id).then(function(e){s.competitions=e.data,_.forEach(s.competitions,function(e){l.push(e._id),"pyramid"===e.type?n.getActiveChallengeByCompetitionByPlayer(e._id,i.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))}):"versus"===e.type&&n.getActiveChallengesByCompetition(e._id).then(function(t){t.data.length>0&&(e.activeChallenge=t.data[0],0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var l=[],s=this;s.activeChallenge=null,r(),e.$on("ws:competition_updated",function(e,t){l.indexOf(t.competitionId)>=0&&(o.info(t.description),a())})}e.$inject=["$scope","competitionsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyCompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){e.currentUser.displayName||(r.user.displayName=e.currentUser.firstName+" "+e.currentUser.lastName)}function o(i){if(i.password!==i.confirmPassword)n.error("Passwords don't match!");else if(i.firstName.length<1||i.lastName.length<1||i.displayName.length<1)n.error("Don't leave names blank!  How will people know who you are?");else{var o={_id:i._id};(i.firstName!==e.currentUser.firstName&&i.firstName.length>0||i.lastName!==e.currentUser.lastName&&i.lastName.length>0||i.displayName!==e.currentUser.displayName&&i.displayName.length>0)&&(o.firstName=i.firstName,o.lastName=i.lastName,o.displayName=i.displayName),i.password&&i.password.lentgh>0&&(o.password=i.password),t.updateUser(o).then(function(){n.success("Your information has been updated"),r.userForm.$setPristine();var t=angular.copy(e.currentUser);angular.extend(t,o),e.currentUser=t,r.user.confirmPassword=r.user.password=""})}}var r=this;r.user={_id:e.currentUser._id,firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,displayName:e.currentUser.displayName},r.updateUser=o,r.userForm={},i()}e.$inject=["identityService","userService","notifyService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,i){var o=i.scrollaxis||"y",r=i.theme||"minimal-dark",a=i.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,r,o,a)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),i=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!i||i&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuZGlyZWN0aXZlLmpzIiwiY2hhbGxlbmdlcy9zZXJ2aWNlcy9jaGFsbGVuZ2VzLnNlcnZpY2UuanMiLCJjb21tb24vY29tcG9uZW50cy9mb290ZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2ZpbHRlcnMvb3JkZXItb2JqZWN0LWJ5LmZpbHRlci5qcyIsImNvbW1vbi9zZXJ2aWNlcy9hbGVydHMuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9pbmRlbnRpdHkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9ub3RpZnkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zY3JvbGxiYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zaWRlYmFyLnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvd2Vic29ja2V0LnNlcnZpY2UuanMiLCJjb21tb24vdmlld3MvaG9tZS5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvY29tcGV0aXRpb24tY29tcGFjdC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcHlyYW1pZC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3ZlcnN1cy5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvc2VydmljZXMvY29tcGV0aXRpb25zLnNlcnZpY2UuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24tYWRtaW4uY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1zdGF0cy5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY3JlYXRlLWNvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvbXktY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy92aWV3cy91c2VyLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tcG9uZW50cy91aS9zY3JvbGxiYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCIkaHR0cFByb3ZpZGVyIiwiJHVpYlRvb2x0aXBQcm92aWRlciIsIiRxUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCJvcHRpb25zIiwiYXBwZW5kVG9Cb2R5IiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwibG9jYWxTdG9yYWdlU2VydmljZSIsInRvZ2dsZVNpZGViYXJMb2NrZWQiLCJsb2NrZWQiLCJzZXQiLCJhcHBDdHJsIiwidGhpcyIsImxvY2tTaWRlYmFyIiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJzdXBlckFkbWluIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJhZG1pbiIsInJlcXVpcmVBZG1pbiIsInVzZXIiLCJyZXF1aXJlQXV0aCIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiY29udGVudEAiLCJyZXNvbHZlIiwiYXV0aCIsImF1dGhTZXJ2aWNlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsImF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCIkaW5qZWN0IiwiYXBwUnVuIiwiJHJvb3RTY29wZSIsIiRkb2N1bWVudCIsInNpZGViYXJTZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsInByZXZpb3VzIiwicHJldlBhcmFtcyIsInNldFNpZGViYXJTdGF0dXMiLCJib2R5Iiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50IiwicnVuIiwiJGh0dHAiLCIkcSIsInVzZXJTZXJ2aWNlIiwiaWRlbnRpdHlTZXJ2aWNlIiwibm90aWZ5U2VydmljZSIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2UiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwicmVhc29uIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsIl8iLCJmb3JFYWNoIiwiZGlzcGxheU5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInNvcnRCeSIsInZlcmlmeVVzZXIiLCJ1c2VySWQiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInBhcmFtcyIsImdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsiLCJyZXNldFBhc3N3b3JkIiwicHV0IiwidXBkYXRlVXNlciIsIkxvZ2luQ3RybCIsImFjdGl2YXRlIiwibG9naW4iLCJ2bSIsIlBhc3N3b3JkUmVzZXRDdHJsIiwiJHN0YXRlUGFyYW1zIiwidmVyaWZpZWQiLCJyZXNldFBhc3N3b3JkRm9ybSIsImNvbmZpcm1QYXNzd29yZCIsIlJlZ2lzdGVyQ3RybCIsInJlZ2lzdGVyIiwibmV3VXNlciIsIlZlcmlmaWNhdGlvbkN0cmwiLCJ2ZXJpZnlpbmciLCJ3cG1BY3RpdmVDaGFsbGVuZWdlcyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJjdHJsRnVuYyIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb21wZXRpdGlvbiIsIiRzY29wZSIsImNoYWxsZW5nZXNTZXJ2aWNlIiwiJHdhdGNoIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlcyIsImNoYWxsZW5nZXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsIl9pZCIsImxlbmd0aCIsImNoYWxsZW5nZSIsInR5cGUiLCJwbGF5ZXJzIiwiY2hhbGxlbmdlciIsInRlYW0iLCJvcHBvbmVudCIsImZpbmQiLCJwb3NpdGlvbiIsInRpbWVMaW1pdCIsInRpbWVUb0V4cGlyZSIsIm1vbWVudCIsImRpZmYiLCJjcmVhdGVkIiwiYWRkIiwiZXhwaXJlcyIsImR1cmF0aW9uIiwiYXNIb3VycyIsIndwbUNvbXBsZXRlZENoYWxsZW5lZ2VzIiwiYWxsb3dEZWxldGUiLCIkd2F0Y2hHcm91cCIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJjbG9zZU9uQ2FuY2VsIiwic3BsaWNlIiwid3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMiLCJwbGF5ZXIiLCJhc3NpZ25wbGF5ZXJzVG9MZXZlbHMiLCJjYWxjdWxhdGVTdHJlYWsiLCJjYWxjdWF0ZVdpbkFuZExvc2VzIiwiYnJlYWtQb2ludHMiLCJpIiwibWF4TGV2ZWxzIiwicHVzaCIsImxldmVsIiwiaiIsImluZGV4T2YiLCJzdHJlYWtUeXBlIiwic3RyZWFrIiwiY29udGludWVTdHJlYWsiLCJyZXN1bHRzIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsIndwbVRlYW1PdmVyYWxsUmVzdWx0cyIsInNpbmdsZVBsYXllclRlYW1zIiwicGxheWVyTmFtZSIsImNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2UiLCJjYW5jZWxQeXJhbWlkQ2hhbGxlbmdlIiwiY3JlYXRlVmVyc3VzQ2hhbGxlbmdlIiwiY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlIiwiY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UiLCJnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsImNvbXBldGl0aW9uSWQiLCJnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJwbGF5ZXJJZCIsImdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwibGltaXQiLCJkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJkZWxldGUiLCJnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbiIsIndwbUZvb3RlciIsImluZGVudGl0eSIsIndwbUhlYWRlciIsImFsZXJ0c1NlcnZpY2UiLCJnZXRBY3RpdmVBbGVydHMiLCJoZWFkZXJDdHJsIiwiYWxlcnRzIiwiZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIiLCJjbGVhckFsZXJ0IiwiaW5kZXgiLCJjbGVhckFsbEFsZXJ0cyIsImNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhclN0YXR1cyIsImxlZnQiLCJnZXRTaWRlYmFyU3RhdHVzIiwiZSIsInNvbWUiLCJ3cG1TaWRlYmFyIiwib3JkZXJPYmplY3RCeSIsImlucHV0IiwiYXR0cmlidXRlIiwiaXNPYmplY3QiLCJhcnJheSIsIm9iamVjdEtleSIsInNvcnQiLCJhIiwiYiIsInBhcnNlSW50IiwiYWxlcnRJZCIsIiR3aW5kb3ciLCJyb2xlcyIsImJvb3RzdHJhcHBlZFVzZXJPYmplY3QiLCJpbmZvIiwidGFyZ2V0IiwiJCIsIm5vdGlmeSIsIndhcm5pbmciLCJpbnZlcnNlIiwibm90aWZ5RGVmYXVsdHMiLCJuZXdlc3Rfb25fdG9wIiwib2Zmc2V0IiwieCIsInkiLCJkZWxheSIsInNjcm9sbGJhclNlcnZpY2UiLCJtYWxpaHVTY3JvbGwiLCJzZWxlY3RvciIsInRoZW1lIiwic2Nyb2xsYXhpcyIsIm1vdXNld2hlZWxheGlzIiwibUN1c3RvbVNjcm9sbGJhciIsInNjcm9sbEluZXJ0aWEiLCJheGlzIiwibW91c2VXaGVlbCIsImVuYWJsZSIsInByZXZlbnREZWZhdWx0Iiwic3RhdHVzIiwicmlnaHQiLCJ3ZWJzb2NrZXRTZXJ2aWNlIiwiJHRpbWVvdXQiLCJ3ZWJzb2NrZXRIb3N0IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsInJldHJ5IiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyIsIm9uY2xvc2UiLCJyZXRyeVNlY29uZHMiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsImpzb24iLCJzdHJpbmdpZnkiLCJIb21lQ3RybCIsImNvbXBldGl0aW9uc1NlcnZpY2UiLCJnZXRQdWJsaWNDb21wZXRpdGlvbnMiLCJjb21wZXRpdGlvbnMiLCJwdWJsaWNDb21wZXRpdGlvbnMiLCJnZXRQcml2YXRlQ29tcGV0aXRpb25zIiwicHJpdmF0ZUNvbXBldGl0aW9ucyIsIndwbUNvbXBldGl0aW9uQ29tcGFjdCIsIndwbVBlbmRpbmdQbGF5ZXJzIiwiYXBwcm92ZVBlbmRpbmdQbGF5ZXIiLCJkZW55UGVuZGluZ1BsYXllciIsInBlbmRpbmdQbGF5ZXJzIiwid3BtUHlyYW1pZCIsInJlcGxhY2UiLCIkZmlsdGVyIiwibWF4UGxheWVycyIsIm9yZGVyUGxheWVycyIsImdldFBsYXllcnNTdGF0dXMiLCJhc3NpZ25MZXZlbHNUb1BsYXllcnMiLCJjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcyIsImZpbGxJbkVtcHR5QmxvY2tzIiwiY3VycmVudFVzZXJJc0FkbWluIiwiY3VycmVudFVzZXJJc1BlbmRpbmciLCJhZG1pbnMiLCJjdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiIsImhhc0FjdGl2ZUNoYWxsZW5nZSIsImNsYXNzIiwiY3VycmVudFVzZXJQbGF5ZXIiLCJhY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCIsImN1cnJlbnRPcHBvbmVudCIsImF2YWlsYWJsZSIsImhvdXJzVG9FeHBpcmUiLCJjb21wbGV0ZUNoYWxsZW5nZSIsImZpbmRBdmFpbGFibGVDaGFsbGVuZ2VzIiwiY3JlYXRlQnJlYWtQb2ludHMiLCJsZXZlbHMiLCJudW1iZXJPZkJsb2NrcyIsImxhc3QiLCJudW1iZXJPZlJlYWxQbGF5ZXJzIiwiYXZhaWxhYmxlQ2hhbGxlbmdlcyIsImxldmVsQWJvdmUiLCJjcmVhdGVDaGFsbGVuZ2UiLCJjb21wZXRpdGlvbk5hbWUiLCJuYW1lIiwiY29tcGxldGUiLCJmb3JmZWl0RGF5cyIsImVtYWlsIiwiY29tcGV0aXRpb25NZW51VG9nZ2xlIiwiY2FuY2VsQ2hhbGxlbmdlIiwid2lubmVySXNDdXJyZW50VXNlciIsImZvcmZlaXRMb3NlciIsInN3YXBQb3NpdGlvbnMiLCJyZW1vdmluZ0N1cnJlbnRVc2VyIiwicmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24iLCJmb3JmZWl0Q2hhbGxlbmdlIiwiYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uIiwicmVzdHJpY3RKb2lucyIsImFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0IiwiYWRkUGxheWVyVG9Db21wZXRpdGlvbiIsImNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbiIsImNvbmZpcm1CdXR0b25DbGFzcyIsImdldENvbXBldGl0aW9uIiwicCIsIm9wZW5Qb3NpdGlvbiIsInJlbW92ZWRQbGF5ZXIiLCJyZW1vdmUiLCJ1cGRhdGVkUGxheWVycyIsInVwZGF0ZWRQbGF5ZXIiLCJyZW1vdmVkUGxheWVyRnJvbUNvbXBldGl0aW9uIiwicGxheWVyQ2xpY2siLCJzaG93Q2hhbGxlbmdlTW9kYWwiLCJyZWZyZXNoQ29tcGV0aXRpb24iLCJjaGFsbGVuZ2VEZXRhaWxzIiwiZGVzY3JpcHRpb24iLCJ3cG1VcGRhdGVBZG1pbnMiLCJhZGRlZEFkbWlucyIsImNsb25lRGVlcCIsImRpc2FibGVTdWJtaXQiLCJ1c2VySXNQcmltYXJ5QWRtaW4iLCJwcmltYXJ5IiwiZ2V0QXZhaWxhYmxlQWRtaW5zIiwiYXZhaWxhYmxlQWRtaW5zIiwicmVtb3ZlZEFkbWlucyIsImNvbXBldGl0aW9uQWRtaW4iLCJhdmFpbGFibGVBZG1pbiIsIm9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zIiwidXBkYXRlQ29tcGV0aXRpb24iLCJjYW5jZWxVcGRhdGUiLCJyZW1vdmVBZG1pbiIsImFkZEFkbWluIiwid3BtVXBkYXRlUGxheWVycyIsImFkZGVkUGxheWVycyIsImdldEF2YWlsYWJsZVBsYXllcnMiLCJhdmFpbGFibGVQbGF5ZXJzIiwicmVtb3ZlZFBsYXllcnMiLCJjb21wZXRpdGlvblBsYXllciIsImF2YWlsYWJsZVBsYXllciIsIm9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyIsInJlb3JkZXJQbGF5ZXJzIiwicmVvcmRlclZlcnN1c1BsYXllcnMiLCJyZW9yZGVyUHlyYW1pZFBsYXllcnMiLCJyZW1vdmVQbGF5ZXIiLCJhZGRQbGF5ZXIiLCJ3cG1WZXJzdXMiLCJzaG93Q29udHJvbHMiLCJncm91cFBsYXllcnMiLCJnZXRDdXJyZW50VXNlclN0YXR1cyIsInRlYW1zIiwiYWN0aXZlQ2hhbGxlbmdlIiwiY2hhbGxlbmdlRXhwaXJlVGltZSIsInRvZ2dsZUNvbnRyb2xzIiwid2lubmluZ1RlYW0iLCJnZXRDb21wZXRpdGlvbnNGb3JVc2VyIiwiY3JlYXRlQ29tcGV0aXRpb24iLCJkZWxldGVDb21wZXRpdGlvbiIsIkNvbXBldGl0aW9uQWRtaW5DdHJsIiwiaXNBZG1pbiIsInVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucyIsInVwZGF0ZWRDb21wZXRpdGlvbiIsInVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZSIsInByaXZhdGUiLCJjb21wZXRpdGlvbkRldGFpbHMiLCJDb21wZXRpdGlvblN0YXRzQ3RybCIsIm51bWJlciIsInBsYXllcnNSZXN1bHRzIiwiQ29tcGV0aXRpb25DdHJsIiwiQ29tcGV0aXRpb25zQ3RybCIsIkNyZWF0ZUNvbXBldGl0aW9uQ3RybCIsIm5ld0NvbXBldGl0aW9uIiwiY29tcGV0aXRpb25UeXBlcyIsIk15Q29tcGV0aXRpb25zQ3RybCIsIm15Q29tcGV0aXRpb25zIiwiVXNlckN0cmwiLCJ1c2VyVXBkYXRlcyIsImxlbnRnaCIsInVzZXJGb3JtIiwiJHNldFByaXN0aW5lIiwiY3VycmVudFVzZXJDbG9uZSIsImNvcHkiLCJleHRlbmQiLCJjT3ZlcmZsb3ciLCJsaW5rRnVuYyIsImVsZW1lbnQiLCJhdHRycyIsImhhc0NsYXNzIiwibGluayIsInRvZ2dsZVN1Ym1lbnUiLCJlbCIsImNsaWNrIiwibmV4dCIsInNsaWRlVG9nZ2xlIiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiLCJ3YXZlc0VmZmVjdCIsIldhdmVzIiwiYXR0YWNoIiwiaW5pdCIsImZnTGluZSIsImNoaWxkcmVuIiwiZmlyc3QiLCJpc0Zsb2F0TGFiZWwiLCJmb2N1cyIsImFkZENsYXNzIiwiYmx1ciIsInZhbCIsInJlbW92ZUNsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxPQUNBLFlBQ0EsZUFDQSxZQUNBLHNCQUNBLGFBQ0Esd0JBQ0EsUUFDQSxxQkFDQSx3QkFDQSxzQkNWQSx3QkFJQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRixFQUFBRyxTQUFBQyxRQUFBQyxNQUNBTCxFQUFBRyxTQUFBQyxRQUFBQyxRQUdBTCxFQUFBRyxTQUFBQyxRQUFBQyxJQUFBLHFCQUFBLGdDQUVBTCxFQUFBRyxTQUFBQyxRQUFBQyxJQUFBLGlCQUFB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QUFBLE9BQ0FnSSxVQUFBLFlBQUFtVSxNQ0pBLFdBQ0EsWUFLQSxTQUFBTSxLQVFBLFFBQUFMLEdBQUFoVSxFQUFBc1UsR0FDQUEsRUFBQUMsTUFBQSxXQUNBRCxFQUFBRSxPQUFBQyxZQUFBLEtBQ0FILEVBQUFJLFNBQUFDLFlBQUEsYUFWQSxHQUFBL1UsSUFDQUcsU0FBQSxJQUNBcVUsS0FBQUosRUFHQSxPQUFBcFUsR0FWQWpJLFFBQ0FDLE9BQUEsT0FDQWdJLFVBQUEsZ0JBQUF5VSxNQ0pBLFdBQ0EsWUFLQSxTQUFBTyxLQVFBLFFBQUFaLEdBQUFoVSxFQUFBaVUsR0FDQUEsRUFBQUUsU0FBQSxhQUFBRixFQUFBRSxTQUFBLGFBQ0FVLE1BQUFDLE9BQUFiLEdBQUEsaUJBQ0FBLEVBQUFFLFNBQUEsYUFDQVUsTUFBQUMsT0FBQWIsR0FBQSxnQkFFQVksTUFBQUMsT0FBQWIsR0FHQVksTUFBQUUsT0FoQkEsR0FBQW5WLElBQ0FHLFNBQUEsSUFDQXFVLEtBQUFKLEVBR0EsT0FBQXBVLEdBVkFqSSxRQUNBQyxPQUFBLE9BQ0FnSSxVQUFBLGNBQUFnVixNQ0pBLFdBQ0EsWUFLQSxTQUFBSSxLQVFBLFFBQUFoQixHQUFBaFUsRUFBQWlVLEdBQ0EsR0FBQTVNLEdBQUE0TSxFQUFBZ0IsV0FBQUMsUUFDQUMsRUFBQWxCLEVBQUFTLFNBQUFQLFNBQUEsV0FDQTlNLEdBQUErTixNQUFBLFdBQ0FuQixFQUFBb0IsU0FBQSxnQkFHQWhPLEVBQUFpTyxLQUFBLGFBQ0FILEdBQUFBLEdBQUEsSUFBQTlOLEVBQUFrTyxNQUFBOVUsU0FDQXdULEVBQUF1QixZQUFBLGdCQWhCQSxHQUFBNVYsSUFDQUcsU0FBQSxJQUNBcVUsS0FBQUosRUFHQSxPQUFBcFUsR0FWQWpJLFFBQ0FDLE9BQUEsT0FDQWdJLFVBQUEsU0FBQW9WIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkuYm9vdHN0cmFwJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJyxcbiAgJ0xvY2FsU3RvcmFnZU1vZHVsZScsXG4gICdhbmd1bGFyLXNvcnRhYmxlLXZpZXcnLFxuICAnYW5ndWxhci52ZXJ0aWxpemUnXG5dKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCAnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYXRpb24oJGh0dHBQcm92aWRlciwgJHVpYlRvb2x0aXBQcm92aWRlciwgJHFQcm92aWRlcikge1xuICAgIC8vaW5pdGlhbGl6ZSBnZXQgaWYgbm90IHRoZXJlXG4gICAgaWYgKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KSB7XG4gICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0ge307ICAgIFxuICAgIH0gICAgXG4gICAgLy9kaXNhYmxlIElFIGFqYXggcmVxdWVzdCBjYWNoaW5nXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnSWYtTW9kaWZpZWQtU2luY2UnXSA9ICdGcmksIDAxIEphbiAyMDE2IDA1OjAwOjAwIEdNVCc7XG4gICAgLy8gZXh0cmFcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydDYWNoZS1Db250cm9sJ10gPSAnbm8tY2FjaGUnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ1ByYWdtYSddID0gJ25vLWNhY2hlJztcblxuICAgICR1aWJUb29sdGlwUHJvdmlkZXIub3B0aW9ucyh7IGFwcGVuZFRvQm9keTogdHJ1ZSB9KTtcbiAgICAkcVByb3ZpZGVyLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKGZhbHNlKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XG5cbiAgZnVuY3Rpb24gQXBwQ3RybCgkc3RhdGUsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcbiAgICB2YXIgYXBwQ3RybCA9IHRoaXM7XG4gICAgLy8gVXNlIHRoaXMgZm9yIFNpZGViYXIgbWVudVxuICAgIGFwcEN0cmwuJHN0YXRlID0gJHN0YXRlO1xuICAgIC8vIExvY2sgdGhlIHNpZGViYXIgaW4gdmlld1xuICAgIGFwcEN0cmwubG9ja1NpZGViYXIgPSBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnc2lkZWJhckxvY2tlZCcpO1xuICAgIGFwcEN0cmwudG9nZ2xlU2lkZWJhckxvY2tlZCA9IHRvZ2dsZVNpZGViYXJMb2NrZWQ7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyTG9ja2VkKGxvY2tlZCkge1xuICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ3NpZGViYXJMb2NrZWQnLCBsb2NrZWQpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJlUm91dGVzKTtcblxuICBmdW5jdGlvbiBjb25maWd1cmVSb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB2YXIgcm91dGVSb2xlQ2hlY2tzID0ge1xuICAgICAgc3VwZXJBZG1pbjogcmVxdWlyZVN1cGVyQWRtaW4sXG4gICAgICBhZG1pbjogcmVxdWlyZUFkbWluLFxuICAgICAgdXNlcjogcmVxdWlyZUF1dGhcbiAgICB9O1xuXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy8gZm9yIGFueSB1bm1hdGNoZWQgdXJsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJy9jb21wZXRpdGlvbnMvJywgJy9jb21wZXRpdGlvbnMnKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tbW9uL3ZpZXdzL2hvbWUuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy9jb21wZXRpdGlvbnMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb25zLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJywge1xuICAgICAgICB1cmw6ICcvbXktY29tcGV0aXRpb25zJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlDb21wZXRpdGlvbnNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL215LWNvbXBldGl0aW9ucy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMudmlldycsIHtcbiAgICAgICAgdXJsOiAnL3ZpZXcvOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb21wZXRpdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuc3RhdHMnLCB7XG4gICAgICAgIHVybDogJy9zdGF0cy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uU3RhdHNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLXN0YXRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnY29tcGV0aXRpb25zLmFkbWluJywge1xuICAgICAgICB1cmw6ICcvYWRtaW4vOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb21wZXRpdGlvbkFkbWluQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1hZG1pbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuY3JlYXRlJywge1xuICAgICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlQ29tcGV0aXRpb25DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NyZWF0ZS1jb21wZXRpdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd1c2VyJywge1xuICAgICAgICB1cmw6ICcvdXNlcicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd1c2Vycy92aWV3cy91c2VyLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncmVnaXN0ZXInLCB7XG4gICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd2ZXJpZnknLCB7XG4gICAgICAgIHVybDogJy92ZXJpZmljYXRpb24nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZlcmlmaWNhdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy92ZXJpZmljYXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCd2ZXJpZmljYXRpb24nLCB7XG4gICAgICAgIHVybDogJy92ZXJpZmljYXRpb24vOnVzZXJJZC86dmVyaWZpY2F0aW9uVG9rZW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZlcmlmaWNhdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy92ZXJpZmljYXRpb24uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdwYXNzd29yZC1yZXNldC1yZXF1ZXN0Jywge1xuICAgICAgICB1cmw6ICcvcGFzc3dvcmQtcmVzZXQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bhc3N3b3JkUmVzZXRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcGFzc3dvcmQtcmVzZXQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdwYXNzd29yZC1yZXNldCcsIHtcbiAgICAgICAgdXJsOiAnL3Bhc3N3b3JkLXJlc2V0Lzp1c2VySWQvOnZlcmlmaWNhdGlvblRva2VuJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQYXNzd29yZFJlc2V0Q3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3Bhc3N3b3JkLXJlc2V0Lmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlcXVpcmVBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdhZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZVN1cGVyQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlU3VwZXJBZG1pbihhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKCdzdXBlci1hZG1pbicpO1xuICB9XG5cbiAgcmVxdWlyZUF1dGguJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQXV0aChhdXRoU2VydmljZSkge1xuICAgIHJldHVybiBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykucnVuKGFwcFJ1bik7XG5cbiAgZnVuY3Rpb24gYXBwUnVuKCRyb290U2NvcGUsICRzdGF0ZSwgJGRvY3VtZW50LCBzaWRlYmFyU2VydmljZSkge1xuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciA9PT0gJ25vdCBhdXRob3JpemVkJykge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IHRvU3RhdGU7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gdG9QYXJhbXM7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKGZhbHNlKTtcbiAgICAgIC8vIFNjcm9sbCB0byB0aGUgdG9wIG9uIHJvdXRlIGNoYW5nZXNcbiAgICAgICRkb2N1bWVudFswXS5ib2R5LnNjcm9sbFRvcCA9ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBhdXRoU2VydmljZSgkc3RhdGUsICRodHRwLCAkcSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgYXV0aGVudGljYXRlVXNlcjogYXV0aGVudGljYXRlVXNlcixcbiAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIsXG4gICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGU6IGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUsXG4gICAgICBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlOiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAndW52ZXJpZmllZCcpIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZSgndW52ZXJpZmllZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICB1c2VyRGF0YTogdXNlckRhdGFcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVhc29uID09PSAnRXJyb3I6IEVtYWlsIGFscmVhZHkgaW4gdXNlJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCBhbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhhdCBlbWFpbCBhZGRyZXNzLicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7XG4gICAgICAgIGxvZ291dDogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgdXNlclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHVzZXJTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRBbGxVc2VyczogZ2V0QWxsVXNlcnMsXG4gICAgICB2ZXJpZnlVc2VyOiB2ZXJpZnlVc2VyLFxuICAgICAgZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluazogZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayxcbiAgICAgIHJlc2V0UGFzc3dvcmQ6IHJlc2V0UGFzc3dvcmQsXG4gICAgICB1cGRhdGVVc2VyOiB1cGRhdGVVc2VyXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBldmVyeSB1c2VyIGhhcyBhIGRpc3BsYXkgbmFtZVxuICAgICAgICBfLmZvckVhY2godXNlcnMuZGF0YSwgZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICBpZiAoIXVzZXIuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHVzZXIuZGlzcGxheU5hbWUgPSB1c2VyLmZpcnN0TmFtZSArICcgJyArIHVzZXIubGFzdE5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdXNlcnMuZGF0YSA9IF8uc29ydEJ5KHVzZXJzLmRhdGEsICdkaXNwbGF5TmFtZScpO1xuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2ZXJpZnlVc2VyKHVzZXJJZCwgdmVyaWZpY2F0aW9uVG9rZW4pIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlci92ZXJpZmljYXRpb24nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIHZlcmlmaWNhdGlvblRva2VuOiB2ZXJpZmljYXRpb25Ub2tlblxuICAgICAgICB9XG4gICAgICB9KTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlci9wYXNzd29yZC9saW5rJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWVcbiAgICAgICAgfVxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldFBhc3N3b3JkKHVzZXJJZCwgdmVyaWZpY2F0aW9uVG9rZW4sIHBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3VzZXIvcGFzc3dvcmQvcmVzZXQnLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICB2ZXJpZmljYXRpb25Ub2tlbjogdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVVc2VyKHVzZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvdXNlcicsIHtcbiAgICAgICAgdXNlcjogdXNlclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIExvZ2luQ3RybCk7XG5cbiAgZnVuY3Rpb24gTG9naW5DdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmxvZ2luID0gbG9naW47XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1VzZXJuYW1lIC8gcGFzc3dvcmQgY29tYmluYWl0b24gaW5jb3JyZWN0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgPT09ICd1bnZlcmlmaWVkJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1lvdSBtdXN0IHZlcmlmeSB5b3VyIGVtYWlsIGJlZm9yZSB5b3UgY2FuIGxvZ2luJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCRzdGF0ZS5wcmV2aW91cykge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCRzdGF0ZS5wcmV2aW91cywgJHN0YXRlLnByZXZQYXJhbXMpO1xuICAgICAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gbnVsbDtcbiAgICAgICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQYXNzd29yZFJlc2V0Q3RybCcsIFBhc3N3b3JkUmVzZXRDdHJsKTtcblxuICBmdW5jdGlvbiBQYXNzd29yZFJlc2V0Q3RybCgkc3RhdGUsICRzdGF0ZVBhcmFtcywgdXNlclNlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnVzZXJuYW1lID0gJyc7XG4gICAgdm0udmVyaWZpZWQgPSBmYWxzZTtcbiAgICB2bS5yZXNldFBhc3N3b3JkRm9ybSA9IHt9O1xuICAgIHZtLmdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsgPSBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rO1xuICAgIHZtLnJlc2V0UGFzc3dvcmQgPSByZXNldFBhc3N3b3JkO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgIH0gZWxzZSBpZiAoJHN0YXRlUGFyYW1zLnVzZXJJZCAmJiAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pIHtcbiAgICAgICAgdXNlclNlcnZpY2UudmVyaWZ5VXNlcigkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHRoYXQgZW1haWwgYWRkcmVzcycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uuc3VjY2VzcygnUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgZm9yIGEgcGFzc3dvcmQgcmVzZXQgbGluaycpO1xuICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldFBhc3N3b3JkKHJlc2V0UGFzc3dvcmRGb3JtKSB7XG4gICAgICBpZiAocmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQgIT09IHJlc2V0UGFzc3dvcmRGb3JtLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnJlc2V0UGFzc3dvcmQoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuLCByZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcihyZXNwb25zZS5kYXRhLnVzZXJuYW1lLCByZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBSZWdpc3RlckN0cmwpO1xuXG4gIGZ1bmN0aW9uIFJlZ2lzdGVyQ3RybCgkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKG5ld1VzZXIpIHtcbiAgICAgIGlmIChuZXdVc2VyLnBhc3N3b3JkICE9PSBuZXdVc2VyLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghbmV3VXNlci5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIG5ld1VzZXIuZGlzcGxheU5hbWUgPSBuZXdVc2VyLmZpcnN0TmFtZSArICcgJyArIG5ld1VzZXIubGFzdE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlVXNlcihuZXdVc2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3ZlcmlmeScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVmVyaWZpY2F0aW9uQ3RybCcsIFZlcmlmaWNhdGlvbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIFZlcmlmaWNhdGlvbkN0cmwoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS52ZXJpZmllZCA9IHVuZGVmaW5lZDtcbiAgICB2bS52ZXJpZnlpbmcgPSBmYWxzZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMudXNlcklkICYmICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgICB2bS52ZXJpZnlpbmcgPSB0cnVlO1xuICAgICAgICB2bS52ZXJpZmllZCA9IG51bGw7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnZlcmlmeVVzZXIoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUFjdGl2ZUNoYWxsZW5lZ2VzJywgd3BtQWN0aXZlQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIHdwbUFjdGl2ZUNoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9hY3RpdmUtY2hhbGxlbmdlcy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzKCkge1xuICAgICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb24uX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2VzLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7ICAgICAgICAgIFxuICAgICAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgICAgIC8vIElmIG1vcmUgdGhhbiAxIHBsYXllciBwZXIgdGVhbSB0aGFuIHVzZSBUZWFtIG5hbWVcbiAgICAgICAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lID0gJ1RlYW0gJyArIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW07XG4gICAgICAgICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50LmRpc3BsYXlOYW1lID0gJ1RlYW0gJyArIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtO1xuICAgICAgICAgICAgICAvLyBJZiBvbmx5IDEgcGxheWVyIHBlciB0ZWFtIHRoYW4ganVzdCB1c2UgdGhlIHBsYXllcnMgbmFtZXNcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5kaXNwbGF5TmFtZSA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdwb3NpdGlvbic6ICBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtfSkuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50LmRpc3BsYXlOYW1lID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtfSkuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJykpICogLTE7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZS5leHBpcmVzID0gbW9tZW50LmR1cmF0aW9uKHRpbWVUb0V4cGlyZSkuYXNIb3VycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUNvbXBsZXRlZENoYWxsZW5lZ2VzJywgd3BtQ29tcGxldGVkQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIHdwbUNvbXBsZXRlZENoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9JyxcbiAgICAgICAgYWxsb3dEZWxldGU6ICc9JyxcbiAgICAgICAgY2hhbGxlbmdlczogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL2NvbXBsZXRlZC1jaGFsbGVuZ2VzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgIHZtLmRlbGV0ZUNoYWxsZW5nZSA9IGRlbGV0ZUNoYWxsZW5nZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2hHcm91cChbJ3ZtLmNoYWxsZW5nZXMnLCAndm0uY29tcGV0aXRpb24nXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh2bS5jaGFsbGVuZ2VzICYmIHZtLmNoYWxsZW5nZXMubGVuZ3RoID4gMCAmJiB2bS5jb21wZXRpdGlvbiAmJiB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzKSB7XG4gICAgICAgICAgZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlzcGxheUNvbXBsZXRlZENoYWxsZW5nZXMoKSB7XG4gICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBjaGFsbGVuZ2UubG9zZXIgPSBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgPyAnb3Bwb25lbnQnIDogJ2NoYWxsZW5nZXInO1xuICAgICAgICBpZiAoY2hhbGxlbmdlLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgLy8gSWYgbW9yZSB0aGFuIDEgcGxheWVyIHBlciB0ZWFtIHRoYW4gdXNlIFRlYW0gbmFtZVxuICAgICAgICAgIGlmICh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lID0gJ1RlYW0gJyArIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW07XG4gICAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuZGlzcGxheU5hbWUgPSAnVGVhbSAnICsgY2hhbGxlbmdlLm9wcG9uZW50LnRlYW07XG4gICAgICAgICAgLy8gSWYgb25seSAxIHBsYXllciBwZXIgdGVhbSB0aGFuIGp1c3QgdXNlIHRoZSBwbGF5ZXJzIG5hbWVzXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ3Bvc2l0aW9uJzogIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW19KS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5kaXNwbGF5TmFtZSA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdwb3NpdGlvbic6ICBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbX0pLmRpc3BsYXlOYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGFsbGVuZ2Uud2hlbkNvbXBsZXRlZCA9IG1vbWVudChjaGFsbGVuZ2UuY29tcGxldGVkKS5jYWxlbmRhcihudWxsLCB7XG4gICAgICAgICAgc2FtZURheTogJ1tUb2RheV0nLFxuICAgICAgICAgIG5leHREYXk6ICdbVG9tb3Jyb3ddJyxcbiAgICAgICAgICBuZXh0V2VlazogJ2RkZGQnLFxuICAgICAgICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5XScsXG4gICAgICAgICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCcsXG4gICAgICAgICAgc2FtZUVsc2U6ICdNTU0gREQgWVlZWSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlSWQsICRpbmRleCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENoYWxsZW5nZSBSZXN1bHQ/JyxcbiAgICAgICAgdGV4dDogJ1lvdVxcJ2xsIHN0aWxsIG5lZWQgdG8gcmVvcmRlciB0aGUgcGxheWVycyBvbiB5b3VyIG93bicsXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnRGVsZXRlJyxcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05ldmVybWluZCcsXG4gICAgICAgIGNsb3NlT25Db25maXJtOiB0cnVlLFxuICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmRlbGV0ZUNoYWxsZW5nZSh2bS5jb21wZXRpdGlvbi5faWQsIGNoYWxsZW5nZUlkKS50aGVuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdm0uY2hhbGxlbmdlcy5zcGxpY2UoJGluZGV4LCAxKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVBsYXllck92ZXJhbGxSZXN1bHRzJywgd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMpO1xuXG4gIGZ1bmN0aW9uIHdwbVBsYXllck92ZXJhbGxSZXN1bHRzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcGxheWVyOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm1heExldmVscyA9IDc7XG4gICAgdm0ud2lucyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0ubG9zZXMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLnN0cmVhayA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICB2YWx1ZTogMFxuICAgIH07XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5wbGF5ZXIucmVzdWx0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLnBsYXllcikge1xuICAgICAgICAgIGFzc2lnbnBsYXllcnNUb0xldmVscyh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1bGF0ZVN0cmVhayh2bS5wbGF5ZXIpO1xuICAgICAgICAgIGNhbGN1YXRlV2luQW5kTG9zZXModm0ucGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXNzaWducGxheWVyc1RvTGV2ZWxzKHBsYXllcikge1xuICAgICAgLy8gRGV0ZXJtaW5lIGFsbCB0aGUgYnJlYWsgcG9pbnRzIHRvIGZpZ3VyZSBvdXQgbGV2ZWxzXG4gICAgICB2YXIgYnJlYWtQb2ludHMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ubWF4TGV2ZWxzOyBpKyspIHtcbiAgICAgICAgYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBhbGwgcGxheWVycyB0byB0aGUgbG93ZXN0IGxldmVsXG4gICAgICBwbGF5ZXIubGV2ZWwgPSBicmVha1BvaW50cy5sZW5ndGg7XG4gICAgICAvLyBOb3cgY2hlY2sgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaXMgYXQgYSBoaWdoZXIgbGV2ZWxcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYnJlYWtQb2ludHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA8IGJyZWFrUG9pbnRzW2ogKyAxXSkge1xuICAgICAgICAgIHBsYXllci5sZXZlbCA9IGJyZWFrUG9pbnRzLmluZGV4T2YoYnJlYWtQb2ludHNbal0pICsgMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN0cmVhayhwbGF5ZXIpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIHBsYXllcidzIGN1cnJlbnQgc3RyZWFrXG4gICAgICB2YXIgc3RyZWFrID0gMDtcbiAgICAgIHZhciBjb250aW51ZVN0cmVhayA9IHRydWU7XG4gICAgICB2YXIgc3RyZWFrVHlwZTtcbiAgICAgIF8uZm9yRWFjaChwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY29udGludWVTdHJlYWspIHtcbiAgICAgICAgICAvLyBXaW5uaW5nIFN0cmVha1xuICAgICAgICAgIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIGxvc2luZyBzdHJlYWsgYW5kIDEgdG8gdGhlaXIgd2lubmluZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnbG9zaW5nJykge1xuICAgICAgICAgICAgICBzdHJlYWsgKz0gMTtcbiAgICAgICAgICAgICAgc3RyZWFrVHlwZSA9ICd3aW5uaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLy8gTG9zaW5nIFN0cmVha1xuICAgICAgICAgIH0gZWxzZSBpZiAoKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyAmJiBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSB3aW5uaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciBsb3Npbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ3dpbm5pbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ2xvc2luZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2bS5zdHJlYWsgPSB7XG4gICAgICAgICAgdHlwZTogc3RyZWFrVHlwZSxcbiAgICAgICAgICB2YWx1ZTogc3RyZWFrXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWF0ZVdpbkFuZExvc2VzKHBsYXllcikge1xuICAgICAgLy8gRmlndXJlIG91dCB3aW5zIGFuZCBsb3Nlc1xuICAgICAgdm0ud2lucy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS53aW5zLnRvdGFsID0gdm0ud2lucy5hc0NoYWxsZW5nZXIgKyB2bS53aW5zLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLndpbnMuYnlGb3JmZWl0ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmZvcmZlaXQgJiYgKChjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbihjaGFsbGVuZ2UpIHsgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMudG90YWwgPSB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgKyB2bS5sb3Nlcy5hc09wcG9uZW50O1xuXG4gICAgICB2bS5sb3Nlcy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1UZWFtT3ZlcmFsbFJlc3VsdHMnLCB3cG1UZWFtT3ZlcmFsbFJlc3VsdHMpO1xuXG4gIGZ1bmN0aW9uIHdwbVRlYW1PdmVyYWxsUmVzdWx0cygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPScsXG4gICAgICAgIHRlYW06ICc9JyxcbiAgICAgICAgY2hhbGxlbmdlczogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY2hhbGxlbmdlcy9jb21wb25lbnRzL3RlYW0tb3ZlcmFsbC1yZXN1bHRzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ud2lucyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0ubG9zZXMgPSB7XG4gICAgICB0b3RhbDogMCxcbiAgICAgIGFzQ2hhbGxlbmdlcjogMCxcbiAgICAgIGFzT3Bwb25lbnQ6IDAsXG4gICAgICBieUZvcmZlaXQ6IDBcbiAgICB9O1xuICAgIHZtLnN0cmVhayA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICB2YWx1ZTogMFxuICAgIH07XG4gICAgdm0uc2luZ2xlUGxheWVyVGVhbXMgPSBmYWxzZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNoYWxsZW5nZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jaGFsbGVuZ2VzICYmIHZtLmNoYWxsZW5nZXMubGVuZ3RoID4gMCAmJiB2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIGNhbGN1bGF0ZVN0cmVhayh2bS50ZWFtLCB2bS5jaGFsbGVuZ2VzKTtcbiAgICAgICAgICBjYWxjdWF0ZVdpbkFuZExvc2VzKHZtLnRlYW0sIHZtLmNoYWxsZW5nZXMpO1xuXG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSAxIHBsYXllciBwZXIgdGVhbSB0aGFuIHVzZSBwbGF5ZXIncyBuYW1lXG4gICAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICB2bS5zaW5nbGVQbGF5ZXJUZWFtcyA9IHRydWU7XG4gICAgICAgICAgICB2bS5kaXNwbGF5TmFtZSA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdwb3NpdGlvbic6ICB2bS50ZWFtfSkuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICB2bS5wbGF5ZXJOYW1lID0gIF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdwb3NpdGlvbic6ICB2bS50ZWFtfSkuZmlyc3ROYW1lICsgJyAnICsgIF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdwb3NpdGlvbic6ICB2bS50ZWFtfSkubGFzdE5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTdHJlYWsodGVhbSwgY2hhbGxlbmdlcykge1xuICAgICAgLy8gRmlndXJlIG91dCB0aGUgdGVhbSdzIGN1cnJlbnQgc3RyZWFrXG4gICAgICB2YXIgc3RyZWFrID0gMDtcbiAgICAgIHZhciBjb250aW51ZVN0cmVhayA9IHRydWU7XG4gICAgICB2YXIgc3RyZWFrVHlwZTtcbiAgICAgIF8uZm9yRWFjaChjaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjb250aW51ZVN0cmVhaykge1xuICAgICAgICAgIC8vIFdpbm5pbmcgU3RyZWFrXG4gICAgICAgICAgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSBsb3Npbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIHdpbm5pbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ2xvc2luZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnd2lubmluZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIExvc2luZyBTdHJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0pIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSB3aW5uaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciBsb3Npbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ3dpbm5pbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ2xvc2luZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2bS5zdHJlYWsgPSB7XG4gICAgICAgICAgdHlwZTogc3RyZWFrVHlwZSxcbiAgICAgICAgICB2YWx1ZTogc3RyZWFrXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWF0ZVdpbkFuZExvc2VzKHRlYW0gLCBjaGFsbGVuZ2VzKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHdpbnMgYW5kIGxvc2VzXG4gICAgICB2bS53aW5zLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMudG90YWwgPSB2bS53aW5zLmFzQ2hhbGxlbmdlciArIHZtLndpbnMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ud2lucy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMudG90YWwgPSB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgKyB2bS5sb3Nlcy5hc09wcG9uZW50O1xuXG4gICAgICB2bS5sb3Nlcy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdjaGFsbGVuZ2VzU2VydmljZScsIGNoYWxsZW5nZXNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBjaGFsbGVuZ2VzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY3JlYXRlUHlyYW1pZENoYWxsZW5nZTogY3JlYXRlUHlyYW1pZENoYWxsZW5nZSxcbiAgICAgIGNyZWF0ZVZlcnN1c0NoYWxsZW5nZTogY3JlYXRlVmVyc3VzQ2hhbGxlbmdlLFxuICAgICAgY2FuY2VsUHlyYW1pZENoYWxsZW5nZTogY2FuY2VsUHlyYW1pZENoYWxsZW5nZSxcbiAgICAgIGNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZTogY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVWZXJzdXNDaGFsbGVuZ2U6IGNvbXBsZXRlVmVyc3VzQ2hhbGxlbmdlLFxuICAgICAgZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyOiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIsXG4gICAgICBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXI6IGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcixcbiAgICAgIGRlbGV0ZUNoYWxsZW5nZTogZGVsZXRlQ2hhbGxlbmdlLFxuICAgICAgZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb246IGdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvcHlyYW1pZC9jcmVhdGUnLCB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5jZWxQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9jaGFsbGVuZ2VzL3B5cmFtaWQvY2FuY2VsJywge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVmVyc3VzQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy92ZXJzdXMvY3JlYXRlJywge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9weXJhbWlkL2NvbXBsZXRlJywgIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlVmVyc3VzQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy92ZXJzdXMvY29tcGxldGUnLCAge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24vcGxheWVyJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgbGltaXQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9jb21wbGV0ZWQvY29tcGV0aXRpb24nLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIGxpbWl0OiBsaW1pdFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvY2hhbGxlbmdlcy9hY3RpdmUvY29tcGV0aXRpb24vcGxheWVyL2RlbGV0ZScsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNoYWxsZW5nZShjb21wZXRpdGlvbklkLCBjaGFsbGVuZ2VJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jaGFsbGVuZ2VzL2RlbGV0ZScsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgY2hhbGxlbmdlSWQ6IGNoYWxsZW5nZUlkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBsYXllclJlc3VsdHNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvcmVzdWx0cy9jb21wZXRpdGlvbi9wbGF5ZXInLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUZvb3RlcicsIHdwbUZvb3Rlcik7XG5cbiAgZnVuY3Rpb24gd3BtRm9vdGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUhlYWRlcicsIHdwbUhlYWRlcik7XG5cbiAgZnVuY3Rpb24gd3BtSGVhZGVyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICdoZWFkZXJDdHJsJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21tb24vY29tcG9uZW50cy9oZWFkZXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBzaWRlYmFyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSwgYWxlcnRzU2VydmljZSkge1xuICAgIHZhciBoZWFkZXJDdHJsID0gdGhpcztcbiAgICBoZWFkZXJDdHJsLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICBoZWFkZXJDdHJsLmxvZ291dCA9IGxvZ291dDtcbiAgICBoZWFkZXJDdHJsLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG4gICAgaGVhZGVyQ3RybC50b2dnbGVTaWRlYmFyID0gdG9nZ2xlU2lkZWJhcjtcbiAgICBoZWFkZXJDdHJsLmNsZWFyQWxlcnQgPSBjbGVhckFsZXJ0O1xuICAgIGhlYWRlckN0cmwuY2xlYXJBbGxBbGVydHMgPSBjbGVhckFsbEFsZXJ0cztcbiAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgZ2V0QWN0aXZlQWxlcnRzKCk7XG4gICAgICAkc2NvcGUuJHdhdGNoKCdoZWFkZXJDdHJsLmluZGVudGl0eS5jdXJyZW50VXNlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVBbGVydHMoKSB7XG4gICAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IFtdO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBhbGVydHNTZXJ2aWNlLmdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKGFsZXJ0cykge1xuICAgICAgICAgIGhlYWRlckN0cmwuYWxlcnRzID0gYWxlcnRzLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyQWxlcnQoY2xlYXJBbGVydCwgaW5kZXgpIHtcbiAgICAgIGFsZXJ0c1NlcnZpY2UuY2xlYXJBbGVydChjbGVhckFsZXJ0KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWxlcnRzKCkge1xuICAgICAgYWxlcnRzU2VydmljZS5jbGVhckFsbEFsZXJ0c0J5UGxheWVyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IFtdO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhcigpIHtcbiAgICAgIHNpZGViYXJTZXJ2aWNlLnNldFNpZGViYXJTdGF0dXMoIWhlYWRlckN0cmwuc2lkZWJhclN0YXR1cy5sZWZ0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6dXBkYXRlX2FsZXJ0cycsIGZ1bmN0aW9uIChlLCBhbGVydHMpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgXy5zb21lKGFsZXJ0cywgWyd1c2VySWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSkpIHtcbiAgICAgICAgZ2V0QWN0aXZlQWxlcnRzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVNpZGViYXInLCB3cG1TaWRlYmFyKTtcblxuICBmdW5jdGlvbiB3cG1TaWRlYmFyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICdzaWRlYmFyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBzaWRlYmFyU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIHZtLmxvZ291dCA9IGxvZ291dDtcbiAgICB2bS5zaWRlYmFyU3RhdHVzID0gc2lkZWJhclNlcnZpY2UuZ2V0U2lkZWJhclN0YXR1cygpO1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZpbHRlcignb3JkZXJPYmplY3RCeScsIG9yZGVyT2JqZWN0QnkpO1xuXG4gIGZ1bmN0aW9uIG9yZGVyT2JqZWN0QnkoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgYXR0cmlidXRlKSB7XG4gICAgICBpZiAoIWFuZ3VsYXIuaXNPYmplY3QoaW5wdXQpKSByZXR1cm4gaW5wdXQ7XG5cbiAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgZm9yICh2YXIgb2JqZWN0S2V5IGluIGlucHV0KSB7XG4gICAgICAgIGFycmF5LnB1c2goaW5wdXRbb2JqZWN0S2V5XSk7XG4gICAgICB9XG5cbiAgICAgIGFycmF5LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgYSA9IHBhcnNlSW50KGFbYXR0cmlidXRlXSk7XG4gICAgICAgIGIgPSBwYXJzZUludChiW2F0dHJpYnV0ZV0pO1xuICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2FsZXJ0c1NlcnZpY2UnLCBhbGVydHNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBhbGVydHNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRBY3RpdmVBbGVydHNCeVBsYXllcjogZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIsXG4gICAgICBjbGVhckFsZXJ0OiBjbGVhckFsZXJ0LFxuICAgICAgY2xlYXJBbGxBbGVydHNCeVBsYXllcjogY2xlYXJBbGxBbGVydHNCeVBsYXllclxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdW5jbGVhcmVkIGFsZXJ0cyBmb3IgYSB1c2VyIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkIGlkIGZvciB0aGUgdXNlclxuICAgICAqIEByZXR1cm4ge0FycmF5fSBhbGVydHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVBbGVydHNCeVBsYXllcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYWxlcnRzLycsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFya3MgYSBhbGVydHMgYXMgY2xlYXJlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsZXJ0SWQgaWQgZm9yIHRoZSBhbGVydFxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gU3RhdHVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xlYXJBbGVydChhbGVydElkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL2FsZXJ0L2NsZWFyJywge1xuICAgICAgICBhbGVydElkOiBhbGVydElkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrcyBhbGwgdW52aWV3ZWQgYWxlcnRzIGFzIHZpZXdlZCBmb3IgYSB1c2VyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdXNlcklkIGlkIGZvciB0aGUgdXNlclxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gU3RhdHVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xlYXJBbGxBbGVydHNCeVBsYXllcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYWxlcnRzL2NsZWFyJywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2lkZW50aXR5U2VydmljZScsIGlkZW50aXR5U2VydmljZSk7XG5cbiAgZnVuY3Rpb24gaWRlbnRpdHlTZXJ2aWNlKCR3aW5kb3cpIHtcbiAgICB2YXIgY3VycmVudFVzZXI7XG4gICAgaWYgKCR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdCAhPT0gbnVsbCkge1xuICAgICAgY3VycmVudFVzZXIgPSAkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3Q7XG4gICAgfVxuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxuICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgICBpc0F1dGhvcml6ZWQ6IGlzQXV0aG9yaXplZFxuICAgIH07XG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQXV0aG9yaXplZChyb2xlKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIucm9sZXMuaW5kZXhPZihyb2xlKSA+IC0xO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdub3RpZnlTZXJ2aWNlJywgbm90aWZ5U2VydmljZSk7XG5cbiAgZnVuY3Rpb24gbm90aWZ5U2VydmljZSgpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGluZm86IGluZm8sXG4gICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgd2FybmluZzogd2FybmluZyxcbiAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgIGludmVyc2U6IGludmVyc2VcbiAgICB9O1xuXG4gICAgJC5ub3RpZnlEZWZhdWx0cyh7XG4gICAgICBuZXdlc3Rfb25fdG9wOiB0cnVlLFxuICAgICAgb2Zmc2V0OiB7XG4gICAgICAgIHg6IDIwLFxuICAgICAgICB5OiA4NVxuICAgICAgfSxcbiAgICAgIGRlbGF5OiA1MDAwLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBpbmZvKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvcihtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnZGFuZ2VyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52ZXJzZShtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnaW52ZXJzZSdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdzY3JvbGxiYXJTZXJ2aWNlJywgc2Nyb2xsYmFyU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gc2Nyb2xsYmFyU2VydmljZSgpIHtcbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIG1hbGlodVNjcm9sbDogbWFsaWh1U2Nyb2xsXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gbWFsaWh1U2Nyb2xsKHNlbGVjdG9yLCB0aGVtZSwgc2Nyb2xsYXhpcywgbW91c2V3aGVlbGF4aXMpIHtcbiAgICAgICQoc2VsZWN0b3IpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgICB0aGVtZTogdGhlbWUsXG4gICAgICAgIHNjcm9sbEluZXJ0aWE6IDEwMCxcbiAgICAgICAgYXhpczogc2Nyb2xsYXhpcyxcbiAgICAgICAgbW91c2VXaGVlbDoge1xuICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgICBheGlzOiBtb3VzZXdoZWVsYXhpcyxcbiAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnc2lkZWJhclNlcnZpY2UnLCBzaWRlYmFyU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gc2lkZWJhclNlcnZpY2UoKSB7XG4gICAgdmFyIHNpZGViYXJTdGF0dXMgPSB7XG4gICAgICBsZWZ0OiBmYWxzZSxcbiAgICAgIHJpZ2h0OiBmYWxzZVxuICAgIH07XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRTaWRlYmFyU3RhdHVzOiBnZXRTaWRlYmFyU3RhdHVzLFxuICAgICAgc2V0U2lkZWJhclN0YXR1czogc2V0U2lkZWJhclN0YXR1c1xuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldFNpZGViYXJTdGF0dXMoKSB7XG4gICAgICByZXR1cm4gc2lkZWJhclN0YXR1cztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRTaWRlYmFyU3RhdHVzKHN0YXR1cykge1xuICAgICAgc2lkZWJhclN0YXR1cy5sZWZ0ID0gc3RhdHVzO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCd3ZWJzb2NrZXRTZXJ2aWNlJywgd2Vic29ja2V0U2VydmljZSkucnVuKGZ1bmN0aW9uICh3ZWJzb2NrZXRTZXJ2aWNlKSB7XG4gICAgd2Vic29ja2V0U2VydmljZS5jb25uZWN0KCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHdlYnNvY2tldFNlcnZpY2UoJHJvb3RTY29wZSwgJHdpbmRvdywgJHRpbWVvdXQpIHtcbiAgICB2YXIgY29ubmVjdGlvbjtcbiAgICB2YXIgcmV0cnlTZWNvbmRzID0gWzMsIDEwLCAxMDAsIDEwMDBdO1xuICAgIHZhciByZXRyeSA9IDA7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjb25uZWN0OiBjb25uZWN0LFxuICAgICAgc2VuZDogc2VuZFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIHdlYnNvY2tldEhvc3QoKSB7XG4gICAgICBpZiAoJHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcbiAgICAgICAgcmV0dXJuICd3c3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd3czovLycgKyAkd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYnNvY2tldEhvc3QoKSk7XG5cbiAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0cnkgPSAwO1xuICAgICAgICB2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UoZS5kYXRhKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50b3BpYywgcGF5bG9hZC5kYXRhKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHJldHJ5IDwgcmV0cnlTZWNvbmRzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbm5lY3RpbmcuLi4nKTtcbiAgICAgICAgICAkdGltZW91dChjb25uZWN0LCByZXRyeVNlY29uZHNbcmV0cnldKjEwMDApO1xuICAgICAgICAgIHJldHJ5ICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0dpdmluZyB1cCBvbiBXZWJTb2NrZXQnKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZW5kKHRvcGljLCBkYXRhKSB7XG4gICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9KTtcbiAgICAgIGNvbm5lY3Rpb24uc2VuZChqc29uKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignSG9tZUN0cmwnLCBIb21lQ3RybCk7XG5cbiAgZnVuY3Rpb24gSG9tZUN0cmwoY29tcGV0aXRpb25zU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5wdWJsaWNDb21wZXRpdGlvbnMgPSBbXTtcbiAgICB2bS5wcml2YXRlQ29tcGV0aXRpb25zID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldFB1YmxpY0NvbXBldGl0aW9ucygpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9ucykge1xuICAgICAgICB2bS5wdWJsaWNDb21wZXRpdGlvbnMgPSBjb21wZXRpdGlvbnMuZGF0YTtcbiAgICAgIH0pO1xuICAgICAgLy8gR2V0IHByaXZhdGUgY29tcGV0aXRpb25zIGZvciBzdXBlci1hZG1pbnNcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKCdzdXBlci1hZG1pbicpKSB7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0UHJpdmF0ZUNvbXBldGl0aW9ucygpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9ucykge1xuICAgICAgICAgIHZtLnByaXZhdGVDb21wZXRpdGlvbnMgPSBjb21wZXRpdGlvbnMuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1Db21wZXRpdGlvbkNvbXBhY3QnLCB3cG1Db21wZXRpdGlvbkNvbXBhY3QpO1xuXG4gIGZ1bmN0aW9uIHdwbUNvbXBldGl0aW9uQ29tcGFjdCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPScsXG5cbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy9jb21wZXRpdGlvbi1jb21wYWN0Lmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCkge1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtUGVuZGluZ1BsYXllcnMnLCB3cG1QZW5kaW5nUGxheWVycyk7XG5cbiAgZnVuY3Rpb24gd3BtUGVuZGluZ1BsYXllcnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcGVuZGluZy1wbGF5ZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKGNvbXBldGl0aW9uc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnBlbmRpbmdQbGF5ZXJzID0gW107XG4gICAgdm0uYXBwcm92ZVBlbmRpbmdQbGF5ZXIgPSBhcHByb3ZlUGVuZGluZ1BsYXllcjtcbiAgICB2bS5kZW55UGVuZGluZ1BsYXllciA9IGRlbnlQZW5kaW5nUGxheWVyO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIGFwcHJvdmVQZW5kaW5nUGxheWVyKHBsYXllcikge1xuICAgICAgcGxheWVyLnBvc2l0aW9uID0gdm0uY29tcGV0aXRpb24ucGxheWVycy5sZW5ndGggKyAxO1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5hcHByb3ZlUGVuZGluZ1BsYXllcih2bS5jb21wZXRpdGlvbi5faWQsIHBsYXllcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVueVBlbmRpbmdQbGF5ZXIocGxheWVyKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmRlbnlQZW5kaW5nUGxheWVyKHZtLmNvbXBldGl0aW9uLl9pZCwgcGxheWVyKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1QeXJhbWlkJywgd3BtUHlyYW1pZCk7XG5cbiAgZnVuY3Rpb24gd3BtUHlyYW1pZCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3B5cmFtaWQuaHRtbCcsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJHN0YXRlLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCAkZmlsdGVyLCBub3RpZnlTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIG1heExldmVscyA9IDc7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5icmVha1BvaW50cyA9IFtdO1xuICAgIHZtLmxldmVscyA9IFtdO1xuICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgdm0uYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQgPSBudWxsO1xuICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSBmYWxzZTtcbiAgICB2bS5jcmVhdGVDaGFsbGVuZ2UgPSBjcmVhdGVDaGFsbGVuZ2U7XG4gICAgdm0uY2FuY2VsQ2hhbGxlbmdlID0gY2FuY2VsQ2hhbGxlbmdlO1xuICAgIHZtLmNvbXBsZXRlQ2hhbGxlbmdlID0gY29tcGxldGVDaGFsbGVuZ2U7XG4gICAgdm0uZm9yZmVpdENoYWxsZW5nZSA9IGZvcmZlaXRDaGFsbGVuZ2U7XG4gICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSB7fTtcbiAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICB2bS5hZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb24gPSBhZGRDdXJyZW50VXNlclRvQ29tcGV0aXRpb247XG4gICAgdm0uY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uID0gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uO1xuICAgIHZtLnBsYXllckNsaWNrID0gcGxheWVyQ2xpY2s7XG4gICAgdm0ubnVtYmVyT2ZSZWFsUGxheWVycyA9IDA7XG4gICAgdm0ubWF4UGxheWVycyA9IDA7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICB2bS5tYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNvbXBldGl0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY29tcGV0aXRpb24pIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gdm0uY29tcGV0aXRpb24uX2lkO1xuICAgICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICAgICAgICBjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcygpO1xuICAgICAgICAgIGZpbGxJbkVtcHR5QmxvY2tzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9yZGVyIHRoZSBwbGF5ZXJzIGJ5IHRoZSBwb3NpdGlvbiBwcm9wZXJ0eSBvZiB0aGUgcGxheWVycyBhcnJheSBpbiB0aGUgY29tcGV0aXRpb24gb2JqZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gb3JkZXJQbGF5ZXJzKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJzU3RhdHVzKCkge1xuICAgICAgXG4gICAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFuIGFkbWluIG9mIHRoaXMgY29tcGV0aXRpb25cbiAgICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHBlbmRpbmcgcmVxdWVzdCB0byBqb2luXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gXy5zb21lKHZtLmNvbXBldGl0aW9uLnBlbmRpbmdQbGF5ZXJzLCBbJ19pZCcsIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWRdKTtcbiAgICAgIH1cblxuICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgY29tcGV0aXRpb24gYW5kIHNldCBzb21lIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiBwbGF5ZXIuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKSB7XG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdjdXJyZW50LXVzZXInO1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gcGxheWVyO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkID8gY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQgOiBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyO1xuICAgICAgICAgICAgICAvLyBBZGQgYSBjbGFzcyB0byB0aGUgY3VycmVudCB1c2VyJ3Mgb3Bwb25lbnQnXG4gICAgICAgICAgICAgIHZhciBjdXJyZW50T3Bwb25lbnQgPSBfLmZpbmQodm0uY29tcGV0aXRpb24ucGxheWVycywgeydfaWQnOiB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudC5faWR9KTtcbiAgICAgICAgICAgICAgY3VycmVudE9wcG9uZW50LmNsYXNzID0gY3VycmVudE9wcG9uZW50LmNsYXNzID8gY3VycmVudE9wcG9uZW50LmNsYXNzICsgJyBjdXJyZW50LW9wcG9uZW50JzogJ2N1cnJlbnQtb3Bwb25lbnQnO1xuICAgICAgICAgICAgLy8gVGhlIHVzZXIgZG9lc24ndCBoYXZlIGFuIGFjdGl2ZSBjaGFsbGVuZ2UsIHNvIGZpbmQgdGhlIGF2YWlsYWJsZSBjaGFsbGVuZ2VzJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBfLmZvckVhY2goY2hhbGxlbmdlcy5kYXRhLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG5cbiAgICAgICAgICB2YXIgY2hhbGxlbmdlciA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdfaWQnOiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgfSk7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZXIuY2xhc3MgPT09ICdhdmFpbGFibGUnKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2VyLmNsYXNzID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYWxsZW5nZXIuY2xhc3MgPSBjaGFsbGVuZ2VyLmNsYXNzID8gY2hhbGxlbmdlci5jbGFzcyArICcgdW5hdmFpbGFibGUnOiAndW5hdmFpbGFibGUnO1xuICAgICAgICAgIGNoYWxsZW5nZXIuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgY2hhbGxlbmdlci5jaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2NoYWxsZW5nZXInXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvcHBvbmVudCA9IF8uZmluZCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCB7ICdfaWQnOiBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkIH0pO1xuICAgICAgICAgIGlmIChvcHBvbmVudC5jbGFzcyA9PT0gJ2F2YWlsYWJsZScpIHtcbiAgICAgICAgICAgIG9wcG9uZW50LmNsYXNzID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wcG9uZW50LmNsYXNzID0gb3Bwb25lbnQuY2xhc3MgPyBvcHBvbmVudC5jbGFzcyArICcgdW5hdmFpbGFibGUnOiAndW5hdmFpbGFibGUnO1xuICAgICAgICAgIG9wcG9uZW50LmF2YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnb3Bwb25lbnQnXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFRyYWNrIHdoZW4gdGhlIGNoYWxsZW5nZSB3aWxsIGV4cGlyZVxuICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gbW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpKSAqIC0xO1xuICAgICAgICAgICAgdmFyIGhvdXJzVG9FeHBpcmUgPSBtb21lbnQuZHVyYXRpb24odGltZVRvRXhwaXJlKS5hc0hvdXJzKCk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGhhcyBub3QgeWV0IGV4cGlyZWQgZGlzcGxheSBhIGNvdW50ZG93biBvbiB0aGUgb3Bwb25lbnRcbiAgICAgICAgICAgIGlmICh0aW1lVG9FeHBpcmUgPiAwKSB7XG4gICAgICAgICAgICAgIG9wcG9uZW50LmNoYWxsZW5nZS5leHBpcmVzID0gaG91cnNUb0V4cGlyZTtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBleHBpcmVkIHdoaWxlIG5vIG9uZSB3YXMgdmlld2luZyB0aGlzIGNvbXBldGl0aW9uIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBvcHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm93IHRoYXQgd2Uga25vdyBhYm91dCBhbGwgdGhlIGFjdGl2ZSBjaGFsbGVuZ2VzIGZpbmQgdGhlIGF2YWlsYWJsZSBjaGFsbGVuZ2VzIGZvciB0aGUgdWNycmVudCB1c2VyXG4gICAgICAgIGZpbmRBdmFpbGFibGVDaGFsbGVuZ2VzKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IHdoZXJlIHRvIHN0YXJ0IGVhY2ggbmV3IHJvdyBvbiB0aGUgY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCcmVha1BvaW50cygpIHtcbiAgICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heExldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBicmVhayBwb2ludHNcbiAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hvIG90aGVyIHBsYXllcnMgY2FuIGNoYWxsZW5nZVxuICAgIGZ1bmN0aW9uIGFzc2lnbkxldmVsc1RvUGxheWVycygpIHtcbiAgICAgIHZhciBsZXZlbCA9IDA7XG4gICAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICAgIGNyZWF0ZUJyZWFrUG9pbnRzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZtLmJyZWFrUG9pbnRzLmluZGV4T2YoaSArIDEpID4gLTEpIHtcbiAgICAgICAgICBsZXZlbCArPSAxO1xuICAgICAgICAgIC8vIFNldCB0aGUgbnVtYmVyIG9mIHRvdGFsIGxldmVsc1xuICAgICAgICAgIHZtLmxldmVscy5wdXNoKGxldmVsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWxcbiAgICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVyc1tpXS5sZXZlbCA9IGxldmVsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhvdyBtYW55IHRvdGFsIGJsb2NrcyBpbiB0aGlzIGNvbXBldGl0aW9uXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlQ29tcGV0aXRpb25CbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gXy5sYXN0KHZtLmxldmVscyk7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgY29tcGV0aXRpb24gd2l0aCBlbXB0eSBibG9ja3NcbiAgICBmdW5jdGlvbiBmaWxsSW5FbXB0eUJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mUmVhbFBsYXllcnMgPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aDsgaSA8IHZtLm51bWJlck9mQmxvY2tzOyBpKyspIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVycy5wdXNoKHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdFbXB0eScsXG4gICAgICAgICAgbGFzdE5hbWU6ICdTcG90JyxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ0VtcHR5IFNwb3QnLFxuICAgICAgICAgIHBvc2l0aW9uOiA5OSxcbiAgICAgICAgICBjbGFzczogJ2VtcHR5J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGhhdmUgdG8gZ2l2ZSBsZXZlbHMgdG8gdGhlIG5ldyBlbXB0eSBzcG90c1xuICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdGhlIHBsYXllcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIGJlIGNoYWxsZW5nZWQgYnkgdGhpcyB1c2VyXG4gICAgZnVuY3Rpb24gZmluZEF2YWlsYWJsZUNoYWxsZW5nZXMoKSB7XG4gICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gZmFsc2U7XG4gICAgICBpZiAodm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gJiYgIXZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICB2YXIgbGV2ZWxBYm92ZSA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsID4gMSA/IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxldmVsIC0gMSA6IG51bGw7XG4gICAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgaWYgKHBsYXllci5sZXZlbCA9PT0gbGV2ZWxBYm92ZSAmJiBwbGF5ZXIucG9zaXRpb24gIT09IDk5ICYmIHBsYXllci5jbGFzcyAhPT0gJ3VuYXZhaWxhYmxlJyAmJiBwbGF5ZXIuYXZhaWxhYmxlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IHRydWU7XG4gICAgICAgICAgICBwbGF5ZXIuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsYXllci5jbGFzcyA9ICdhdmFpbGFibGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNoYWxsZW5nZSBiZXR3ZWVuIHRoZSBjdXJyZW50IHVzZXIgYW5kIHRoZSBwbGF5ZXIgc2VsZWN0ZWRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllciwgdGhlIGNoYWxsZW5nZWQgcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHBsYXllcikge1xuICAgICAgaWYgKCFwbGF5ZXIuYXZhaWxhYmxlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB0aGF0IGlzIG5vdCBhIHZhbGlkIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgdHlwZTogdm0uY29tcGV0aXRpb24udHlwZSxcbiAgICAgICAgICBjb21wZXRpdGlvbk5hbWU6IHZtLmNvbXBldGl0aW9uLm5hbWUsXG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5jb21wZXRpdGlvbi5mb3JmZWl0RGF5cyxcbiAgICAgICAgICBjaGFsbGVuZ2VyOiB7XG4gICAgICAgICAgICBfaWQ6IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiB2bS5jdXJyZW50VXNlclBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHBvbmVudDoge1xuICAgICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZW1haWw6IHBsYXllci5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcGxheWVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY3JlYXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBbGxvd3MgdGhlIGNoYWxsZW5nZXIgdG8gY2FuY2VsIGEgY2hhbGxlbmdlXG4gICAgLy8gSW5mb3JtcyB0aGUgb3Bwb25lbnQgdG8gYXNrIHRoZSBjaGFsbGVuZ2VyIHRvIGNhbmNlbCB0aGUgb3Bwb25lbnRcbiAgICBmdW5jdGlvbiBjYW5jZWxDaGFsbGVuZ2UoKSB7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhKSB7XG4gICAgICAgICAgLy8gQWxsb3cgdGhlIGNoYWxsZW5nZXIgdG8gY2FuY2VsIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY2FuY2VsUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wbGV0ZSBhIGNoYWxsZW5nZSBieSBhIHVzZXIgaW50ZXJhY3Rpb24gb3IgYSBmb3JmZWl0XG4gICAgICogXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gd2lubmVySXNDdXJyZW50VXNlclxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IGZvcmZlaXRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGZvcmZlaXRMb3NlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2hhbGxlbmdlKHdpbm5lcklzQ3VycmVudFVzZXIsIGZvcmZlaXQsIGZvcmZlaXRMb3Nlcikge1xuICAgICAgdmFyIHBsYXllciA9IGZvcmZlaXRMb3NlciB8fCB2bS5jdXJyZW50VXNlclBsYXllcjtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHN3YXBQb3NpdGlvbnMgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZvcmZlaXRcbiAgICAgICAgaWYgKGZvcmZlaXQpIHtcbiAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS5mb3JmZWl0ID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoZm9yZmVpdExvc2VyLmNoYWxsZW5nZS5wb3NpdGlvbiA9PT0gJ29wcG9uZW50Jykge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hvIHRoZSB3aW5uZXIgd2FzIHRvIHN0b3JlIGluIHRoZSBjaGFsbGVuZ2UgcmVjb3JkXG4gICAgICAgIH0gZWxzZSBpZiAod2lubmVySXNDdXJyZW50VXNlcikge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN3YXAgcG9zaXRpb25zIGFuZCB0aGVuIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2Ugb3IganVzdCBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlXG4gICAgICAgIC8vIFdlYnNvY2tldCBldmVudCB3aWxsIHJlZnJlc2ggdGhlIGNvbXBldGl0aW9uXG4gICAgICAgIGlmIChzd2FwUG9zaXRpb25zKSB7XG4gICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5zd2FwUG9zaXRpb25zKHZtLmNvbXBldGl0aW9uSWQsIGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50LCBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgY29tcGxldGUgY2hhbGxuZ2UgZnVuY3Rpb24gd2l0aCB0aGUgZm9yZmVpdGluZyBwbGF5ZXJcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcmZlaXRDaGFsbGVuZ2UocGxheWVyKSB7XG4gICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBwbGF5ZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGN1cnJlbnQgdXNlciB0aGUgY29tcGV0aXRpb24gXG4gICAgICogaWYgdGhleSdyZSBub3QgYWxyZWFkeSBvbiBpdCBhbmQgdGhlcmUncyBzcGFjZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEN1cnJlbnRVc2VyVG9Db21wZXRpdGlvbigpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgaWYgKHZtLm51bWJlck9mUmVhbFBsYXllcnMgPCB2bS5tYXhQbGF5ZXJzKSB7XG4gICAgICAgICAgdmFyIHBsYXllciA9IHtcbiAgICAgICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzICsgMVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKCF2bS5jb21wZXRpdGlvbi5yZXN0cmljdEpvaW5zKSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgdGl0bGU6ICdKb2luIENvbXBldGl0aW9uPycsXG4gICAgICAgICAgICAgIHRleHQ6ICdZb3VcXCdsbCBiZSBhZGRlZCB0byB0aGUgYm90dG9tJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0pvaW4nLFxuICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuYWRkUGxheWVyVG9Db21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIpO1xuICAgICAgICAgICAgICBzd2FsKCdXZWxjb21lIEFib2FyZCEnLCAnTm93IHN0YXJ0IGZpZ2h0aW5nIHlvdXIgd2F5IHRvIHRoZSB0b3AnLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3dhbCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAnU2VuZCBKb2luIFJlcXVlc3Q/JyxcbiAgICAgICAgICAgICAgdGV4dDogJ1RoaXMgaXMgYSBjbG9zZWQgY29tcGV0aXRpb24gc28gYW4gYWRtaW4gbXVzdCBhcHByb3ZlIHlvdXIgcmVxdWVzdCcsXG4gICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdTZW5kIFJlcXVlc3QnLFxuICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3Qodm0uY29tcGV0aXRpb24sIHBsYXllcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc3dhbCgnUmVxdWVzdCBTZW50JywgJ1lvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgb25jZSBhbiBhZG1pbiBwcm9jZXNzZXMgdGhlIHJlcXVlc3QuJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ1NvcnJ5LCB0aGlzIGNvbXBldGl0aW9uIGlzIGZ1bGwnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS53YXJuaW5nKCdQbGVhc2UgbG9naW4gdG8gam9pbiBhIGNvbXBldGl0aW9uJyk7XG4gICAgICAgICRzdGF0ZS5wcmV2aW91cyA9ICdjb21wZXRpdGlvbnMudmlldyc7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0geydjb21wZXRpdGlvbklkJzogdm0uY29tcGV0aXRpb25JZH07XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IGNvbmZpcm1hdGlvbiBtb2RhbCBmb3IgbGVhdmluZyB0aGUgY29tcGV0aXRpb24gXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnTGVhdmUgQ29tcGV0aXRpb24/JyxcbiAgICAgICAgdGV4dDogJ1lvdSB3aWxsIGxvc2UgeW91ciBzcG90IGFuZCBmb3JmZWl0IGFueSBhY3RpdmUgY2hhbGxlbmdlcy4nLFxuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcywgbGVhdmUnLFxuICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4tZGFuZ2VyJyxcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ05vLCBzdGF5JyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uKCk7XG4gICAgICAgIHN3YWwoJ09LLCB5b3VcXCdyIG91dCEnLCAnWW91XFwndmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIGNvbXBldGl0aW9uLicsICdzdWNjZXNzJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVc2UgdGhpcyB0byBlbmZvcmNlIG9yZGVyIG9mIG9wZXJhdGlvbnMgd2hlbiB0aGUgcGxheWVyIHRvIGJlIHJlbW92ZWQgaGFkIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICB2YXIgcmVtb3ZpbmdDdXJyZW50VXNlciA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgY3VycmVudCB1c2VyIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIGFuZCBpcyBvbiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uKSB7XG4gICAgICAgIHJlbW92aW5nQ3VycmVudFVzZXIgPSB0cnVlO1xuICAgICAgICAvLyBGb3JmZWl0IGlmIHRoZXkgaGF2ZSBhbiBhY3RpdmUgY2hhbGxlbmdlXG4gICAgICAgIGlmICh2bS5oYXNBY3RpdmVDaGFsbGVuZ2UpIHtcbiAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCB2bS5jdXJyZW50VXNlclBsYXllcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2luY2Ugd2UgYXJlIHJlbW92aW5nIHRoZW0gLi4uXG4gICAgICAgICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEdldCBhbiB1cGRhdGVkIGNvcHkgb2YgdGhlIGNvbXBldGl0aW9uIGluY2FzZSBhIGZvcmZlaXQgaGFwcGVuZWRcbiAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSB1cGRhdGVkIGNvcHkgbG9jYWxseSBzbyBhcyBub3QgdG8gZGlzdHJ1cHQgdGhlIGNvbXBldGl0aW9uXG4gICAgICAgICAgICAvLyB1bnRpbCB0aGUgcGxheWVyIGhhcyBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIHZhciBjb21wZXRpdGlvbiA9IHAuZGF0YTtcblxuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgc3BvdCB0aGV5IHdlcmUgaW4gb24gdGhlIGNvbXBldGl0aW9uXG4gICAgICAgICAgICB2YXIgb3BlblBvc2l0aW9uID0gdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb247XG5cbiAgICAgICAgICAgIC8vIE1vdmUgYWxsIHRoZSBwbGF5ZXJzIHVwIDEgcG9zaXRpb24gdGhhdCB3ZXJlIGJlaGluZCB0aGUgcmVtb3ZlZCBwbGF5ZXJcbiAgICAgICAgICAgIF8uZm9yRWFjaChjb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPj0gb3BlblBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBvc2l0aW9uIC09IDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmVkIHRoZSBwbGF5ZXIgZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIHZhciByZW1vdmVkUGxheWVyID0gXy5yZW1vdmUoY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICByZXR1cm4gcGxheWVyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgYSBuZXcgYXJyYXkgb2YgYWxsIHRoZSBwbGF5ZXJzIHN0aWxsIG9uIHRoZSBjb21wZXRpdGlvblxuICAgICAgICAgICAgLy8gb25seSB1c2UgdGhlIHByb3BlcnRpZXMgd2Ugd2FudCB0byBzdG9yZSBpbiB0aGUgY29tcGV0aXRpb24gZG9jdW1lbnRcbiAgICAgICAgICAgIHZhciB1cGRhdGVkUGxheWVycyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgIHZhciB1cGRhdGVkUGxheWVyID0ge1xuICAgICAgICAgICAgICAgIF9pZDogY29tcGV0aXRpb24ucGxheWVyc1tpXS5faWQsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogY29tcGV0aXRpb24ucGxheWVyc1tpXS5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogY29tcGV0aXRpb24ucGxheWVyc1tpXS5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogY29tcGV0aXRpb24ucGxheWVyc1tpXS5wb3NpdGlvblxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHVwZGF0ZWRQbGF5ZXJzLnB1c2godXBkYXRlZFBsYXllcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENhbGwgc2VydmljZSB0byByZW1vdmUgdGhlIHBsYXllclxuICAgICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5yZW1vdmVkUGxheWVyRnJvbUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXJbMF0sIHVwZGF0ZWRQbGF5ZXJzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmVtb3ZpbmdDdXJyZW50VXNlciA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IHdoYXQgdGhlIGFwcHJvcHJpYXRlIGFjdGlvbiBpcyBiYXNlZCBvbiB0aGUgcGxheWVyIGNsaWNraW5nIGFuZCB0aGUgcGxheWVyIGJlaW5nIGNsaWNrZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwbGF5ZXJDbGljayhwbGF5ZXIpIHtcbiAgICAgIC8vIGNsaWNrZWQgb24gZW1wdHkgc3BvdFxuICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA9PT0gOTkgJiYgIXZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uKSB7XG4gICAgICAgIGFkZEN1cnJlbnRVc2VyVG9Db21wZXRpdGlvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGxheWVyLnNob3dDaGFsbGVuZ2VNb2RhbCA9ICFwbGF5ZXIuc2hvd0NoYWxsZW5nZU1vZGFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIGNvbXBldGl0aW9uIGJlY2FzdWUgb2YgYW4gdXBkYXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVVwZGF0ZUFkbWlucycsIHdwbVVwZGF0ZUFkbWlucyk7XG5cbiAgZnVuY3Rpb24gd3BtVXBkYXRlQWRtaW5zKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1hZG1pbnMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciByZW1vdmVkQWRtaW5zID0gW107XG4gICAgdmFyIG9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zID0gW107XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICB2bS5hZGRlZEFkbWlucyA9IFtdO1xuICAgIHZtLnVzZXJJc1ByaW1hcnlBZG1pbiA9IGZhbHNlO1xuICAgIHZtLnVwZGF0ZUNvbXBldGl0aW9uID0gdXBkYXRlQ29tcGV0aXRpb247XG4gICAgdm0uY2FuY2VsVXBkYXRlID0gY2FuY2VsVXBkYXRlO1xuICAgIHZtLnJlbW92ZUFkbWluID0gcmVtb3ZlQWRtaW47XG4gICAgdm0uYWRkQWRtaW4gPSBhZGRBZG1pbjtcbiAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNvbXBldGl0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0uY29tcGV0aXRpb24pIHtcbiAgICAgICAgICB2bS5hZGRlZEFkbWlucyA9IF8uY2xvbmVEZWVwKHZtLmNvbXBldGl0aW9uLmFkbWlucyk7XG4gICAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICAgICAgdm0udXNlcklzUHJpbWFyeUFkbWluID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLmFkbWlucywgeydwcmltYXJ5JzogdHJ1ZX0pLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCA/IHRydWU6IGZhbHNlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZUFkbWlucygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBdmFpbGFibGVBZG1pbnMoKSB7XG4gICAgICB2bS5hdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICAgIHJlbW92ZWRBZG1pbnMgPSBbXTtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IGFkbWlucyBmcm9tIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBhZG1pbnNcbiAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLmFkbWlucywgZnVuY3Rpb24gKGNvbXBldGl0aW9uQWRtaW4pIHtcbiAgICAgICAgICBfLnJlbW92ZSh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlQWRtaW4pe1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBldGl0aW9uQWRtaW4uX2lkID09PSBhdmFpbGFibGVBZG1pbi5faWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBPbmx5IHVzZSBjZXJ0YWluIHByb3BlcnRpZXMgb2YgdGhlIHVzZXIgZm9yIHRoZSBhZG1pbiByZWNvcmRcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVBZG1pbikge1xuICAgICAgICAgIHZtLmF2YWlsYWJsZUFkbWlucy5wdXNoKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYXZhaWxhYmxlQWRtaW4uZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGF2YWlsYWJsZUFkbWluLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGF2YWlsYWJsZUFkbWluLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgZW1haWw6IGF2YWlsYWJsZUFkbWluLnVzZXJuYW1lLFxuICAgICAgICAgICAgX2lkOiBhdmFpbGFibGVBZG1pbi5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JpZ2luYWxBdmFpbGFibGVBZG1pbnMgPSBfLmNsb25lRGVlcCh2bS5hdmFpbGFibGVBZG1pbnMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvbigpIHtcbiAgICAgIHZtLmNvbXBldGl0aW9uLmFkbWlucyA9IHZtLmFkZGVkQWRtaW5zO1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS51cGRhdGVDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgfSk7ICAgXG4gICAgfVxuXG4gICAgLy8gQ2FuY2VsIHRoZSB1cGRhdGUgYW5kIHB1dCBldmVyeXRoaW5nIGJhY2sgdG8gdGhlIG9yZ2luYWxcbiAgICBmdW5jdGlvbiBjYW5jZWxVcGRhdGUoKSB7XG4gICAgICByZW1vdmVkQWRtaW5zID0gW107XG4gICAgICB2bS5hZGRlZEFkbWlucyA9IF8uY2xvbmVEZWVwKHZtLmNvbXBldGl0aW9uLmFkbWlucyk7XG4gICAgICB2bS5hdmFpbGFibGVBZG1pbnMgPSBfLmNsb25lRGVlcChvcmlnaW5hbEF2YWlsYWJsZUFkbWlucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBhZG1pbiBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAqIFF1ZXVlIHVwIHRoZSBhZG1pbnMgdG8gYmUgcmVtb3ZlZCBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgZGlzcGxheVxuICAgICAqIEBwYXJhbSAge29iamVjdH0gYWRtaW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVBZG1pbihhZG1pbikge1xuICAgICAgcmVtb3ZlZEFkbWlucy5wdXNoKGFkbWluKTtcbiAgICAgIHZtLmF2YWlsYWJsZUFkbWlucy5wdXNoKF8ucmVtb3ZlKHZtLmFkZGVkQWRtaW5zLCB7X2lkOiBhZG1pbi5faWR9KVswXSk7XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBhZG1pbiB0byB0aGUgY29tcGV0aXRpb25cbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGFkbWluXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQWRtaW4oYWRtaW4pIHtcbiAgICAgIHZtLmFkZGVkQWRtaW5zLnB1c2goXy5yZW1vdmUodm0uYXZhaWxhYmxlQWRtaW5zLCB7X2lkOiBhZG1pbi5faWR9KVswXSk7XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1VcGRhdGVQbGF5ZXJzJywgd3BtVXBkYXRlUGxheWVycyk7XG5cbiAgZnVuY3Rpb24gd3BtVXBkYXRlUGxheWVycygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy91cGRhdGUtcGxheWVycy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsICRmaWx0ZXIsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCB1c2VyU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciByZW1vdmVkUGxheWVycyA9IFtdO1xuICAgIHZhciBvcmlnaW5hbEF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2YXIgbWF4TGV2ZWxzID0gNztcbiAgICB2YXIgbWF4UGxheWVycyA9IG51bGw7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdm0uYWRkZWRQbGF5ZXJzID0gW107XG4gICAgdm0udXBkYXRlQ29tcGV0aXRpb24gPSB1cGRhdGVDb21wZXRpdGlvbjtcbiAgICB2bS5jYW5jZWxVcGRhdGUgPSBjYW5jZWxVcGRhdGU7XG4gICAgdm0ucmVvcmRlclBsYXllcnMgPSByZW9yZGVyUGxheWVycztcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0uYWRkUGxheWVyID0gYWRkUGxheWVyO1xuICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG51bWJlciBvZiBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsZXZlbHNcbiAgICAgIGZvciAodmFyIGkgPSBtYXhMZXZlbHM7IGkgPiAwOyAtLWkpIHtcbiAgICAgICAgbWF4UGxheWVycyArPSBpO1xuICAgICAgfVxuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmFkZGVkUGxheWVycyA9IF8uY2xvbmVEZWVwKHZtLmNvbXBldGl0aW9uLnBsYXllcnMpO1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgIGdldEF2YWlsYWJsZVBsYXllcnMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlUGxheWVycygpIHtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzID0gW107XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAoY29tcGV0aXRpb25QbGF5ZXIpIHtcbiAgICAgICAgICBfLnJlbW92ZSh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlUGxheWVyKXtcbiAgICAgICAgICAgIHJldHVybiBjb21wZXRpdGlvblBsYXllci5faWQgPT09IGF2YWlsYWJsZVBsYXllci5faWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBPbmx5IHVzZSBjZXJ0YWluIHByb3BlcnRpZXMgb2YgdGhlIHVzZXIgZm9yIHRoZSBwbGF5ZXIgcmVjb3JkXG4gICAgICAgIF8uZm9yRWFjaCh1c2Vycy5kYXRhLCBmdW5jdGlvbiAoYXZhaWxhYmxlUGxheWVyKSB7XG4gICAgICAgICAgdm0uYXZhaWxhYmxlUGxheWVycy5wdXNoKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYXZhaWxhYmxlUGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhdmFpbGFibGVQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogYXZhaWxhYmxlUGxheWVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgZW1haWw6IGF2YWlsYWJsZVBsYXllci51c2VybmFtZSxcbiAgICAgICAgICAgIF9pZDogYXZhaWxhYmxlUGxheWVyLl9pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyA9IF8uY2xvbmVEZWVwKHZtLmF2YWlsYWJsZVBsYXllcnMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvbigpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJyAmJiB2bS5hZGRlZFBsYXllcnMubGVuZ3RoICUgMiA+IDApIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignQSBWZXJzdXMgY29tcGV0aXRpb24gbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHBsYXllcnMnKTtcbiAgICAgIH0gZWxzZSBpZiAodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCA+IG1heFBsYXllcnMpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignQSBjb21wZXRpdGlvbiBjYW4gaGF2ZSBhIG1heGltdW0gb2YgJyArIG1heFBsYXllcnMgKyAnIHBsYXllcnMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF8uZm9yRWFjaChyZW1vdmVkUGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uLl9pZCwgcGxheWVyLl9pZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzID0gdm0uYWRkZWRQbGF5ZXJzO1xuICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnVwZGF0ZUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FuY2VsIHRoZSB1cGRhdGUgYW5kIHB1dCBldmVyeXRoaW5nIGJhY2sgdG8gdGhlIG9yZ2luYWxcbiAgICBmdW5jdGlvbiBjYW5jZWxVcGRhdGUoKSB7XG4gICAgICByZW1vdmVkUGxheWVycyA9IFtdO1xuICAgICAgdm0uYWRkZWRQbGF5ZXJzID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24ucGxheWVycyk7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gXy5jbG9uZURlZXAob3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzKTtcbiAgICB9XG5cbiAgICAvLyBSZW9yZGVyIHRoZSBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBkcmFnLWRyb3BcbiAgICBmdW5jdGlvbiByZW9yZGVyUGxheWVycygpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICByZW9yZGVyVmVyc3VzUGxheWVycygpO1xuICAgICAgfSBlbHNlIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAncHlyYW1pZCcpIHtcbiAgICAgICAgcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCk7XG4gICAgICB9XG4gICAgICB2bS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCkge1xuICAgICAgdmFyIGkgPSAxO1xuICAgICAgXy5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSBpO1xuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW9yZGVyVmVyc3VzUGxheWVycygpIHtcbiAgICAgIC8vIFNldCBhbGwgcGxheWVycyB0byB0ZWFtIDJcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gMjtcbiAgICAgIH0pO1xuICAgICAgLy8gU2V0IHRoZSBmaXJzdCBoYWxmIG9mIHRoZSBwbGF5ZXJzIHRvIHRlYW0gMVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAvIDIpOyBpKyspIHtcbiAgICAgICAgdm0uYWRkZWRQbGF5ZXJzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcGxheWVyIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICogUXVldWUgdXAgdGhlIHBsYXllcnMgdG8gYmUgcmVtb3ZlZCBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgZGlzcGxheVxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUGxheWVyKHBsYXllcikge1xuICAgICAgcmVtb3ZlZFBsYXllcnMucHVzaChwbGF5ZXIpO1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmFkZGVkUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsYXllciB0byB0aGUgbmV3IGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hZGRlZFBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1WZXJzdXMnLCB3cG1WZXJzdXMpO1xuXG4gIGZ1bmN0aW9uIHdwbVZlcnN1cygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3ZlcnN1cy5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCBjb21wZXRpdGlvbnNTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgdm0uYWN0aXZlQ2hhbGxlbmdlID0gbnVsbDtcbiAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IG51bGw7XG4gICAgdm0uY3JlYXRlQ2hhbGxlbmdlID0gY3JlYXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNvbXBsZXRlQ2hhbGxlbmdlID0gY29tcGxldGVDaGFsbGVuZ2U7XG4gICAgdm0uY2hhbGxlbmdlRXhwaXJlVGltZSA9IG51bGw7XG4gICAgdm0uc2hvd0NvbnRyb2xzID0gZmFsc2U7XG4gICAgdm0uc2hvd0NoYWxsZW5nZU1vZGFsID0gZmFsc2U7XG4gICAgdm0udG9nZ2xlQ29udHJvbHMgPSB0b2dnbGVDb250cm9scztcbiAgICB2bS5zaW5nbGVQbGF5ZXJUZWFtcyA9IGZhbHNlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSB2bS5jb21wZXRpdGlvbi5faWQ7XG4gICAgICAgICAgdm0uc2hvd0NvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgdm0uc2hvd0NoYWxsZW5nZU1vZGFsID0gZmFsc2U7XG4gICAgICAgICAgZ3JvdXBQbGF5ZXJzKCk7XG4gICAgICAgICAgZ2V0Q3VycmVudFVzZXJTdGF0dXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR3JvdXAgcGxheWVycyBieSB0ZWFtXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3JvdXBQbGF5ZXJzKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24udGVhbXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwbGF5ZXJzOiBfLmZpbHRlcih2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBbJ3Bvc2l0aW9uJywgMV0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGxheWVyczogXy5maWx0ZXIodm0uY29tcGV0aXRpb24ucGxheWVycywgWydwb3NpdGlvbicsIDJdKSxcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZtLnNpbmdsZVBsYXllclRlYW1zID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50VXNlclN0YXR1cygpIHtcbiAgICAgIFxuICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pO1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYSBwZW5kaW5nIHJlcXVlc3QgdG8gam9pblxuICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5wZW5kaW5nUGxheWVycywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICB9XG5cbiAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBvbiB0aGlzIGNvbXBldGl0aW9uIGFuZCBzZXQgc29tZSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgcGxheWVyLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkge1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbi50ZWFtc1twbGF5ZXIucG9zaXRpb24gLSAxXS5jbGFzcyA9ICdjdXJyZW50LXVzZXItdGVhbSc7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb24uY2xhc3MgPSAnY3VycmVudC11c2VyLW9uLWNvbXBldGl0aW9uJztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBjaGFsbGVuZ2UgZm9yIHRoaXMgY29tcGV0aXRpb25cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhWzBdO1xuICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG5cbiAgICAgICAgICAvLyBUcmFjayB3aGVuIHRoZSBjaGFsbGVuZ2Ugd2lsbCBleHBpcmVcbiAgICAgICAgICBpZiAodm0uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIHRpbWVUb0V4cGlyZSA9IG1vbWVudCgpLmRpZmYobW9tZW50KHZtLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQodm0uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSkgKiAtMTtcbiAgICAgICAgICAgIHZhciBob3Vyc1RvRXhwaXJlID0gbW9tZW50LmR1cmF0aW9uKHRpbWVUb0V4cGlyZSkuYXNIb3VycygpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBoYXMgbm90IHlldCBleHBpcmVkIGRpc3BsYXkgYSBjb3VudGRvd25cbiAgICAgICAgICAgIGlmICh0aW1lVG9FeHBpcmUgPiAwKSB7XG4gICAgICAgICAgICAgIHZtLmNoYWxsZW5nZUV4cGlyZVRpbWUgPSBob3Vyc1RvRXhwaXJlO1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGV4cGlyZWQgd2hpbGUgbm8gb25lIHdhcyB2aWV3aW5nIHRoaXMgY29tcGV0aXRpb24gY29tcGxldGUgdGhlIGNoYWxsZW5nZSBieSBmb3JmZWl0XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVUb0V4cGlyZSA8PSAwKSB7XG4gICAgICAgICAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ29udHJvbHMoKSB7XG4gICAgICBpZiAodm0uaGFzQWN0aXZlQ2hhbGxlbmdlICYmIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZtLnNob3dDb250cm9scyA9ICF2bS5zaG93Q29udHJvbHM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhbGxlbmdlKHRlYW0pIHtcbiAgICAgIHZtLnNob3dDaGFsbGVuZ2VNb2RhbCA9IGZhbHNlO1xuICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdTb3JyeSwgeW91IGFyZSBhbHJlYWR5IGluIGFuIGFjdGl2ZSBjaGFsbGVuZ2UuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAvLyBDbG9zZSB0aGUgY2hhbGxlbmdlIG1vZGFsXG4gICAgICAgIHZhciBjaGFsbGVuZ2UgPSB7XG4gICAgICAgICAgdHlwZTogdm0uY29tcGV0aXRpb24udHlwZSxcbiAgICAgICAgICBjb21wZXRpdGlvbk5hbWU6IHZtLmNvbXBldGl0aW9uLm5hbWUsXG4gICAgICAgICAgY29tcGV0aXRpb25JZDogdm0uY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgZm9yZmVpdDogZmFsc2UsXG4gICAgICAgICAgdGltZUxpbWl0OiB2bS5jb21wZXRpdGlvbi5mb3JmZWl0RGF5cyxcbiAgICAgICAgICBjaGFsbGVuZ2VyOiB7XG4gICAgICAgICAgICB0ZWFtOiB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvbixcbiAgICAgICAgICAgIF9pZDogdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHBvbmVudDoge1xuICAgICAgICAgICAgdGVhbTogdGVhbVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY3JlYXRlVmVyc3VzQ2hhbGxlbmdlKGNoYWxsZW5nZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gQ2xvc2UgdGhlIGNvbXBldGl0aW9uIHNpZGViYXJcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGxldGUgYSBjaGFsbGVuZ2UgYnkgYSB1c2VyIGludGVyYWN0aW9uIG9yIGEgZm9yZmVpdFxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge051bWJlcn0gd2lubmluZ1RlYW1cbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBmb3JmZWl0XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBmb3JmZWl0TG9zZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZSh3aW5uaW5nVGVhbSwgZm9yZmVpdCkge1xuICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG4gICAgICB2YXIgY2hhbGxlbmdlID0gdm0uYWN0aXZlQ2hhbGxlbmdlO1xuICAgICAgLy8gSWYgdGhlcmUgaXMgYSBmb3JmZWl0XG4gICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCA9IHRydWU7XG4gICAgICAgIGNoYWxsZW5nZS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAvLyBGaWd1cmUgb3V0IHdobyB0aGUgd2lubmVyIHdhcyB0byBzdG9yZSBpbiB0aGUgY2hhbGxlbmdlIHJlY29yZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZtLmFjdGl2ZUNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHdpbm5pbmdUZWFtKSB7XG4gICAgICAgICAgY2hhbGxlbmdlLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFsbGVuZ2Uud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZVZlcnN1c0NoYWxsZW5nZShjaGFsbGVuZ2UpO1xuICAgICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCB0aGUgY29tcGV0aXRpb24gYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoQ29tcGV0aXRpb24oKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdjb21wZXRpdGlvbnNTZXJ2aWNlJywgY29tcGV0aXRpb25zU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gY29tcGV0aXRpb25zU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0Q29tcGV0aXRpb246IGdldENvbXBldGl0aW9uLFxuICAgICAgZ2V0Q29tcGV0aXRpb25zRm9yVXNlcjogZ2V0Q29tcGV0aXRpb25zRm9yVXNlcixcbiAgICAgIGdldFB1YmxpY0NvbXBldGl0aW9uczogZ2V0UHVibGljQ29tcGV0aXRpb25zLFxuICAgICAgZ2V0UHJpdmF0ZUNvbXBldGl0aW9uczogZ2V0UHJpdmF0ZUNvbXBldGl0aW9ucyxcbiAgICAgIGNyZWF0ZUNvbXBldGl0aW9uOiBjcmVhdGVDb21wZXRpdGlvbixcbiAgICAgIHVwZGF0ZUNvbXBldGl0aW9uOiB1cGRhdGVDb21wZXRpdGlvbixcbiAgICAgIGRlbGV0ZUNvbXBldGl0aW9uOiBkZWxldGVDb21wZXRpdGlvbixcbiAgICAgIHN3YXBQb3NpdGlvbnM6IHN3YXBQb3NpdGlvbnMsXG4gICAgICBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uOiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uLFxuICAgICAgYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3Q6IGFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0LFxuICAgICAgcmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbjogcmVtb3ZlZFBsYXllckZyb21Db21wZXRpdGlvbixcbiAgICAgIGFwcHJvdmVQZW5kaW5nUGxheWVyOiBhcHByb3ZlUGVuZGluZ1BsYXllcixcbiAgICAgIGRlbnlQZW5kaW5nUGxheWVyOiBkZW55UGVuZGluZ1BsYXllclxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBjb21wZXRpdGlvbiBmcm9tIHRoZSBkYXRhYmFzZSAob3IgbWVtb3J5KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbXBldGl0aW9uIGlkIGZvciB0aGUgcmVxdWVzdGVkIGNvbXBldGl0aW9uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb24nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgY29tcGV0aXRpb25zIGZyb20gdGhlIGRhdGFiYXNlIHRoYXQgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBjb21wZXRpdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKHVzZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21wZXRpdGlvbnMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYWN0aXZlIHB1YmxpYyBjb21wZXRpdGlvbnMgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHVibGljQ29tcGV0aXRpb25zKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21wZXRpdGlvbnMvcHVibGljJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgcHJpdmF0ZSBjb21wZXRpdGlvbnMgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UHJpdmF0ZUNvbXBldGl0aW9ucygpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb25zL3ByaXZhdGUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2NyZWF0ZScsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL3VwZGF0ZScsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NvbXBldGl0aW9ucy9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3YXBQb3NpdGlvbnMoY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlciwgb3Bwb25lbnQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9zd2FwUG9zaXRpb25zJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvQ29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvYWRkUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3QoY29tcGV0aXRpb24sIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2FkZFBsYXllclJlcXVlc3QnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uOiBjb21wZXRpdGlvbixcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcmVtb3ZlZFBsYXllciwgcGxheWVycykge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcmVtb3ZlZFBsYXllcjogcmVtb3ZlZFBsYXllcixcbiAgICAgICAgcGxheWVyczogcGxheWVyc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvYXBwcm92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbnlQZW5kaW5nUGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2RlbnlQbGF5ZXInLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ29tcGV0aXRpb25BZG1pbkN0cmwnLCBDb21wZXRpdGlvbkFkbWluQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25BZG1pbkN0cmwoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGZpbHRlciwgY29tcGV0aXRpb25zU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0udXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zID0gdXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zO1xuICAgIHZtLnVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZSA9IHVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZTtcbiAgICB2bS5kZWxldGVDb21wZXRpdGlvbiA9IGRlbGV0ZUNvbXBldGl0aW9uO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hDb21wZXRpdGlvbigpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIGlmIChjb21wZXRpdGlvbi5kYXRhICYmIF8uc29tZShjb21wZXRpdGlvbi5kYXRhLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSkpIHtcbiAgICAgICAgICB2bS5pc0FkbWluID0gdHJ1ZTtcbiAgICAgICAgICAvLyBEaXNwbGF5IHRoZSBwbGF5ZXJzIGluIHRoZSBwcm9wZXIgb3JkZXJcbiAgICAgICAgICBjb21wZXRpdGlvbi5kYXRhLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5JykoY29tcGV0aXRpb24uZGF0YS5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucygpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRDb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgIHVwZGF0ZWRDb21wZXRpdGlvbi5yZXN0cmljdEpvaW5zID0gdm0uY29tcGV0aXRpb24ucmVzdHJpY3RKb2lucztcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS51cGRhdGVDb21wZXRpdGlvbih1cGRhdGVkQ29tcGV0aXRpb24pO1xuICAgICAgfSk7ICAgICAgXG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvblByaXZhdGUoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZhciB1cGRhdGVkQ29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB1cGRhdGVkQ29tcGV0aXRpb24ucHJpdmF0ZSA9IHZtLmNvbXBldGl0aW9uLnByaXZhdGU7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odXBkYXRlZENvbXBldGl0aW9uKTtcbiAgICAgIH0pOyAgICAgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdUaGlzIGNhbiBub3QgYmUgdW5kb25lJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5kZWxldGVDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uU3RhdHNDdHJsJywgQ29tcGV0aXRpb25TdGF0c0N0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uU3RhdHNDdHJsKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5jb21wZXRpdGlvbiA9IHt9O1xuICAgIHZtLnBsYXllcnNSZXN1bHRzID0gW107XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSkge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgICAgICBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICAgICAgdm0udGVhbXMgPSBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIFVzZWQgZm9yIHRoZSBjb21wbGV0ZWQgY2hhbGxlbmdlcyBkaXJlY3RpdmVcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uQ3RybCcsIENvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmNvbXBldGl0aW9uID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG5cbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5kYXRhKSB7XG4gICAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjb21wZXRpdGlvbkRldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjb21wZXRpdGlvbkRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY29tcGV0aXRpb25EZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvbnNDdHJsJywgQ29tcGV0aXRpb25zQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25zQ3RybChjb21wZXRpdGlvbnNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbnMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0UHVibGljQ29tcGV0aXRpb25zKCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9ucyA9IGNvbXBldGl0aW9ucy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIGNvbXBldGl0aW9uXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NyZWF0ZUNvbXBldGl0aW9uQ3RybCcsIENyZWF0ZUNvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlQ29tcGV0aXRpb25DdHJsKCRzdGF0ZSwgdXNlclNlcnZpY2UsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBicmVha1BvaW50cyA9IFtdO1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciBtYXhQbGF5ZXJzID0gbnVsbDtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm5ld0NvbXBldGl0aW9uID0ge1xuICAgICAgcGxheWVyczogW10sXG4gICAgICByZXN0cmljdEpvaW5zOiBmYWxzZSxcbiAgICAgIHByaXZhdGU6IGZhbHNlXG4gICAgfTtcbiAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdm0uYWRkZWRQbGF5ZXJzID0gW107XG4gICAgdm0uY3JlYXRlQ29tcGV0aXRpb24gPSBjcmVhdGVDb21wZXRpdGlvbjtcbiAgICB2bS5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG4gICAgdm0ucmVtb3ZlUGxheWVyID0gcmVtb3ZlUGxheWVyO1xuICAgIHZtLnJlb3JkZXJQbGF5ZXJzID0gcmVvcmRlclBsYXllcnM7XG4gICAgdm0ubmV3Q29tcGV0aXRpb24uZm9yZmVpdERheXMgPSAxO1xuICAgIHZtLmNvbXBldGl0aW9uVHlwZXMgPSBbJ3B5cmFtaWQnLCAndmVyc3VzJ107XG5cbiAgICBhY3RpdmF0ZSgpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJ1bnMgb24gY29udHJvbGxlciBpbnN0YW50aWF0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSB1c2Vycy5kYXRhO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGxheWVycyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGV2ZWxzXG4gICAgICBmb3IgKHZhciBpID0gbWF4TGV2ZWxzOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIG1heFBsYXllcnMgKz0gaTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGJyZWFrIHBvaW50cyBhcnJheVxuICAgICAgZm9yIChpID0gMDsgaSA8IG1heExldmVsczsgaSsrKSB7XG4gICAgICAgIGJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsYXllciB0byB0aGUgbmV3IGNvbXBldGl0aW9uXG4gICAgICogQ2hlY2tzIHRvIG1ha2Ugc3VyZSB5b3UgYXJlIG5vdCBhZGRpbmcgdG9vIG1hbnkgcGxheWVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYWRkZWRQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYXZhaWxhYmxlUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHByZXZpdW9zbHkgYWRkZWQgcGxheWVyIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGNoYW5nZXMgYmFzZWQgb24gdGhlIGNvbXBldGl0aW9uIHR5cGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUGxheWVycygpIHtcbiAgICAgIGlmICh2bS5uZXdDb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICByZW9yZGVyVmVyc3VzUGxheWVycygpO1xuICAgICAgfSBlbHNlIGlmICh2bS5uZXdDb21wZXRpdGlvbi50eXBlID09PSAncHlyYW1pZCcpIHtcbiAgICAgICAgcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCkge1xuICAgICAgdmFyIGkgPSAxO1xuICAgICAgXy5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSBpO1xuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW9yZGVyVmVyc3VzUGxheWVycygpIHtcbiAgICAgIC8vIFNldCBhbGwgcGxheWVycyB0byB0ZWFtIDJcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gMjtcbiAgICAgIH0pO1xuICAgICAgLy8gU2V0IHRoZSBmaXJzdCBoYWxmIG9mIHRoZSBwbGF5ZXJzIHRvIHRlYW0gMVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAvIDIpOyBpKyspIHtcbiAgICAgICAgdm0uYWRkZWRQbGF5ZXJzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBldGl0aW9uKGNvbXBldGl0aW9uKSB7XG4gICAgICBpZiAoY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycgJiYgdm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAlIDIgPiAwKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgVmVyc3VzIGNvbXBldGl0aW9uIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2UgaWYgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggPiBtYXhQbGF5ZXJzKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgY29tcGV0aXRpb24gY2FuIGhhdmUgYSBtYXhpbXVtIG9mICcgKyBtYXhQbGF5ZXJzICsgJyBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgdmFyIGFkZFBsYXllciA9IHtcbiAgICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiBwbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBsYXllci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbXBldGl0aW9uLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29tcGV0aXRpb24uYWRtaW5zID0gW3tcbiAgICAgICAgICBfaWQ6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHByaW1hcnk6IHRydWVcbiAgICAgICAgfV07XG5cbiAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgbnVtYmVyIG9mIGxldmVscyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHBsYXllcnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBicmVha1BvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aCA8IGJyZWFrUG9pbnRzW2ldKSB7XG4gICAgICAgICAgICBjb21wZXRpdGlvbi5sZXZlbHMgPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5jcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikudGhlbihmdW5jdGlvbiAobmV3Q29tcGV0aXRpb24pIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy52aWV3Jywge1xuICAgICAgICAgICAgY29tcGV0aXRpb25JZDogbmV3Q29tcGV0aXRpb24uZGF0YS5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ015Q29tcGV0aXRpb25zQ3RybCcsIE15Q29tcGV0aXRpb25zQ3RybCk7XG5cbiAgZnVuY3Rpb24gTXlDb21wZXRpdGlvbnNDdHJsKCRzY29wZSwgY29tcGV0aXRpb25zU2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBteUNvbXBldGl0aW9ucyA9IFtdO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYWN0aXZlQ2hhbGxlbmdlID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldENvbXBldGl0aW9uc0ZvclVzZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCkge1xuICAgICAgbXlDb21wZXRpdGlvbnMgPSBbXTtcbiAgICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb25zRm9yVXNlcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbnMpIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbnMgPSBjb21wZXRpdGlvbnMuZGF0YTtcbiAgICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb25zLCBmdW5jdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgICAgICAgbXlDb21wZXRpdGlvbnMucHVzaChjb21wZXRpdGlvbi5faWQpO1xuICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICdweXJhbWlkJykge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb24uX2lkLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb24uX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGFbMF07XG4gICAgICAgICAgICAgICAgICBpZiAoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksJ3MnKSkgKiAtMTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAobXlDb21wZXRpdGlvbnMuaW5kZXhPZihjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpID49IDApIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVXNlckN0cmwnLCBVc2VyQ3RybCk7XG5cbiAgZnVuY3Rpb24gVXNlckN0cmwoaWRlbnRpdHlTZXJ2aWNlLCB1c2VyU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0udXNlciA9ICB7XG4gICAgICBfaWQ6ICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWVcbiAgICB9O1xuICAgIHZtLnVwZGF0ZVVzZXIgPSB1cGRhdGVVc2VyO1xuICAgIHZtLnVzZXJGb3JtID0ge307XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoIWlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSkge1xuICAgICAgICB2bS51c2VyLmRpc3BsYXlOYW1lID0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSArICcgJyArIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVVc2VyICh1c2VyKSB7XG4gICAgICBpZiAodXNlci5wYXNzd29yZCAhPT0gdXNlci5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignUGFzc3dvcmRzIGRvblxcJ3QgbWF0Y2ghJyk7XG4gICAgICB9IGVsc2UgaWYgKHVzZXIuZmlyc3ROYW1lLmxlbmd0aCA8IDEgfHwgdXNlci5sYXN0TmFtZS5sZW5ndGggPCAxIHx8IHVzZXIuZGlzcGxheU5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdEb25cXCd0IGxlYXZlIG5hbWVzIGJsYW5rISAgSG93IHdpbGwgcGVvcGxlIGtub3cgd2hvIHlvdSBhcmU/Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBhbnkgb2YgdGhlIG5hbWVzIHdlcmUgdXBkYXRlZCB3ZSdsbCBuZWVkIHRvIHVwZGF0ZSB0aGVtIGluIHRoZSBvdGhlciBjb2xsZWN0aW9ucydcbiAgICAgICAgdmFyIHVzZXJVcGRhdGVzID0ge1xuICAgICAgICAgIF9pZDogdXNlci5faWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCh1c2VyLmZpcnN0TmFtZSAhPT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSAmJiB1c2VyLmZpcnN0TmFtZS5sZW5ndGggPiAwKSB8fCAodXNlci5sYXN0TmFtZSAhPT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmxhc3ROYW1lICYmIHVzZXIubGFzdE5hbWUubGVuZ3RoID4gMCkgfHwgKHVzZXIuZGlzcGxheU5hbWUgIT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSAmJiB1c2VyLmRpc3BsYXlOYW1lLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgdXNlclVwZGF0ZXMuZmlyc3ROYW1lID0gdXNlci5maXJzdE5hbWU7XG4gICAgICAgICAgdXNlclVwZGF0ZXMubGFzdE5hbWUgPSB1c2VyLmxhc3ROYW1lO1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci5wYXNzd29yZCAmJiB1c2VyLnBhc3N3b3JkLmxlbnRnaCA+IDApIHtcbiAgICAgICAgICB1c2VyVXBkYXRlcy5wYXNzd29yZCA9IHVzZXIucGFzc3dvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VyVXBkYXRlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5zdWNjZXNzKCdZb3VyIGluZm9ybWF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgICB2bS51c2VyRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSB1cGRhdGVkIGRhdGFcbiAgICAgICAgICB2YXIgY3VycmVudFVzZXJDbG9uZSA9IGFuZ3VsYXIuY29weShpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIpO1xuICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGN1cnJlbnRVc2VyQ2xvbmUsIHVzZXJVcGRhdGVzKTtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlckNsb25lO1xuICAgICAgICAgIHZtLnVzZXIuY29uZmlybVBhc3N3b3JkID0gdm0udXNlci5wYXNzd29yZCA9ICcnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdjT3ZlcmZsb3cnLCBjT3ZlcmZsb3cpO1xuXG4gIGZ1bmN0aW9uIGNPdmVyZmxvdyhzY3JvbGxiYXJTZXJ2aWNlKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHNjcm9sbGF4aXMgPSBhdHRycy5zY3JvbGxheGlzIHx8ICd5JztcbiAgICAgIHZhciB0aGVtZSA9IGF0dHJzLnRoZW1lIHx8ICdtaW5pbWFsLWRhcmsnO1xuICAgICAgdmFyIG1vdXNld2hlZWxheGlzID0gYXR0cnMubW91c2V3aGVlbGF4aXMgfHwgJ3knO1xuICAgICAgaWYgKCEkKCdodG1sJykuaGFzQ2xhc3MoJ2lzbW9iaWxlJykpIHtcbiAgICAgICAgc2Nyb2xsYmFyU2VydmljZS5tYWxpaHVTY3JvbGwoZWxlbWVudCwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGVTdWJtZW51JywgdG9nZ2xlU3VibWVudSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlU3VibWVudSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsKSB7XG4gICAgICBlbC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLm5leHQoKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICBlbC5wYXJlbnQoKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd2F2ZXNFZmZlY3QnLCB3YXZlc0VmZmVjdCk7XG5cbiAgZnVuY3Rpb24gd2F2ZXNFZmZlY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWljb24nKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdidG4tZmxvYXQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1jaXJjbGUnXSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1saWdodCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWxpZ2h0J10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBXYXZlcy5pbml0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZmdMaW5lJywgZmdMaW5lKTtcblxuICBmdW5jdGlvbiBmZ0xpbmUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKTtcbiAgICAgIHZhciBpc0Zsb2F0TGFiZWwgPSBlbGVtZW50LnBhcmVudCgpLmhhc0NsYXNzKCdmZy1mbG9hdCcpO1xuICAgICAgaW5wdXQuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQuYmx1cihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGbG9hdExhYmVsIHx8IChpc0Zsb2F0TGFiZWwgJiYgaW5wdXQudmFsKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
