angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","luegg.directives"]),function(){"use strict ";function e(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}e.$inject=["$httpProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){var t=this;t.$state=e}e.$inject=["$state"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,i,a){var o={superAdmin:n,admin:t,user:r};a.html5Mode(!0),i.otherwise("/"),i.when("/pyramids/","/pyramids"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("pyramids",{url:"/pyramids",views:{content:{controller:"PyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramids.html"}}}).state("pyramids.myPyramids",{url:"/my-pyramids",views:{"content@":{controller:"MyPyramidsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/my-pyramids.html"}},resolve:{auth:o.user}}).state("pyramids.view",{url:"/view/:competitionId",views:{"content@":{controller:"PyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/pyramid.html"}}}).state("pyramids.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"StatsCtrl",controllerAs:"vm",templateUrl:"pyramids/views/stats.html"}}}).state("pyramids.create",{url:"/create",views:{"content@":{controller:"CreatePyramidCtrl",controllerAs:"vm",templateUrl:"pyramids/views/create-pyramid.html"}},resolve:{auth:o.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function r(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],r.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,r,i,a,o){"not authorized"===o&&(t.go("login"),t.previous=n)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,r,i){function a(e,r){var a=n.defer();return t.post("/login",{username:e,password:r}).then(function(e){e.data.success?(i.currentUser=e.data.user,a.resolve(!0)):a.resolve(!1)}),a.promise}function o(e){var r=n.defer();return t.post("/api/users",{userData:e}).then(function(t){t.data?(a(e.username,e.password),r.resolve(!0)):r.resolve(!1)}),r.promise}function l(){var r=n.defer();return t.post("/logout",{logout:!0}).then(function(){i.currentUser=void 0,r.resolve(),e.go("home")}),r.promise}function s(e){return!!i.isAuthorized(e)||n.reject("not authorized")}function c(){return!!i.isAuthenticated()||n.reject("not authorized")}var u={authenticateUser:a,createUser:o,logout:l,authorizeCurrentUserForRoute:s,authenticatedUserForRoute:c};return u}e.$inject=["$state","$http","$q","userService","identityService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e,t){function n(){return e.get("/api/users").then(function(e){return e})}var r={getAllUsers:n};return r}e.$inject=["$http","identityService"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function r(){}function i(r,i){t.authenticateUser(r,i).then(function(t){t?e.previous?e.go(e.previous):e.go("home"):n.error("Username / password combinaiton incorrect")})}var a=this;a.login=i,r()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,r){function i(){}function a(e){e.password!==e.confirmPassword?r.error("Passwords don't match!"):n.createUser(e).then(function(){t.go("home")})}var o=this;o.register=a,i()}e.$inject=["$scope","$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@"},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){r()}function r(){i.challenges=[],t.getActiveChallengesByCompetition(i.competitionId).then(function(e){e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var i=this;i.challenges=[],n(),e.$on("ws:challenge_created",function(e,t){i.competitionId===t.competitionId&&r()}),e.$on("ws:challenge_completed",function(e,t){i.competitionId===t.competitionId&&r()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@",limit:"@"},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t){function n(){r()}function r(){i.challenges=[],t.getCompletedChallengesByCompetition(i.competitionId,i.limit).then(function(e){e.data.length>0&&(i.challenges=e.data,_.forEach(i.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger",e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})}))})}var i=this;i.challenges=[],n(),e.$on("ws:challenge_completed",function(e,t){i.competitionId===t.competitionId&&r()})}t.$inject=["$scope","challengesService"],angular.module("app").directive("kpCompletedChalleneges",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/create",{challenge:t})}function n(t){return e.post("/api/challenges/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function i(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function a(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function o(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}var l={createChallenge:t,completeChallenge:n,getChallengesByCompetition:r,getActiveChallengesByCompetition:i,getActiveChallengeByCompetitionByPlayer:a,getCompletedChallengesByCompetition:o};return l}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/pyramids/components/pyramid.html",replace:!0,scope:{competitionId:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,r,i,a,o){function l(){n.getPyramid($.competitionId).then(function(e){if(e.data){$.pyramid=e.data,$.levels=[];for(var n=1;n<=e.data.levels;++n)$.levels.push(n);s(),c(),d(),m(),p()}else t.go("pyramids.myPyramids")})}function s(){$.pyramid.players=r("orderBy")($.pyramid.players,"position")}function c(){_.forEach($.pyramid.players,function(e){a.isAuthenticated()&&e._id===a.currentUser._id&&($.currentUserIsOnPyramid=!0,e.class="current-user",$.currentUserPlayer=e,o.getActiveChallengeByCompetitionByPlayer($.competitionId,e._id).then(function(e){e.data&&($.hasActiveChallenge=!0)}))}),o.getActiveChallengesByCompetition($.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find($.pyramid.players,{_id:e.challenger._id});t.class="unavailable",t.challenge={position:"challenger"};var n=_.find($.pyramid.players,{_id:e.opponent._id});if(n.class="unavailable",n.challenge={position:"opponent"},0!==e.timeLimit){var r=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;r>0?n.challenge.expires=r:r<=0&&h(null,!0,n)}}),f()})}function u(){$.breakPoints=[];for(var e=0;e<$.pyramid.levels;e++)$.breakPoints.push(e*(e+1)/2+1)}function d(){$.numberOfBlocks=0;for(var e=$.pyramid.levels;e>0;e--)$.numberOfBlocks+=e}function m(){$.numberOfRealPlayers=$.pyramid.players.length;for(var e=$.pyramid.players.length;e<$.numberOfBlocks;e++)$.pyramid.players.push({firstName:"Empty",lastName:"Spot",position:99,class:"empty"})}function p(){var e=0;u();for(var t=0;t<$.pyramid.players.length;t++)$.breakPoints.indexOf(t+1)>-1&&(e+=1),$.pyramid.players[t].level=e}function f(){var e=$.currentUserPlayer.level>1?$.currentUserPlayer.level-1:null;_.forEach($.pyramid.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&($.availableChallenges=!0,t.available=!0)})}function y(e){if(e.available){$.hasActiveChallenge=!0;var t={competitionId:$.competitionId,complete:!1,forfeit:!1,timeLimit:$.pyramid.forfeitDays,challenger:{_id:$.currentUserPlayer._id,firstName:$.currentUserPlayer.firstName,lastName:$.currentUserPlayer.lastName,nickname:$.currentUserPlayer.nickname,position:$.currentUserPlayer.position},opponent:{_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname,position:e.position}};o.createChallenge(t).then(function(){$.pyramidMenuToggle=!1})}else i.error("Sorry, that is not a valid challenge.")}function h(e,t,r){var i=r||$.currentUserPlayer;o.getActiveChallengeByCompetitionByPlayer($.competitionId,i._id).then(function(i){$.hasActiveChallenge=!1;var a=!1;t?(i.data.forfeit=!0,"opponent"===r.challenge.position?(i.data.winner="challenger",a=!0):i.data.winner="opponent"):e?i.data.challenger._id===$.currentUserPlayer._id?(i.data.winner="challenger",a=!0):i.data.winner="opponent":i.data.challenger._id===$.currentUserPlayer._id?i.data.winner="opponent":(i.data.winner="challenger",a=!0),a?n.swapPositions($.competitionId,i.data.opponent,i.data.challenger).then(function(){o.completeChallenge(i.data).then(function(){b&&C()})}):o.completeChallenge(i.data).then(function(){b&&C()}),$.pyramidMenuToggle=!1})}function g(e){h(null,!0,e)}function v(){if(a.isAuthenticated())if($.numberOfRealPlayers<$.numberOfBlocks){var e={_id:a.currentUser._id,firstName:a.currentUser.firstName,lastName:a.currentUser.lastName,position:$.numberOfRealPlayers+1};n.addPlayerToPyramid($.competitionId,e)}else i.warning("Sorry, this pyramid is full");else t.go("login")}function P(){swal({title:"Leave Pyramid?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){C(),swal("OK, you'r out!","You've been removed from the pyramid.","success")})}function C(){a.isAuthenticated()&&$.currentUserIsOnPyramid&&(b=!0,$.hasActiveChallenge?h(null,!0,$.currentUserPlayer):($.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,n.getPyramid($.competitionId).then(function(e){var t=e.data,r=$.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=r&&(e.position-=1)});for(var i=_.remove(t.players,function(e){return e._id===$.currentUserPlayer._id}),a=[],o=0;o<$.numberOfRealPlayers-1;++o){var l={_id:t.players[o]._id,firstName:t.players[o].firstName,lastName:t.players[o].lastName,position:t.players[o].position};a.push(l)}n.removedPlayerFromPyramid($.competitionId,i[0],a).then(function(){b=!1})})))}function w(){n.getPyramid($.competitionId).then(function(e){$.pyramid=e.data,s(),c(),m(),p()})}var $=this;$.pyramid={},$.breakPoints=[],$.numberOfBlocks=0,$.currentUserIsOnPyramid=!1,$.hasActiveChallenge=!1,$.availableChallenges=!1,$.createChallenge=y,$.completeChallenge=h,$.challengeExpired=g,$.currentUserPlayer={},$.pyramidMenuToggle=!1,$.addCurrentUserToPyramid=v,$.confirmRemoveCurrentUserFromPyramid=P,$.numberOfRealPlayers=0,l();var b=!1;e.$on("ws:challenge_created",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),w())}),e.$on("ws:challenge_completed",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),b||w())}),e.$on("ws:player_added",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),w())}),e.$on("ws:player_removed",function(e,t){$.competitionId===t.competitionId&&(i.info(t.description),w())})}t.$inject=["$scope","$state","pyramidsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("kpPyramid",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/pyramid",{params:{competitionId:t}})}function n(t){return e.get("/api/pyramids/user",{params:{userId:t}})}function r(t){return e.post("/api/pyramids/create",{pyramid:t})}function i(t,n,r){return e.post("/api/pyramids/swapPositions",{competitionId:t,challenger:n,opponent:r})}function a(t,n){return e.post("/api/pyramids/addPlayer",{competitionId:t,player:n})}function o(t,n,r){return e.post("/api/pyramids/removePlayer",{competitionId:t,removedPlayer:n,players:r})}var l={getPyramid:t,getPyramidsForUser:n,createPyramid:r,swapPositions:i,addPlayerToPyramid:a,removedPlayerFromPyramid:o};return l}e.$inject=["$http"],angular.module("app").factory("pyramidsService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var r=this;r.indentity=e,r.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("kpFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n){function r(){a.sidebarStatus.left=!a.sidebarStatus.left,e.setSidebarStatus(a.sidebarStatus.left)}function i(){n.logout()}var a=this;a.indentity=t,a.logout=i,a.sidebarStatus=e.getSidebarStatus(),a.toggleSidebar=r}t.$inject=["sidebarService","identityService","authService"],angular.module("app").directive("kpHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function r(){t.logout()}var i=this;i.indentity=e,i.logout=r,i.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("kpSidebar",e)}(),function(){"use strict";function e(e,t,n,r,i){function a(){n.getAllUsers().then(function(e){u.availablePlayers=e.data})}function o(e){u.addedPlayers.length<u.allowedPlayers?(u.addedPlayerAdded=!0,u.addedPlayers.push(_.remove(u.availablePlayers,{_id:e._id})[0])):i.error("All spots have been filled.<br />If you want to add more people please increase the levels.")}function l(e){u.addedPlayerAdded=!1,u.availablePlayers.push(_.remove(u.addedPlayers,{_id:e._id})[0])}function s(e){u.allowedPlayers=0;for(var t=e;t>0;t--)u.allowedPlayers+=t;if(u.addedPlayers.length>u.allowedPlayers){var n=u.addedPlayers.splice(u.allowedPlayers);u.availablePlayers=u.availablePlayers.concat(n),i.warning("Players were removed becasue there are not enough spots on the pyramid.")}}function c(e){angular.forEach(u.addedPlayers,function(e){d+=1;var t={position:d,_id:e._id,firstName:e.firstName,lastName:e.lastName,nickname:e.nickname};u.newPyramid.players.push(t)}),r.createPyramid(e).then(function(e){t.go("pyramids.view",{competitionId:e.data._id})})}var u=this;u.newPyramid={players:[]},u.availablePlayers=[],u.addedPlayers=[],u.createPyramid=c,u.addPlayer=o,u.removePlayer=l,u.allowedPlayers=10,u.newPyramid.levels=4,u.newPyramid.forfeitDays=1,a(),e.$watch("vm.newPyramid.levels",function(e,t){e!==t&&s(e)});var d=0}e.$inject=["$scope","$state","userService","pyramidsService","notifyService"],angular.module("app").controller("CreatePyramidCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){t.getPyramidsForUser(n.currentUser._id).then(function(e){i.pyramids=e.data})}var i=this;i.pyramids=null,r()}e.$inject=["$state","pyramidsService","identityService"],angular.module("app").controller("MyPyramidsCtrl",e)}(),function(){"use strict";function e(e){function t(){e.competitionId&&(n.competitionId=e.competitionId)}var n=this;n.competitionId=null,t()}e.$inject=["$stateParams"],angular.module("app").controller("PyramidCtrl",e)}(),function(){"use strict";function e(){function e(){}var t=this;t.pyramids=null,e()}angular.module("app").controller("PyramidsCtrl",e)}(),function(){"use strict";function e(e,t,n){function r(){e.competitionId&&(i.competitionId=e.competitionId,n.getPyramid(i.competitionId).then(function(e){e.data?i.pyramid=e.data:t.go("pyramids.myPyramids")}))}var i=this;i.competitionId=null,r()}e.$inject=["$stateParams","$state","pyramidsService"],angular.module("app").controller("StatsCtrl",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var r;null!==e.bootstrappedUserObject&&(r=e.bootstrappedUserObject);var i={currentUser:r,isAuthenticated:t,isAuthorized:n};return i}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function r(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var a={info:e,success:t,warning:n,error:r,inverse:i};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85}}),a}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},r={getSidebarStatus:e,setSidebarStatus:t};return r}angular.module("app").factory("sidebarService",e)}(),angular.module("app").service("websocketService",["$rootScope","$window",function(e,t){function n(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}var r;this.connect=function(){r=new WebSocket(n()),r.onmessage=function(t){var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)}},this.send=function(e,t){var n=JSON.stringify({topic:e,data:t});r.send(n)}}]).run(["websocketService",function(e){e.connect()}]),function(){"use strict";function e(){function e(){}e()}angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),r=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!r||r&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL3NlcnZpY2VzL2NoYWxsZW5nZXMuc2VydmljZS5qcyIsInB5cmFtaWRzL2NvbXBvbmVudHMvcHlyYW1pZC5kaXJlY3RpdmUuanMiLCJweXJhbWlkcy9zZXJ2aWNlcy9weXJhbWlkcy5zZXJ2aWNlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvZm9vdGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL2hlYWRlci5kaXJlY3RpdmUuanMiLCJjb21tb24vY29tcG9uZW50cy9zaWRlYmFyLmRpcmVjdGl2ZS5qcyIsInB5cmFtaWRzL3ZpZXdzL2NyZWF0ZS1weXJhbWlkLmNvbnRyb2xsZXIuanMiLCJweXJhbWlkcy92aWV3cy9teS1weXJhbWlkcy5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvcHlyYW1pZC5jb250cm9sbGVyLmpzIiwicHlyYW1pZHMvdmlld3MvcHlyYW1pZHMuY29udHJvbGxlci5qcyIsInB5cmFtaWRzL3ZpZXdzL3N0YXRzLmNvbnRyb2xsZXIuanMiLCJjb21tb24vc2VydmljZXMvaW5kZW50aXR5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvbm90aWZ5LnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvc2lkZWJhci5zZXJ2aWNlLmpzIiwiY29tbW9uL3NlcnZpY2VzL3dlYnNvY2tldC5zZXJ2aWNlLmpzIiwiY29tbW9uL3ZpZXdzL2hvbWUuY29udHJvbGxlci5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3RvZ2dsZS1zdWJtZW51LmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL3dhdmVzLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3VpL2Zvcm1zL2ZnLWxpbmUuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWd1cmF0aW9uIiwiJGh0dHBQcm92aWRlciIsImRlZmF1bHRzIiwiaGVhZGVycyIsImdldCIsImNvbmZpZyIsIkFwcEN0cmwiLCIkc3RhdGUiLCJhcHBDdHJsIiwidGhpcyIsImNvbnRyb2xsZXIiLCJjb25maWd1cmVSb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwicm91dGVSb2xlQ2hlY2tzIiwic3VwZXJBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIiwiYWRtaW4iLCJyZXF1aXJlQWRtaW4iLCJ1c2VyIiwicmVxdWlyZUF1dGgiLCJodG1sNU1vZGUiLCJvdGhlcndpc2UiLCJ3aGVuIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRlbnRAIiwicmVzb2x2ZSIsImF1dGgiLCJhdXRoU2VydmljZSIsImF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUiLCJhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlIiwiJGluamVjdCIsImFwcFJ1biIsIiRyb290U2NvcGUiLCJzaWRlYmFyU2VydmljZSIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImVycm9yIiwiZ28iLCJwcmV2aW91cyIsInNldFNpZGViYXJTdGF0dXMiLCJydW4iLCIkaHR0cCIsIiRxIiwidXNlclNlcnZpY2UiLCJpZGVudGl0eVNlcnZpY2UiLCJhdXRoZW50aWNhdGVVc2VyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRmZCIsImRlZmVyIiwicG9zdCIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJzdWNjZXNzIiwiY3VycmVudFVzZXIiLCJwcm9taXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicm9sZSIsImlzQXV0aG9yaXplZCIsInJlamVjdCIsImlzQXV0aGVudGljYXRlZCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsIkxvZ2luQ3RybCIsIm5vdGlmeVNlcnZpY2UiLCJhY3RpdmF0ZSIsImxvZ2luIiwidm0iLCJSZWdpc3RlckN0cmwiLCIkc2NvcGUiLCJyZWdpc3RlciIsIm5ld1VzZXIiLCJjb25maXJtUGFzc3dvcmQiLCJrcEFjdGl2ZUNoYWxsZW5lZ2VzIiwiZGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImN0cmxGdW5jIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbXBldGl0aW9uSWQiLCJjaGFsbGVuZ2VzU2VydmljZSIsImdldEFjdGl2ZUNoYWxsZW5nZXMiLCJjaGFsbGVuZ2VzIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJsZW5ndGgiLCJfIiwiZm9yRWFjaCIsImNoYWxsZW5nZSIsInRpbWVMaW1pdCIsImV4cGlyZXMiLCJtb21lbnQiLCJkaWZmIiwiY3JlYXRlZCIsImFkZCIsImNoYWxsZW5nZURldGFpbHMiLCJrcENvbXBsZXRlZENoYWxsZW5lZ2VzIiwibGltaXQiLCJnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzIiwiZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJsb3NlciIsIndpbm5lciIsIndoZW5Db21wbGV0ZWQiLCJjb21wbGV0ZWQiLCJjYWxlbmRhciIsInNhbWVEYXkiLCJuZXh0RGF5IiwibmV4dFdlZWsiLCJsYXN0RGF5IiwibGFzdFdlZWsiLCJzYW1lRWxzZSIsImNyZWF0ZUNoYWxsZW5nZSIsImNvbXBsZXRlQ2hhbGxlbmdlIiwiZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24iLCJwYXJhbXMiLCJnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIiLCJwbGF5ZXJJZCIsImtwUHlyYW1pZCIsInJlcGxhY2UiLCJweXJhbWlkc1NlcnZpY2UiLCIkZmlsdGVyIiwiZ2V0UHlyYW1pZCIsInB5cmFtaWQiLCJsZXZlbHMiLCJpIiwicHVzaCIsIm9yZGVyUGxheWVycyIsImdldFBsYXllcnNTdGF0dXMiLCJjYWxjdWxhdGVQeXJhbWlkQmxvY2tzIiwiZmlsbEluRW1wdHlCbG9ja3MiLCJhc3NpZ25MZXZlbHNUb1BsYXllcnMiLCJwbGF5ZXJzIiwicGxheWVyIiwiX2lkIiwiY3VycmVudFVzZXJJc09uUHlyYW1pZCIsImNsYXNzIiwiY3VycmVudFVzZXJQbGF5ZXIiLCJoYXNBY3RpdmVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VyIiwiZmluZCIsInBvc2l0aW9uIiwib3Bwb25lbnQiLCJ0aW1lVG9FeHBpcmUiLCJmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcyIsImNyZWF0ZUJyZWFrUG9pbnRzIiwiYnJlYWtQb2ludHMiLCJudW1iZXJPZkJsb2NrcyIsIm51bWJlck9mUmVhbFBsYXllcnMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImxldmVsIiwiaW5kZXhPZiIsImxldmVsQWJvdmUiLCJhdmFpbGFibGVDaGFsbGVuZ2VzIiwiYXZhaWxhYmxlIiwiY29tcGxldGUiLCJmb3JmZWl0IiwiZm9yZmVpdERheXMiLCJuaWNrbmFtZSIsInB5cmFtaWRNZW51VG9nZ2xlIiwid2lubmVySXNDdXJyZW50VXNlciIsImZvcmZlaXRMb3NlciIsInN3YXBQb3NpdGlvbnMiLCJyZW1vdmluZ0N1cnJlbnRVc2VyIiwicmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCIsImNoYWxsZW5nZUV4cGlyZWQiLCJhZGRDdXJyZW50VXNlclRvUHlyYW1pZCIsImFkZFBsYXllclRvUHlyYW1pZCIsIndhcm5pbmciLCJjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJ0eXBlIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25UZXh0IiwiY29uZmlybUJ1dHRvbkNsYXNzIiwiY2FuY2VsQnV0dG9uVGV4dCIsImNsb3NlT25Db25maXJtIiwiY2xvc2VPbkNhbmNlbCIsInAiLCJvcGVuUG9zaXRpb24iLCJyZW1vdmVkUGxheWVyIiwicmVtb3ZlIiwidXBkYXRlZFBsYXllcnMiLCJ1cGRhdGVkUGxheWVyIiwicmVtb3ZlZFBsYXllckZyb21QeXJhbWlkIiwicmVmcmVzaFB5cmFtaWQiLCJpbmZvIiwiZGVzY3JpcHRpb24iLCJkZXRhaWxzIiwiZ2V0UHlyYW1pZHNGb3JVc2VyIiwidXNlcklkIiwiY3JlYXRlUHlyYW1pZCIsImtwRm9vdGVyIiwiaW5kZW50aXR5Iiwia3BIZWFkZXIiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhclN0YXR1cyIsImxlZnQiLCJnZXRTaWRlYmFyU3RhdHVzIiwia3BTaWRlYmFyIiwiQ3JlYXRlUHlyYW1pZEN0cmwiLCJhdmFpbGFibGVQbGF5ZXJzIiwiYWRkUGxheWVyIiwiYWRkZWRQbGF5ZXJzIiwiYWxsb3dlZFBsYXllcnMiLCJhZGRlZFBsYXllckFkZGVkIiwicmVtb3ZlUGxheWVyIiwidXBkYXRlQWxsb3dlZFBsYXllcnMiLCJyZW1vdmVkUGxheWVycyIsInNwbGljZSIsImNvbmNhdCIsIm5ld1B5cmFtaWQiLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJNeVB5cmFtaWRzQ3RybCIsInB5cmFtaWRzIiwiUHlyYW1pZEN0cmwiLCIkc3RhdGVQYXJhbXMiLCJQeXJhbWlkc0N0cmwiLCJTdGF0c0N0cmwiLCIkd2luZG93Iiwicm9sZXMiLCJib290c3RyYXBwZWRVc2VyT2JqZWN0IiwibWVzc2FnZSIsInRhcmdldCIsIiQiLCJub3RpZnkiLCJpbnZlcnNlIiwibm90aWZ5RGVmYXVsdHMiLCJuZXdlc3Rfb25fdG9wIiwib2Zmc2V0IiwieCIsInkiLCJzdGF0dXMiLCJyaWdodCIsIndlYnNvY2tldEhvc3QiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImNvbm5lY3Rpb24iLCJjb25uZWN0IiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwiZSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCIkYnJvYWRjYXN0IiwidG9waWMiLCJzZW5kIiwianNvbiIsInN0cmluZ2lmeSIsIndlYnNvY2tldFNlcnZpY2UiLCJIb21lQ3RybCIsInRvZ2dsZVN1Ym1lbnUiLCJsaW5rRnVuYyIsImVsIiwiY2xpY2siLCJuZXh0Iiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsImxpbmsiLCJ3YXZlc0VmZmVjdCIsImVsZW1lbnQiLCJoYXNDbGFzcyIsIldhdmVzIiwiYXR0YWNoIiwiaW5pdCIsImZnTGluZSIsImlucHV0IiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzRmxvYXRMYWJlbCIsImZvY3VzIiwiYWRkQ2xhc3MiLCJibHVyIiwidmFsIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFlBQ0Esc0JBQ0EsYUFDQSx3QkFDQSxRQUNBLHFCQ1JBLHdCQUlBLFNBQUFDLEdBQUFDLEdBRUFBLEVBQUFDLFNBQUFDLFFBQUFDLE1BQ0FILEVBQUFDLFNBQUFDLFFBQUFDLFFBR0FILEVBQUFDLFNBQUFDLFFBQUFDLElBQUEscUJBQUEsZ0NBRUFILEVBQUFDLFNBQUFDLFFBQUFDLElBQUEsaUJBQUEsV0FDQUgsRUFBQUMsU0FBQUMsUUFBQUMsSUFBQSxPQUFBLHVDQVhBTixRQUFBQyxPQUFBLE9BQUFNLE9BQUFMLE1DRkEsdUJBSUEsU0FBQU0sR0FBQUMsR0FDQSxHQUFBQyxHQUFBQyxJQUNBRCxHQUFBRCxPQUFBQSx1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RyxTQUFBLElBQ0EyTCxLQUFBUCxFQUdBLE9BQUF2TCxHQVZBN0YsUUFDQUMsT0FBQSxPQUNBNEYsVUFBQSxnQkFBQXNMLE1DSkEsV0FDQSxZQUtBLFNBQUFTLEtBUUEsUUFBQVIsR0FBQW5MLEVBQUE0TCxHQUNBQSxFQUFBQyxTQUFBLGFBQUFELEVBQUFDLFNBQUEsYUFDQUMsTUFBQUMsT0FBQUgsR0FBQSxpQkFDQUEsRUFBQUMsU0FBQSxhQUNBQyxNQUFBQyxPQUFBSCxHQUFBLGdCQUVBRSxNQUFBQyxPQUFBSCxHQUdBRSxNQUFBRSxPQWhCQSxHQUFBcE0sSUFDQUcsU0FBQSxJQUNBMkwsS0FBQVAsRUFHQSxPQUFBdkwsR0FWQTdGLFFBQ0FDLE9BQUEsT0FDQTRGLFVBQUEsY0FBQStMLE1DSkEsV0FDQSxZQUtBLFNBQUFNLEtBUUEsUUFBQWQsR0FBQW5MLEVBQUE0TCxHQUNBLEdBQUFNLEdBQUFOLEVBQUFPLFdBQUFDLFFBQ0FDLEVBQUFULEVBQUFKLFNBQUFLLFNBQUEsV0FDQUssR0FBQUksTUFBQSxXQUNBVixFQUFBVyxTQUFBLGdCQUdBTCxFQUFBTSxLQUFBLGFBQ0FILEdBQUFBLEdBQUEsSUFBQUgsRUFBQU8sTUFBQW5NLFNBQ0FzTCxFQUFBYyxZQUFBLGdCQWhCQSxHQUFBOU0sSUFDQUcsU0FBQSxJQUNBMkwsS0FBQVAsRUFHQSxPQUFBdkwsR0FWQTdGLFFBQ0FDLE9BQUEsT0FDQTRGLFVBQUEsU0FBQXFNIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkuYm9vdHN0cmFwJyxcbiAgJ25nQW5pbWF0ZScsXG4gICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgJ25vdWlzbGlkZXInLFxuICAnbG9jYWx5dGljcy5kaXJlY3RpdmVzJyxcbiAgJ3RpbWVyJyxcbiAgJ2x1ZWdnLmRpcmVjdGl2ZXMnXG5dKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCAnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyYXRpb24pO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYXRpb24oJGh0dHBQcm92aWRlcikge1xuICAgIC8vaW5pdGlhbGl6ZSBnZXQgaWYgbm90IHRoZXJlXG4gICAgaWYgKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KSB7XG4gICAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0ge307ICAgIFxuICAgIH0gICAgXG4gICAgLy9kaXNhYmxlIElFIGFqYXggcmVxdWVzdCBjYWNoaW5nXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnSWYtTW9kaWZpZWQtU2luY2UnXSA9ICdGcmksIDAxIEphbiAyMDE2IDA1OjAwOjAwIEdNVCc7XG4gICAgLy8gZXh0cmFcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydDYWNoZS1Db250cm9sJ10gPSAnbm8tY2FjaGUnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ1ByYWdtYSddID0gJ25vLWNhY2hlJztcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XG5cbiAgZnVuY3Rpb24gQXBwQ3RybCgkc3RhdGUpIHtcbiAgICB2YXIgYXBwQ3RybCA9IHRoaXM7XG4gICAgYXBwQ3RybC4kc3RhdGUgPSAkc3RhdGU7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKGNvbmZpZ3VyZVJvdXRlcyk7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlUm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgdmFyIHJvdXRlUm9sZUNoZWNrcyA9IHtcbiAgICAgIHN1cGVyQWRtaW46IHJlcXVpcmVTdXBlckFkbWluLFxuICAgICAgYWRtaW46IHJlcXVpcmVBZG1pbixcbiAgICAgIHVzZXI6IHJlcXVpcmVBdXRoXG4gICAgfTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vIGZvciBhbnkgdW5tYXRjaGVkIHVybFxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvcHlyYW1pZHMvJywgJy9weXJhbWlkcycpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzJywge1xuICAgICAgICB1cmw6ICcvcHlyYW1pZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3B5cmFtaWRzL3ZpZXdzL3B5cmFtaWRzLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgncHlyYW1pZHMubXlQeXJhbWlkcycsIHtcbiAgICAgICAgdXJsOiAnL215LXB5cmFtaWRzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlQeXJhbWlkc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9teS1weXJhbWlkcy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIGF1dGg6IHJvdXRlUm9sZUNoZWNrcy51c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdweXJhbWlkcy52aWV3Jywge1xuICAgICAgICB1cmw6ICcvdmlldy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1B5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvcHlyYW1pZC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLnN0YXRzJywge1xuICAgICAgICB1cmw6ICcvc3RhdHMvOmNvbXBldGl0aW9uSWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTdGF0c0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdweXJhbWlkcy92aWV3cy9zdGF0cy5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3B5cmFtaWRzLmNyZWF0ZScsIHtcbiAgICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NyZWF0ZVB5cmFtaWRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHlyYW1pZHMvdmlld3MvY3JlYXRlLXB5cmFtaWQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvbG9naW4uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICByZXF1aXJlQWRtaW4uJGluamVjdCA9IFsnYXV0aFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiByZXF1aXJlQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVTdXBlckFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZVN1cGVyQWRtaW4oYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSgnc3VwZXItYWRtaW4nKTtcbiAgfVxuXG4gIHJlcXVpcmVBdXRoLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUF1dGgoYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4gYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZSgpO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLnJ1bihhcHBSdW4pO1xuXG4gIGZ1bmN0aW9uIGFwcFJ1bigkcm9vdFNjb3BlLCAkc3RhdGUsIHNpZGViYXJTZXJ2aWNlKSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgaWYgKGVycm9yID09PSAnbm90IGF1dGhvcml6ZWQnKSB7XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gdG9TdGF0ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNpZGViYXJTZXJ2aWNlLnNldFNpZGViYXJTdGF0dXMoZmFsc2UpO1xuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRzdGF0ZSwgJGh0dHAsICRxLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBhdXRoZW50aWNhdGVVc2VyOiBhdXRoZW50aWNhdGVVc2VyLFxuICAgICAgY3JlYXRlVXNlcjogY3JlYXRlVXNlcixcbiAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSxcbiAgICAgIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGU6IGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGVcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywge1xuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVVzZXIodXNlckRhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgICAgdXNlckRhdGE6IHVzZXJEYXRhXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIodXNlckRhdGEudXNlcm5hbWUsIHVzZXJEYXRhLnBhc3N3b3JkKTtcbiAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucG9zdCgnL2xvZ291dCcsIHtcbiAgICAgICAgbG9nb3V0OiB0cnVlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyID0gdW5kZWZpbmVkO1xuICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUocm9sZSkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhvcml6ZWQocm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgndXNlclNlcnZpY2UnLCB1c2VyU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gdXNlclNlcnZpY2UoJGh0dHAsIGlkZW50aXR5U2VydmljZSkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWxsVXNlcnM6IGdldEFsbFVzZXJzXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHJldHVybiB1c2VycztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBMb2dpbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIExvZ2luQ3RybCgkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5sb2dpbiA9IGxvZ2luO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcih1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdVc2VybmFtZSAvIHBhc3N3b3JkIGNvbWJpbmFpdG9uIGluY29ycmVjdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgkc3RhdGUucHJldmlvdXMpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygkc3RhdGUucHJldmlvdXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBSZWdpc3RlckN0cmwpO1xuXG4gIGZ1bmN0aW9uIFJlZ2lzdGVyQ3RybCgkc2NvcGUsICRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIobmV3VXNlcikge1xuICAgICAgaWYgKG5ld1VzZXIucGFzc3dvcmQgIT09IG5ld1VzZXIuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlVXNlcihuZXdVc2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcEFjdGl2ZUNoYWxsZW5lZ2VzJywga3BBY3RpdmVDaGFsbGVuZWdlcyk7XG5cbiAgZnVuY3Rpb24ga3BBY3RpdmVDaGFsbGVuZWdlcygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9hY3RpdmUtY2hhbGxlbmdlcy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlcygpIHtcbiAgICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYWxsZW5nZXMuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgICAgICBfLmZvckVhY2godm0uY2hhbGxlbmdlcywgZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjaGFsbGVuZ2VfY3JlYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXMoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjaGFsbGVuZ2VfY29tcGxldGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcENvbXBsZXRlZENoYWxsZW5lZ2VzJywga3BDb21wbGV0ZWRDaGFsbGVuZWdlcyk7XG5cbiAgZnVuY3Rpb24ga3BDb21wbGV0ZWRDaGFsbGVuZWdlcygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6ICdAJyxcbiAgICAgICAgbGltaXQ6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGxldGVkQ2hhbGxlbmdlcygpIHtcbiAgICAgIHZtLmNoYWxsZW5nZXMgPSBbXTtcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHZtLmxpbWl0KS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2VzLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICAgICAgXy5mb3JFYWNoKHZtLmNoYWxsZW5nZXMsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5sb3NlciA9IGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyA/ICdvcHBvbmVudCcgOiAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBjaGFsbGVuZ2Uud2hlbkNvbXBsZXRlZCA9IG1vbWVudChjaGFsbGVuZ2UuY29tcGxldGVkKS5jYWxlbmRhcihudWxsLCB7XG4gICAgICAgICAgICAgIHNhbWVEYXk6ICdbVG9kYXldJyxcbiAgICAgICAgICAgICAgbmV4dERheTogJ1tUb21vcnJvd10nLFxuICAgICAgICAgICAgICBuZXh0V2VlazogJ2RkZGQnLFxuICAgICAgICAgICAgICBsYXN0RGF5OiAnW1llc3RlcmRheV0nLFxuICAgICAgICAgICAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkJyxcbiAgICAgICAgICAgICAgc2FtZUVsc2U6ICdERC9NTS9ZWVlZJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjaGFsbGVuZ2VfY29tcGxldGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgZ2V0Q29tcGxldGVkQ2hhbGxlbmdlcygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2NoYWxsZW5nZXNTZXJ2aWNlJywgY2hhbGxlbmdlc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGNoYWxsZW5nZXNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjcmVhdGVDaGFsbGVuZ2U6IGNyZWF0ZUNoYWxsZW5nZSxcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlOiBjb21wbGV0ZUNoYWxsZW5nZSxcbiAgICAgIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyLFxuICAgICAgZ2V0Q29tcGxldGVkQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb246IGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uLFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvY3JlYXRlJywge1xuICAgICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jaGFsbGVuZ2VzL2NvbXBsZXRlJywgIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIGxpbWl0KSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGxldGVkL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBsaW1pdDogbGltaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgna3BQeXJhbWlkJywga3BQeXJhbWlkKTtcblxuICBmdW5jdGlvbiBrcFB5cmFtaWQoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9weXJhbWlkcy9jb21wb25lbnRzL3B5cmFtaWQuaHRtbCcsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogJ0AnXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkc3RhdGUsIHB5cmFtaWRzU2VydmljZSwgJGZpbHRlciwgbm90aWZ5U2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucHlyYW1pZCA9IHt9O1xuICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgdm0ubnVtYmVyT2ZCbG9ja3MgPSAwO1xuICAgIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQgPSBmYWxzZTtcbiAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gZmFsc2U7XG4gICAgdm0uY3JlYXRlQ2hhbGxlbmdlID0gY3JlYXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNvbXBsZXRlQ2hhbGxlbmdlID0gY29tcGxldGVDaGFsbGVuZ2U7XG4gICAgdm0uY2hhbGxlbmdlRXhwaXJlZCA9IGNoYWxsZW5nZUV4cGlyZWQ7XG4gICAgdm0uY3VycmVudFVzZXJQbGF5ZXIgPSB7fTtcbiAgICB2bS5weXJhbWlkTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgIHZtLmFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkID0gYWRkQ3VycmVudFVzZXJUb1B5cmFtaWQ7XG4gICAgdm0uY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQgPSBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZDtcbiAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gMDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgaWYgKHB5cmFtaWQuZGF0YSkge1xuICAgICAgICAgIHZtLnB5cmFtaWQgPSBweXJhbWlkLmRhdGE7XG5cbiAgICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgY2hhbmdlIG9uIHJlZnJlc2hcbiAgICAgICAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBweXJhbWlkLmRhdGEubGV2ZWxzOyArK2kpIHtcbiAgICAgICAgICAgIHZtLmxldmVscy5wdXNoKGkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9yZGVyUGxheWVycygpO1xuICAgICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgICBjYWxjdWxhdGVQeXJhbWlkQmxvY2tzKCk7XG4gICAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLm15UHlyYW1pZHMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3JkZXIgdGhlIHBsYXllcnMgYnkgdGhlIHBvc2l0aW9uIHByb3BlcnR5IG9mIHRoZSBwbGF5ZXJzIGFycmF5IGluIHRoZSBweXJhbWlkIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9yZGVyUGxheWVycygpIHtcbiAgICAgIHZtLnB5cmFtaWQucGxheWVycyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5weXJhbWlkLnBsYXllcnMsICdwb3NpdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgaWYgZWFjaCBwbGF5ZXIgaXMgYWxyZWFkeSBjaGFsbGVuZ2VkIGFuZCBzZXQgc29tZSBzdHVmZlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFBsYXllcnNTdGF0dXMoKSB7XG4gICAgICBfLmZvckVhY2godm0ucHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlIG9uIHRoaXMgcHlyYW1pZCBhbmQgc2V0IHNvbWUgcHJvcGVydGllc1xuICAgICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIHBsYXllci5faWQgPT09IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcblxuICAgICAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YSkge1xuICAgICAgICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlcykge1xuICAgICAgICBfLmZvckVhY2goY2hhbGxlbmdlcy5kYXRhLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG5cbiAgICAgICAgICB2YXIgY2hhbGxlbmdlciA9IF8uZmluZCh2bS5weXJhbWlkLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCB9KTtcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNsYXNzID0gJ3VuYXZhaWxhYmxlJztcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnY2hhbGxlbmdlcidcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9wcG9uZW50ID0gXy5maW5kKHZtLnB5cmFtaWQucGxheWVycywgeyAnX2lkJzogY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCB9KTtcbiAgICAgICAgICBvcHBvbmVudC5jbGFzcyA9ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdvcHBvbmVudCdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gVHJhY2sgd2hlbiB0aGUgY2hhbGxlbmdlIHdpbGwgZXhwaXJlXG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksICdzJykgKiAtMTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgaGFzIG5vdCB5ZXQgZXhwaXJlZCBkaXNwbGF5IGEgY291bnRkb3duIG9uIHRoZSBvcHBvbmVudFxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlLmV4cGlyZXMgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBweXJhbWlkIGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2UgYnkgZm9yZmVpdFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lVG9FeHBpcmUgPD0gMCkge1xuICAgICAgICAgICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBvcHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm93IHRoYXQgd2Uga25vdyB3aGljaCBwbGF5ZXJzIGFyZSBpbiBjaGFsbGVuZ2VzIGFuZCB3aGljaCBhcmVuJ3RcbiAgICAgICAgLy8gZmluZCB0aGUgYXZhaWxhYmxlIGNoYWxsZW5nZXMgZm9yIHRoaXMgdXNlclxuICAgICAgICBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCB3aGVyZSB0byBzdGFydCBlYWNoIG5ldyByb3cgb24gdGhlIHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCcmVha1BvaW50cygpIHtcbiAgICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnB5cmFtaWQubGV2ZWxzOyBpKyspIHtcbiAgICAgICAgdm0uYnJlYWtQb2ludHMucHVzaCgoKChpICogKGkgKyAxKSkgLyAyKSkgKyAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIb3cgbWFueSB0b3RhbCBibG9ja3MgaW4gdGhpcyBweXJhbWlkXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHlyYW1pZEJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mQmxvY2tzID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5weXJhbWlkLmxldmVsczsgaSA+IDA7IGktLSkge1xuICAgICAgICB2bS5udW1iZXJPZkJsb2NrcyArPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbGwgb3V0IHRoZSByZW1haW5pbmcgYmxvY2tzIG9mIHRoZSBweXJhbWlkIHdpdGggZW1wdHkgYmxvY2tzXG4gICAgZnVuY3Rpb24gZmlsbEluRW1wdHlCbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZlJlYWxQbGF5ZXJzID0gdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5weXJhbWlkLnBsYXllcnMubGVuZ3RoOyBpIDwgdm0ubnVtYmVyT2ZCbG9ja3M7IGkrKykge1xuICAgICAgICB2bS5weXJhbWlkLnBsYXllcnMucHVzaCh7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnRW1wdHknLFxuICAgICAgICAgIGxhc3ROYW1lOiAnU3BvdCcsXG4gICAgICAgICAgcG9zaXRpb246IDk5LFxuICAgICAgICAgIGNsYXNzOiAnZW1wdHknXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdpdmUgZWFjaCBwbGF5ZXIgYSBsZXZlbCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgYnJlYWsgcG9pbnRzXG4gICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdobyBvdGhlciBwbGF5ZXJzIGNhbiBjaGFsbGVuZ2VcbiAgICBmdW5jdGlvbiBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKSB7XG4gICAgICB2YXIgbGV2ZWwgPSAwO1xuICAgICAgY3JlYXRlQnJlYWtQb2ludHMoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0ucHlyYW1pZC5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh2bS5icmVha1BvaW50cy5pbmRleE9mKGkgKyAxKSA+IC0xKSB7XG4gICAgICAgICAgbGV2ZWwgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICB2bS5weXJhbWlkLnBsYXllcnNbaV0ubGV2ZWwgPSBsZXZlbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaW5kIGFsbCB0aGUgcGxheWVycyB0aGF0IGFyZSBhdmFpbGFibGUgdG8gYmUgY2hhbGxlbmdlZCBieSB0aGlzIHVzZXJcbiAgICBmdW5jdGlvbiBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpIHtcbiAgICAgIHZhciBsZXZlbEFib3ZlID0gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgPiAxID8gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgLSAxIDogbnVsbDtcbiAgICAgIF8uZm9yRWFjaCh2bS5weXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgaWYgKHBsYXllci5sZXZlbCA9PT0gbGV2ZWxBYm92ZSAmJiBwbGF5ZXIucG9zaXRpb24gIT09IDk5ICYmIHBsYXllci5jbGFzcyAhPT0gJ3VuYXZhaWxhYmxlJykge1xuICAgICAgICAgIHZtLmF2YWlsYWJsZUNoYWxsZW5nZXMgPSB0cnVlO1xuICAgICAgICAgIHBsYXllci5hdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UocGxheWVyKSB7XG4gICAgICBpZiAoIXBsYXllci5hdmFpbGFibGUpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIHRoYXQgaXMgbm90IGEgdmFsaWQgY2hhbGxlbmdlLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNoYWxsZW5nZSA9IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiB2bS5jb21wZXRpdGlvbklkLFxuICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICBmb3JmZWl0OiBmYWxzZSxcbiAgICAgICAgICB0aW1lTGltaXQ6IHZtLnB5cmFtaWQuZm9yZmVpdERheXMsXG4gICAgICAgICAgY2hhbGxlbmdlcjoge1xuICAgICAgICAgICAgX2lkOiB2bS5jdXJyZW50VXNlclBsYXllci5faWQsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIG5pY2tuYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5uaWNrbmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvblxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3Bwb25lbnQ6IHtcbiAgICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBuaWNrbmFtZTogcGxheWVyLm5pY2tuYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgcHlyYW1pZFxuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jcmVhdGVDaGFsbGVuZ2UoY2hhbGxlbmdlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2bS5weXJhbWlkTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGxldGUgYSBjaGFsbGVuZ2UgYnkgYSB1c2VyIGludGVyYWN0aW9uIG9yIGEgZm9yZmVpdFxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IHdpbm5lcklzQ3VycmVudFVzZXJcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBmb3JmZWl0XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBmb3JmZWl0TG9zZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wbGV0ZUNoYWxsZW5nZSh3aW5uZXJJc0N1cnJlbnRVc2VyLCBmb3JmZWl0LCBmb3JmZWl0TG9zZXIpIHtcbiAgICAgIHZhciBwbGF5ZXIgPSBmb3JmZWl0TG9zZXIgfHwgdm0uY3VycmVudFVzZXJQbGF5ZXI7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBzd2FwUG9zaXRpb25zID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBmb3JmZWl0XG4gICAgICAgIGlmIChmb3JmZWl0KSB7XG4gICAgICAgICAgY2hhbGxlbmdlLmRhdGEuZm9yZmVpdCA9IHRydWU7XG4gICAgICAgICAgaWYgKGZvcmZlaXRMb3Nlci5jaGFsbGVuZ2UucG9zaXRpb24gPT09ICdvcHBvbmVudCcpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdobyB0aGUgd2lubmVyIHdhcyB0byBzdG9yZSBpbiB0aGUgY2hhbGxlbmdlIHJlY29yZFxuICAgICAgICB9IGVsc2UgaWYgKHdpbm5lcklzQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdvcHBvbmVudCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTd2FwIHBvc2l0aW9ucyBhbmQgdGhlbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIG9yIGp1c3QgY29tcGxldGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBweXJhbWlkXG4gICAgICAgIGlmIChzd2FwUG9zaXRpb25zKSB7XG4gICAgICAgICAgcHlyYW1pZHNTZXJ2aWNlLnN3YXBQb3NpdGlvbnModm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQsIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAocmVtb3ZpbmdDdXJyZW50VXNlcikge1xuICAgICAgICAgICAgICAgIHJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tUHlyYW1pZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0ucHlyYW1pZE1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgY29tcGxldGUgY2hhbGxuZ2UgZnVuY3Rpb24gd2l0aCB0aGUgZm9yZmVpdGluZyBwbGF5ZXJcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNoYWxsZW5nZUV4cGlyZWQocGxheWVyKSB7XG4gICAgICBjb21wbGV0ZUNoYWxsZW5nZShudWxsLCB0cnVlLCBwbGF5ZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBjdXJyZW50IHVzZXIgdGhlIHB5cmFtaWQgXG4gICAgICogaWYgdGhleSdyZSBub3QgYWxyZWFkeSBvbiBpdCBhbmQgdGhlcmUncyBzcGFjZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEN1cnJlbnRVc2VyVG9QeXJhbWlkKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBpZiAodm0ubnVtYmVyT2ZSZWFsUGxheWVycyA8IHZtLm51bWJlck9mQmxvY2tzKSB7XG4gICAgICAgICAgdmFyIHBsYXllciA9IHtcbiAgICAgICAgICAgIF9pZDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0ubnVtYmVyT2ZSZWFsUGxheWVycyArIDFcbiAgICAgICAgICB9O1xuICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5hZGRQbGF5ZXJUb1B5cmFtaWQodm0uY29tcGV0aXRpb25JZCwgcGxheWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ1NvcnJ5LCB0aGlzIHB5cmFtaWQgaXMgZnVsbCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbVB5cmFtaWQoKSB7XG4gICAgICBzd2FsKHtcbiAgICAgICAgdGl0bGU6ICdMZWF2ZSBQeXJhbWlkPycsXG4gICAgICAgIHRleHQ6ICdZb3Ugd2lsbCBsb3NlIHlvdXIgc3BvdCBhbmQgZm9yZmVpdCBhbnkgYWN0aXZlIGNoYWxsZW5nZXMuJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMsIGxlYXZlJyxcbiAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnYnRuLWRhbmdlcicsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdObywgc3RheScsXG4gICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCk7XG4gICAgICAgIHN3YWwoJ09LLCB5b3VcXCdyIG91dCEnLCAnWW91XFwndmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIHB5cmFtaWQuJywgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGlzIHRvIGVuZm9yY2Ugb3JkZXIgb2Ygb3BlcmF0aW9ucyB3aGVuIHRoZSBwbGF5ZXIgdG8gYmUgcmVtb3ZlZCBoYWQgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgIHZhciByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiByZW1vdmVDdXJyZW50VXNlckZyb21QeXJhbWlkKCkge1xuICAgICAgLy8gTWFrZSBzdXJlIHRoZSB1c2VyIGlzIGxvZ2dlZCBpbiBhbmQgaXMgb24gdGhpcyBweXJhbWlkXG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIHZtLmN1cnJlbnRVc2VySXNPblB5cmFtaWQpIHtcbiAgICAgICAgcmVtb3ZpbmdDdXJyZW50VXNlciA9IHRydWU7XG4gICAgICAgIC8vIEZvcmZlaXQgaWYgdGhleSBoYXZlIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHZtLmN1cnJlbnRVc2VyUGxheWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgcmVtb3ZpbmcgdGhlbSAuLi5cbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25QeXJhbWlkID0gZmFsc2U7XG4gICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyBHZXQgYW4gdXBkYXRlZCBjb3B5IG9mIHRoZSBweXJhbWlkIGluY2FzZSBhIGZvcmZlaXQgaGFwcGVuZWRcbiAgICAgICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgdXBkYXRlZCBjb3B5IGxvY2FsbHkgc28gYXMgbm90IHRvIGRpc3RydXB0IHRoZSBweXJhbWlkXG4gICAgICAgICAgICAvLyB1bnRpbCB0aGUgcGxheWVyIGhhcyBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIHZhciBweXJhbWlkID0gcC5kYXRhO1xuXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBzcG90IHRoZXkgd2VyZSBpbiBvbiB0aGUgcHlyYW1pZFxuICAgICAgICAgICAgdmFyIG9wZW5Qb3NpdGlvbiA9IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uO1xuXG4gICAgICAgICAgICAvLyBNb3ZlIGFsbCB0aGUgcGxheWVycyB1cCAxIHBvc2l0aW9uIHRoYXQgd2VyZSBiZWhpbmQgdGhlIHJlbW92ZWQgcGxheWVyXG4gICAgICAgICAgICBfLmZvckVhY2gocHlyYW1pZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgIGlmIChwbGF5ZXIucG9zaXRpb24gPj0gb3BlblBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBvc2l0aW9uIC09IDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmVkIHRoZSBwbGF5ZXIgZnJvbSB0aGUgcHlyYW1pZFxuICAgICAgICAgICAgdmFyIHJlbW92ZWRQbGF5ZXIgPSBfLnJlbW92ZShweXJhbWlkLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIGEgbmV3IGFycmF5IG9mIGFsbCB0aGUgcGxheWVycyBzdGlsbCBvbiB0aGUgcHlyYW1pZFxuICAgICAgICAgICAgLy8gb25seSB1c2UgdGhlIHByb3BlcnRpZXMgd2Ugd2FudCB0byBzdG9yZSBpbiB0aGUgcHlyYW1pZCBkb2N1bWVudFxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLm51bWJlck9mUmVhbFBsYXllcnMgLSAxOyArK2kpIHtcbiAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXIgPSB7XG4gICAgICAgICAgICAgICAgX2lkOiBweXJhbWlkLnBsYXllcnNbaV0uX2lkLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogcHlyYW1pZC5wbGF5ZXJzW2ldLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogcHlyYW1pZC5wbGF5ZXJzW2ldLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBweXJhbWlkLnBsYXllcnNbaV0ucG9zaXRpb25cbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB1cGRhdGVkUGxheWVycy5wdXNoKHVwZGF0ZWRQbGF5ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxsIHNlcnZpY2UgdG8gcmVtb3ZlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgIHB5cmFtaWRzU2VydmljZS5yZW1vdmVkUGxheWVyRnJvbVB5cmFtaWQodm0uY29tcGV0aXRpb25JZCwgcmVtb3ZlZFBsYXllclswXSwgdXBkYXRlZFBsYXllcnMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIHB5cmFtaWQgYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoUHlyYW1pZCgpIHtcbiAgICAgIHB5cmFtaWRzU2VydmljZS5nZXRQeXJhbWlkKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWQpIHtcbiAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcbiAgICAgICAgb3JkZXJQbGF5ZXJzKCk7XG4gICAgICAgIGdldFBsYXllcnNTdGF0dXMoKTtcbiAgICAgICAgZmlsbEluRW1wdHlCbG9ja3MoKTtcbiAgICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NyZWF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hQeXJhbWlkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y2hhbGxlbmdlX2NvbXBsZXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gY2hhbGxlbmdlRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjaGFsbGVuZ2VEZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKCFyZW1vdmluZ0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnBsYXllcl9hZGRlZCcsIGZ1bmN0aW9uIChfLCBkZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gZGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhkZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpwbGF5ZXJfcmVtb3ZlZCcsIGZ1bmN0aW9uIChfLCBkZXRhaWxzKSB7XG4gICAgICBpZiAodm0uY29tcGV0aXRpb25JZCA9PT0gZGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhkZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcmVmcmVzaFB5cmFtaWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdweXJhbWlkc1NlcnZpY2UnLCBweXJhbWlkc1NlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHB5cmFtaWRzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0UHlyYW1pZDogZ2V0UHlyYW1pZCxcbiAgICAgIGdldFB5cmFtaWRzRm9yVXNlcjogZ2V0UHlyYW1pZHNGb3JVc2VyLFxuICAgICAgY3JlYXRlUHlyYW1pZDogY3JlYXRlUHlyYW1pZCxcbiAgICAgIHN3YXBQb3NpdGlvbnM6IHN3YXBQb3NpdGlvbnMsXG4gICAgICBhZGRQbGF5ZXJUb1B5cmFtaWQ6IGFkZFBsYXllclRvUHlyYW1pZCxcbiAgICAgIHJlbW92ZWRQbGF5ZXJGcm9tUHlyYW1pZDogcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIHB5cmFtaWQgZnJvbSB0aGUgZGF0YWJhc2UgKG9yIG1lbW9yeSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBweXJhbWlkIGlkIGZvciB0aGUgcmVxdWVzdGVkIHB5cmFtaWRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQeXJhbWlkKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZCcsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBweXJhbWlkcyBmcm9tIHRoZSBkYXRhYmFzZSB0aGUgYSBwYXJ0aWN1bGFyIHVzZXIgaXMgaW5jbHVkZWQgaW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dXNlcklkfSB0aGUgdXNlciBpZCBmb3IgdGhlIHJlcXVlc3RlZCB1c2VyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBweXJhbWlkc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFB5cmFtaWRzRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHlyYW1pZHMvdXNlcicsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHlyYW1pZChweXJhbWlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9weXJhbWlkcy9jcmVhdGUnLCB7XG4gICAgICAgIHB5cmFtaWQ6IHB5cmFtaWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3YXBQb3NpdGlvbnMoY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlciwgb3Bwb25lbnQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3N3YXBQb3NpdGlvbnMnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIGNoYWxsZW5nZXI6IGNoYWxsZW5nZXIsXG4gICAgICAgIG9wcG9uZW50OiBvcHBvbmVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9QeXJhbWlkKGNvbXBldGl0aW9uSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHlyYW1pZHMvYWRkUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlZFBsYXllckZyb21QeXJhbWlkKGNvbXBldGl0aW9uSWQsIHJlbW92ZWRQbGF5ZXIsIHBsYXllcnMpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3B5cmFtaWRzL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcmVtb3ZlZFBsYXllcjogcmVtb3ZlZFBsYXllcixcbiAgICAgICAgcGxheWVyczogcGxheWVyc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcEZvb3RlcicsIGtwRm9vdGVyKTtcblxuICBmdW5jdGlvbiBrcEZvb3RlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdrcEhlYWRlcicsIGtwSGVhZGVyKTtcblxuICBmdW5jdGlvbiBrcEhlYWRlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnaGVhZGVyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKHNpZGViYXJTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnNpZGViYXJTdGF0dXMgPSBzaWRlYmFyU2VydmljZS5nZXRTaWRlYmFyU3RhdHVzKCk7XG4gICAgdm0udG9nZ2xlU2lkZWJhciA9IHRvZ2dsZVNpZGViYXI7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICAgICAgdm0uc2lkZWJhclN0YXR1cy5sZWZ0ID0gIXZtLnNpZGViYXJTdGF0dXMubGVmdDtcbiAgICAgIHNpZGViYXJTZXJ2aWNlLnNldFNpZGViYXJTdGF0dXModm0uc2lkZWJhclN0YXR1cy5sZWZ0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ2twU2lkZWJhcicsIGtwU2lkZWJhcik7XG5cbiAgZnVuY3Rpb24ga3BTaWRlYmFyKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICdzaWRlYmFyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvc2lkZWJhci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBzaWRlYmFyU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaW5kZW50aXR5ID0gaWRlbnRpdHlTZXJ2aWNlO1xuICAgIHZtLmxvZ291dCA9IGxvZ291dDtcbiAgICB2bS5zaWRlYmFyU3RhdHVzID0gc2lkZWJhclNlcnZpY2UuZ2V0U2lkZWJhclN0YXR1cygpO1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIHB5cmFtaWRcbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ3JlYXRlUHlyYW1pZEN0cmwnLCBDcmVhdGVQeXJhbWlkQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlUHlyYW1pZEN0cmwoJHNjb3BlLCAkc3RhdGUsIHVzZXJTZXJ2aWNlLCBweXJhbWlkc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm5ld1B5cmFtaWQgPSB7XG4gICAgICBwbGF5ZXJzOiBbXVxuICAgIH07XG4gICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZtLmFkZGVkUGxheWVycyA9IFtdO1xuICAgIHZtLmNyZWF0ZVB5cmFtaWQgPSBjcmVhdGVQeXJhbWlkO1xuICAgIHZtLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbiAgICB2bS5yZW1vdmVQbGF5ZXIgPSByZW1vdmVQbGF5ZXI7XG4gICAgdm0uYWxsb3dlZFBsYXllcnMgPSAxMDtcbiAgICB2bS5uZXdQeXJhbWlkLmxldmVscyA9IDQ7XG4gICAgdm0ubmV3UHlyYW1pZC5mb3JmZWl0RGF5cyA9IDE7XG5cbiAgICBhY3RpdmF0ZSgpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJ1bnMgb24gY29udHJvbGxlciBpbnN0YW50aWF0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSB1c2Vycy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsYXllciB0byB0aGUgbmV3IHB5cmFtaWRcbiAgICAgKiBDaGVja3MgdG8gbWFrZSBzdXJlIHlvdSBhcmUgbm90IGFkZGluZyB0b28gbWFueSBwbGF5ZXJzXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQbGF5ZXIocGxheWVyKSB7XG4gICAgICBpZih2bS5hZGRlZFBsYXllcnMubGVuZ3RoIDwgdm0uYWxsb3dlZFBsYXllcnMpIHtcbiAgICAgICAgdm0uYWRkZWRQbGF5ZXJBZGRlZCA9IHRydWU7XG4gICAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBbGwgc3BvdHMgaGF2ZSBiZWVuIGZpbGxlZC48YnIgLz5JZiB5b3Ugd2FudCB0byBhZGQgbW9yZSBwZW9wbGUgcGxlYXNlIGluY3JlYXNlIHRoZSBsZXZlbHMuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHByZXZpdW9zbHkgYWRkZWQgcGxheWVyIGZyb20gdGhlIHB5cmFtaWRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVyQWRkZWQgPSBmYWxzZTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMucHVzaChfLnJlbW92ZSh2bS5hZGRlZFBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbnVtYmVyIG9mIGFsbG93ZWQgcGxheWVycyBmb3IgdGhlIHB5cmFtaWRcbiAgICAgKiBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIGxldmVscyBjaG9zZW5cbiAgICAgKiBSZW1vdmVzIGV4dHJhIHBsYXllcnMgYW5kIG1ha2VzIHRoZW0gYXZhaWxhYmxlIGFnYWluXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBsZXZlbHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVBbGxvd2VkUGxheWVycyhsZXZlbHMpIHtcbiAgICAgIHZtLmFsbG93ZWRQbGF5ZXJzID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSBsZXZlbHM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0uYWxsb3dlZFBsYXllcnMgKz0gaTtcbiAgICAgIH1cbiAgICAgIGlmICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoID4gdm0uYWxsb3dlZFBsYXllcnMpIHtcbiAgICAgICAgdmFyIHJlbW92ZWRQbGF5ZXJzID0gdm0uYWRkZWRQbGF5ZXJzLnNwbGljZSh2bS5hbGxvd2VkUGxheWVycyk7XG4gICAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSB2bS5hdmFpbGFibGVQbGF5ZXJzLmNvbmNhdChyZW1vdmVkUGxheWVycyk7XG4gICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnUGxheWVycyB3ZXJlIHJlbW92ZWQgYmVjYXN1ZSB0aGVyZSBhcmUgbm90IGVub3VnaCBzcG90cyBvbiB0aGUgcHlyYW1pZC4nKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdhY3RoIGZvciBjaGFuZ2VzIHRvIHRoZSBweXJhbWlkIGxldmVscyBtb2RlbCBhbmQgdXBkYXRlIHRoZSBudW1iZXIgb2YgYWxsb3dlZCBwbGF5ZXJzXG4gICAgJHNjb3BlLiR3YXRjaCgndm0ubmV3UHlyYW1pZC5sZXZlbHMnLCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgaWYgKG5ld1ZhbCAhPT0gb2xkVmFsKSB7XG4gICAgICAgIHVwZGF0ZUFsbG93ZWRQbGF5ZXJzKG5ld1ZhbCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBVc2VkIHRvIGtlZXAgdHJhY2sgb2YgcG9zaXRpb24gb24gdGhlIHB5cmFtaWQgYmFzZWQgb24gd2hlbiB0aGUgcGxheWVyIHdhcyBhZGRlZFxuICAgIHZhciBwb3NpdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIHB5cmFtaWRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHB5cmFtaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQeXJhbWlkKHB5cmFtaWQpIHtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcG9zaXRpb24gKz0gMTtcbiAgICAgICAgdmFyIGFkZFBsYXllciA9IHtcbiAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgX2lkOiBwbGF5ZXIuX2lkLFxuICAgICAgICAgIGZpcnN0TmFtZTogcGxheWVyLmZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgIG5pY2tuYW1lOiBwbGF5ZXIubmlja25hbWVcbiAgICAgICAgfTtcbiAgICAgICAgdm0ubmV3UHlyYW1pZC5wbGF5ZXJzLnB1c2goYWRkUGxheWVyKTtcbiAgICAgIH0pO1xuICAgICAgcHlyYW1pZHNTZXJ2aWNlLmNyZWF0ZVB5cmFtaWQocHlyYW1pZCkudGhlbihmdW5jdGlvbiAobmV3UHlyYW1pZCkge1xuICAgICAgICAkc3RhdGUuZ28oJ3B5cmFtaWRzLnZpZXcnLCB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogbmV3UHlyYW1pZC5kYXRhLl9pZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdNeVB5cmFtaWRzQ3RybCcsIE15UHlyYW1pZHNDdHJsKTtcblxuICBmdW5jdGlvbiBNeVB5cmFtaWRzQ3RybCgkc3RhdGUsIHB5cmFtaWRzU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkcyA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZHNGb3JVc2VyKGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQpLnRoZW4oZnVuY3Rpb24gKHB5cmFtaWRzKSB7XG4gICAgICAgIHZtLnB5cmFtaWRzID0gcHlyYW1pZHMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQeXJhbWlkQ3RybCcsIFB5cmFtaWRDdHJsKTtcblxuICBmdW5jdGlvbiBQeXJhbWlkQ3RybCgkc3RhdGVQYXJhbXMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUHlyYW1pZHNDdHJsJywgUHlyYW1pZHNDdHJsKTtcblxuICBmdW5jdGlvbiBQeXJhbWlkc0N0cmwoKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5weXJhbWlkcyA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignU3RhdHNDdHJsJywgU3RhdHNDdHJsKTtcblxuICBmdW5jdGlvbiBTdGF0c0N0cmwoJHN0YXRlUGFyYW1zLCAkc3RhdGUsIHB5cmFtaWRzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBpZiAoJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9ICRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkO1xuICAgICAgICBweXJhbWlkc1NlcnZpY2UuZ2V0UHlyYW1pZCh2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChweXJhbWlkKSB7XG4gICAgICAgICAgaWYgKHB5cmFtaWQuZGF0YSkge1xuICAgICAgICAgICAgdm0ucHlyYW1pZCA9IHB5cmFtaWQuZGF0YTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdweXJhbWlkcy5teVB5cmFtaWRzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnaWRlbnRpdHlTZXJ2aWNlJywgaWRlbnRpdHlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBpZGVudGl0eVNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBjdXJyZW50VXNlcjtcbiAgICBpZiAoJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICBjdXJyZW50VXNlciA9ICR3aW5kb3cuYm9vdHN0cmFwcGVkVXNlck9iamVjdDtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgIGlzQXV0aG9yaXplZDogaXNBdXRob3JpemVkXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKHJvbGUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5yb2xlcy5pbmRleE9mKHJvbGUpID4gLTE7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ25vdGlmeVNlcnZpY2UnLCBub3RpZnlTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBub3RpZnlTZXJ2aWNlKCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgaW5mbzogaW5mbyxcbiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nLFxuICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgaW52ZXJzZTogaW52ZXJzZVxuICAgIH07XG5cbiAgICAkLm5vdGlmeURlZmF1bHRzKHtcbiAgICAgIG5ld2VzdF9vbl90b3A6IHRydWUsXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogMjAsXG4gICAgICAgIHk6IDg1XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdkYW5nZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZlcnNlKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICdpbnZlcnNlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gIC5zZXJ2aWNlKCd3ZWJzb2NrZXRTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICR3aW5kb3cpIHtcbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb25uZWN0aW9uO1xuICAgIHRoaXMuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYnNvY2tldEhvc3QoKSk7XG5cbiAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAodG9waWMsIGRhdGEpIHtcbiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgICAgY29ubmVjdGlvbi5zZW5kKGpzb24pO1xuICAgIH07XG4gIH0pLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICBmdW5jdGlvbiBIb21lQ3RybCgpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3RvZ2dsZVN1Ym1lbnUnLCB0b2dnbGVTdWJtZW51KTtcblxuICBmdW5jdGlvbiB0b2dnbGVTdWJtZW51KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgbGluazogbGlua0Z1bmMsXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwpIHtcbiAgICAgIGVsLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwubmV4dCgpLnNsaWRlVG9nZ2xlKDIwMCk7XG4gICAgICAgIGVsLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3YXZlc0VmZmVjdCcsIHdhdmVzRWZmZWN0KTtcblxuICBmdW5jdGlvbiB3YXZlc0VmZmVjdCgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdDJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50Lmhhc0NsYXNzKCdidG4taWNvbicpIHx8IGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1mbG9hdCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWNpcmNsZSddKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWxpZ2h0JykpIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQsIFsnd2F2ZXMtbGlnaHQnXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIFdhdmVzLmluaXQoKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdmZ0xpbmUnLCBmZ0xpbmUpO1xuXG4gIGZ1bmN0aW9uIGZnTGluZSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdDJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQuY2hpbGRyZW4oKS5maXJzdCgpO1xuICAgICAgdmFyIGlzRmxvYXRMYWJlbCA9IGVsZW1lbnQucGFyZW50KCkuaGFzQ2xhc3MoJ2ZnLWZsb2F0Jyk7XG4gICAgICBpbnB1dC5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dC5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc0Zsb2F0TGFiZWwgfHwgKGlzRmxvYXRMYWJlbCAmJiBpbnB1dC52YWwoKS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZmctdG9nZ2xlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
