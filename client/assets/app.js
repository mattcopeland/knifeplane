angular.module("app",["ui.router","ui.bootstrap","ngAnimate","angular-loading-bar","nouislider","localytics.directives","timer","LocalStorageModule","angular-sortable-view","angular.vertilize"]),function(){"use strict ";function e(e,t,n){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Fri, 01 Jan 2016 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.options({appendToBody:!0}),n.errorOnUnhandledRejections(!1)}e.$inject=["$httpProvider","$uibTooltipProvider","$qProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t){function n(e){t.set("sidebarLocked",e)}var i=this;i.$state=e,i.lockSidebar=t.get("sidebarLocked"),i.toggleSidebarLocked=n}e.$inject=["$state","localStorageService"],angular.module("app").controller("AppCtrl",e)}(),function(){"use strict";function e(e,o,r){var a={superAdmin:n,admin:t,user:i};r.html5Mode(!0),o.otherwise("/"),o.when("/competitions/","/competitions"),e.state("home",{url:"/",views:{content:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"common/views/home.html"}}}).state("competitions",{url:"/competitions",views:{content:{controller:"CompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competitions.html"}}}).state("competitions.myCompetitions",{url:"/my-competitions",views:{"content@":{controller:"MyCompetitionsCtrl",controllerAs:"vm",templateUrl:"competitions/views/my-competitions.html"}},resolve:{auth:a.user}}).state("competitions.view",{url:"/view/:competitionId",views:{"content@":{controller:"CompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition.html"}}}).state("competitions.stats",{url:"/stats/:competitionId",views:{"content@":{controller:"CompetitionStatsCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-stats.html"}}}).state("competitions.admin",{url:"/admin/:competitionId",views:{"content@":{controller:"CompetitionAdminCtrl",controllerAs:"vm",templateUrl:"competitions/views/competition-admin.html"}},resolve:{auth:a.user}}).state("competitions.create",{url:"/create",views:{"content@":{controller:"CreateCompetitionCtrl",controllerAs:"vm",templateUrl:"competitions/views/create-competition.html"}},resolve:{auth:a.user}}).state("user",{url:"/user",views:{content:{controller:"UserCtrl",controllerAs:"vm",templateUrl:"users/views/user.html"}},resolve:{auth:a.user}}).state("login",{url:"/login",views:{content:{controller:"LoginCtrl",controllerAs:"vm",templateUrl:"authentication/views/login.html"}}}).state("register",{url:"/register",views:{content:{controller:"RegisterCtrl",controllerAs:"vm",templateUrl:"authentication/views/register.html"}}}).state("verify",{url:"/verification",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("verification",{url:"/verification/:userId/:verificationToken",views:{content:{controller:"VerificationCtrl",controllerAs:"vm",templateUrl:"authentication/views/verification.html"}}}).state("password-reset-request",{url:"/password-reset",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}}).state("password-reset",{url:"/password-reset/:userId/:verificationToken",views:{content:{controller:"PasswordResetCtrl",controllerAs:"vm",templateUrl:"authentication/views/password-reset.html"}}})}function t(e){return e.authorizeCurrentUserForRoute("admin")}function n(e){return e.authorizeCurrentUserForRoute("super-admin")}function i(e){return e.authenticatedUserForRoute()}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e),t.$inject=["authService"],n.$inject=["authService"],i.$inject=["authService"]}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeError",function(e,n,i,o,r,a){"not authorized"===a&&(t.go("login"),t.previous=n,t.prevParams=i)}),e.$on("$stateChangeStart",function(){n.setSidebarStatus(!1)})}e.$inject=["$rootScope","$state","sidebarService"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(e,i){var r=n.defer();return t.post("/login",{username:e,password:i}).then(function(e){e.data.success?(o.currentUser=e.data.user,r.resolve(!0)):"unverified"===e.data.message?r.resolve("unverified"):r.resolve(!1)}),r.promise}function s(e){var i=n.defer();return t.post("/api/users",{userData:e}).then(function(e){e.data?i.resolve(!0):i.resolve(!1)},function(e){"Error: Email already in use"===e.data.reason&&r.error("Sorry, an account already exists with that email address.")}),i.promise}function l(){var i=n.defer();return t.post("/logout",{logout:!0}).then(function(){o.currentUser=void 0,i.resolve(),e.go("home")}),i.promise}function c(e){return!!o.isAuthorized(e)||n.reject("not authorized")}function u(){return!!o.isAuthenticated()||n.reject("not authorized")}var p={authenticateUser:a,createUser:s,logout:l,authorizeCurrentUserForRoute:c,authenticatedUserForRoute:u};return p}e.$inject=["$state","$http","$q","userService","identityService","notifyService"],angular.module("app").factory("authService",e)}(),function(){"use strict";function e(e){function t(){return e.get("/api/users").then(function(e){return _.forEach(e.data,function(e){e.displayName||(e.displayName=e.firstName+" "+e.lastName)}),e.data=_.sortBy(e.data,"displayName"),e})}function n(t,n){return e.get("/api/user/verification",{params:{userId:t,verificationToken:n}})}function i(t){return e.get("/api/user/password/link",{params:{username:t}})}function o(t,n,i){return e.put("/api/user/password/reset",{userId:t,verificationToken:n,password:i})}function r(t){return e.put("/api/user",{user:t})}var a={getAllUsers:t,verifyUser:n,generatePasswordResetLink:i,resetPassword:o,updateUser:r};return a}e.$inject=["$http"],angular.module("app").factory("userService",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i,o){t.authenticateUser(i,o).then(function(t){t?"unverified"===t?n.error("You must verify your email before you can login"):e.previous?(e.go(e.previous,e.prevParams),e.previous=null,e.prevParams=null):e.go("competitions.myCompetitions"):n.error("Username / password combinaiton incorrect")})}var r=this;r.login=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){r.isAuthenticated()?e.go("home"):t.userId&&t.verificationToken&&n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data&&(c.verified=!0)})}function s(t){n.generatePasswordResetLink(t).then(function(t){t.data?(i.success("Please check your email for a password reset link"),e.go("home")):i.error("Could not find that email address")})}function l(r){r.password!==r.confirmPassword?i.error("Passwords don't match!"):n.resetPassword(t.userId,t.verificationToken,r.password).then(function(t){t.data&&o.authenticateUser(t.data.username,r.password).then(function(t){e.go("home")})})}var c=this;c.username="",c.verified=!1,c.resetPasswordForm={},c.generatePasswordResetLink=s,c.resetPassword=l,a()}e.$inject=["$state","$stateParams","userService","notifyService","authService","identityService"],angular.module("app").controller("PasswordResetCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){i.password!==i.confirmPassword?n.error("Passwords don't match!"):(i.displayName||(i.displayName=i.firstName+" "+i.lastName),t.createUser(i).then(function(){e.go("verify")}))}var r=this;r.register=o,i()}e.$inject=["$state","authService","notifyService"],angular.module("app").controller("RegisterCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){t.userId&&t.verificationToken&&(o.verifying=!0,o.verified=null,n.verifyUser(t.userId,t.verificationToken).then(function(e){e.data?o.verified=!0:o.verified=!1}))}var o=this;o.verified=void 0,o.verifying=!1,i()}e.$inject=["$state","$stateParams","userService"],angular.module("app").controller("VerificationCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/challenges/components/active-challenges.html"};return e}function t(e,t){function n(){e.$watch("vm.competition",function(){o.competition&&i()})}function i(){o.challenges=[],t.getActiveChallengesByCompetition(o.competition._id).then(function(e){e.data.length>0&&(o.challenges=e.data,_.forEach(o.challenges,function(e){"versus"===e.type&&(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team),0!==e.timeLimit&&(e.expires=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1)}))})}var o=this;o.challenges=[],n()}t.$inject=["$scope","challengesService"],angular.module("app").directive("wpmActiveChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competitionId:"@",allowDelete:"=",challenges:"="},templateUrl:"/challenges/components/completed-challenges.html"};return e}function t(e,t,n){function i(){e.$watch("vm.challenges",function(){a.challenges&&a.challenges.length>0&&o()})}function o(){_.forEach(a.challenges,function(e){e.loser="challenger"===e.winner?"opponent":"challenger","versus"===e.type&&(e.challenger.displayName="Team "+e.challenger.team,e.opponent.displayName="Team "+e.opponent.team),e.whenCompleted=moment(e.completed).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})})}function r(e,t){n.deleteChallenge(a.competitionId,e).then(function(){a.challenges.splice(t,1)})}var a=this;a.challenges=[],a.deleteChallenge=r,i()}t.$inject=["$scope","$state","challengesService"],angular.module("app").directive("wpmCompletedChalleneges",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{player:"="},templateUrl:"/challenges/components/player-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.player.results",function(){r.player&&(n(r.player),i(r.player),o(r.player))})}function n(e){for(var t=[],n=0;n<r.maxLevels;n++)t.push(n*(n+1)/2+1);e.level=t.length;for(var i=0;i<t.length;i++)if(e.position<t[i+1]){e.level=t.indexOf(t[i])+1;break}}function i(e){var t,n=0,i=!0;_.forEach(e.results,function(o){i&&("challenger"===o.winner&&o.challenger._id===e._id||"opponent"===o.winner&&o.opponent._id===e._id?"losing"!==t?(n+=1,t="winning"):i=!1:("opponent"===o.winner&&o.challenger._id===e._id||"challenger"===o.winner&&o.opponent._id===e._id)&&("winning"!==t?(n+=1,t="losing"):i=!1)),r.streak={type:t,value:n}})}function o(e){r.wins.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"opponent"===t.winner})),r.wins.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"challenger"===t.winner})),r.wins.total=r.wins.asChallenger+r.wins.asOpponent,r.wins.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"challenger"===t.winner||t.opponent._id===e._id&&"opponent"===t.winner)})),r.loses.asOpponent=_.size(_.filter(e.results,function(t){return t.opponent._id===e._id&&"challenger"===t.winner})),r.loses.asChallenger=_.size(_.filter(e.results,function(t){return t.challenger._id===e._id&&"opponent"===t.winner})),r.loses.total=r.loses.asChallenger+r.loses.asOpponent,r.loses.byForfeit=_.size(_.filter(e.results,function(t){return t.forfeit&&(t.challenger._id===e._id&&"opponent"===t.winner||t.opponent._id===e._id&&"challenger"===t.winner)}))}var r=this;r.maxLevels=7,r.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},r.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmPlayerOverallResults",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{team:"=",challenges:"="},templateUrl:"/challenges/components/team-overall-results.html"};return e}function t(e){function t(){e.$watch("vm.challenges",function(){o.challenges&&o.challenges.length>0&&(n(o.team,o.challenges),i(o.team,o.challenges))})}function n(e,t){var n,i=0,r=!0;_.forEach(t,function(t){r&&("challenger"===t.winner&&t.challenger.team===e||"opponent"===t.winner&&t.opponent.team===e?"losing"!==n?(i+=1,n="winning"):r=!1:("opponent"===t.winner&&t.challenger.team===e||"challenger"===t.winner&&t.opponent.team===e)&&("winning"!==n?(i+=1,n="losing"):r=!1)),o.streak={type:n,value:i}})}function i(e,t){o.wins.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"opponent"===t.winner})),o.wins.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"challenger"===t.winner})),o.wins.total=o.wins.asChallenger+o.wins.asOpponent,o.wins.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"challenger"===t.winner||t.opponent.team===e&&"opponent"===t.winner)})),o.loses.asOpponent=_.size(_.filter(t,function(t){return t.opponent.team===e&&"challenger"===t.winner})),o.loses.asChallenger=_.size(_.filter(t,function(t){return t.challenger.team===e&&"opponent"===t.winner})),o.loses.total=o.loses.asChallenger+o.loses.asOpponent,o.loses.byForfeit=_.size(_.filter(t,function(t){return t.forfeit&&(t.challenger.team===e&&"opponent"===t.winner||t.opponent.team===e&&"challenger"===t.winner)}))}var o=this;o.wins={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.loses={total:0,asChallenger:0,asOpponent:0,byForfeit:0},o.streak={type:null,value:0},t()}t.$inject=["$scope"],angular.module("app").directive("wpmTeamOverallResults",e)}(),function(){"use strict";function e(e){function t(t){return e.post("/api/challenges/pyramid/create",{challenge:t})}function n(t){return e.post("/api/challenges/versus/create",{challenge:t})}function i(t){return e.post("/api/challenges/pyramid/complete",{challenge:t})}function o(t){return e.post("/api/challenges/versus/complete",{challenge:t})}function r(t){return e.get("/api/challenges/competition",{params:{competitionId:t}})}function a(t){return e.get("/api/challenges/active/competition",{params:{competitionId:t}})}function s(t,n){return e.get("/api/challenges/active/competition/player",{params:{competitionId:t,playerId:n}})}function l(t,n){return e.get("/api/challenges/completed/competition",{params:{competitionId:t,limit:n}})}function c(t,n){return e.delete("/api/challenges/active/competition/player/delete",{params:{competitionId:t,playerId:n}})}function u(t,n){return e.delete("/api/challenges/delete",{params:{competitionId:t,challengeId:n}})}function p(t,n){return e.get("/api/challenges/results/competition/player",{params:{competitionId:t,playerId:n}})}var m={createPyramidChallenge:t,createVersusChallenge:n,completePyramidChallenge:i,completeVersusChallenge:o,getChallengesByCompetition:r,getActiveChallengesByCompetition:a,getActiveChallengeByCompetitionByPlayer:s,getCompletedChallengesByCompetition:l,deleteActiveChallengeByCompetitionByPlayer:c,deleteChallenge:u,getPlayerResultsByCompetition:p};return m}e.$inject=["$http"],angular.module("app").factory("challengesService",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",templateUrl:"/common/components/footer.html"};return e}function t(e,t){function n(){t.logout()}var i=this;i.indentity=e,i.logout=n}t.$inject=["identityService","authService"],angular.module("app").directive("wpmFooter",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"headerCtrl",restrict:"A",templateUrl:"/common/components/header.html"};return e}function t(e,t,n,i,o){function r(){a(),e.$watch("headerCtrl.indentity.currentUser",function(){n.isAuthenticated()&&a()})}function a(){p.alerts=[],n.isAuthenticated()&&o.getActiveAlertsByPlayer(n.currentUser._id).then(function(e){p.alerts=e.data})}function s(e,t){o.clearAlert(e).then(function(){p.alerts.splice(t,1)})}function l(){o.clearAllAlertsByPlayer(n.currentUser._id).then(function(){p.alerts=[]})}function c(){t.setSidebarStatus(!p.sidebarStatus.left)}function u(){i.logout()}var p=this;p.indentity=n,p.logout=u,p.sidebarStatus=t.getSidebarStatus(),p.toggleSidebar=c,p.clearAlert=s,p.clearAllAlerts=l,p.alerts=[],r(),e.$on("ws:update_alerts",function(e,t){n.isAuthenticated()&&_.some(t,["userId",n.currentUser._id])&&a()})}t.$inject=["$scope","sidebarService","identityService","authService","alertsService"],angular.module("app").directive("wpmHeader",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"sidebarCtrl",restrict:"A",templateUrl:"/common/components/sidebar.html"};return e}function t(e,t,n){function i(){t.logout()}var o=this;o.indentity=e,o.logout=i,o.sidebarStatus=n.getSidebarStatus()}t.$inject=["identityService","authService","sidebarService"],angular.module("app").directive("wpmSidebar",e)}(),function(){"use strict";function e(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var i in e)n.push(e[i]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}angular.module("app").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/alerts/",{params:{userId:t}})}function n(t){return e.put("/api/alert/clear",{alertId:t})}function i(t){return e.put("/api/alerts/clear",{userId:t})}var o={getActiveAlertsByPlayer:t,clearAlert:n,clearAllAlertsByPlayer:i};return o}e.$inject=["$http"],angular.module("app").factory("alertsService",e)}(),function(){"use strict";function e(e){function t(){return!!this.currentUser}function n(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}var i;null!==e.bootstrappedUserObject&&(i=e.bootstrappedUserObject);var o={currentUser:i,isAuthenticated:t,isAuthorized:n};return o}e.$inject=["$window"],angular.module("app").factory("identityService",e)}(),function(){"use strict";function e(){function e(e,t,n){$.notify({message:e,url:t,target:n},{type:"info"})}function t(e,t,n){$.notify({message:e,url:t,target:n},{type:"success"})}function n(e,t,n){$.notify({message:e,url:t,target:n},{type:"warning"})}function i(e,t,n){$.notify({message:e,url:t,target:n},{type:"danger"})}function o(e,t,n){$.notify({message:e,url:t,target:n},{type:"inverse"})}var r={info:e,success:t,warning:n,error:i,inverse:o};return $.notifyDefaults({newest_on_top:!0,offset:{x:20,y:85},delay:5e3}),r}angular.module("app").factory("notifyService",e)}(),function(){"use strict";function e(){function e(e,t,n,i){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:n,mouseWheel:{enable:!0,axis:i,preventDefault:!0}})}var t={malihuScroll:e};return t}angular.module("app").factory("scrollbarService",e)}(),function(){"use strict";function e(){function e(){return n}function t(e){n.left=e}var n={left:!1,right:!1},i={getSidebarStatus:e,setSidebarStatus:t};return i}angular.module("app").factory("sidebarService",e)}(),function(){"use strict";function e(e,t,n){function i(){return"https:"===t.location.protocol?"wss://"+t.location.host:"ws://"+t.location.host}function o(){a=new WebSocket(i()),a.onmessage=function(t){l=0;var n=JSON.parse(t.data);e.$broadcast("ws:"+n.topic,n.data)},a.onclose=function(){l<s.length?(console.log("WebSocket closed. Reconnecting..."),n(o,1e3*s[l]),l+=1):console.log("Giving up on WebSocket")}}function r(e,t){var n=JSON.stringify({topic:e,data:t});a.send(n)}var a,s=[3,10,100,1e3],l=0,c={connect:o,send:r};return c}e.$inject=["$rootScope","$window","$timeout"],angular.module("app").factory("websocketService",e).run(["websocketService",function(e){e.connect()}])}(),function(){"use strict";function e(e){function t(){e.getCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("HomeCtrl",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/competition-compact.html"};return e}function t(){function e(){}e()}angular.module("app").directive("wpmCompetitionCompact",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/pending-players.html"};return e}function t(e){function t(){}function n(t){t.position=o.competition.players.length+1,e.approvePendingPlayer(o.competition._id,t)}function i(t){e.denyPendingPlayer(o.competition._id,t)}var o=this;o.pendingPlayers=[],o.approvePendingPlayer=n,o.denyPendingPlayer=i,t()}t.$inject=["competitionsService"],angular.module("app").directive("wpmPendingPlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/pyramid.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o,r,a){function s(){for(var t=U;t>0;--t)A.maxPlayers+=t;e.$watch("vm.competition",function(){A.competition&&(A.competitionId=A.competition._id,l(),c(),p(),m(),d())})}function l(){A.competition.players=i("orderBy")(A.competition.players,"position")}function c(){A.currentUserIsAdmin=!1,A.currentUserIsPending=!1,r.isAuthenticated()&&(A.currentUserIsAdmin=_.some(A.competition.admins,["_id",r.currentUser._id]),A.currentUserIsPending=_.some(A.competition.pendingPlayers,["_id",r.currentUser._id])),A.currentUserIsOnCompetition=!1,A.hasActiveChallenge=!1,_.forEach(A.competition.players,function(e){r.isAuthenticated()&&e._id===r.currentUser._id&&(A.currentUserIsOnCompetition=!0,e.class="current-user",A.currentUserPlayer=e,a.getActiveChallengeByCompetitionByPlayer(A.competitionId,e._id).then(function(t){if(t.data){A.hasActiveChallenge=!0,A.activeChallengeOpponent=t.data.challenger._id===e._id?t.data.opponent:t.data.challenger;var n=_.find(A.competition.players,{_id:A.activeChallengeOpponent._id});n.class=n.class?n.class+" current-opponent":"current-opponent"}else f()}))}),a.getActiveChallengesByCompetition(A.competitionId).then(function(e){_.forEach(e.data,function(e){var t=_.find(A.competition.players,{_id:e.challenger._id});"available"===t.class&&(t.class=""),t.class=t.class?t.class+" unavailable":"unavailable",t.available=!1,t.challenge={position:"challenger"};var n=_.find(A.competition.players,{_id:e.opponent._id});if("available"===n.class&&(n.class=""),n.class=n.class?n.class+" unavailable":"unavailable",n.available=!1,n.challenge={position:"opponent"},0!==e.timeLimit){var i=moment().diff(moment(e.created).add(e.timeLimit,"d"),"s")*-1;i>0?n.challenge.expires=i:i<=0&&v(null,!0,n)}})})}function u(){A.breakPoints=[];for(var e=0;e<U;e++)A.breakPoints.push(e*(e+1)/2+1)}function p(){var e=0;A.levels=[],u();for(var t=0;t<A.competition.players.length;t++)A.breakPoints.indexOf(t+1)>-1&&(e+=1,A.levels.push(e)),A.competition.players[t].level=e}function m(){A.numberOfBlocks=0;for(var e=_.last(A.levels);e>0;e--)A.numberOfBlocks+=e}function d(){A.numberOfRealPlayers=A.competition.players.length;for(var e=A.competition.players.length;e<A.numberOfBlocks;e++)A.competition.players.push({firstName:"Empty",lastName:"Spot",displayName:"Empty Spot",position:99,class:A.currentUserIsOnCompetition?"empty":"joinable empty"});p()}function f(){if(A.currentUserIsOnCompetition&&!A.hasActiveChallenge){var e=A.currentUserPlayer.level>1?A.currentUserPlayer.level-1:null;_.forEach(A.competition.players,function(t){t.level===e&&99!==t.position&&"unavailable"!==t.class&&t.available!==!1&&(A.availableChallenges=!0,t.available=!0,t.class="available")})}}function h(e){if(e.available){A.hasActiveChallenge=!0;var t={type:A.competition.type,competitionName:A.competition.name,competitionId:A.competitionId,complete:!1,forfeit:!1,timeLimit:A.competition.forfeitDays,challenger:{_id:A.currentUserPlayer._id,email:A.currentUserPlayer.email,firstName:A.currentUserPlayer.firstName,lastName:A.currentUserPlayer.lastName,displayName:A.currentUserPlayer.displayName,position:A.currentUserPlayer.position},opponent:{_id:e._id,email:e.email,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position}};a.createPyramidChallenge(t).then(function(){A.competitionMenuToggle=!1})}else o.error("Sorry, that is not a valid challenge.")}function v(e,t,i){var o=i||A.currentUserPlayer;a.getActiveChallengeByCompetitionByPlayer(A.competitionId,o._id).then(function(o){A.hasActiveChallenge=!1;var r=!1;t?(o.data.forfeit=!0,"opponent"===i.challenge.position?(o.data.winner="challenger",r=!0):o.data.winner="opponent"):e?o.data.challenger._id===A.currentUserPlayer._id?(o.data.winner="challenger",r=!0):o.data.winner="opponent":o.data.challenger._id===A.currentUserPlayer._id?o.data.winner="opponent":(o.data.winner="challenger",r=!0),r?n.swapPositions(A.competitionId,o.data.opponent,o.data.challenger).then(function(){a.completePyramidChallenge(o.data).then(function(){S&&w()})}):a.completePyramidChallenge(o.data).then(function(){S&&w()}),A.competitionMenuToggle=!1})}function g(e){v(null,!0,e)}function y(){if(r.isAuthenticated())if(A.numberOfRealPlayers<A.maxPlayers){var e={_id:r.currentUser._id,firstName:r.currentUser.firstName,lastName:r.currentUser.lastName,displayName:r.currentUser.displayName,email:r.currentUser.username,position:A.numberOfRealPlayers+1};A.competition.restrictJoins?swal({title:"Send Join Request?",text:"This is a closed competition so an admin must approve your request",type:"warning",showCancelButton:!0,confirmButtonText:"Send Request",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetitionRequest(A.competition,e).then(function(){A.currentUserIsPending=!0}),swal("Request Sent","You will receive an email once an admin processes the request.","success")}):swal({title:"Join Competition?",text:"You'll be added to the bottom",type:"warning",showCancelButton:!0,confirmButtonText:"Join",cancelButtonText:"Nevermind",closeOnConfirm:!1,closeOnCancel:!0},function(){n.addPlayerToCompetition(A.competitionId,e),swal("Welcome Aboard!","Now start fighting your way to the top","success")})}else o.warning("Sorry, this competition is full");else o.warning("Please login to join a competition"),t.previous="competitions.view",t.prevParams={competitionId:A.competitionId},t.go("login")}function C(){swal({title:"Leave Competition?",text:"You will lose your spot and forfeit any active challenges.",type:"error",showCancelButton:!0,confirmButtonText:"Yes, leave",confirmButtonClass:"btn-danger",cancelButtonText:"No, stay",closeOnConfirm:!1,closeOnCancel:!0},function(){w(),swal("OK, you'r out!","You've been removed from the competition.","success")})}function w(){r.isAuthenticated()&&A.currentUserIsOnCompetition&&(S=!0,A.hasActiveChallenge?v(null,!0,A.currentUserPlayer):(A.currentUserIsOnCompetition=!1,A.hasActiveChallenge=!1,n.getCompetition(A.competitionId).then(function(e){var t=e.data,i=A.currentUserPlayer.position;_.forEach(t.players,function(e){e.position>=i&&(e.position-=1)});for(var o=_.remove(t.players,function(e){return e._id===A.currentUserPlayer._id}),r=[],a=0;a<A.numberOfRealPlayers-1;++a){var s={_id:t.players[a]._id,firstName:t.players[a].firstName,lastName:t.players[a].lastName,displayName:t.players[a].displayName,position:t.players[a].position};r.push(s)}n.removedPlayerFromCompetition(A.competitionId,o[0],r).then(function(){S=!1})})))}function P(e){99!==e.position||A.currentUserIsOnCompetition?e.showChallengeModal=!e.showChallengeModal:y()}function b(){n.getCompetition(A.competitionId).then(function(e){A.competition=e.data})}var U=7,A=this;A.competitionId=null,A.breakPoints=[],A.levels=[],A.numberOfBlocks=0,A.currentUserIsOnCompetition=!1,A.currentUserIsPending=!1,A.currentUserIsAdmin=!1,A.hasActiveChallenge=!1,A.activeChallengeOpponent=null,A.availableChallenges=!1,A.createChallenge=h,A.completeChallenge=v,A.challengeExpired=g,A.currentUserPlayer={},A.competitionMenuToggle=!1,A.addCurrentUserToCompetition=y,A.confirmRemoveCurrentUserFromCompetition=C,A.playerClick=P,A.numberOfRealPlayers=0,A.maxPlayers=0,s();var S=!1;e.$on("ws:competition_updated",function(e,t){A.competitionId===t.competitionId&&(o.info(t.description),b())})}t.$inject=["$scope","$state","competitionsService","$filter","notifyService","identityService","challengesService"],angular.module("app").directive("wpmPyramid",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-admins.html"};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){d.competition&&(d.addedAdmins=_.cloneDeep(d.competition.admins),d.disableSubmit=!0,d.userIsPrimaryAdmin=_.find(d.competition.admins,{primary:!0})._id===o.currentUser._id,a())})}function a(){d.availableAdmins=[],p=[],i.getAllUsers().then(function(e){_.forEach(d.competition.admins,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){d.availableAdmins.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),m=_.cloneDeep(d.availableAdmins)})}function s(){d.competition.admins=d.addedAdmins,t.updateCompetition(d.competition).then(function(){d.disableSubmit=!0})}function l(){p=[],d.addedAdmins=_.cloneDeep(d.competition.admins),d.availableAdmins=_.cloneDeep(m)}function c(e){p.push(e),d.availableAdmins.push(_.remove(d.addedAdmins,{_id:e._id})[0]),d.disableSubmit=!1}function u(e){d.addedAdmins.push(_.remove(d.availableAdmins,{_id:e._id})[0]),d.disableSubmit=!1}var p=[],m=[],d=this;d.availableAdmins=[],d.addedAdmins=[],d.userIsPrimaryAdmin=!1,d.updateCompetition=s,d.cancelUpdate=l,d.removeAdmin=c,d.addAdmin=u,d.disableSubmit=!0,r()}t.$inject=["$scope","competitionsService","challengesService","userService","identityService"],angular.module("app").directive("wpmUpdateAdmins",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"A",scope:{competition:"="},templateUrl:"/competitions/components/update-players.html"};return e}function t(e,t,n,i,o,r){function a(){for(var t=g;t>0;--t)y+=t;e.$watch("vm.competition",function(){C.competition&&(C.addedPlayers=_.cloneDeep(C.competition.players),C.disableSubmit=!0,s())})}function s(){C.availablePlayers=[],h=[],o.getAllUsers().then(function(e){_.forEach(C.competition.players,function(t){_.remove(e.data,function(e){return t._id===e._id})}),_.forEach(e.data,function(e){C.availablePlayers.push({firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,email:e.username,_id:e._id})}),v=_.cloneDeep(C.availablePlayers)})}function l(){"versus"===C.competition.type&&C.addedPlayers.length%2>0?r.error("A Versus competition must have an even number of players"):C.addedPlayers.length>y?r.error("A competition can have a maximum of "+y+" players"):(_.forEach(h,function(e){i.deleteActiveChallengeByCompetitionByPlayer(C.competition._id,e._id)}),C.competition.players=C.addedPlayers,n.updateCompetition(C.competition).then(function(){C.disableSubmit=!0}))}function c(){h=[],C.addedPlayers=_.cloneDeep(C.competition.players),C.availablePlayers=_.cloneDeep(v)}function u(){"versus"===C.competition.type?m():"pyramid"===C.competition.type&&p(),C.disableSubmit=!1}function p(){var e=1;_.forEach(C.addedPlayers,function(t){t.position=e,++e})}function m(){_.forEach(C.addedPlayers,function(e){e.position=2});for(var e=0;e<C.addedPlayers.length/2;e++)C.addedPlayers[e].position=1}function d(e){h.push(e),C.availablePlayers.push(_.remove(C.addedPlayers,{_id:e._id})[0]),u()}function f(e){C.addedPlayers.push(_.remove(C.availablePlayers,{_id:e._id})[0]),u(),C.disableSubmit=!1}var h=[],v=[],g=7,y=null,C=this;C.availablePlayers=[],C.addedPlayers=[],C.updateCompetition=l,C.cancelUpdate=c,C.reorderPlayers=u,C.removePlayer=d,C.addPlayer=f,C.disableSubmit=!0,a()}t.$inject=["$scope","$filter","competitionsService","challengesService","userService","notifyService"],
angular.module("app").directive("wpmUpdatePlayers",e)}(),function(){"use strict";function e(){var e={restrict:"A",templateUrl:"/competitions/components/versus.html",replace:!0,scope:{competition:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,n,i,o){function r(){e.$watch("vm.competition",function(){m.competition&&(m.competitionId=m.competition._id,m.showControls=!1,m.showChallengeModal=!1,a(),s())})}function a(){m.competition.teams=[{players:_.filter(m.competition.players,["position",1])},{players:_.filter(m.competition.players,["position",2])}]}function s(){m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,n.isAuthenticated()&&(m.currentUserIsAdmin=_.some(m.competition.admins,["_id",n.currentUser._id]),m.currentUserIsPending=_.some(m.competition.pendingPlayers,["_id",n.currentUser._id])),m.currentUserIsOnCompetition=!1,m.hasActiveChallenge=!1,_.forEach(m.competition.players,function(e){n.isAuthenticated()&&e._id===n.currentUser._id&&(m.currentUserIsOnCompetition=!0,e.class="current-user",m.currentUserPlayer=e,m.competition.teams[e.position-1].class="current-user-team",m.competition.class="current-user-on-competition")}),i.getActiveChallengesByCompetition(m.competitionId).then(function(e){if(e.data.length>0&&(m.activeChallenge=e.data[0],m.hasActiveChallenge=!0,0!==m.activeChallenge.timeLimit)){var t=moment().diff(moment(m.activeChallenge.created).add(m.activeChallenge.timeLimit,"d"),"s")*-1;t>0?m.challengeExpireTime=t:t<=0&&u(null,!0)}})}function l(){m.hasActiveChallenge&&m.currentUserIsOnCompetition&&(m.showControls=!m.showControls)}function c(e){if(m.showChallengeModal=!1,m.hasActiveChallenge)o.error("Sorry, you are already in an active challenge.");else{m.hasActiveChallenge=!0;var t={type:m.competition.type,competitionName:m.competition.name,competitionId:m.competitionId,complete:!1,forfeit:!1,timeLimit:m.competition.forfeitDays,challenger:{team:m.currentUserPlayer.position,_id:m.currentUserPlayer._id},opponent:{team:e}};i.createVersusChallenge(t).then(function(){m.competitionMenuToggle=!1})}}function u(e,t){m.hasActiveChallenge=!1;var n=m.activeChallenge;t?(n.forfeit=!0,n.winner="challenger"):m.activeChallenge.challenger.team===e?n.winner="challenger":n.winner="opponent",i.completeVersusChallenge(n),m.competitionMenuToggle=!1}function p(){t.getCompetition(m.competitionId).then(function(e){m.competition=e.data})}var m=this;m.competitionId=null,m.currentUserIsAdmin=!1,m.currentUserIsPending=!1,m.currentUserIsOnCompetition=!1,m.activeChallenge=null,m.hasActiveChallenge=!1,m.currentUserPlayer=null,m.createChallenge=c,m.completeChallenge=u,m.challengeExpireTime=null,m.showControls=!1,m.showChallengeModal=!1,m.toggleControls=l,r(),e.$on("ws:competition_updated",function(e,t){m.competitionId===t.competitionId&&(o.info(t.description),p())})}t.$inject=["$scope","competitionsService","identityService","challengesService","notifyService"],angular.module("app").directive("wpmVersus",e)}(),function(){"use strict";function e(e){function t(t){return e.get("/api/competition",{params:{competitionId:t}})}function n(t){return e.get("/api/competitions/user",{params:{userId:t}})}function i(){return e.get("/api/competitions")}function o(t){return e.post("/api/competitions/create",{competition:t})}function r(t){return e.post("/api/competitions/update",{competition:t})}function a(t){return e.delete("/api/competitions/delete",{params:{competitionId:t}})}function s(t,n,i){return e.post("/api/competitions/swapPositions",{competitionId:t,challenger:n,opponent:i})}function l(t,n){return e.post("/api/competitions/addPlayer",{competitionId:t,player:n})}function c(t,n){return e.post("/api/competitions/addPlayerRequest",{competition:t,player:n})}function u(t,n,i){return e.post("/api/competitions/removePlayer",{competitionId:t,removedPlayer:n,players:i})}function p(t,n){return e.post("/api/competitions/approvePlayer",{competitionId:t,player:n})}function m(t,n){return e.post("/api/competitions/denyPlayer",{competitionId:t,player:n})}var d={getCompetition:t,getCompetitionsForUser:n,getCompetitions:i,createCompetition:o,updateCompetition:r,deleteCompetition:a,swapPositions:s,addPlayerToCompetition:l,addPlayerToCompetitionRequest:c,removedPlayerFromCompetition:u,approvePendingPlayer:p,denyPendingPlayer:m};return d}e.$inject=["$http"],angular.module("app").factory("competitionsService",e)}(),function(){"use strict";function e(e,t,n,i,o,r,a,s){function l(){n.competitionId?(d.competitionId=n.competitionId,c()):t.go("competitions.myCompetitions")}function c(){o.getCompetition(d.competitionId).then(function(e){e.data&&_.some(e.data.admins,["_id",r.currentUser._id])?(d.isAdmin=!0,e.data.players=i("orderBy")(e.data.players,"position"),d.competition=e.data):t.go("competitions.myCompetitions")}),s.getCompletedChallengesByCompetition(d.competitionId).then(function(e){d.challenges=e.data})}function u(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.restrictJoins=d.competition.restrictJoins,o.updateCompetition(t)})}function p(){o.getCompetition(d.competitionId).then(function(e){var t=e.data;t.private=d.competition.private,o.updateCompetition(t)})}function m(){swal({title:"Delete Competition?",text:"This can not be undone",type:"error",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Nevermind",closeOnConfirm:!0,closeOnCancel:!0},function(){o.deleteCompetition(d.competitionId).then(function(){t.go("competitions.myCompetitions")})})}var d=this;d.competitionId=null,d.updateCompetitionRestrictJoins=u,d.updateCompetitionPrivate=p,d.deleteCompetition=m,l(),e.$on("ws:competition_updated",function(e,t){d.competitionId===t.competitionId&&(a.info(t.description),c())}),e.$on("ws:competition_deleted",function(e,n){d.competitionId===n.competitionId&&(a.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","$filter","competitionsService","identityService","notifyService","challengesService"],angular.module("app").controller("CompetitionAdminCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o,r){function a(){t.competitionId&&(l.competitionId=t.competitionId,s())}function s(){i.getCompetition(l.competitionId).then(function(e){e.data?(l.competition=e.data,"pyramid"===l.competition.type?_.forEach(l.competition.players,function(e){r.getPlayerResultsByCompetition(l.competitionId,e._id).then(function(t){e.results=t.data})}):"versus"===l.competition.type&&(l.teams=[{number:1},{number:2}])):n.go("competitions.myCompetitions")}),r.getCompletedChallengesByCompetition(l.competitionId).then(function(e){l.challenges=e.data})}var l=this;l.competitionId=null,l.competition={},l.playersResults=[],l.challenges=[],a(),e.$on("ws:competition_updated",function(e,t){l.competitionId===t.competitionId&&(o.info(t.description),s())}),e.$on("ws:competition_deleted",function(e,t){l.competitionId===t.competitionId&&(o.info(t.description),n.go("competitions.myCompetitions"))})}e.$inject=["$scope","$stateParams","$state","competitionsService","notifyService","challengesService"],angular.module("app").controller("CompetitionStatsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){n.competitionId&&(a.competitionId=n.competitionId,i.getCompetition(a.competitionId).then(function(e){e.data?a.competition=e.data:t.go("competitions.myCompetitions")}))}var a=this;a.competitionId=null,a.competition=null,r(),e.$on("ws:competition_deleted",function(e,n){a.competitionId===n.competitionId&&(o.info(n.description),t.go("competitions.myCompetitions"))})}e.$inject=["$scope","$state","$stateParams","competitionsService","notifyService"],angular.module("app").controller("CompetitionCtrl",e)}(),function(){"use strict";function e(e){function t(){e.getCompetitions().then(function(e){n.competitions=e.data})}var n=this;n.competitions=[],t()}e.$inject=["competitionsService"],angular.module("app").controller("CompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){t.getAllUsers().then(function(e){h.availablePlayers=e.data});for(var e=d;e>0;--e)f+=e;for(e=0;e<d;e++)m.push(e*(e+1)/2+1)}function a(e){h.addedPlayers.push(_.remove(h.availablePlayers,{_id:e._id})[0]),l()}function s(e){h.availablePlayers.push(_.remove(h.addedPlayers,{_id:e._id})[0]),l()}function l(){"versus"===h.newCompetition.type?u():"pyramid"===h.newCompetition.type&&c()}function c(){var e=1;_.forEach(h.addedPlayers,function(t){t.position=e,++e})}function u(){_.forEach(h.addedPlayers,function(e){e.position=2});for(var e=0;e<h.addedPlayers.length/2;e++)h.addedPlayers[e].position=1}function p(t){if("versus"===t.type&&h.addedPlayers.length%2>0)o.error("A Versus competition must have an even number of players");else if(h.addedPlayers.length>f)o.error("A competition can have a maximum of "+f+" players");else{angular.forEach(h.addedPlayers,function(e){var n={_id:e._id,email:e.username,firstName:e.firstName,lastName:e.lastName,displayName:e.displayName,position:e.position};t.players.push(n)}),t.admins=[{_id:i.currentUser._id,email:i.currentUser.username,firstName:i.currentUser.firstName,lastName:i.currentUser.lastName,displayName:i.currentUser.displayName,primary:!0}];for(var r=0;r<m.length;r++)if(t.players.length<m[r]){t.levels=r;break}n.createCompetition(t).then(function(t){e.go("competitions.view",{competitionId:t.data._id})})}}var m=[],d=7,f=null,h=this;h.newCompetition={players:[],restrictJoins:!1,private:!1},h.availablePlayers=[],h.addedPlayers=[],h.createCompetition=p,h.addPlayer=a,h.removePlayer=s,h.reorderPlayers=l,h.newCompetition.forfeitDays=1,h.competitionTypes=["pyramid","versus"],r()}e.$inject=["$state","userService","competitionsService","identityService","notifyService"],angular.module("app").controller("CreateCompetitionCtrl",e)}(),function(){"use strict";function e(e,t,n,i,o){function r(){a()}function a(){s=[],l.activeChallenge=null,i.isAuthenticated()&&t.getCompetitionsForUser(i.currentUser._id).then(function(e){l.competitions=e.data,_.forEach(l.competitions,function(e){s.push(e._id),"pyramid"===e.type?n.getActiveChallengeByCompetitionByPlayer(e._id,i.currentUser._id).then(function(t){t.data&&(e.activeChallenge=t.data,0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))}):"versus"===e.type&&n.getActiveChallengesByCompetition(e._id).then(function(t){t.data.length>0&&(e.activeChallenge=t.data[0],0!==e.activeChallenge.timeLimit&&(e.activeChallenge.expires=moment().diff(moment(e.activeChallenge.created).add(e.activeChallenge.timeLimit,"d"),"s")*-1))})})})}var s=[],l=this;l.activeChallenge=null,r(),e.$on("ws:competition_updated",function(e,t){s.indexOf(t.competitionId)>=0&&(o.info(t.description),a())})}e.$inject=["$scope","competitionsService","challengesService","identityService","notifyService"],angular.module("app").controller("MyCompetitionsCtrl",e)}(),function(){"use strict";function e(e,t,n){function i(){}function o(i){if(i.password!==i.confirmPassword)n.error("Passwords don't match!");else{var o={_id:i._id};i.firstName===e.currentUser.firstName&&i.lastName===e.currentUser.lastName&&i.displayName===e.currentUser.displayName||(o.firstName=i.firstName,o.lastName=i.lastName,o.displayName=i.displayName),i.password&&i.password.lentgh>0&&(o.password=i.password),t.updateUser(o).then(function(){n.success("Your information has been updated"),r.userForm.$setPristine();var t=angular.copy(e.currentUser);angular.extend(t,o),e.currentUser=t,r.user.confirmPassword=r.user.password=""})}}var r=this;r.user={_id:e.currentUser._id,firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,displayName:e.currentUser.displayName},r.updateUser=o,r.userForm={},i()}e.$inject=["identityService","userService","notifyService"],angular.module("app").controller("UserCtrl",e)}(),function(){"use strict";function e(e){function t(t,n,i){var o=i.scrollaxis||"y",r=i.theme||"minimal-dark",a=i.mousewheelaxis||"y";$("html").hasClass("ismobile")||e.malihuScroll(n,r,o,a)}var n={restrict:"C",link:t};return n}e.$inject=["scrollbarService"],angular.module("app").directive("cOverflow",e)}(),function(){"use strict";function e(){function e(e,t){t.click(function(){t.next().slideToggle(200),t.parent().toggleClass("toggled")})}var t={restrict:"A",link:e};return t}angular.module("app").directive("toggleSubmenu",e)}(),function(){"use strict";function e(){function e(e,t){t.hasClass("btn-icon")||t.hasClass("btn-float")?Waves.attach(t,["waves-circle"]):t.hasClass("btn-light")?Waves.attach(t,["waves-light"]):Waves.attach(t),Waves.init()}var t={restrict:"C",link:e};return t}angular.module("app").directive("wavesEffect",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.children().first(),i=t.parent().hasClass("fg-float");n.focus(function(){t.addClass("fg-toggled")}),n.blur(function(){(!i||i&&0===n.val().length)&&t.removeClass("fg-toggled")})}var t={restrict:"C",link:e};return t}angular.module("app").directive("fgLine",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiYXBwLmNvbnRyb2xsZXIuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnJ1bi5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL2F1dGguc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3NlcnZpY2VzL3VzZXIuc2VydmljZS5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5jb250cm9sbGVyLmpzIiwiYXV0aGVudGljYXRpb24vdmlld3MvcmVnaXN0ZXIuY29udHJvbGxlci5qcyIsImF1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiY2hhbGxlbmdlcy9jb21wb25lbnRzL2FjdGl2ZS1jaGFsbGVuZ2VzLmRpcmVjdGl2ZS5qcyIsImNoYWxsZW5nZXMvY29tcG9uZW50cy9jb21wbGV0ZWQtY2hhbGxlbmdlcy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvcGxheWVyLW92ZXJhbGwtcmVzdWx0cy5kaXJlY3RpdmUuanMiLCJjaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuZGlyZWN0aXZlLmpzIiwiY2hhbGxlbmdlcy9zZXJ2aWNlcy9jaGFsbGVuZ2VzLnNlcnZpY2UuanMiLCJjb21tb24vY29tcG9uZW50cy9mb290ZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2ZpbHRlcnMvb3JkZXItb2JqZWN0LWJ5LmZpbHRlci5qcyIsImNvbW1vbi9zZXJ2aWNlcy9hbGVydHMuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9pbmRlbnRpdHkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9ub3RpZnkuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zY3JvbGxiYXIuc2VydmljZS5qcyIsImNvbW1vbi9zZXJ2aWNlcy9zaWRlYmFyLnNlcnZpY2UuanMiLCJjb21tb24vc2VydmljZXMvd2Vic29ja2V0LnNlcnZpY2UuanMiLCJjb21tb24vdmlld3MvaG9tZS5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvY29tcGV0aXRpb24tY29tcGFjdC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuZGlyZWN0aXZlLmpzIiwiY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcHlyYW1pZC5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvY29tcG9uZW50cy91cGRhdGUtYWRtaW5zLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmRpcmVjdGl2ZS5qcyIsImNvbXBldGl0aW9ucy9jb21wb25lbnRzL3ZlcnN1cy5kaXJlY3RpdmUuanMiLCJjb21wZXRpdGlvbnMvc2VydmljZXMvY29tcGV0aXRpb25zLnNlcnZpY2UuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24tYWRtaW4uY29udHJvbGxlci5qcyIsImNvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi1zdGF0cy5jb250cm9sbGVyLmpzIiwiY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvY3JlYXRlLWNvbXBldGl0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wZXRpdGlvbnMvdmlld3MvbXktY29tcGV0aXRpb25zLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy92aWV3cy91c2VyLmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tcG9uZW50cy91aS9zY3JvbGxiYXIuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvdG9nZ2xlLXN1Ym1lbnUuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvd2F2ZXMuZGlyZWN0aXZlLmpzIiwiY29tbW9uL2NvbXBvbmVudHMvdWkvZm9ybXMvZmctbGluZS5kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZ3VyYXRpb24iLCIkaHR0cFByb3ZpZGVyIiwiJHVpYlRvb2x0aXBQcm92aWRlciIsIiRxUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCJvcHRpb25zIiwiYXBwZW5kVG9Cb2R5IiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJjb25maWciLCJBcHBDdHJsIiwiJHN0YXRlIiwibG9jYWxTdG9yYWdlU2VydmljZSIsInRvZ2dsZVNpZGViYXJMb2NrZWQiLCJsb2NrZWQiLCJzZXQiLCJhcHBDdHJsIiwidGhpcyIsImxvY2tTaWRlYmFyIiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJzdXBlckFkbWluIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJhZG1pbiIsInJlcXVpcmVBZG1pbiIsInVzZXIiLCJyZXF1aXJlQXV0aCIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiY29udGVudCIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiY29udGVudEAiLCJyZXNvbHZlIiwiYXV0aCIsImF1dGhTZXJ2aWNlIiwiYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZSIsImF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCIkaW5qZWN0IiwiYXBwUnVuIiwiJHJvb3RTY29wZSIsInNpZGViYXJTZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsInByZXZpb3VzIiwicHJldlBhcmFtcyIsInNldFNpZGViYXJTdGF0dXMiLCJydW4iLCIkaHR0cCIsIiRxIiwidXNlclNlcnZpY2UiLCJpZGVudGl0eVNlcnZpY2UiLCJub3RpZnlTZXJ2aWNlIiwiYXV0aGVudGljYXRlVXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJkZmQiLCJkZWZlciIsInBvc3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwic3VjY2VzcyIsImN1cnJlbnRVc2VyIiwibWVzc2FnZSIsInByb21pc2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJyZWFzb24iLCJsb2dvdXQiLCJ1bmRlZmluZWQiLCJyb2xlIiwiaXNBdXRob3JpemVkIiwicmVqZWN0IiwiaXNBdXRoZW50aWNhdGVkIiwic2VydmljZSIsImZhY3RvcnkiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwiXyIsImZvckVhY2giLCJkaXNwbGF5TmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic29ydEJ5IiwidmVyaWZ5VXNlciIsInVzZXJJZCIsInZlcmlmaWNhdGlvblRva2VuIiwicGFyYW1zIiwiZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayIsInJlc2V0UGFzc3dvcmQiLCJwdXQiLCJ1cGRhdGVVc2VyIiwiTG9naW5DdHJsIiwiYWN0aXZhdGUiLCJsb2dpbiIsInZtIiwiUGFzc3dvcmRSZXNldEN0cmwiLCIkc3RhdGVQYXJhbXMiLCJ2ZXJpZmllZCIsInJlc2V0UGFzc3dvcmRGb3JtIiwiY29uZmlybVBhc3N3b3JkIiwiUmVnaXN0ZXJDdHJsIiwicmVnaXN0ZXIiLCJuZXdVc2VyIiwiVmVyaWZpY2F0aW9uQ3RybCIsInZlcmlmeWluZyIsIndwbUFjdGl2ZUNoYWxsZW5lZ2VzIiwiZGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImN0cmxGdW5jIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbXBldGl0aW9uIiwiJHNjb3BlIiwiY2hhbGxlbmdlc1NlcnZpY2UiLCIkd2F0Y2giLCJnZXRBY3RpdmVDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlcyIsImdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwiX2lkIiwibGVuZ3RoIiwiY2hhbGxlbmdlIiwidHlwZSIsImNoYWxsZW5nZXIiLCJ0ZWFtIiwib3Bwb25lbnQiLCJ0aW1lTGltaXQiLCJleHBpcmVzIiwibW9tZW50IiwiZGlmZiIsImNyZWF0ZWQiLCJhZGQiLCJ3cG1Db21wbGV0ZWRDaGFsbGVuZWdlcyIsImNvbXBldGl0aW9uSWQiLCJhbGxvd0RlbGV0ZSIsImRpc3BsYXlDb21wbGV0ZWRDaGFsbGVuZ2VzIiwibG9zZXIiLCJ3aW5uZXIiLCJ3aGVuQ29tcGxldGVkIiwiY29tcGxldGVkIiwiY2FsZW5kYXIiLCJzYW1lRGF5IiwibmV4dERheSIsIm5leHRXZWVrIiwibGFzdERheSIsImxhc3RXZWVrIiwic2FtZUVsc2UiLCJkZWxldGVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VJZCIsIiRpbmRleCIsInNwbGljZSIsIndwbVBsYXllck92ZXJhbGxSZXN1bHRzIiwicGxheWVyIiwiYXNzaWducGxheWVyc1RvTGV2ZWxzIiwiY2FsY3VsYXRlU3RyZWFrIiwiY2FsY3VhdGVXaW5BbmRMb3NlcyIsImJyZWFrUG9pbnRzIiwiaSIsIm1heExldmVscyIsInB1c2giLCJsZXZlbCIsImoiLCJwb3NpdGlvbiIsImluZGV4T2YiLCJzdHJlYWtUeXBlIiwic3RyZWFrIiwiY29udGludWVTdHJlYWsiLCJyZXN1bHRzIiwidmFsdWUiLCJ3aW5zIiwiYXNPcHBvbmVudCIsInNpemUiLCJmaWx0ZXIiLCJhc0NoYWxsZW5nZXIiLCJ0b3RhbCIsImJ5Rm9yZmVpdCIsImZvcmZlaXQiLCJsb3NlcyIsIndwbVRlYW1PdmVyYWxsUmVzdWx0cyIsImNyZWF0ZVB5cmFtaWRDaGFsbGVuZ2UiLCJjcmVhdGVWZXJzdXNDaGFsbGVuZ2UiLCJjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UiLCJjb21wbGV0ZVZlcnN1c0NoYWxsZW5nZSIsImdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uIiwiZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwicGxheWVySWQiLCJnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbiIsImxpbWl0IiwiZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyIiwiZGVsZXRlIiwiZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb24iLCJ3cG1Gb290ZXIiLCJpbmRlbnRpdHkiLCJ3cG1IZWFkZXIiLCJhbGVydHNTZXJ2aWNlIiwiZ2V0QWN0aXZlQWxlcnRzIiwiaGVhZGVyQ3RybCIsImFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyIiwiY2xlYXJBbGVydCIsImluZGV4IiwiY2xlYXJBbGxBbGVydHMiLCJjbGVhckFsbEFsZXJ0c0J5UGxheWVyIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJTdGF0dXMiLCJsZWZ0IiwiZ2V0U2lkZWJhclN0YXR1cyIsImUiLCJzb21lIiwid3BtU2lkZWJhciIsIm9yZGVyT2JqZWN0QnkiLCJpbnB1dCIsImF0dHJpYnV0ZSIsImlzT2JqZWN0IiwiYXJyYXkiLCJvYmplY3RLZXkiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsImFsZXJ0SWQiLCIkd2luZG93Iiwicm9sZXMiLCJib290c3RyYXBwZWRVc2VyT2JqZWN0IiwiaW5mbyIsInRhcmdldCIsIiQiLCJub3RpZnkiLCJ3YXJuaW5nIiwiaW52ZXJzZSIsIm5vdGlmeURlZmF1bHRzIiwibmV3ZXN0X29uX3RvcCIsIm9mZnNldCIsIngiLCJ5IiwiZGVsYXkiLCJzY3JvbGxiYXJTZXJ2aWNlIiwibWFsaWh1U2Nyb2xsIiwic2VsZWN0b3IiLCJ0aGVtZSIsInNjcm9sbGF4aXMiLCJtb3VzZXdoZWVsYXhpcyIsIm1DdXN0b21TY3JvbGxiYXIiLCJzY3JvbGxJbmVydGlhIiwiYXhpcyIsIm1vdXNlV2hlZWwiLCJlbmFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXR1cyIsInJpZ2h0Iiwid2Vic29ja2V0U2VydmljZSIsIiR0aW1lb3V0Iiwid2Vic29ja2V0SG9zdCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiY29ubmVjdCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJyZXRyeSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCIkYnJvYWRjYXN0IiwidG9waWMiLCJvbmNsb3NlIiwicmV0cnlTZWNvbmRzIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJqc29uIiwic3RyaW5naWZ5IiwiSG9tZUN0cmwiLCJjb21wZXRpdGlvbnNTZXJ2aWNlIiwiZ2V0Q29tcGV0aXRpb25zIiwiY29tcGV0aXRpb25zIiwid3BtQ29tcGV0aXRpb25Db21wYWN0Iiwid3BtUGVuZGluZ1BsYXllcnMiLCJhcHByb3ZlUGVuZGluZ1BsYXllciIsInBsYXllcnMiLCJkZW55UGVuZGluZ1BsYXllciIsInBlbmRpbmdQbGF5ZXJzIiwid3BtUHlyYW1pZCIsInJlcGxhY2UiLCIkZmlsdGVyIiwibWF4UGxheWVycyIsIm9yZGVyUGxheWVycyIsImdldFBsYXllcnNTdGF0dXMiLCJhc3NpZ25MZXZlbHNUb1BsYXllcnMiLCJjYWxjdWxhdGVDb21wZXRpdGlvbkJsb2NrcyIsImZpbGxJbkVtcHR5QmxvY2tzIiwiY3VycmVudFVzZXJJc0FkbWluIiwiY3VycmVudFVzZXJJc1BlbmRpbmciLCJhZG1pbnMiLCJjdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiIsImhhc0FjdGl2ZUNoYWxsZW5nZSIsImNsYXNzIiwiY3VycmVudFVzZXJQbGF5ZXIiLCJhY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCIsImN1cnJlbnRPcHBvbmVudCIsImZpbmQiLCJmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcyIsImF2YWlsYWJsZSIsInRpbWVUb0V4cGlyZSIsImNvbXBsZXRlQ2hhbGxlbmdlIiwiY3JlYXRlQnJlYWtQb2ludHMiLCJsZXZlbHMiLCJudW1iZXJPZkJsb2NrcyIsImxhc3QiLCJudW1iZXJPZlJlYWxQbGF5ZXJzIiwibGV2ZWxBYm92ZSIsImF2YWlsYWJsZUNoYWxsZW5nZXMiLCJjcmVhdGVDaGFsbGVuZ2UiLCJjb21wZXRpdGlvbk5hbWUiLCJuYW1lIiwiY29tcGxldGUiLCJmb3JmZWl0RGF5cyIsImVtYWlsIiwiY29tcGV0aXRpb25NZW51VG9nZ2xlIiwid2lubmVySXNDdXJyZW50VXNlciIsImZvcmZlaXRMb3NlciIsInN3YXBQb3NpdGlvbnMiLCJyZW1vdmluZ0N1cnJlbnRVc2VyIiwicmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24iLCJjaGFsbGVuZ2VFeHBpcmVkIiwiYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uIiwicmVzdHJpY3RKb2lucyIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0IiwiY2xvc2VPbkNvbmZpcm0iLCJjbG9zZU9uQ2FuY2VsIiwiYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3QiLCJhZGRQbGF5ZXJUb0NvbXBldGl0aW9uIiwiY29uZmlybVJlbW92ZUN1cnJlbnRVc2VyRnJvbUNvbXBldGl0aW9uIiwiY29uZmlybUJ1dHRvbkNsYXNzIiwiZ2V0Q29tcGV0aXRpb24iLCJwIiwib3BlblBvc2l0aW9uIiwicmVtb3ZlZFBsYXllciIsInJlbW92ZSIsInVwZGF0ZWRQbGF5ZXJzIiwidXBkYXRlZFBsYXllciIsInJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24iLCJwbGF5ZXJDbGljayIsInNob3dDaGFsbGVuZ2VNb2RhbCIsInJlZnJlc2hDb21wZXRpdGlvbiIsImNoYWxsZW5nZURldGFpbHMiLCJkZXNjcmlwdGlvbiIsIndwbVVwZGF0ZUFkbWlucyIsImFkZGVkQWRtaW5zIiwiY2xvbmVEZWVwIiwiZGlzYWJsZVN1Ym1pdCIsInVzZXJJc1ByaW1hcnlBZG1pbiIsInByaW1hcnkiLCJnZXRBdmFpbGFibGVBZG1pbnMiLCJhdmFpbGFibGVBZG1pbnMiLCJyZW1vdmVkQWRtaW5zIiwiY29tcGV0aXRpb25BZG1pbiIsImF2YWlsYWJsZUFkbWluIiwib3JpZ2luYWxBdmFpbGFibGVBZG1pbnMiLCJ1cGRhdGVDb21wZXRpdGlvbiIsImNhbmNlbFVwZGF0ZSIsInJlbW92ZUFkbWluIiwiYWRkQWRtaW4iLCJ3cG1VcGRhdGVQbGF5ZXJzIiwiYWRkZWRQbGF5ZXJzIiwiZ2V0QXZhaWxhYmxlUGxheWVycyIsImF2YWlsYWJsZVBsYXllcnMiLCJyZW1vdmVkUGxheWVycyIsImNvbXBldGl0aW9uUGxheWVyIiwiYXZhaWxhYmxlUGxheWVyIiwib3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzIiwicmVvcmRlclBsYXllcnMiLCJyZW9yZGVyVmVyc3VzUGxheWVycyIsInJlb3JkZXJQeXJhbWlkUGxheWVycyIsInJlbW92ZVBsYXllciIsImFkZFBsYXllciIsIndwbVZlcnN1cyIsInNob3dDb250cm9scyIsImdyb3VwUGxheWVycyIsImdldEN1cnJlbnRVc2VyU3RhdHVzIiwidGVhbXMiLCJhY3RpdmVDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VFeHBpcmVUaW1lIiwidG9nZ2xlQ29udHJvbHMiLCJ3aW5uaW5nVGVhbSIsImdldENvbXBldGl0aW9uc0ZvclVzZXIiLCJjcmVhdGVDb21wZXRpdGlvbiIsImRlbGV0ZUNvbXBldGl0aW9uIiwiQ29tcGV0aXRpb25BZG1pbkN0cmwiLCJpc0FkbWluIiwidXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zIiwidXBkYXRlZENvbXBldGl0aW9uIiwidXBkYXRlQ29tcGV0aXRpb25Qcml2YXRlIiwicHJpdmF0ZSIsImNvbXBldGl0aW9uRGV0YWlscyIsIkNvbXBldGl0aW9uU3RhdHNDdHJsIiwibnVtYmVyIiwicGxheWVyc1Jlc3VsdHMiLCJDb21wZXRpdGlvbkN0cmwiLCJDb21wZXRpdGlvbnNDdHJsIiwiQ3JlYXRlQ29tcGV0aXRpb25DdHJsIiwibmV3Q29tcGV0aXRpb24iLCJjb21wZXRpdGlvblR5cGVzIiwiTXlDb21wZXRpdGlvbnNDdHJsIiwibXlDb21wZXRpdGlvbnMiLCJVc2VyQ3RybCIsInVzZXJVcGRhdGVzIiwibGVudGdoIiwidXNlckZvcm0iLCIkc2V0UHJpc3RpbmUiLCJjdXJyZW50VXNlckNsb25lIiwiY29weSIsImV4dGVuZCIsImNPdmVyZmxvdyIsImxpbmtGdW5jIiwiZWxlbWVudCIsImF0dHJzIiwiaGFzQ2xhc3MiLCJsaW5rIiwidG9nZ2xlU3VibWVudSIsImVsIiwiY2xpY2siLCJuZXh0Iiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsIndhdmVzRWZmZWN0IiwiV2F2ZXMiLCJhdHRhY2giLCJpbml0IiwiZmdMaW5lIiwiY2hpbGRyZW4iLCJmaXJzdCIsImlzRmxvYXRMYWJlbCIsImZvY3VzIiwiYWRkQ2xhc3MiLCJibHVyIiwidmFsIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFlBQ0Esc0JBQ0EsYUFDQSx3QkFDQSxRQUNBLHFCQUNBLHdCQUNBLHNCQ1ZBLHdCQUlBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFGLEVBQUFHLFNBQUFDLFFBQUFDLE1BQ0FMLEVBQUFHLFNBQUFDLFFBQUFDLFFBR0FMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEscUJBQUEsZ0NBRUFMLEVBQUFHLFNBQUFDLFFBQUFDLElBQUEsaUJBQUEsV0FDQUwsRUFBQUcsU0FBQUMsUUFBQUMsSUFBQSxPQUFBLFdBRUFKLEVBQUFLLFNBQUFDLGNBQUEsSUFDQUwsRUFBQU0sNEJBQUEsa0VBZEFYLFFBQUFDLE9BQUEsT0FBQVcsT0FBQVYsTUNGQSx1QkFJQSxTQUFBVyxHQUFBQyxFQUFBQyxHQVFBLFFBQUFDLEdBQUFDLEdBQ0FGLEVBQUFHLElBQUEsZ0JBQUFELEdBUkEsR0FBQUUsR0FBQUMsSUFFQUQsR0FBQUwsT0FBQUEsRUFFQUssRUFBQUUsWUFBQU4sRUFBQVAsSUFBQSxpQkFDQVcsRUFBQUgsb0JBQUFBLDZDQVJBaEIsUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxVQUFBVCxNQ0ZBLHVCQUlBLFNBQUFVLEdBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsSUFDQUMsV0FBQUMsRUFDQUMsTUFBQUMsRUFDQUMsS0FBQUMsRUFHQVAsR0FBQVEsV0FBQSxHQUdBVCxFQUFBVSxVQUFBLEtBRUFWLEVBQUFXLEtBQUEsaUJBQUEsaUJBRUFaLEVBQ0FhLE1BQUEsUUFDQUMsSUFBQSxJQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxXQUNBbUIsYUFBQSxLQUNBQyxZQUFBLDZCQUdBTCxNQUFBLGdCQUNBQyxJQUFBLGdCQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxtQkFDQW1CLGFBQUEsS0FDQUMsWUFBQSwyQ0FHQUwsTUFBQSwrQkFDQUMsSUFBQSxtQkFDQUMsT0FDQUksWUFDQXJCLFdBQUEscUJBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsNENBR0FFLFNBQ0FDLEtBQUFsQixFQUFBSyxRQUVBSyxNQUFBLHFCQUNBQyxJQUFBLHVCQUNBQyxPQUNBSSxZQUNBckIsV0FBQSxrQkFDQW1CLGFBQUEsS0FDQUMsWUFBQSwwQ0FHQUwsTUFBQSxzQkFDQUMsSUFBQSx3QkFDQUMsT0FDQUksWUFDQXJCLFdBQUEsdUJBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsZ0RBR0FMLE1BQUEsc0JBQ0FDLElBQUEsd0JBQ0FDLE9BQ0FJLFlBQ0FyQixXQUFBLHVCQUNBbUIsYUFBQSxLQUNBQyxZQUFBLDhDQUdBRSxTQUNBQyxLQUFBbEIsRUFBQUssUUFFQUssTUFBQSx1QkFDQUMsSUFBQSxVQUNBQyxPQUNBSSxZQUNBckIsV0FBQSx3QkFDQW1CLGFBQUEsS0FDQUMsWUFBQSwrQ0FHQUUsU0FDQUMsS0FBQWxCLEVBQUFLLFFBRUFLLE1BQUEsUUFDQUMsSUFBQSxRQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxXQUNBbUIsYUFBQSxLQUNBQyxZQUFBLDBCQUdBRSxTQUNBQyxLQUFBbEIsRUFBQUssUUFFQUssTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLE9BQ0FDLFNBQ0FsQixXQUFBLFlBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsc0NBR0FMLE1BQUEsWUFDQUMsSUFBQSxZQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxlQUNBbUIsYUFBQSxLQUNBQyxZQUFBLHlDQUdBTCxNQUFBLFVBQ0FDLElBQUEsZ0JBQ0FDLE9BQ0FDLFNBQ0FsQixXQUFBLG1CQUNBbUIsYUFBQSxLQUNBQyxZQUFBLDZDQUdBTCxNQUFBLGdCQUNBQyxJQUFBLDJDQUNBQyxPQUNBQyxTQUNBbEIsV0FBQSxtQkFDQW1CLGFBQUEsS0FDQUMsWUFBQSw2Q0FHQUwsTUFBQSwwQkFDQUMsSUFBQSxrQkFDQUMsT0FDQUMsU0FDQWxCLFdBQUEsb0JBQ0FtQixhQUFBLEtBQ0FDLFlBQUEsK0NBR0FMLE1BQUEsa0JBQ0FDLElBQUEsNkNBQ0FDLE9BQ0FDLFNBQ0FsQixXQUFBLG9CQUNBbUIsYUFBQSxLQUNBQyxZQUFBLCtDQVFBLFFBQUFYLEdBQUFlLEdBQ0EsTUFBQUEsR0FBQUMsNkJBQUEsU0FLQSxRQUFBbEIsR0FBQWlCLEdBQ0EsTUFBQUEsR0FBQUMsNkJBQUEsZUFLQSxRQUFBZCxHQUFBYSxHQUNBLE1BQUFBLEdBQUFFLGtHQTdLQWhELFFBQUFDLE9BQUEsT0FBQVcsT0FBQVcsR0E4SkFRLEVBQUFrQixTQUFBLGVBTUFwQixFQUFBb0IsU0FBQSxlQU1BaEIsRUFBQWdCLFNBQUEsa0JDNUtBLHVCQUlBLFNBQUFDLEdBQUFDLEVBQUFyQyxFQUFBc0MsR0FDQUQsRUFBQUUsSUFBQSxvQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLG1CQUFBQSxJQUNBN0MsRUFBQThDLEdBQUEsU0FDQTlDLEVBQUErQyxTQUFBTixFQUNBekMsRUFBQWdELFdBQUFOLEtBSUFMLEVBQUFFLElBQUEsb0JBQUEsV0FDQUQsRUFBQVcsa0JBQUEsd0RBWkEvRCxRQUFBQyxPQUFBLE9BQUErRCxJQUFBZCxNQ0ZBLHVCQUlBLFNBQUFKLEdBQUFoQyxFQUFBbUQsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FVQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFQLEVBQUFRLE9BY0EsT0FiQVQsR0FBQVUsS0FBQSxVQUNBSixTQUFBQSxFQUNBQyxTQUFBQSxJQUNBSSxLQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUFDLFNBQ0FYLEVBQUFZLFlBQUFILEVBQUFDLEtBQUE5QyxLQUNBeUMsRUFBQTdCLFNBQUEsSUFDQSxlQUFBaUMsRUFBQUMsS0FBQUcsUUFDQVIsRUFBQTdCLFFBQUEsY0FFQTZCLEVBQUE3QixTQUFBLEtBR0E2QixFQUFBUyxRQUdBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQVgsR0FBQVAsRUFBQVEsT0FjQSxPQWJBVCxHQUFBVSxLQUFBLGNBQ0FTLFNBQUFBLElBQ0FSLEtBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FDQUwsRUFBQTdCLFNBQUEsR0FFQTZCLEVBQUE3QixTQUFBLElBRUEsU0FBQWlDLEdBQ0EsZ0NBQUFBLEVBQUFDLEtBQUFPLFFBQ0FoQixFQUFBVixNQUFBLCtEQUdBYyxFQUFBUyxRQUdBLFFBQUFJLEtBQ0EsR0FBQWIsR0FBQVAsRUFBQVEsT0FRQSxPQVBBVCxHQUFBVSxLQUFBLFdBQ0FXLFFBQUEsSUFDQVYsS0FBQSxXQUNBUixFQUFBWSxZQUFBTyxPQUNBZCxFQUFBN0IsVUFDQTlCLEVBQUE4QyxHQUFBLFVBRUFhLEVBQUFTLFFBR0EsUUFBQW5DLEdBQUF5QyxHQUNBLFFBQUFwQixFQUFBcUIsYUFBQUQsSUFHQXRCLEVBQUF3QixPQUFBLGtCQUlBLFFBQUExQyxLQUNBLFFBQUFvQixFQUFBdUIsbUJBR0F6QixFQUFBd0IsT0FBQSxrQkFyRUEsR0FBQUUsSUFDQXRCLGlCQUFBQSxFQUNBYSxXQUFBQSxFQUNBRyxPQUFBQSxFQUNBdkMsNkJBQUFBLEVBQ0FDLDBCQUFBQSxFQUVBLE9BQUE0QyxxRkFWQTVGLFFBQUFDLE9BQUEsT0FBQTRGLFFBQUEsY0FBQS9DLE1DRkEsdUJBSUEsU0FBQXFCLEdBQUFGLEdBVUEsUUFBQTZCLEtBQ0EsTUFBQTdCLEdBQUF6RCxJQUFBLGNBQUFvRSxLQUFBLFNBQUFtQixHQVFBLE1BTkFDLEdBQUFDLFFBQUFGLEVBQUFqQixLQUFBLFNBQUE5QyxHQUNBQSxFQUFBa0UsY0FDQWxFLEVBQUFrRSxZQUFBbEUsRUFBQW1FLFVBQUEsSUFBQW5FLEVBQUFvRSxZQUdBTCxFQUFBakIsS0FBQWtCLEVBQUFLLE9BQUFOLEVBQUFqQixLQUFBLGVBQ0FpQixJQUlBLFFBQUFPLEdBQUFDLEVBQUFDLEdBQ0EsTUFBQXZDLEdBQUF6RCxJQUFBLDBCQUNBaUcsUUFDQUYsT0FBQUEsRUFDQUMsa0JBQUFBLEtBS0EsUUFBQUUsR0FBQW5DLEdBQ0EsTUFBQU4sR0FBQXpELElBQUEsMkJBQ0FpRyxRQUNBbEMsU0FBQUEsS0FLQSxRQUFBb0MsR0FBQUosRUFBQUMsRUFBQWhDLEdBQ0EsTUFBQVAsR0FBQTJDLElBQUEsNEJBQ0FMLE9BQUFBLEVBQ0FDLGtCQUFBQSxFQUNBaEMsU0FBQUEsSUFJQSxRQUFBcUMsR0FBQTdFLEdBQ0EsTUFBQWlDLEdBQUEyQyxJQUFBLGFBQ0E1RSxLQUFBQSxJQWpEQSxHQUFBNEQsSUFDQUUsWUFBQUEsRUFDQVEsV0FBQUEsRUFDQUksMEJBQUFBLEVBQ0FDLGNBQUFBLEVBQ0FFLFdBQUFBLEVBRUEsT0FBQWpCLHVCQVZBNUYsUUFBQUMsT0FBQSxPQUFBNEYsUUFBQSxjQUFBMUIsTUNGQSx1QkFJQSxTQUFBMkMsR0FBQWhHLEVBQUFnQyxFQUFBdUIsR0FNQSxRQUFBMEMsTUFHQSxRQUFBQyxHQUFBekMsRUFBQUMsR0FDQTFCLEVBQUF3QixpQkFBQUMsRUFBQUMsR0FBQUksS0FBQSxTQUFBQyxHQUNBQSxFQUVBLGVBQUFBLEVBQ0FSLEVBQUFWLE1BQUEsbURBRUE3QyxFQUFBK0MsVUFDQS9DLEVBQUE4QyxHQUFBOUMsRUFBQStDLFNBQUEvQyxFQUFBZ0QsWUFDQWhELEVBQUErQyxTQUFBLEtBQ0EvQyxFQUFBZ0QsV0FBQSxNQUVBaEQsRUFBQThDLEdBQUEsK0JBVEFTLEVBQUFWLE1BQUEsK0NBWEEsR0FBQXNELEdBQUE3RixJQUNBNkYsR0FBQUQsTUFBQUEsRUFFQUQsdURBTkEvRyxRQUFBQyxPQUFBLE9BQUFxQixXQUFBLFlBQUF3RixNQ0ZBLHVCQUlBLFNBQUFJLEdBQUFwRyxFQUFBcUcsRUFBQWhELEVBQUFFLEVBQUF2QixFQUFBc0IsR0FVQSxRQUFBMkMsS0FDQTNDLEVBQUF1QixrQkFDQTdFLEVBQUE4QyxHQUFBLFFBQ0F1RCxFQUFBWixRQUFBWSxFQUFBWCxtQkFDQXJDLEVBQUFtQyxXQUFBYSxFQUFBWixPQUFBWSxFQUFBWCxtQkFBQTVCLEtBQUEsU0FBQUMsR0FDQUEsRUFBQUMsT0FDQW1DLEVBQUFHLFVBQUEsS0FNQSxRQUFBVixHQUFBbkMsR0FDQUosRUFBQXVDLDBCQUFBbkMsR0FBQUssS0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxNQUdBVCxFQUFBVSxRQUFBLHFEQUNBakUsRUFBQThDLEdBQUEsU0FIQVMsRUFBQVYsTUFBQSx1Q0FRQSxRQUFBZ0QsR0FBQVUsR0FDQUEsRUFBQTdDLFdBQUE2QyxFQUFBQyxnQkFDQWpELEVBQUFWLE1BQUEsMEJBRUFRLEVBQUF3QyxjQUFBUSxFQUFBWixPQUFBWSxFQUFBWCxrQkFBQWEsRUFBQTdDLFVBQUFJLEtBQUEsU0FBQUMsR0FDQUEsRUFBQUMsTUFDQWhDLEVBQUF3QixpQkFBQU8sRUFBQUMsS0FBQVAsU0FBQThDLEVBQUE3QyxVQUFBSSxLQUFBLFNBQUFDLEdBQ0EvRCxFQUFBOEMsR0FBQSxZQXZDQSxHQUFBcUQsR0FBQTdGLElBQ0E2RixHQUFBMUMsU0FBQSxHQUNBMEMsRUFBQUcsVUFBQSxFQUNBSCxFQUFBSSxxQkFDQUosRUFBQVAsMEJBQUFBLEVBQ0FPLEVBQUFOLGNBQUFBLEVBRUFJLHNHQVZBL0csUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxvQkFBQTRGLE1DRkEsdUJBSUEsU0FBQUssR0FBQXpHLEVBQUFnQyxFQUFBdUIsR0FNQSxRQUFBMEMsTUFFQSxRQUFBUyxHQUFBQyxHQUNBQSxFQUFBakQsV0FBQWlELEVBQUFILGdCQUNBakQsRUFBQVYsTUFBQSwyQkFFQThELEVBQUF2QixjQUNBdUIsRUFBQXZCLFlBQUF1QixFQUFBdEIsVUFBQSxJQUFBc0IsRUFBQXJCLFVBRUF0RCxFQUFBcUMsV0FBQXNDLEdBQUE3QyxLQUFBLFdBQ0E5RCxFQUFBOEMsR0FBQSxhQWZBLEdBQUFxRCxHQUFBN0YsSUFDQTZGLEdBQUFPLFNBQUFBLEVBRUFULHVEQU5BL0csUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxlQUFBaUcsTUNGQSx1QkFJQSxTQUFBRyxHQUFBNUcsRUFBQXFHLEVBQUFoRCxHQU9BLFFBQUE0QyxLQUNBSSxFQUFBWixRQUFBWSxFQUFBWCxvQkFDQVMsRUFBQVUsV0FBQSxFQUNBVixFQUFBRyxTQUFBLEtBQ0FqRCxFQUFBbUMsV0FBQWEsRUFBQVosT0FBQVksRUFBQVgsbUJBQUE1QixLQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQ0FtQyxFQUFBRyxVQUFBLEVBRUFILEVBQUFHLFVBQUEsS0FkQSxHQUFBSCxHQUFBN0YsSUFDQTZGLEdBQUFHLFNBQUE3QixPQUNBMEIsRUFBQVUsV0FBQSxFQUVBWixzREFQQS9HLFFBQUFDLE9BQUEsT0FBQXFCLFdBQUEsbUJBQUFvRyxNQ0ZBLFdBQ0EsWUFNQSxTQUFBRSxLQUNBLEdBQUFDLElBQ0FDLGtCQUFBLEVBQ0F4RyxXQUFBeUcsRUFDQXRGLGFBQUEsS0FDQXVGLFNBQUEsSUFDQUMsT0FDQUMsWUFBQSxLQUVBeEYsWUFBQSxnREFFQSxPQUFBbUYsR0FJQSxRQUFBRSxHQUFBSSxFQUFBQyxHQU1BLFFBQUFyQixLQUNBb0IsRUFBQUUsT0FBQSxpQkFBQSxXQUNBcEIsRUFBQWlCLGFBQ0FJLE1BS0EsUUFBQUEsS0FDQXJCLEVBQUFzQixjQUNBSCxFQUFBSSxpQ0FBQXZCLEVBQUFpQixZQUFBTyxLQUFBN0QsS0FBQSxTQUFBMkQsR0FDQUEsRUFBQXpELEtBQUE0RCxPQUFBLElBQ0F6QixFQUFBc0IsV0FBQUEsRUFBQXpELEtBQ0FrQixFQUFBQyxRQUFBZ0IsRUFBQXNCLFdBQUEsU0FBQUksR0FDQSxXQUFBQSxFQUFBQyxPQUNBRCxFQUFBRSxXQUFBM0MsWUFBQSxRQUFBeUMsRUFBQUUsV0FBQUMsS0FDQUgsRUFBQUksU0FBQTdDLFlBQUEsUUFBQXlDLEVBQUFJLFNBQUFELE1BRUEsSUFBQUgsRUFBQUssWUFDQUwsRUFBQU0sUUFBQUMsU0FBQUMsS0FBQUQsT0FBQVAsRUFBQVMsU0FBQUMsSUFBQVYsRUFBQUssVUFBQSxLQUFBLE1BQUEsUUF4QkEsR0FBQS9CLEdBQUE3RixJQUNBNkYsR0FBQXNCLGNBRUF4Qiw2Q0F2QkEvRyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLHVCQUFBRCxNQ0xBLFdBQ0EsWUFNQSxTQUFBMEIsS0FDQSxHQUFBekIsSUFDQUMsa0JBQUEsRUFDQXhHLFdBQUF5RyxFQUNBdEYsYUFBQSxLQUNBdUYsU0FBQSxJQUNBQyxPQUNBc0IsY0FBQSxJQUNBQyxZQUFBLElBQ0FqQixXQUFBLEtBRUE3RixZQUFBLG1EQUVBLE9BQUFtRixHQUlBLFFBQUFFLEdBQUFJLEVBQUFySCxFQUFBc0gsR0FPQSxRQUFBckIsS0FDQW9CLEVBQUFFLE9BQUEsZ0JBQUEsV0FDQXBCLEVBQUFzQixZQUFBdEIsRUFBQXNCLFdBQUFHLE9BQUEsR0FDQWUsTUFLQSxRQUFBQSxLQUNBekQsRUFBQUMsUUFBQWdCLEVBQUFzQixXQUFBLFNBQUFJLEdBQ0FBLEVBQUFlLE1BQUEsZUFBQWYsRUFBQWdCLE9BQUEsV0FBQSxhQUNBLFdBQUFoQixFQUFBQyxPQUNBRCxFQUFBRSxXQUFBM0MsWUFBQSxRQUFBeUMsRUFBQUUsV0FBQUMsS0FDQUgsRUFBQUksU0FBQTdDLFlBQUEsUUFBQXlDLEVBQUFJLFNBQUFELE1BRUFILEVBQUFpQixjQUFBVixPQUFBUCxFQUFBa0IsV0FBQUMsU0FBQSxNQUNBQyxRQUFBLFVBQ0FDLFFBQUEsYUFDQUMsU0FBQSxPQUNBQyxRQUFBLGNBQ0FDLFNBQUEsY0FDQUMsU0FBQSxpQkFLQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBbkMsRUFBQWlDLGdCQUFBcEQsRUFBQXNDLGNBQUFlLEdBQUExRixLQUFBLFdBQ0FxQyxFQUFBc0IsV0FBQWlDLE9BQUFELEVBQUEsS0FsQ0EsR0FBQXRELEdBQUE3RixJQUNBNkYsR0FBQXNCLGNBQ0F0QixFQUFBb0QsZ0JBQUFBLEVBRUF0RCxzREExQkEvRyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLDBCQUFBeUIsTUNMQSxXQUNBLFlBTUEsU0FBQW1CLEtBQ0EsR0FBQTVDLElBQ0FDLGtCQUFBLEVBQ0F4RyxXQUFBeUcsRUFDQXRGLGFBQUEsS0FDQXVGLFNBQUEsSUFDQUMsT0FDQXlDLE9BQUEsS0FFQWhJLFlBQUEscURBRUEsT0FBQW1GLEdBSUEsUUFBQUUsR0FBQUksR0FzQkEsUUFBQXBCLEtBQ0FvQixFQUFBRSxPQUFBLG9CQUFBLFdBQ0FwQixFQUFBeUQsU0FDQUMsRUFBQTFELEVBQUF5RCxRQUNBRSxFQUFBM0QsRUFBQXlELFFBQ0FHLEVBQUE1RCxFQUFBeUQsV0FLQSxRQUFBQyxHQUFBRCxHQUdBLElBQUEsR0FEQUksTUFDQUMsRUFBQSxFQUFBQSxFQUFBOUQsRUFBQStELFVBQUFELElBQ0FELEVBQUFHLEtBQUFGLEdBQUFBLEVBQUEsR0FBQSxFQUFBLEVBSUFMLEdBQUFRLE1BQUFKLEVBQUFwQyxNQUVBLEtBQUEsR0FBQXlDLEdBQUEsRUFBQUEsRUFBQUwsRUFBQXBDLE9BQUF5QyxJQUNBLEdBQUFULEVBQUFVLFNBQUFOLEVBQUFLLEVBQUEsR0FBQSxDQUNBVCxFQUFBUSxNQUFBSixFQUFBTyxRQUFBUCxFQUFBSyxJQUFBLENBQ0EsUUFLQSxRQUFBUCxHQUFBRixHQUVBLEdBRUFZLEdBRkFDLEVBQUEsRUFDQUMsR0FBQSxDQUVBeEYsR0FBQUMsUUFBQXlFLEVBQUFlLFFBQUEsU0FBQTlDLEdBQ0E2QyxJQUVBLGVBQUE3QyxFQUFBZ0IsUUFBQWhCLEVBQUFFLFdBQUFKLE1BQUFpQyxFQUFBakMsS0FDQSxhQUFBRSxFQUFBZ0IsUUFBQWhCLEVBQUFJLFNBQUFOLE1BQUFpQyxFQUFBakMsSUFFQSxXQUFBNkMsR0FDQUMsR0FBQSxFQUNBRCxFQUFBLFdBRUFFLEdBQUEsR0FHQSxhQUFBN0MsRUFBQWdCLFFBQUFoQixFQUFBRSxXQUFBSixNQUFBaUMsRUFBQWpDLEtBQ0EsZUFBQUUsRUFBQWdCLFFBQUFoQixFQUFBSSxTQUFBTixNQUFBaUMsRUFBQWpDLE9BRUEsWUFBQTZDLEdBQ0FDLEdBQUEsRUFDQUQsRUFBQSxVQUVBRSxHQUFBLElBSUF2RSxFQUFBc0UsUUFDQTNDLEtBQUEwQyxFQUNBSSxNQUFBSCxLQUtBLFFBQUFWLEdBQUFILEdBRUF6RCxFQUFBMEUsS0FBQUMsV0FBQTVGLEVBQUE2RixLQUFBN0YsRUFBQThGLE9BQUFwQixFQUFBZSxRQUFBLFNBQUE5QyxHQUNBLE1BQ0FBLEdBQUFJLFNBQUFOLE1BQUFpQyxFQUFBakMsS0FBQSxhQUFBRSxFQUFBZ0IsVUFJQTFDLEVBQUEwRSxLQUFBSSxhQUFBL0YsRUFBQTZGLEtBQUE3RixFQUFBOEYsT0FBQXBCLEVBQUFlLFFBQUEsU0FBQTlDLEdBQ0EsTUFDQUEsR0FBQUUsV0FBQUosTUFBQWlDLEVBQUFqQyxLQUFBLGVBQUFFLEVBQUFnQixVQUlBMUMsRUFBQTBFLEtBQUFLLE1BQUEvRSxFQUFBMEUsS0FBQUksYUFBQTlFLEVBQUEwRSxLQUFBQyxXQUVBM0UsRUFBQTBFLEtBQUFNLFVBQUFqRyxFQUFBNkYsS0FBQTdGLEVBQUE4RixPQUFBcEIsRUFBQWUsUUFBQSxTQUFBOUMsR0FDQSxNQUNBQSxHQUFBdUQsVUFBQXZELEVBQUFFLFdBQUFKLE1BQUFpQyxFQUFBakMsS0FBQSxlQUFBRSxFQUFBZ0IsUUFDQWhCLEVBQUFJLFNBQUFOLE1BQUFpQyxFQUFBakMsS0FBQSxhQUFBRSxFQUFBZ0IsV0FJQTFDLEVBQUFrRixNQUFBUCxXQUFBNUYsRUFBQTZGLEtBQUE3RixFQUFBOEYsT0FBQXBCLEVBQUFlLFFBQUEsU0FBQTlDLEdBQ0EsTUFDQUEsR0FBQUksU0FBQU4sTUFBQWlDLEVBQUFqQyxLQUFBLGVBQUFFLEVBQUFnQixVQUlBMUMsRUFBQWtGLE1BQUFKLGFBQUEvRixFQUFBNkYsS0FBQTdGLEVBQUE4RixPQUFBcEIsRUFBQWUsUUFBQSxTQUFBOUMsR0FDQSxNQUNBQSxHQUFBRSxXQUFBSixNQUFBaUMsRUFBQWpDLEtBQUEsYUFBQUUsRUFBQWdCLFVBSUExQyxFQUFBa0YsTUFBQUgsTUFBQS9FLEVBQUFrRixNQUFBSixhQUFBOUUsRUFBQWtGLE1BQUFQLFdBRUEzRSxFQUFBa0YsTUFBQUYsVUFBQWpHLEVBQUE2RixLQUFBN0YsRUFBQThGLE9BQUFwQixFQUFBZSxRQUFBLFNBQUE5QyxHQUNBLE1BQ0FBLEdBQUF1RCxVQUFBdkQsRUFBQUUsV0FBQUosTUFBQWlDLEVBQUFqQyxLQUFBLGFBQUFFLEVBQUFnQixRQUNBaEIsRUFBQUksU0FBQU4sTUFBQWlDLEVBQUFqQyxLQUFBLGVBQUFFLEVBQUFnQixXQTdIQSxHQUFBMUMsR0FBQTdGLElBQ0E2RixHQUFBK0QsVUFBQSxFQUNBL0QsRUFBQTBFLE1BQ0FLLE1BQUEsRUFDQUQsYUFBQSxFQUNBSCxXQUFBLEVBQ0FLLFVBQUEsR0FFQWhGLEVBQUFrRixPQUNBSCxNQUFBLEVBQ0FELGFBQUEsRUFDQUgsV0FBQSxFQUNBSyxVQUFBLEdBRUFoRixFQUFBc0UsUUFDQTNDLEtBQUEsS0FDQThDLE1BQUEsR0FHQTNFLHlCQXZDQS9HLFFBQ0FDLE9BQUEsT0FDQTRILFVBQUEsMEJBQUE0QyxNQ0xBLFdBQ0EsWUFNQSxTQUFBMkIsS0FDQSxHQUFBdkUsSUFDQUMsa0JBQUEsRUFDQXhHLFdBQUF5RyxFQUNBdEYsYUFBQSxLQUNBdUYsU0FBQSxJQUNBQyxPQUNBYSxLQUFBLElBQ0FQLFdBQUEsS0FFQTdGLFlBQUEsbURBRUEsT0FBQW1GLEdBSUEsUUFBQUUsR0FBQUksR0FxQkEsUUFBQXBCLEtBQ0FvQixFQUFBRSxPQUFBLGdCQUFBLFdBQ0FwQixFQUFBc0IsWUFBQXRCLEVBQUFzQixXQUFBRyxPQUFBLElBQ0FrQyxFQUFBM0QsRUFBQTZCLEtBQUE3QixFQUFBc0IsWUFDQXNDLEVBQUE1RCxFQUFBNkIsS0FBQTdCLEVBQUFzQixlQUtBLFFBQUFxQyxHQUFBOUIsRUFBQVAsR0FFQSxHQUVBK0MsR0FGQUMsRUFBQSxFQUNBQyxHQUFBLENBRUF4RixHQUFBQyxRQUFBc0MsRUFBQSxTQUFBSSxHQUNBNkMsSUFFQSxlQUFBN0MsRUFBQWdCLFFBQUFoQixFQUFBRSxXQUFBQyxPQUFBQSxHQUNBLGFBQUFILEVBQUFnQixRQUFBaEIsRUFBQUksU0FBQUQsT0FBQUEsRUFFQSxXQUFBd0MsR0FDQUMsR0FBQSxFQUNBRCxFQUFBLFdBRUFFLEdBQUEsR0FHQSxhQUFBN0MsRUFBQWdCLFFBQUFoQixFQUFBRSxXQUFBQyxPQUFBQSxHQUNBLGVBQUFILEVBQUFnQixRQUFBaEIsRUFBQUksU0FBQUQsT0FBQUEsS0FFQSxZQUFBd0MsR0FDQUMsR0FBQSxFQUNBRCxFQUFBLFVBRUFFLEdBQUEsSUFJQXZFLEVBQUFzRSxRQUNBM0MsS0FBQTBDLEVBQ0FJLE1BQUFILEtBS0EsUUFBQVYsR0FBQS9CLEVBQUFQLEdBRUF0QixFQUFBMEUsS0FBQUMsV0FBQTVGLEVBQUE2RixLQUFBN0YsRUFBQThGLE9BQUF2RCxFQUFBLFNBQUFJLEdBQ0EsTUFDQUEsR0FBQUksU0FBQUQsT0FBQUEsR0FBQSxhQUFBSCxFQUFBZ0IsVUFJQTFDLEVBQUEwRSxLQUFBSSxhQUFBL0YsRUFBQTZGLEtBQUE3RixFQUFBOEYsT0FBQXZELEVBQUEsU0FBQUksR0FDQSxNQUNBQSxHQUFBRSxXQUFBQyxPQUFBQSxHQUFBLGVBQUFILEVBQUFnQixVQUlBMUMsRUFBQTBFLEtBQUFLLE1BQUEvRSxFQUFBMEUsS0FBQUksYUFBQTlFLEVBQUEwRSxLQUFBQyxXQUVBM0UsRUFBQTBFLEtBQUFNLFVBQUFqRyxFQUFBNkYsS0FBQTdGLEVBQUE4RixPQUFBdkQsRUFBQSxTQUFBSSxHQUNBLE1BQ0FBLEdBQUF1RCxVQUFBdkQsRUFBQUUsV0FBQUMsT0FBQUEsR0FBQSxlQUFBSCxFQUFBZ0IsUUFDQWhCLEVBQUFJLFNBQUFELE9BQUFBLEdBQUEsYUFBQUgsRUFBQWdCLFdBSUExQyxFQUFBa0YsTUFBQVAsV0FBQTVGLEVBQUE2RixLQUFBN0YsRUFBQThGLE9BQUF2RCxFQUFBLFNBQUFJLEdBQ0EsTUFDQUEsR0FBQUksU0FBQUQsT0FBQUEsR0FBQSxlQUFBSCxFQUFBZ0IsVUFJQTFDLEVBQUFrRixNQUFBSixhQUFBL0YsRUFBQTZGLEtBQUE3RixFQUFBOEYsT0FBQXZELEVBQUEsU0FBQUksR0FDQSxNQUNBQSxHQUFBRSxXQUFBQyxPQUFBQSxHQUFBLGFBQUFILEVBQUFnQixVQUlBMUMsRUFBQWtGLE1BQUFILE1BQUEvRSxFQUFBa0YsTUFBQUosYUFBQTlFLEVBQUFrRixNQUFBUCxXQUVBM0UsRUFBQWtGLE1BQUFGLFVBQUFqRyxFQUFBNkYsS0FBQTdGLEVBQUE4RixPQUFBdkQsRUFBQSxTQUFBSSxHQUNBLE1BQ0FBLEdBQUF1RCxVQUFBdkQsRUFBQUUsV0FBQUMsT0FBQUEsR0FBQSxhQUFBSCxFQUFBZ0IsUUFDQWhCLEVBQUFJLFNBQUFELE9BQUFBLEdBQUEsZUFBQUgsRUFBQWdCLFdBekdBLEdBQUExQyxHQUFBN0YsSUFDQTZGLEdBQUEwRSxNQUNBSyxNQUFBLEVBQ0FELGFBQUEsRUFDQUgsV0FBQSxFQUNBSyxVQUFBLEdBRUFoRixFQUFBa0YsT0FDQUgsTUFBQSxFQUNBRCxhQUFBLEVBQ0FILFdBQUEsRUFDQUssVUFBQSxHQUVBaEYsRUFBQXNFLFFBQ0EzQyxLQUFBLEtBQ0E4QyxNQUFBLEdBR0EzRSx5QkF2Q0EvRyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLHdCQUFBdUUsTUNMQSx1QkFNQSxTQUFBaEUsR0FBQW5FLEdBaUJBLFFBQUFvSSxHQUFBMUQsR0FDQSxNQUFBMUUsR0FBQVUsS0FBQSxrQ0FDQWdFLFVBQUFBLElBSUEsUUFBQTJELEdBQUEzRCxHQUNBLE1BQUExRSxHQUFBVSxLQUFBLGlDQUNBZ0UsVUFBQUEsSUFJQSxRQUFBNEQsR0FBQTVELEdBQ0EsTUFBQTFFLEdBQUFVLEtBQUEsb0NBQ0FnRSxVQUFBQSxJQUlBLFFBQUE2RCxHQUFBN0QsR0FDQSxNQUFBMUUsR0FBQVUsS0FBQSxtQ0FDQWdFLFVBQUFBLElBSUEsUUFBQThELEdBQUFsRCxHQUNBLE1BQUF0RixHQUFBekQsSUFBQSwrQkFDQWlHLFFBQ0E4QyxjQUFBQSxLQUtBLFFBQUFmLEdBQUFlLEdBQ0EsTUFBQXRGLEdBQUF6RCxJQUFBLHNDQUNBaUcsUUFDQThDLGNBQUFBLEtBS0EsUUFBQW1ELEdBQUFuRCxFQUFBb0QsR0FDQSxNQUFBMUksR0FBQXpELElBQUEsNkNBQ0FpRyxRQUNBOEMsY0FBQUEsRUFDQW9ELFNBQUFBLEtBS0EsUUFBQUMsR0FBQXJELEVBQUFzRCxHQUNBLE1BQUE1SSxHQUFBekQsSUFBQSx5Q0FDQWlHLFFBQ0E4QyxjQUFBQSxFQUNBc0QsTUFBQUEsS0FLQSxRQUFBQyxHQUFBdkQsRUFBQW9ELEdBQ0EsTUFBQTFJLEdBQUE4SSxPQUFBLG9EQUNBdEcsUUFDQThDLGNBQUFBLEVBQ0FvRCxTQUFBQSxLQUtBLFFBQUF0QyxHQUFBZCxFQUFBZSxHQUNBLE1BQUFyRyxHQUFBOEksT0FBQSwwQkFDQXRHLFFBQ0E4QyxjQUFBQSxFQUNBZSxZQUFBQSxLQUtBLFFBQUEwQyxHQUFBekQsRUFBQW9ELEdBQ0EsTUFBQTFJLEdBQUF6RCxJQUFBLDhDQUNBaUcsUUFDQThDLGNBQUFBLEVBQ0FvRCxTQUFBQSxLQWhHQSxHQUFBL0csSUFDQXlHLHVCQUFBQSxFQUNBQyxzQkFBQUEsRUFDQUMseUJBQUFBLEVBQ0FDLHdCQUFBQSxFQUNBQywyQkFBQUEsRUFDQWpFLGlDQUFBQSxFQUNBa0Usd0NBQUFBLEVBQ0FFLG9DQUFBQSxFQUNBRSwyQ0FBQUEsRUFDQXpDLGdCQUFBQSxFQUNBMkMsOEJBQUFBLEVBR0EsT0FBQXBILHVCQW5CQTVGLFFBQ0FDLE9BQUEsT0FDQTRGLFFBQUEsb0JBQUF1QyxNQ0pBLFdBQ0EsWUFNQSxTQUFBNkUsS0FDQSxHQUFBcEYsSUFDQUMsa0JBQUEsRUFDQXhHLFdBQUF5RyxFQUNBdEYsYUFBQSxLQUNBdUYsU0FBQSxJQUNBdEYsWUFBQSxpQ0FFQSxPQUFBbUYsR0FJQSxRQUFBRSxHQUFBM0QsRUFBQXRCLEdBS0EsUUFBQXdDLEtBQ0F4QyxFQUFBd0MsU0FMQSxHQUFBMkIsR0FBQTdGLElBQ0E2RixHQUFBaUcsVUFBQTlJLEVBQ0E2QyxFQUFBM0IsT0FBQUEsOENBbkJBdEYsUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxZQUFBb0YsTUNMQSxXQUNBLFlBTUEsU0FBQUUsS0FDQSxHQUFBdEYsSUFDQUMsa0JBQUEsRUFDQXhHLFdBQUF5RyxFQUNBdEYsYUFBQSxhQUNBdUYsU0FBQSxJQUNBdEYsWUFBQSxpQ0FFQSxPQUFBbUYsR0FJQSxRQUFBRSxHQUFBSSxFQUFBL0UsRUFBQWdCLEVBQUF0QixFQUFBc0ssR0FZQSxRQUFBckcsS0FDQXNHLElBQ0FsRixFQUFBRSxPQUFBLG1DQUFBLFdBQ0FqRSxFQUFBdUIsbUJBQ0EwSCxNQUtBLFFBQUFBLEtBQ0FDLEVBQUFDLFVBQ0FuSixFQUFBdUIsbUJBQ0F5SCxFQUFBSSx3QkFBQXBKLEVBQUFZLFlBQUF5RCxLQUFBN0QsS0FBQSxTQUFBMkksR0FDQUQsRUFBQUMsT0FBQUEsRUFBQXpJLE9BS0EsUUFBQTJJLEdBQUFBLEVBQUFDLEdBQ0FOLEVBQUFLLFdBQUFBLEdBQUE3SSxLQUFBLFdBQ0EwSSxFQUFBQyxPQUFBL0MsT0FBQWtELEVBQUEsS0FJQSxRQUFBQyxLQUNBUCxFQUFBUSx1QkFBQXhKLEVBQUFZLFlBQUF5RCxLQUFBN0QsS0FBQSxXQUNBMEksRUFBQUMsWUFJQSxRQUFBTSxLQUNBekssRUFBQVcsa0JBQUF1SixFQUFBUSxjQUFBQyxNQUdBLFFBQUF6SSxLQUNBeEMsRUFBQXdDLFNBOUNBLEdBQUFnSSxHQUFBbE0sSUFDQWtNLEdBQUFKLFVBQUE5SSxFQUNBa0osRUFBQWhJLE9BQUFBLEVBQ0FnSSxFQUFBUSxjQUFBMUssRUFBQTRLLG1CQUNBVixFQUFBTyxjQUFBQSxFQUNBUCxFQUFBRyxXQUFBQSxFQUNBSCxFQUFBSyxlQUFBQSxFQUNBTCxFQUFBQyxVQUVBeEcsSUF5Q0FvQixFQUFBOUUsSUFBQSxtQkFBQSxTQUFBNEssRUFBQVYsR0FDQW5KLEVBQUF1QixtQkFBQUssRUFBQWtJLEtBQUFYLEdBQUEsU0FBQW5KLEVBQUFZLFlBQUF5RCxPQUNBNEUsNEZBckVBck4sUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxZQUFBc0YsTUNMQSxXQUNBLFlBTUEsU0FBQWdCLEtBQ0EsR0FBQXRHLElBQ0FDLGtCQUFBLEVBQ0F4RyxXQUFBeUcsRUFDQXRGLGFBQUEsY0FDQXVGLFNBQUEsSUFDQXRGLFlBQUEsa0NBRUEsT0FBQW1GLEdBSUEsUUFBQUUsR0FBQTNELEVBQUF0QixFQUFBTSxHQU1BLFFBQUFrQyxLQUNBeEMsRUFBQXdDLFNBTkEsR0FBQTJCLEdBQUE3RixJQUNBNkYsR0FBQWlHLFVBQUE5SSxFQUNBNkMsRUFBQTNCLE9BQUFBLEVBQ0EyQixFQUFBNkcsY0FBQTFLLEVBQUE0SyxnRkFwQkFoTyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLGFBQUFzRyxNQ0xBLFdBQ0EsWUFHQSxTQUFBQyxLQUNBLE1BQUEsVUFBQUMsRUFBQUMsR0FDQSxJQUFBdE8sUUFBQXVPLFNBQUFGLEdBQUEsTUFBQUEsRUFFQSxJQUFBRyxLQUNBLEtBQUEsR0FBQUMsS0FBQUosR0FDQUcsRUFBQXZELEtBQUFvRCxFQUFBSSxHQVFBLE9BTEFELEdBQUFFLEtBQUEsU0FBQUMsRUFBQUMsR0FHQSxNQUZBRCxHQUFBRSxTQUFBRixFQUFBTCxJQUNBTSxFQUFBQyxTQUFBRCxFQUFBTixJQUNBSyxFQUFBQyxJQUVBSixHQWhCQXhPLFFBQUFDLE9BQUEsT0FBQTZMLE9BQUEsZ0JBQUFzQyxNQ0ZBLHVCQUlBLFNBQUFoQixHQUFBbkosR0FlQSxRQUFBdUosR0FBQWpILEdBQ0EsTUFBQXRDLEdBQUF6RCxJQUFBLGdCQUNBaUcsUUFDQUYsT0FBQUEsS0FXQSxRQUFBa0gsR0FBQXFCLEdBQ0EsTUFBQTdLLEdBQUEyQyxJQUFBLG9CQUNBa0ksUUFBQUEsSUFVQSxRQUFBbEIsR0FBQXJILEdBQ0EsTUFBQXRDLEdBQUEyQyxJQUFBLHFCQUNBTCxPQUFBQSxJQTFDQSxHQUFBWCxJQUNBNEgsd0JBQUFBLEVBQ0FDLFdBQUFBLEVBQ0FHLHVCQUFBQSxFQUdBLE9BQUFoSSx1QkFUQTVGLFFBQUFDLE9BQUEsT0FBQTRGLFFBQUEsZ0JBQUF1SCxNQ0ZBLHVCQUlBLFNBQUFoSixHQUFBMkssR0FZQSxRQUFBcEosS0FDQSxRQUFBdkUsS0FBQTRELFlBR0EsUUFBQVMsR0FBQUQsR0FDQSxRQUFBcEUsS0FBQTRELGFBQUE1RCxLQUFBNEQsWUFBQWdLLE1BQUEzRCxRQUFBN0YsSUFBQSxFQWhCQSxHQUFBUixFQUNBLFFBQUErSixFQUFBRSx5QkFDQWpLLEVBQUErSixFQUFBRSx1QkFFQSxJQUFBckosSUFDQVosWUFBQUEsRUFDQVcsZ0JBQUFBLEVBQ0FGLGFBQUFBLEVBRUEsT0FBQUcseUJBWkE1RixRQUFBQyxPQUFBLE9BQUE0RixRQUFBLGtCQUFBekIsTUNGQSxXQUNBLFlBS0EsU0FBQUMsS0FvQkEsUUFBQTZLLEdBQUFqSyxFQUFBM0MsRUFBQTZNLEdBQ0FDLEVBQUFDLFFBRUFwSyxRQUFBQSxFQUNBM0MsSUFBQUEsRUFDQTZNLE9BQUFBLElBR0F2RyxLQUFBLFNBSUEsUUFBQTdELEdBQUFFLEVBQUEzQyxFQUFBNk0sR0FDQUMsRUFBQUMsUUFFQXBLLFFBQUFBLEVBQ0EzQyxJQUFBQSxFQUNBNk0sT0FBQUEsSUFHQXZHLEtBQUEsWUFJQSxRQUFBMEcsR0FBQXJLLEVBQUEzQyxFQUFBNk0sR0FDQUMsRUFBQUMsUUFFQXBLLFFBQUFBLEVBQ0EzQyxJQUFBQSxFQUNBNk0sT0FBQUEsSUFHQXZHLEtBQUEsWUFJQSxRQUFBakYsR0FBQXNCLEVBQUEzQyxFQUFBNk0sR0FDQUMsRUFBQUMsUUFFQXBLLFFBQUFBLEVBQ0EzQyxJQUFBQSxFQUNBNk0sT0FBQUEsSUFHQXZHLEtBQUEsV0FJQSxRQUFBMkcsR0FBQXRLLEVBQUEzQyxFQUFBNk0sR0FDQUMsRUFBQUMsUUFFQXBLLFFBQUFBLEVBQ0EzQyxJQUFBQSxFQUNBNk0sT0FBQUEsSUFHQXZHLEtBQUEsWUEzRUEsR0FBQWhELElBQ0FzSixLQUFBQSxFQUNBbkssUUFBQUEsRUFDQXVLLFFBQUFBLEVBQ0EzTCxNQUFBQSxFQUNBNEwsUUFBQUEsRUFZQSxPQVRBSCxHQUFBSSxnQkFDQUMsZUFBQSxFQUNBQyxRQUNBQyxFQUFBLEdBQ0FDLEVBQUEsSUFFQUMsTUFBQSxNQUdBakssRUF0QkE1RixRQUNBQyxPQUFBLE9BQ0E0RixRQUFBLGdCQUFBeEIsTUNKQSxXQUNBLFlBS0EsU0FBQXlMLEtBT0EsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQWYsRUFBQVksR0FBQUksa0JBQ0FILE1BQUFBLEVBQ0FJLGNBQUEsSUFDQUMsS0FBQUosRUFDQUssWUFDQUMsUUFBQSxFQUNBRixLQUFBSCxFQUNBTSxnQkFBQSxLQWRBLEdBQUE3SyxJQUNBbUssYUFBQUEsRUFHQSxPQUFBbkssR0FUQTVGLFFBQ0FDLE9BQUEsT0FDQTRGLFFBQUEsbUJBQUFpSyxNQ0pBLFdBQ0EsWUFLQSxTQUFBMU0sS0FZQSxRQUFBNEssS0FDQSxNQUFBRixHQUdBLFFBQUEvSixHQUFBMk0sR0FDQTVDLEVBQUFDLEtBQUEyQyxFQWhCQSxHQUFBNUMsSUFDQUMsTUFBQSxFQUNBNEMsT0FBQSxHQUVBL0ssR0FDQW9JLGlCQUFBQSxFQUNBakssaUJBQUFBLEVBR0EsT0FBQTZCLEdBZEE1RixRQUNBQyxPQUFBLE9BQ0E0RixRQUFBLGlCQUFBekMsTUNKQSx1QkFNQSxTQUFBd04sR0FBQXpOLEVBQUE0TCxFQUFBOEIsR0FXQSxRQUFBQyxLQUNBLE1BQUEsV0FBQS9CLEVBQUFnQyxTQUFBQyxTQUNBLFNBQUFqQyxFQUFBZ0MsU0FBQUUsS0FFQSxRQUFBbEMsRUFBQWdDLFNBQUFFLEtBSUEsUUFBQUMsS0FDQUMsRUFBQSxHQUFBQyxXQUFBTixLQUVBSyxFQUFBRSxVQUFBLFNBQUFwRCxHQUNBcUQsRUFBQSxDQUNBLElBQUFDLEdBQUFDLEtBQUFDLE1BQUF4RCxFQUFBbkosS0FDQTNCLEdBQUF1TyxXQUFBLE1BQUFILEVBQUFJLE1BQUFKLEVBQUF6TSxPQUdBcU0sRUFBQVMsUUFBQSxXQUNBTixFQUFBTyxFQUFBbkosUUFDQW9KLFFBQUFDLElBQUEscUNBQ0FsQixFQUFBSyxFQUFBLElBQUFXLEVBQUFQLElBQ0FBLEdBQUEsR0FFQVEsUUFBQUMsSUFBQSwyQkFLQSxRQUFBQyxHQUFBTCxFQUFBN00sR0FDQSxHQUFBbU4sR0FBQVQsS0FBQVUsV0FDQVAsTUFBQUEsRUFDQTdNLEtBQUFBLEdBRUFxTSxHQUFBYSxLQUFBQyxHQTNDQSxHQUFBZCxHQUNBVSxHQUFBLEVBQUEsR0FBQSxJQUFBLEtBQ0FQLEVBQUEsRUFDQTFMLEdBQ0FzTCxRQUFBQSxFQUNBYyxLQUFBQSxFQUdBLE9BQUFwTSxpREFiQTVGLFFBQUFDLE9BQUEsT0FBQTRGLFFBQUEsbUJBQUErSyxHQUFBNU0sS0FBQSxtQkFBQSxTQUFBNE0sR0FDQUEsRUFBQU0sZ0JDSEEsdUJBSUEsU0FBQWlCLEdBQUFDLEdBTUEsUUFBQXJMLEtBQ0FxTCxFQUFBQyxrQkFBQXpOLEtBQUEsU0FBQTBOLEdBQ0FyTCxFQUFBcUwsYUFBQUEsRUFBQXhOLE9BUEEsR0FBQW1DLEdBQUE3RixJQUNBNkYsR0FBQXFMLGdCQUVBdkwsc0NBTkEvRyxRQUFBQyxPQUFBLE9BQUFxQixXQUFBLFdBQUE2USxNQ0ZBLFdBQ0EsWUFNQSxTQUFBSSxLQUNBLEdBQUExSyxJQUNBQyxrQkFBQSxFQUNBeEcsV0FBQXlHLEVBQ0F0RixhQUFBLEtBQ0F1RixTQUFBLElBQ0FDLE9BQ0FDLFlBQUEsS0FHQXhGLFlBQUEsb0RBRUEsT0FBQW1GLEdBSUEsUUFBQUUsS0FJQSxRQUFBaEIsTUFGQUEsSUF0QkEvRyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLHdCQUFBMEssTUNMQSxXQUNBLFlBTUEsU0FBQUMsS0FDQSxHQUFBM0ssSUFDQUMsa0JBQUEsRUFDQXhHLFdBQUF5RyxFQUNBdEYsYUFBQSxLQUNBdUYsU0FBQSxJQUNBQyxPQUNBQyxZQUFBLEtBRUF4RixZQUFBLGdEQUVBLE9BQUFtRixHQUlBLFFBQUFFLEdBQUFxSyxHQVFBLFFBQUFyTCxNQUVBLFFBQUEwTCxHQUFBL0gsR0FDQUEsRUFBQVUsU0FBQW5FLEVBQUFpQixZQUFBd0ssUUFBQWhLLE9BQUEsRUFDQTBKLEVBQUFLLHFCQUFBeEwsRUFBQWlCLFlBQUFPLElBQUFpQyxHQUdBLFFBQUFpSSxHQUFBakksR0FDQTBILEVBQUFPLGtCQUFBMUwsRUFBQWlCLFlBQUFPLElBQUFpQyxHQWZBLEdBQUF6RCxHQUFBN0YsSUFDQTZGLEdBQUEyTCxrQkFDQTNMLEVBQUF3TCxxQkFBQUEsRUFDQXhMLEVBQUEwTCxrQkFBQUEsRUFFQTVMLHNDQXpCQS9HLFFBQ0FDLE9BQUEsT0FDQTRILFVBQUEsb0JBQUEySyxNQ0xBLHVCQU1BLFNBQUFLLEtBQ0EsR0FBQWhMLElBQ0FHLFNBQUEsSUFDQXRGLFlBQUEsd0NBQ0FvUSxTQUFBLEVBQ0E3SyxPQUNBQyxZQUFBLEtBRUE1RyxXQUFBeUcsRUFDQXRGLGFBQUEsS0FDQXFGLGtCQUFBLEVBR0EsT0FBQUQsR0FJQSxRQUFBRSxHQUFBSSxFQUFBckgsRUFBQXNSLEVBQUFXLEVBQUExTyxFQUFBRCxFQUFBZ0UsR0EwQkEsUUFBQXJCLEtBRUEsSUFBQSxHQUFBZ0UsR0FBQUMsRUFBQUQsRUFBQSxJQUFBQSxFQUNBOUQsRUFBQStMLFlBQUFqSSxDQUdBNUMsR0FBQUUsT0FBQSxpQkFBQSxXQUNBcEIsRUFBQWlCLGNBQ0FqQixFQUFBc0MsY0FBQXRDLEVBQUFpQixZQUFBTyxJQUNBd0ssSUFDQUMsSUFDQUMsSUFDQUMsSUFDQUMsT0FRQSxRQUFBSixLQUNBaE0sRUFBQWlCLFlBQUF3SyxRQUFBSyxFQUFBLFdBQUE5TCxFQUFBaUIsWUFBQXdLLFFBQUEsWUFNQSxRQUFBUSxLQUVBak0sRUFBQXFNLG9CQUFBLEVBQ0FyTSxFQUFBc00sc0JBQUEsRUFDQW5QLEVBQUF1QixvQkFFQXNCLEVBQUFxTSxtQkFBQXROLEVBQUFrSSxLQUFBakgsRUFBQWlCLFlBQUFzTCxRQUFBLE1BQUFwUCxFQUFBWSxZQUFBeUQsTUFFQXhCLEVBQUFzTSxxQkFBQXZOLEVBQUFrSSxLQUFBakgsRUFBQWlCLFlBQUEwSyxnQkFBQSxNQUFBeE8sRUFBQVksWUFBQXlELE9BR0F4QixFQUFBd00sNEJBQUEsRUFDQXhNLEVBQUF5TSxvQkFBQSxFQUNBMU4sRUFBQUMsUUFBQWdCLEVBQUFpQixZQUFBd0ssUUFBQSxTQUFBaEksR0FFQXRHLEVBQUF1QixtQkFBQStFLEVBQUFqQyxNQUFBckUsRUFBQVksWUFBQXlELE1BQ0F4QixFQUFBd00sNEJBQUEsRUFDQS9JLEVBQUFpSixNQUFBLGVBQ0ExTSxFQUFBMk0sa0JBQUFsSixFQUdBdEMsRUFBQXNFLHdDQUFBekYsRUFBQXNDLGNBQUFtQixFQUFBakMsS0FBQTdELEtBQUEsU0FBQStELEdBQ0EsR0FBQUEsRUFBQTdELEtBQUEsQ0FDQW1DLEVBQUF5TSxvQkFBQSxFQUNBek0sRUFBQTRNLHdCQUFBbEwsRUFBQTdELEtBQUErRCxXQUFBSixNQUFBaUMsRUFBQWpDLElBQUFFLEVBQUE3RCxLQUFBaUUsU0FBQUosRUFBQTdELEtBQUErRCxVQUVBLElBQUFpTCxHQUFBOU4sRUFBQStOLEtBQUE5TSxFQUFBaUIsWUFBQXdLLFNBQUFqSyxJQUFBeEIsRUFBQTRNLHdCQUFBcEwsS0FDQXFMLEdBQUFILE1BQUFHLEVBQUFILE1BQUFHLEVBQUFILE1BQUEsb0JBQUEsdUJBR0FLLFVBTUE1TCxFQUFBSSxpQ0FBQXZCLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBMkQsR0FDQXZDLEVBQUFDLFFBQUFzQyxFQUFBekQsS0FBQSxTQUFBNkQsR0FFQSxHQUFBRSxHQUFBN0MsRUFBQStOLEtBQUE5TSxFQUFBaUIsWUFBQXdLLFNBQUFqSyxJQUFBRSxFQUFBRSxXQUFBSixLQUNBLGVBQUFJLEVBQUE4SyxRQUNBOUssRUFBQThLLE1BQUEsSUFFQTlLLEVBQUE4SyxNQUFBOUssRUFBQThLLE1BQUE5SyxFQUFBOEssTUFBQSxlQUFBLGNBQ0E5SyxFQUFBb0wsV0FBQSxFQUNBcEwsRUFBQUYsV0FDQXlDLFNBQUEsYUFHQSxJQUFBckMsR0FBQS9DLEVBQUErTixLQUFBOU0sRUFBQWlCLFlBQUF3SyxTQUFBakssSUFBQUUsRUFBQUksU0FBQU4sS0FXQSxJQVZBLGNBQUFNLEVBQUE0SyxRQUNBNUssRUFBQTRLLE1BQUEsSUFFQTVLLEVBQUE0SyxNQUFBNUssRUFBQTRLLE1BQUE1SyxFQUFBNEssTUFBQSxlQUFBLGNBQ0E1SyxFQUFBa0wsV0FBQSxFQUNBbEwsRUFBQUosV0FDQXlDLFNBQUEsWUFJQSxJQUFBekMsRUFBQUssVUFBQSxDQUNBLEdBQUFrTCxHQUFBaEwsU0FBQUMsS0FBQUQsT0FBQVAsRUFBQVMsU0FBQUMsSUFBQVYsRUFBQUssVUFBQSxLQUFBLE1BQUEsQ0FFQWtMLEdBQUEsRUFDQW5MLEVBQUFKLFVBQUFNLFFBQUFpTCxFQUVBQSxHQUFBLEdBQ0FDLEVBQUEsTUFBQSxFQUFBcEwsUUFVQSxRQUFBcUwsS0FDQW5OLEVBQUE2RCxjQUNBLEtBQUEsR0FBQUMsR0FBQSxFQUFBQSxFQUFBQyxFQUFBRCxJQUNBOUQsRUFBQTZELFlBQUFHLEtBQUFGLEdBQUFBLEVBQUEsR0FBQSxFQUFBLEdBTUEsUUFBQW9JLEtBQ0EsR0FBQWpJLEdBQUEsQ0FDQWpFLEdBQUFvTixVQUNBRCxHQUNBLEtBQUEsR0FBQXJKLEdBQUEsRUFBQUEsRUFBQTlELEVBQUFpQixZQUFBd0ssUUFBQWhLLE9BQUFxQyxJQUNBOUQsRUFBQTZELFlBQUFPLFFBQUFOLEVBQUEsSUFBQSxJQUNBRyxHQUFBLEVBRUFqRSxFQUFBb04sT0FBQXBKLEtBQUFDLElBR0FqRSxFQUFBaUIsWUFBQXdLLFFBQUEzSCxHQUFBRyxNQUFBQSxFQUtBLFFBQUFrSSxLQUNBbk0sRUFBQXFOLGVBQUEsQ0FDQSxLQUFBLEdBQUF2SixHQUFBL0UsRUFBQXVPLEtBQUF0TixFQUFBb04sUUFBQXRKLEVBQUEsRUFBQUEsSUFDQTlELEVBQUFxTixnQkFBQXZKLEVBS0EsUUFBQXNJLEtBQ0FwTSxFQUFBdU4sb0JBQUF2TixFQUFBaUIsWUFBQXdLLFFBQUFoSyxNQUNBLEtBQUEsR0FBQXFDLEdBQUE5RCxFQUFBaUIsWUFBQXdLLFFBQUFoSyxPQUFBcUMsRUFBQTlELEVBQUFxTixlQUFBdkosSUFDQTlELEVBQUFpQixZQUFBd0ssUUFBQXpILE1BQ0E5RSxVQUFBLFFBQ0FDLFNBQUEsT0FDQUYsWUFBQSxhQUNBa0YsU0FBQSxHQUNBdUksTUFBQTFNLEVBQUF3TSwyQkFBQSxRQUFBLGtCQUlBTixLQUlBLFFBQUFhLEtBQ0EsR0FBQS9NLEVBQUF3TSw2QkFBQXhNLEVBQUF5TSxtQkFBQSxDQUNBLEdBQUFlLEdBQUF4TixFQUFBMk0sa0JBQUExSSxNQUFBLEVBQUFqRSxFQUFBMk0sa0JBQUExSSxNQUFBLEVBQUEsSUFDQWxGLEdBQUFDLFFBQUFnQixFQUFBaUIsWUFBQXdLLFFBQUEsU0FBQWhJLEdBQ0FBLEVBQUFRLFFBQUF1SixHQUFBLEtBQUEvSixFQUFBVSxVQUFBLGdCQUFBVixFQUFBaUosT0FBQWpKLEVBQUF1SixhQUFBLElBQ0FoTixFQUFBeU4scUJBQUEsRUFDQWhLLEVBQUF1SixXQUFBLEVBQ0F2SixFQUFBaUosTUFBQSxnQkFXQSxRQUFBZ0IsR0FBQWpLLEdBQ0EsR0FBQUEsRUFBQXVKLFVBRUEsQ0FDQWhOLEVBQUF5TSxvQkFBQSxDQUNBLElBQUEvSyxJQUNBQyxLQUFBM0IsRUFBQWlCLFlBQUFVLEtBQ0FnTSxnQkFBQTNOLEVBQUFpQixZQUFBMk0sS0FDQXRMLGNBQUF0QyxFQUFBc0MsY0FDQXVMLFVBQUEsRUFDQTVJLFNBQUEsRUFDQWxELFVBQUEvQixFQUFBaUIsWUFBQTZNLFlBQ0FsTSxZQUNBSixJQUFBeEIsRUFBQTJNLGtCQUFBbkwsSUFDQXVNLE1BQUEvTixFQUFBMk0sa0JBQUFvQixNQUNBN08sVUFBQWMsRUFBQTJNLGtCQUFBek4sVUFDQUMsU0FBQWEsRUFBQTJNLGtCQUFBeE4sU0FDQUYsWUFBQWUsRUFBQTJNLGtCQUFBMU4sWUFDQWtGLFNBQUFuRSxFQUFBMk0sa0JBQUF4SSxVQUVBckMsVUFDQU4sSUFBQWlDLEVBQUFqQyxJQUNBdU0sTUFBQXRLLEVBQUFzSyxNQUNBN08sVUFBQXVFLEVBQUF2RSxVQUNBQyxTQUFBc0UsRUFBQXRFLFNBQ0FGLFlBQUF3RSxFQUFBeEUsWUFDQWtGLFNBQUFWLEVBQUFVLFVBS0FoRCxHQUFBaUUsdUJBQUExRCxHQUFBL0QsS0FBQSxXQUNBcUMsRUFBQWdPLHVCQUFBLFFBOUJBNVEsR0FBQVYsTUFBQSx5Q0EwQ0EsUUFBQXdRLEdBQUFlLEVBQUFoSixFQUFBaUosR0FDQSxHQUFBekssR0FBQXlLLEdBQUFsTyxFQUFBMk0saUJBQ0F4TCxHQUFBc0Usd0NBQUF6RixFQUFBc0MsY0FBQW1CLEVBQUFqQyxLQUFBN0QsS0FBQSxTQUFBK0QsR0FDQTFCLEVBQUF5TSxvQkFBQSxDQUVBLElBQUEwQixJQUFBLENBR0FsSixJQUNBdkQsRUFBQTdELEtBQUFvSCxTQUFBLEVBQ0EsYUFBQWlKLEVBQUF4TSxVQUFBeUMsVUFDQXpDLEVBQUE3RCxLQUFBNkUsT0FBQSxhQUNBeUwsR0FBQSxHQUVBek0sRUFBQTdELEtBQUE2RSxPQUFBLFlBR0F1TCxFQUNBdk0sRUFBQTdELEtBQUErRCxXQUFBSixNQUFBeEIsRUFBQTJNLGtCQUFBbkwsS0FDQUUsRUFBQTdELEtBQUE2RSxPQUFBLGFBQ0F5TCxHQUFBLEdBRUF6TSxFQUFBN0QsS0FBQTZFLE9BQUEsV0FHQWhCLEVBQUE3RCxLQUFBK0QsV0FBQUosTUFBQXhCLEVBQUEyTSxrQkFBQW5MLElBQ0FFLEVBQUE3RCxLQUFBNkUsT0FBQSxZQUVBaEIsRUFBQTdELEtBQUE2RSxPQUFBLGFBQ0F5TCxHQUFBLEdBTUFBLEVBQ0FoRCxFQUFBZ0QsY0FBQW5PLEVBQUFzQyxjQUFBWixFQUFBN0QsS0FBQWlFLFNBQUFKLEVBQUE3RCxLQUFBK0QsWUFBQWpFLEtBQUEsV0FDQXdELEVBQUFtRSx5QkFBQTVELEVBQUE3RCxNQUFBRixLQUFBLFdBQ0F5USxHQUNBQyxRQUtBbE4sRUFBQW1FLHlCQUFBNUQsRUFBQTdELE1BQUFGLEtBQUEsV0FDQXlRLEdBQ0FDLE1BSUFyTyxFQUFBZ08sdUJBQUEsSUFRQSxRQUFBTSxHQUFBN0ssR0FDQXlKLEVBQUEsTUFBQSxFQUFBekosR0FPQSxRQUFBOEssS0FDQSxHQUFBcFIsRUFBQXVCLGtCQUNBLEdBQUFzQixFQUFBdU4sb0JBQUF2TixFQUFBK0wsV0FBQSxDQUNBLEdBQUF0SSxJQUNBakMsSUFBQXJFLEVBQUFZLFlBQUF5RCxJQUNBdEMsVUFBQS9CLEVBQUFZLFlBQUFtQixVQUNBQyxTQUFBaEMsRUFBQVksWUFBQW9CLFNBQ0FGLFlBQUE5QixFQUFBWSxZQUFBa0IsWUFDQThPLE1BQUE1USxFQUFBWSxZQUFBVCxTQUNBNkcsU0FBQW5FLEVBQUF1TixvQkFBQSxFQUVBdk4sR0FBQWlCLFlBQUF1TixjQWVBQyxNQUNBQyxNQUFBLHFCQUNBQyxLQUFBLHFFQUNBaE4sS0FBQSxVQUNBaU4sa0JBQUEsRUFDQUMsa0JBQUEsZUFDQUMsaUJBQUEsWUFDQUMsZ0JBQUEsRUFDQUMsZUFBQSxHQUNBLFdBQ0E3RCxFQUFBOEQsOEJBQUFqUCxFQUFBaUIsWUFBQXdDLEdBQUE5RixLQUFBLFdBQ0FxQyxFQUFBc00sc0JBQUEsSUFFQW1DLEtBQUEsZUFBQSxpRUFBQSxhQTNCQUEsTUFDQUMsTUFBQSxvQkFDQUMsS0FBQSxnQ0FDQWhOLEtBQUEsVUFDQWlOLGtCQUFBLEVBQ0FDLGtCQUFBLE9BQ0FDLGlCQUFBLFlBQ0FDLGdCQUFBLEVBQ0FDLGVBQUEsR0FDQSxXQUNBN0QsRUFBQStELHVCQUFBbFAsRUFBQXNDLGNBQUFtQixHQUNBZ0wsS0FBQSxrQkFBQSx5Q0FBQSxpQkFvQkFyUixHQUFBaUwsUUFBQSx1Q0FHQWpMLEdBQUFpTCxRQUFBLHNDQUNBeE8sRUFBQStDLFNBQUEsb0JBQ0EvQyxFQUFBZ0QsWUFBQXlGLGNBQUF0QyxFQUFBc0MsZUFDQXpJLEVBQUE4QyxHQUFBLFNBT0EsUUFBQXdTLEtBQ0FWLE1BQ0FDLE1BQUEscUJBQ0FDLEtBQUEsNkRBQ0FoTixLQUFBLFFBQ0FpTixrQkFBQSxFQUNBQyxrQkFBQSxhQUNBTyxtQkFBQSxhQUNBTixpQkFBQSxXQUNBQyxnQkFBQSxFQUNBQyxlQUFBLEdBQ0EsV0FDQVgsSUFDQUksS0FBQSxpQkFBQSw0Q0FBQSxhQVVBLFFBQUFKLEtBRUFsUixFQUFBdUIsbUJBQUFzQixFQUFBd00sNkJBQ0E0QixHQUFBLEVBRUFwTyxFQUFBeU0sbUJBQ0FTLEVBQUEsTUFBQSxFQUFBbE4sRUFBQTJNLG9CQUdBM00sRUFBQXdNLDRCQUFBLEVBQ0F4TSxFQUFBeU0sb0JBQUEsRUFHQXRCLEVBQUFrRSxlQUFBclAsRUFBQXNDLGVBQUEzRSxLQUFBLFNBQUEyUixHQUdBLEdBQUFyTyxHQUFBcU8sRUFBQXpSLEtBR0EwUixFQUFBdlAsRUFBQTJNLGtCQUFBeEksUUFHQXBGLEdBQUFDLFFBQUFpQyxFQUFBd0ssUUFBQSxTQUFBaEksR0FDQUEsRUFBQVUsVUFBQW9MLElBQ0E5TCxFQUFBVSxVQUFBLElBWUEsS0FBQSxHQVBBcUwsR0FBQXpRLEVBQUEwUSxPQUFBeE8sRUFBQXdLLFFBQUEsU0FBQWhJLEdBQ0EsTUFBQUEsR0FBQWpDLE1BQUF4QixFQUFBMk0sa0JBQUFuTCxNQUtBa08sS0FDQTVMLEVBQUEsRUFBQUEsRUFBQTlELEVBQUF1TixvQkFBQSxJQUFBekosRUFBQSxDQUNBLEdBQUE2TCxJQUNBbk8sSUFBQVAsRUFBQXdLLFFBQUEzSCxHQUFBdEMsSUFDQXRDLFVBQUErQixFQUFBd0ssUUFBQTNILEdBQUE1RSxVQUNBQyxTQUFBOEIsRUFBQXdLLFFBQUEzSCxHQUFBM0UsU0FDQUYsWUFBQWdDLEVBQUF3SyxRQUFBM0gsR0FBQTdFLFlBQ0FrRixTQUFBbEQsRUFBQXdLLFFBQUEzSCxHQUFBSyxTQUdBdUwsR0FBQTFMLEtBQUEyTCxHQUlBeEUsRUFBQXlFLDZCQUFBNVAsRUFBQXNDLGNBQUFrTixFQUFBLEdBQUFFLEdBQUEvUixLQUFBLFdBQ0F5USxHQUFBLFFBVUEsUUFBQXlCLEdBQUFwTSxHQUVBLEtBQUFBLEVBQUFVLFVBQUFuRSxFQUFBd00sMkJBR0EvSSxFQUFBcU0sb0JBQUFyTSxFQUFBcU0sbUJBRkF2QixJQVNBLFFBQUF3QixLQUNBNUUsRUFBQWtFLGVBQUFyUCxFQUFBc0MsZUFBQTNFLEtBQUEsU0FBQXNELEdBQ0FqQixFQUFBaUIsWUFBQUEsRUFBQXBELE9BNWNBLEdBQUFrRyxHQUFBLEVBQ0EvRCxFQUFBN0YsSUFDQTZGLEdBQUFzQyxjQUFBLEtBQ0F0QyxFQUFBNkQsZUFDQTdELEVBQUFvTixVQUNBcE4sRUFBQXFOLGVBQUEsRUFDQXJOLEVBQUF3TSw0QkFBQSxFQUNBeE0sRUFBQXNNLHNCQUFBLEVBQ0F0TSxFQUFBcU0sb0JBQUEsRUFDQXJNLEVBQUF5TSxvQkFBQSxFQUNBek0sRUFBQTRNLHdCQUFBLEtBQ0E1TSxFQUFBeU4scUJBQUEsRUFDQXpOLEVBQUEwTixnQkFBQUEsRUFDQTFOLEVBQUFrTixrQkFBQUEsRUFDQWxOLEVBQUFzTyxpQkFBQUEsRUFDQXRPLEVBQUEyTSxxQkFDQTNNLEVBQUFnTyx1QkFBQSxFQUNBaE8sRUFBQXVPLDRCQUFBQSxFQUNBdk8sRUFBQW1QLHdDQUFBQSxFQUNBblAsRUFBQTZQLFlBQUFBLEVBQ0E3UCxFQUFBdU4sb0JBQUEsRUFDQXZOLEVBQUErTCxXQUFBLEVBRUFqTSxHQXNXQSxJQUFBc08sSUFBQSxDQW9GQWxOLEdBQUE5RSxJQUFBLHlCQUFBLFNBQUEyQyxFQUFBaVIsR0FDQWhRLEVBQUFzQyxnQkFBQTBOLEVBQUExTixnQkFDQWxGLEVBQUE2SyxLQUFBK0gsRUFBQUMsYUFDQUYsMkhBMWVBaFgsUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxhQUFBZ0wsTUNKQSxXQUNBLFlBTUEsU0FBQXNFLEtBQ0EsR0FBQXRQLElBQ0FDLGtCQUFBLEVBQ0F4RyxXQUFBeUcsRUFDQXRGLGFBQUEsS0FDQXVGLFNBQUEsSUFDQUMsT0FDQUMsWUFBQSxLQUVBeEYsWUFBQSw4Q0FFQSxPQUFBbUYsR0FJQSxRQUFBRSxHQUFBSSxFQUFBaUssRUFBQWhLLEVBQUFqRSxFQUFBQyxHQWVBLFFBQUEyQyxLQUNBb0IsRUFBQUUsT0FBQSxpQkFBQSxXQUNBcEIsRUFBQWlCLGNBQ0FqQixFQUFBbVEsWUFBQXBSLEVBQUFxUixVQUFBcFEsRUFBQWlCLFlBQUFzTCxRQUNBdk0sRUFBQXFRLGVBQUEsRUFDQXJRLEVBQUFzUSxtQkFBQXZSLEVBQUErTixLQUFBOU0sRUFBQWlCLFlBQUFzTCxRQUFBZ0UsU0FBQSxJQUFBL08sTUFBQXJFLEVBQUFZLFlBQUF5RCxJQUNBZ1AsT0FLQSxRQUFBQSxLQUNBeFEsRUFBQXlRLG1CQUNBQyxLQUNBeFQsRUFBQTJCLGNBQUFsQixLQUFBLFNBQUFtQixHQUVBQyxFQUFBQyxRQUFBZ0IsRUFBQWlCLFlBQUFzTCxPQUFBLFNBQUFvRSxHQUNBNVIsRUFBQTBRLE9BQUEzUSxFQUFBakIsS0FBQSxTQUFBK1MsR0FDQSxNQUFBRCxHQUFBblAsTUFBQW9QLEVBQUFwUCxRQUlBekMsRUFBQUMsUUFBQUYsRUFBQWpCLEtBQUEsU0FBQStTLEdBQ0E1USxFQUFBeVEsZ0JBQUF6TSxNQUNBOUUsVUFBQTBSLEVBQUExUixVQUNBQyxTQUFBeVIsRUFBQXpSLFNBQ0FGLFlBQUEyUixFQUFBM1IsWUFDQThPLE1BQUE2QyxFQUFBdFQsU0FDQWtFLElBQUFvUCxFQUFBcFAsUUFJQXFQLEVBQUE5UixFQUFBcVIsVUFBQXBRLEVBQUF5USxtQkFLQSxRQUFBSyxLQUNBOVEsRUFBQWlCLFlBQUFzTCxPQUFBdk0sRUFBQW1RLFlBQ0FoRixFQUFBMkYsa0JBQUE5USxFQUFBaUIsYUFBQXRELEtBQUEsV0FDQXFDLEVBQUFxUSxlQUFBLElBS0EsUUFBQVUsS0FDQUwsS0FDQTFRLEVBQUFtUSxZQUFBcFIsRUFBQXFSLFVBQUFwUSxFQUFBaUIsWUFBQXNMLFFBQ0F2TSxFQUFBeVEsZ0JBQUExUixFQUFBcVIsVUFBQVMsR0FRQSxRQUFBRyxHQUFBblcsR0FDQTZWLEVBQUExTSxLQUFBbkosR0FDQW1GLEVBQUF5USxnQkFBQXpNLEtBQUFqRixFQUFBMFEsT0FBQXpQLEVBQUFtUSxhQUFBM08sSUFBQTNHLEVBQUEyRyxNQUFBLElBQ0F4QixFQUFBcVEsZUFBQSxFQU9BLFFBQUFZLEdBQUFwVyxHQUNBbUYsRUFBQW1RLFlBQUFuTSxLQUFBakYsRUFBQTBRLE9BQUF6UCxFQUFBeVEsaUJBQUFqUCxJQUFBM0csRUFBQTJHLE1BQUEsSUFDQXhCLEVBQUFxUSxlQUFBLEVBbEZBLEdBQUFLLE1BQ0FHLEtBQ0E3USxFQUFBN0YsSUFDQTZGLEdBQUF5USxtQkFDQXpRLEVBQUFtUSxlQUNBblEsRUFBQXNRLG9CQUFBLEVBQ0F0USxFQUFBOFEsa0JBQUFBLEVBQ0E5USxFQUFBK1EsYUFBQUEsRUFDQS9RLEVBQUFnUixZQUFBQSxFQUNBaFIsRUFBQWlSLFNBQUFBLEVBQ0FqUixFQUFBcVEsZUFBQSxFQUVBdlEsbUdBaENBL0csUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxrQkFBQXNQLE1DTEEsV0FDQSxZQU1BLFNBQUFnQixLQUNBLEdBQUF0USxJQUNBQyxrQkFBQSxFQUNBeEcsV0FBQXlHLEVBQ0F0RixhQUFBLEtBQ0F1RixTQUFBLElBQ0FDLE9BQ0FDLFlBQUEsS0FFQXhGLFlBQUEsK0NBRUEsT0FBQW1GLEdBSUEsUUFBQUUsR0FBQUksRUFBQTRLLEVBQUFYLEVBQUFoSyxFQUFBakUsRUFBQUUsR0FpQkEsUUFBQTBDLEtBRUEsSUFBQSxHQUFBZ0UsR0FBQUMsRUFBQUQsRUFBQSxJQUFBQSxFQUNBaUksR0FBQWpJLENBRUE1QyxHQUFBRSxPQUFBLGlCQUFBLFdBQ0FwQixFQUFBaUIsY0FDQWpCLEVBQUFtUixhQUFBcFMsRUFBQXFSLFVBQUFwUSxFQUFBaUIsWUFBQXdLLFNBQ0F6TCxFQUFBcVEsZUFBQSxFQUNBZSxPQUtBLFFBQUFBLEtBQ0FwUixFQUFBcVIsb0JBQ0FDLEtBQ0FwVSxFQUFBMkIsY0FBQWxCLEtBQUEsU0FBQW1CLEdBQ0FDLEVBQUFDLFFBQUFnQixFQUFBaUIsWUFBQXdLLFFBQUEsU0FBQThGLEdBQ0F4UyxFQUFBMFEsT0FBQTNRLEVBQUFqQixLQUFBLFNBQUEyVCxHQUNBLE1BQUFELEdBQUEvUCxNQUFBZ1EsRUFBQWhRLFFBSUF6QyxFQUFBQyxRQUFBRixFQUFBakIsS0FBQSxTQUFBMlQsR0FDQXhSLEVBQUFxUixpQkFBQXJOLE1BQ0E5RSxVQUFBc1MsRUFBQXRTLFVBQ0FDLFNBQUFxUyxFQUFBclMsU0FDQUYsWUFBQXVTLEVBQUF2UyxZQUNBOE8sTUFBQXlELEVBQUFsVSxTQUNBa0UsSUFBQWdRLEVBQUFoUSxRQUlBaVEsRUFBQTFTLEVBQUFxUixVQUFBcFEsRUFBQXFSLG9CQUtBLFFBQUFQLEtBQ0EsV0FBQTlRLEVBQUFpQixZQUFBVSxNQUFBM0IsRUFBQW1SLGFBQUExUCxPQUFBLEVBQUEsRUFDQXJFLEVBQUFWLE1BQUEsNERBQ0FzRCxFQUFBbVIsYUFBQTFQLE9BQUFzSyxFQUNBM08sRUFBQVYsTUFBQSx1Q0FBQXFQLEVBQUEsYUFFQWhOLEVBQUFDLFFBQUFzUyxFQUFBLFNBQUE3TixHQUNBdEMsRUFBQTBFLDJDQUFBN0YsRUFBQWlCLFlBQUFPLElBQUFpQyxFQUFBakMsT0FFQXhCLEVBQUFpQixZQUFBd0ssUUFBQXpMLEVBQUFtUixhQUNBaEcsRUFBQTJGLGtCQUFBOVEsRUFBQWlCLGFBQUF0RCxLQUFBLFdBQ0FxQyxFQUFBcVEsZUFBQSxLQU1BLFFBQUFVLEtBQ0FPLEtBQ0F0UixFQUFBbVIsYUFBQXBTLEVBQUFxUixVQUFBcFEsRUFBQWlCLFlBQUF3SyxTQUNBekwsRUFBQXFSLGlCQUFBdFMsRUFBQXFSLFVBQUFxQixHQUlBLFFBQUFDLEtBQ0EsV0FBQTFSLEVBQUFpQixZQUFBVSxLQUNBZ1EsSUFDQSxZQUFBM1IsRUFBQWlCLFlBQUFVLE1BQ0FpUSxJQUVBNVIsRUFBQXFRLGVBQUEsRUFNQSxRQUFBdUIsS0FDQSxHQUFBOU4sR0FBQSxDQUNBL0UsR0FBQUMsUUFBQWdCLEVBQUFtUixhQUFBLFNBQUExTixHQUNBQSxFQUFBVSxTQUFBTCxJQUNBQSxJQUlBLFFBQUE2TixLQUVBNVMsRUFBQUMsUUFBQWdCLEVBQUFtUixhQUFBLFNBQUExTixHQUNBQSxFQUFBVSxTQUFBLEdBR0EsS0FBQSxHQUFBTCxHQUFBLEVBQUFBLEVBQUE5RCxFQUFBbVIsYUFBQTFQLE9BQUEsRUFBQXFDLElBQ0E5RCxFQUFBbVIsYUFBQXJOLEdBQUFLLFNBQUEsRUFTQSxRQUFBME4sR0FBQXBPLEdBQ0E2TixFQUFBdE4sS0FBQVAsR0FDQXpELEVBQUFxUixpQkFBQXJOLEtBQUFqRixFQUFBMFEsT0FBQXpQLEVBQUFtUixjQUFBM1AsSUFBQWlDLEVBQUFqQyxNQUFBLElBQ0FrUSxJQU9BLFFBQUFJLEdBQUFyTyxHQUNBekQsRUFBQW1SLGFBQUFuTixLQUFBakYsRUFBQTBRLE9BQUF6UCxFQUFBcVIsa0JBQUE3UCxJQUFBaUMsRUFBQWpDLE1BQUEsSUFDQWtRLElBQ0ExUixFQUFBcVEsZUFBQSxFQWhJQSxHQUFBaUIsTUFDQUcsS0FDQTFOLEVBQUEsRUFDQWdJLEVBQUEsS0FDQS9MLEVBQUE3RixJQUNBNkYsR0FBQXFSLG9CQUNBclIsRUFBQW1SLGdCQUNBblIsRUFBQThRLGtCQUFBQSxFQUNBOVEsRUFBQStRLGFBQUFBLEVBQ0EvUSxFQUFBMFIsZUFBQUEsRUFDQTFSLEVBQUE2UixhQUFBQSxFQUNBN1IsRUFBQThSLFVBQUFBLEVBQ0E5UixFQUFBcVEsZUFBQSxFQUVBdlE7QUFsQ0EvRyxRQUNBQyxPQUFBLE9BQ0E0SCxVQUFBLG1CQUFBc1EsTUNMQSx1QkFNQSxTQUFBYSxLQUNBLEdBQUFuUixJQUNBRyxTQUFBLElBQ0F0RixZQUFBLHVDQUNBb1EsU0FBQSxFQUNBN0ssT0FDQUMsWUFBQSxLQUVBNUcsV0FBQXlHLEVBQ0F0RixhQUFBLEtBQ0FxRixrQkFBQSxFQUdBLE9BQUFELEdBSUEsUUFBQUUsR0FBQUksRUFBQWlLLEVBQUFoTyxFQUFBZ0UsRUFBQS9ELEdBa0JBLFFBQUEwQyxLQUNBb0IsRUFBQUUsT0FBQSxpQkFBQSxXQUNBcEIsRUFBQWlCLGNBQ0FqQixFQUFBc0MsY0FBQXRDLEVBQUFpQixZQUFBTyxJQUNBeEIsRUFBQWdTLGNBQUEsRUFDQWhTLEVBQUE4UCxvQkFBQSxFQUNBbUMsSUFDQUMsT0FRQSxRQUFBRCxLQUNBalMsRUFBQWlCLFlBQUFrUixRQUVBMUcsUUFBQTFNLEVBQUE4RixPQUFBN0UsRUFBQWlCLFlBQUF3SyxTQUFBLFdBQUEsTUFHQUEsUUFBQTFNLEVBQUE4RixPQUFBN0UsRUFBQWlCLFlBQUF3SyxTQUFBLFdBQUEsTUFRQSxRQUFBeUcsS0FFQWxTLEVBQUFxTSxvQkFBQSxFQUNBck0sRUFBQXNNLHNCQUFBLEVBQ0FuUCxFQUFBdUIsb0JBRUFzQixFQUFBcU0sbUJBQUF0TixFQUFBa0ksS0FBQWpILEVBQUFpQixZQUFBc0wsUUFBQSxNQUFBcFAsRUFBQVksWUFBQXlELE1BRUF4QixFQUFBc00scUJBQUF2TixFQUFBa0ksS0FBQWpILEVBQUFpQixZQUFBMEssZ0JBQUEsTUFBQXhPLEVBQUFZLFlBQUF5RCxPQUdBeEIsRUFBQXdNLDRCQUFBLEVBQ0F4TSxFQUFBeU0sb0JBQUEsRUFDQTFOLEVBQUFDLFFBQUFnQixFQUFBaUIsWUFBQXdLLFFBQUEsU0FBQWhJLEdBRUF0RyxFQUFBdUIsbUJBQUErRSxFQUFBakMsTUFBQXJFLEVBQUFZLFlBQUF5RCxNQUNBeEIsRUFBQXdNLDRCQUFBLEVBQ0EvSSxFQUFBaUosTUFBQSxlQUNBMU0sRUFBQTJNLGtCQUFBbEosRUFDQXpELEVBQUFpQixZQUFBa1IsTUFBQTFPLEVBQUFVLFNBQUEsR0FBQXVJLE1BQUEsb0JBQ0ExTSxFQUFBaUIsWUFBQXlMLE1BQUEsaUNBS0F2TCxFQUFBSSxpQ0FBQXZCLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBK0QsR0FDQSxHQUFBQSxFQUFBN0QsS0FBQTRELE9BQUEsSUFDQXpCLEVBQUFvUyxnQkFBQTFRLEVBQUE3RCxLQUFBLEdBQ0FtQyxFQUFBeU0sb0JBQUEsRUFHQSxJQUFBek0sRUFBQW9TLGdCQUFBclEsV0FBQSxDQUNBLEdBQUFrTCxHQUFBaEwsU0FBQUMsS0FBQUQsT0FBQWpDLEVBQUFvUyxnQkFBQWpRLFNBQUFDLElBQUFwQyxFQUFBb1MsZ0JBQUFyUSxVQUFBLEtBQUEsTUFBQSxDQUVBa0wsR0FBQSxFQUNBak4sRUFBQXFTLG9CQUFBcEYsRUFFQUEsR0FBQSxHQUNBQyxFQUFBLE1BQUEsTUFPQSxRQUFBb0YsS0FDQXRTLEVBQUF5TSxvQkFBQXpNLEVBQUF3TSw2QkFDQXhNLEVBQUFnUyxjQUFBaFMsRUFBQWdTLGNBSUEsUUFBQXRFLEdBQUE3TCxHQUVBLEdBREE3QixFQUFBOFAsb0JBQUEsRUFDQTlQLEVBQUF5TSxtQkFDQXJQLEVBQUFWLE1BQUEsc0RBQ0EsQ0FDQXNELEVBQUF5TSxvQkFBQSxDQUVBLElBQUEvSyxJQUNBQyxLQUFBM0IsRUFBQWlCLFlBQUFVLEtBQ0FnTSxnQkFBQTNOLEVBQUFpQixZQUFBMk0sS0FDQXRMLGNBQUF0QyxFQUFBc0MsY0FDQXVMLFVBQUEsRUFDQTVJLFNBQUEsRUFDQWxELFVBQUEvQixFQUFBaUIsWUFBQTZNLFlBQ0FsTSxZQUNBQyxLQUFBN0IsRUFBQTJNLGtCQUFBeEksU0FDQTNDLElBQUF4QixFQUFBMk0sa0JBQUFuTCxLQUVBTSxVQUNBRCxLQUFBQSxHQUtBVixHQUFBa0Usc0JBQUEzRCxHQUFBL0QsS0FBQSxXQUVBcUMsRUFBQWdPLHVCQUFBLEtBWUEsUUFBQWQsR0FBQXFGLEVBQUF0TixHQUNBakYsRUFBQXlNLG9CQUFBLENBQ0EsSUFBQS9LLEdBQUExQixFQUFBb1MsZUFFQW5OLElBQ0F2RCxFQUFBdUQsU0FBQSxFQUNBdkQsRUFBQWdCLE9BQUEsY0FHQTFDLEVBQUFvUyxnQkFBQXhRLFdBQUFDLE9BQUEwUSxFQUNBN1EsRUFBQWdCLE9BQUEsYUFFQWhCLEVBQUFnQixPQUFBLFdBSUF2QixFQUFBb0Usd0JBQUE3RCxHQUNBMUIsRUFBQWdPLHVCQUFBLEVBTUEsUUFBQStCLEtBQ0E1RSxFQUFBa0UsZUFBQXJQLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBc0QsR0FDQWpCLEVBQUFpQixZQUFBQSxFQUFBcEQsT0FoS0EsR0FBQW1DLEdBQUE3RixJQUNBNkYsR0FBQXNDLGNBQUEsS0FDQXRDLEVBQUFxTSxvQkFBQSxFQUNBck0sRUFBQXNNLHNCQUFBLEVBQ0F0TSxFQUFBd00sNEJBQUEsRUFDQXhNLEVBQUFvUyxnQkFBQSxLQUNBcFMsRUFBQXlNLG9CQUFBLEVBQ0F6TSxFQUFBMk0sa0JBQUEsS0FDQTNNLEVBQUEwTixnQkFBQUEsRUFDQTFOLEVBQUFrTixrQkFBQUEsRUFDQWxOLEVBQUFxUyxvQkFBQSxLQUNBclMsRUFBQWdTLGNBQUEsRUFDQWhTLEVBQUE4UCxvQkFBQSxFQUNBOVAsRUFBQXNTLGVBQUFBLEVBRUF4UyxJQXNKQW9CLEVBQUE5RSxJQUFBLHlCQUFBLFNBQUEyQyxFQUFBaVIsR0FDQWhRLEVBQUFzQyxnQkFBQTBOLEVBQUExTixnQkFDQWxGLEVBQUE2SyxLQUFBK0gsRUFBQUMsYUFDQUYsd0dBOUxBaFgsUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxZQUFBbVIsTUNKQSx1QkFJQSxTQUFBNUcsR0FBQW5PLEdBd0JBLFFBQUFxUyxHQUFBL00sR0FDQSxNQUFBdEYsR0FBQXpELElBQUEsb0JBQ0FpRyxRQUNBOEMsY0FBQUEsS0FXQSxRQUFBa1EsR0FBQWxULEdBQ0EsTUFBQXRDLEdBQUF6RCxJQUFBLDBCQUNBaUcsUUFDQUYsT0FBQUEsS0FVQSxRQUFBOEwsS0FDQSxNQUFBcE8sR0FBQXpELElBQUEscUJBR0EsUUFBQWtaLEdBQUF4UixHQUNBLE1BQUFqRSxHQUFBVSxLQUFBLDRCQUNBdUQsWUFBQUEsSUFJQSxRQUFBNlAsR0FBQTdQLEdBQ0EsTUFBQWpFLEdBQUFVLEtBQUEsNEJBQ0F1RCxZQUFBQSxJQUlBLFFBQUF5UixHQUFBcFEsR0FDQSxNQUFBdEYsR0FBQThJLE9BQUEsNEJBQ0F0RyxRQUNBOEMsY0FBQUEsS0FLQSxRQUFBNkwsR0FBQTdMLEVBQUFWLEVBQUFFLEdBQ0EsTUFBQTlFLEdBQUFVLEtBQUEsbUNBQ0E0RSxjQUFBQSxFQUNBVixXQUFBQSxFQUNBRSxTQUFBQSxJQUlBLFFBQUFvTixHQUFBNU0sRUFBQW1CLEdBQ0EsTUFBQXpHLEdBQUFVLEtBQUEsK0JBQ0E0RSxjQUFBQSxFQUNBbUIsT0FBQUEsSUFJQSxRQUFBd0wsR0FBQWhPLEVBQUF3QyxHQUNBLE1BQUF6RyxHQUFBVSxLQUFBLHNDQUNBdUQsWUFBQUEsRUFDQXdDLE9BQUFBLElBSUEsUUFBQW1NLEdBQUF0TixFQUFBa04sRUFBQS9ELEdBQ0EsTUFBQXpPLEdBQUFVLEtBQUEsa0NBQ0E0RSxjQUFBQSxFQUNBa04sY0FBQUEsRUFDQS9ELFFBQUFBLElBSUEsUUFBQUQsR0FBQWxKLEVBQUFtQixHQUNBLE1BQUF6RyxHQUFBVSxLQUFBLG1DQUNBNEUsY0FBQUEsRUFDQW1CLE9BQUFBLElBSUEsUUFBQWlJLEdBQUFwSixFQUFBbUIsR0FDQSxNQUFBekcsR0FBQVUsS0FBQSxnQ0FDQTRFLGNBQUFBLEVBQ0FtQixPQUFBQSxJQWxIQSxHQUFBOUUsSUFDQTBRLGVBQUFBLEVBQ0FtRCx1QkFBQUEsRUFDQXBILGdCQUFBQSxFQUNBcUgsa0JBQUFBLEVBQ0EzQixrQkFBQUEsRUFDQTRCLGtCQUFBQSxFQUNBdkUsY0FBQUEsRUFDQWUsdUJBQUFBLEVBQ0FELDhCQUFBQSxFQUNBVyw2QkFBQUEsRUFDQXBFLHFCQUFBQSxFQUNBRSxrQkFBQUEsRUFHQSxPQUFBL00sdUJBbEJBNUYsUUFBQUMsT0FBQSxPQUFBNEYsUUFBQSxzQkFBQXVNLE1DRkEsdUJBSUEsU0FBQXdILEdBQUF6UixFQUFBckgsRUFBQXFHLEVBQUE0TCxFQUFBWCxFQUFBaE8sRUFBQUMsRUFBQStELEdBU0EsUUFBQXJCLEtBQ0FJLEVBQUFvQyxlQUNBdEMsRUFBQXNDLGNBQUFwQyxFQUFBb0MsY0FDQXlOLEtBRUFsVyxFQUFBOEMsR0FBQSwrQkFJQSxRQUFBb1QsS0FDQTVFLEVBQUFrRSxlQUFBclAsRUFBQXNDLGVBQUEzRSxLQUFBLFNBQUFzRCxHQUVBQSxFQUFBcEQsTUFBQWtCLEVBQUFrSSxLQUFBaEcsRUFBQXBELEtBQUEwTyxRQUFBLE1BQUFwUCxFQUFBWSxZQUFBeUQsT0FDQXhCLEVBQUE0UyxTQUFBLEVBRUEzUixFQUFBcEQsS0FBQTROLFFBQUFLLEVBQUEsV0FBQTdLLEVBQUFwRCxLQUFBNE4sUUFBQSxZQUNBekwsRUFBQWlCLFlBQUFBLEVBQUFwRCxNQUVBaEUsRUFBQThDLEdBQUEsaUNBR0F3RSxFQUFBd0Usb0NBQUEzRixFQUFBc0MsZUFBQTNFLEtBQUEsU0FBQTJELEdBQ0F0QixFQUFBc0IsV0FBQUEsRUFBQXpELE9BS0EsUUFBQWdWLEtBQ0ExSCxFQUFBa0UsZUFBQXJQLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBc0QsR0FDQSxHQUFBNlIsR0FBQTdSLEVBQUFwRCxJQUNBaVYsR0FBQXRFLGNBQUF4TyxFQUFBaUIsWUFBQXVOLGNBQ0FyRCxFQUFBMkYsa0JBQUFnQyxLQUtBLFFBQUFDLEtBQ0E1SCxFQUFBa0UsZUFBQXJQLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBc0QsR0FDQSxHQUFBNlIsR0FBQTdSLEVBQUFwRCxJQUNBaVYsR0FBQUUsUUFBQWhULEVBQUFpQixZQUFBK1IsUUFDQTdILEVBQUEyRixrQkFBQWdDLEtBSUEsUUFBQUosS0FDQWpFLE1BQ0FDLE1BQUEsc0JBQ0FDLEtBQUEseUJBQ0FoTixLQUFBLFFBQ0FpTixrQkFBQSxFQUNBQyxrQkFBQSxTQUNBQyxpQkFBQSxZQUNBQyxnQkFBQSxFQUNBQyxlQUFBLEdBQ0EsV0FDQTdELEVBQUF1SCxrQkFBQTFTLEVBQUFzQyxlQUFBM0UsS0FBQSxXQUNBOUQsRUFBQThDLEdBQUEsbUNBaEVBLEdBQUFxRCxHQUFBN0YsSUFDQTZGLEdBQUFzQyxjQUFBLEtBQ0F0QyxFQUFBNlMsK0JBQUFBLEVBQ0E3UyxFQUFBK1MseUJBQUFBLEVBQ0EvUyxFQUFBMFMsa0JBQUFBLEVBRUE1UyxJQWdFQW9CLEVBQUE5RSxJQUFBLHlCQUFBLFNBQUEyQyxFQUFBa1UsR0FDQWpULEVBQUFzQyxnQkFBQTJRLEVBQUEzUSxnQkFDQWxGLEVBQUE2SyxLQUFBZ0wsRUFBQWhELGFBQ0FGLE9BS0E3TyxFQUFBOUUsSUFBQSx5QkFBQSxTQUFBMkMsRUFBQWtVLEdBQ0FqVCxFQUFBc0MsZ0JBQUEyUSxFQUFBM1EsZ0JBQ0FsRixFQUFBNkssS0FBQWdMLEVBQUFoRCxhQUNBcFcsRUFBQThDLEdBQUEscUtBcEZBNUQsUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSx1QkFBQXNZLE1DRkEsdUJBSUEsU0FBQU8sR0FBQWhTLEVBQUFoQixFQUFBckcsRUFBQXNSLEVBQUEvTixFQUFBK0QsR0FTQSxRQUFBckIsS0FDQUksRUFBQW9DLGdCQUNBdEMsRUFBQXNDLGNBQUFwQyxFQUFBb0MsY0FDQXlOLEtBSUEsUUFBQUEsS0FDQTVFLEVBQUFrRSxlQUFBclAsRUFBQXNDLGVBQUEzRSxLQUFBLFNBQUFzRCxHQUNBQSxFQUFBcEQsTUFDQW1DLEVBQUFpQixZQUFBQSxFQUFBcEQsS0FDQSxZQUFBbUMsRUFBQWlCLFlBQUFVLEtBQ0E1QyxFQUFBQyxRQUFBZ0IsRUFBQWlCLFlBQUF3SyxRQUFBLFNBQUFoSSxHQUNBdEMsRUFBQTRFLDhCQUFBL0YsRUFBQXNDLGNBQUFtQixFQUFBakMsS0FBQTdELEtBQUEsU0FBQTZHLEdBQ0FmLEVBQUFlLFFBQUFBLEVBQUEzRyxTQUdBLFdBQUFtQyxFQUFBaUIsWUFBQVUsT0FDQTNCLEVBQUFtUyxRQUVBZ0IsT0FBQSxJQUdBQSxPQUFBLE1BS0F0WixFQUFBOEMsR0FBQSxpQ0FJQXdFLEVBQUF3RSxvQ0FBQTNGLEVBQUFzQyxlQUFBM0UsS0FBQSxTQUFBMkQsR0FDQXRCLEVBQUFzQixXQUFBQSxFQUFBekQsT0F6Q0EsR0FBQW1DLEdBQUE3RixJQUNBNkYsR0FBQXNDLGNBQUEsS0FDQXRDLEVBQUFpQixlQUNBakIsRUFBQW9ULGtCQUNBcFQsRUFBQXNCLGNBRUF4QixJQXdDQW9CLEVBQUE5RSxJQUFBLHlCQUFBLFNBQUEyQyxFQUFBaVIsR0FDQWhRLEVBQUFzQyxnQkFBQTBOLEVBQUExTixnQkFDQWxGLEVBQUE2SyxLQUFBK0gsRUFBQUMsYUFDQUYsT0FLQTdPLEVBQUE5RSxJQUFBLHlCQUFBLFNBQUEyQyxFQUFBaVIsR0FDQWhRLEVBQUFzQyxnQkFBQTBOLEVBQUExTixnQkFDQWxGLEVBQUE2SyxLQUFBK0gsRUFBQUMsYUFDQXBXLEVBQUE4QyxHQUFBLHlJQTVEQTVELFFBQUFDLE9BQUEsT0FBQXFCLFdBQUEsdUJBQUE2WSxNQ0ZBLHVCQUlBLFNBQUFHLEdBQUFuUyxFQUFBckgsRUFBQXFHLEVBQUFpTCxFQUFBL04sR0FPQSxRQUFBMEMsS0FDQUksRUFBQW9DLGdCQUNBdEMsRUFBQXNDLGNBQUFwQyxFQUFBb0MsY0FFQTZJLEVBQUFrRSxlQUFBclAsRUFBQXNDLGVBQUEzRSxLQUFBLFNBQUFzRCxHQUNBQSxFQUFBcEQsS0FDQW1DLEVBQUFpQixZQUFBQSxFQUFBcEQsS0FFQWhFLEVBQUE4QyxHQUFBLGtDQWRBLEdBQUFxRCxHQUFBN0YsSUFDQTZGLEdBQUFzQyxjQUFBLEtBQ0F0QyxFQUFBaUIsWUFBQSxLQUVBbkIsSUFpQkFvQixFQUFBOUUsSUFBQSx5QkFBQSxTQUFBMkMsRUFBQWtVLEdBQ0FqVCxFQUFBc0MsZ0JBQUEyUSxFQUFBM1EsZ0JBQ0FsRixFQUFBNkssS0FBQWdMLEVBQUFoRCxhQUNBcFcsRUFBQThDLEdBQUEscUhBM0JBNUQsUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxrQkFBQWdaLE1DRkEsdUJBSUEsU0FBQUMsR0FBQW5JLEdBTUEsUUFBQXJMLEtBQ0FxTCxFQUFBQyxrQkFBQXpOLEtBQUEsU0FBQTBOLEdBQ0FyTCxFQUFBcUwsYUFBQUEsRUFBQXhOLE9BUEEsR0FBQW1DLEdBQUE3RixJQUNBNkYsR0FBQXFMLGdCQUVBdkwsc0NBTkEvRyxRQUFBQyxPQUFBLE9BQUFxQixXQUFBLG1CQUFBaVosTUNDQSx1QkFJQSxTQUFBQyxHQUFBMVosRUFBQXFELEVBQUFpTyxFQUFBaE8sRUFBQUMsR0F3QkEsUUFBQTBDLEtBQ0E1QyxFQUFBMkIsY0FBQWxCLEtBQUEsU0FBQW1CLEdBQ0FrQixFQUFBcVIsaUJBQUF2UyxFQUFBakIsTUFJQSxLQUFBLEdBQUFpRyxHQUFBQyxFQUFBRCxFQUFBLElBQUFBLEVBQ0FpSSxHQUFBakksQ0FJQSxLQUFBQSxFQUFBLEVBQUFBLEVBQUFDLEVBQUFELElBQ0FELEVBQUFHLEtBQUFGLEdBQUFBLEVBQUEsR0FBQSxFQUFBLEdBU0EsUUFBQWdPLEdBQUFyTyxHQUNBekQsRUFBQW1SLGFBQUFuTixLQUFBakYsRUFBQTBRLE9BQUF6UCxFQUFBcVIsa0JBQUE3UCxJQUFBaUMsRUFBQWpDLE1BQUEsSUFDQWtRLElBT0EsUUFBQUcsR0FBQXBPLEdBQ0F6RCxFQUFBcVIsaUJBQUFyTixLQUFBakYsRUFBQTBRLE9BQUF6UCxFQUFBbVIsY0FBQTNQLElBQUFpQyxFQUFBakMsTUFBQSxJQUNBa1EsSUFNQSxRQUFBQSxLQUNBLFdBQUExUixFQUFBd1QsZUFBQTdSLEtBQ0FnUSxJQUNBLFlBQUEzUixFQUFBd1QsZUFBQTdSLE1BQ0FpUSxJQU9BLFFBQUFBLEtBQ0EsR0FBQTlOLEdBQUEsQ0FDQS9FLEdBQUFDLFFBQUFnQixFQUFBbVIsYUFBQSxTQUFBMU4sR0FDQUEsRUFBQVUsU0FBQUwsSUFDQUEsSUFJQSxRQUFBNk4sS0FFQTVTLEVBQUFDLFFBQUFnQixFQUFBbVIsYUFBQSxTQUFBMU4sR0FDQUEsRUFBQVUsU0FBQSxHQUdBLEtBQUEsR0FBQUwsR0FBQSxFQUFBQSxFQUFBOUQsRUFBQW1SLGFBQUExUCxPQUFBLEVBQUFxQyxJQUNBOUQsRUFBQW1SLGFBQUFyTixHQUFBSyxTQUFBLEVBUUEsUUFBQXNPLEdBQUF4UixHQUNBLEdBQUEsV0FBQUEsRUFBQVUsTUFBQTNCLEVBQUFtUixhQUFBMVAsT0FBQSxFQUFBLEVBQ0FyRSxFQUFBVixNQUFBLGdFQUNBLElBQUFzRCxFQUFBbVIsYUFBQTFQLE9BQUFzSyxFQUNBM08sRUFBQVYsTUFBQSx1Q0FBQXFQLEVBQUEsZ0JBQ0EsQ0FDQWhULFFBQUFpRyxRQUFBZ0IsRUFBQW1SLGFBQUEsU0FBQTFOLEdBQ0EsR0FBQXFPLElBQ0F0USxJQUFBaUMsRUFBQWpDLElBQ0F1TSxNQUFBdEssRUFBQW5HLFNBQ0E0QixVQUFBdUUsRUFBQXZFLFVBQ0FDLFNBQUFzRSxFQUFBdEUsU0FDQUYsWUFBQXdFLEVBQUF4RSxZQUNBa0YsU0FBQVYsRUFBQVUsU0FFQWxELEdBQUF3SyxRQUFBekgsS0FBQThOLEtBRUE3USxFQUFBc0wsU0FDQS9LLElBQUFyRSxFQUFBWSxZQUFBeUQsSUFDQXVNLE1BQUE1USxFQUFBWSxZQUFBVCxTQUNBNEIsVUFBQS9CLEVBQUFZLFlBQUFtQixVQUNBQyxTQUFBaEMsRUFBQVksWUFBQW9CLFNBQ0FGLFlBQUE5QixFQUFBWSxZQUFBa0IsWUFDQXNSLFNBQUEsR0FJQSxLQUFBLEdBQUF6TSxHQUFBLEVBQUFBLEVBQUFELEVBQUFwQyxPQUFBcUMsSUFDQSxHQUFBN0MsRUFBQXdLLFFBQUFoSyxPQUFBb0MsRUFBQUMsR0FBQSxDQUNBN0MsRUFBQW1NLE9BQUF0SixDQUNBLE9BSUFxSCxFQUFBc0gsa0JBQUF4UixHQUFBdEQsS0FBQSxTQUFBNlYsR0FDQTNaLEVBQUE4QyxHQUFBLHFCQUNBMkYsY0FBQWtSLEVBQUEzVixLQUFBMkQsU0FuSUEsR0FBQXFDLE1BQ0FFLEVBQUEsRUFDQWdJLEVBQUEsS0FDQS9MLEVBQUE3RixJQUNBNkYsR0FBQXdULGdCQUNBL0gsV0FDQStDLGVBQUEsRUFDQXdFLFNBQUEsR0FFQWhULEVBQUFxUixvQkFDQXJSLEVBQUFtUixnQkFDQW5SLEVBQUF5UyxrQkFBQUEsRUFDQXpTLEVBQUE4UixVQUFBQSxFQUNBOVIsRUFBQTZSLGFBQUFBLEVBQ0E3UixFQUFBMFIsZUFBQUEsRUFDQTFSLEVBQUF3VCxlQUFBMUYsWUFBQSxFQUNBOU4sRUFBQXlULGtCQUFBLFVBQUEsVUFFQTNULCtGQXJCQS9HLFFBQUFDLE9BQUEsT0FBQXFCLFdBQUEsd0JBQUFrWixNQ0xBLHVCQUlBLFNBQUFHLEdBQUF4UyxFQUFBaUssRUFBQWhLLEVBQUFoRSxFQUFBQyxHQU9BLFFBQUEwQyxLQUNBMFMsSUFHQSxRQUFBQSxLQUNBbUIsS0FDQTNULEVBQUFvUyxnQkFBQSxLQUNBalYsRUFBQXVCLG1CQUNBeU0sRUFBQXFILHVCQUFBclYsRUFBQVksWUFBQXlELEtBQUE3RCxLQUFBLFNBQUEwTixHQUNBckwsRUFBQXFMLGFBQUFBLEVBQUF4TixLQUNBa0IsRUFBQUMsUUFBQWdCLEVBQUFxTCxhQUFBLFNBQUFwSyxHQUNBMFMsRUFBQTNQLEtBQUEvQyxFQUFBTyxLQUNBLFlBQUFQLEVBQUFVLEtBQ0FSLEVBQUFzRSx3Q0FBQXhFLEVBQUFPLElBQUFyRSxFQUFBWSxZQUFBeUQsS0FBQTdELEtBQUEsU0FBQStELEdBQ0FBLEVBQUE3RCxPQUNBb0QsRUFBQW1SLGdCQUFBMVEsRUFBQTdELEtBQ0EsSUFBQW9ELEVBQUFtUixnQkFBQXJRLFlBQ0FkLEVBQUFtUixnQkFBQXBRLFFBQUFDLFNBQUFDLEtBQUFELE9BQUFoQixFQUFBbVIsZ0JBQUFqUSxTQUFBQyxJQUFBbkIsRUFBQW1SLGdCQUFBclEsVUFBQSxLQUFBLE1BQUEsTUFJQSxXQUFBZCxFQUFBVSxNQUNBUixFQUFBSSxpQ0FBQU4sRUFBQU8sS0FBQTdELEtBQUEsU0FBQStELEdBQ0FBLEVBQUE3RCxLQUFBNEQsT0FBQSxJQUNBUixFQUFBbVIsZ0JBQUExUSxFQUFBN0QsS0FBQSxHQUNBLElBQUFvRCxFQUFBbVIsZ0JBQUFyUSxZQUNBZCxFQUFBbVIsZ0JBQUFwUSxRQUFBQyxTQUFBQyxLQUFBRCxPQUFBaEIsRUFBQW1SLGdCQUFBalEsU0FBQUMsSUFBQW5CLEVBQUFtUixnQkFBQXJRLFVBQUEsS0FBQSxNQUFBLFVBaENBLEdBQUE0UixNQUNBM1QsRUFBQTdGLElBQ0E2RixHQUFBb1MsZ0JBQUEsS0FFQXRTLElBdUNBb0IsRUFBQTlFLElBQUEseUJBQUEsU0FBQTJDLEVBQUFpUixHQUNBMkQsRUFBQXZQLFFBQUE0TCxFQUFBMU4sZ0JBQUEsSUFDQWxGLEVBQUE2SyxLQUFBK0gsRUFBQUMsYUFDQXVDLHdHQWpEQXpaLFFBQUFDLE9BQUEsT0FBQXFCLFdBQUEscUJBQUFxWixNQ0ZBLHVCQUlBLFNBQUFFLEdBQUF6VyxFQUFBRCxFQUFBRSxHQWFBLFFBQUEwQyxNQUVBLFFBQUFGLEdBQUE3RSxHQUNBLEdBQUFBLEVBQUF3QyxXQUFBeEMsRUFBQXNGLGdCQUNBakQsRUFBQVYsTUFBQSw4QkFDQSxDQUVBLEdBQUFtWCxJQUNBclMsSUFBQXpHLEVBQUF5RyxJQUVBekcsR0FBQW1FLFlBQUEvQixFQUFBWSxZQUFBbUIsV0FBQW5FLEVBQUFvRSxXQUFBaEMsRUFBQVksWUFBQW9CLFVBQUFwRSxFQUFBa0UsY0FBQTlCLEVBQUFZLFlBQUFrQixjQUNBNFUsRUFBQTNVLFVBQUFuRSxFQUFBbUUsVUFDQTJVLEVBQUExVSxTQUFBcEUsRUFBQW9FLFNBQ0EwVSxFQUFBNVUsWUFBQWxFLEVBQUFrRSxhQUVBbEUsRUFBQXdDLFVBQUF4QyxFQUFBd0MsU0FBQXVXLE9BQUEsSUFDQUQsRUFBQXRXLFNBQUF4QyxFQUFBd0MsVUFFQUwsRUFBQTBDLFdBQUFpVSxHQUFBbFcsS0FBQSxXQUNBUCxFQUFBVSxRQUFBLHFDQUNBa0MsRUFBQStULFNBQUFDLGNBRUEsSUFBQUMsR0FBQWxiLFFBQUFtYixLQUFBL1csRUFBQVksWUFDQWhGLFNBQUFvYixPQUFBRixFQUFBSixHQUNBMVcsRUFBQVksWUFBQWtXLEVBQ0FqVSxFQUFBakYsS0FBQXNGLGdCQUFBTCxFQUFBakYsS0FBQXdDLFNBQUEsTUFyQ0EsR0FBQXlDLEdBQUE3RixJQUNBNkYsR0FBQWpGLE1BQ0F5RyxJQUFBckUsRUFBQVksWUFBQXlELElBQ0F0QyxVQUFBL0IsRUFBQVksWUFBQW1CLFVBQ0FDLFNBQUFoQyxFQUFBWSxZQUFBb0IsU0FDQUYsWUFBQTlCLEVBQUFZLFlBQUFrQixhQUVBZSxFQUFBSixXQUFBQSxFQUNBSSxFQUFBK1QsWUFFQWpVLGdFQWJBL0csUUFBQUMsT0FBQSxPQUFBcUIsV0FBQSxXQUFBdVosTUNGQSx1QkFNQSxTQUFBUSxHQUFBdkwsR0FRQSxRQUFBd0wsR0FBQXJULEVBQUFzVCxFQUFBQyxHQUNBLEdBQUF0TCxHQUFBc0wsRUFBQXRMLFlBQUEsSUFDQUQsRUFBQXVMLEVBQUF2TCxPQUFBLGVBQ0FFLEVBQUFxTCxFQUFBckwsZ0JBQUEsR0FDQWYsR0FBQSxRQUFBcU0sU0FBQSxhQUNBM0wsRUFBQUMsYUFBQXdMLEVBQUF0TCxFQUFBQyxFQUFBQyxHQVpBLEdBQUF0SSxJQUNBRyxTQUFBLElBQ0EwVCxLQUFBSixFQUdBLE9BQUF6VCxrQ0FWQTdILFFBQ0FDLE9BQUEsT0FDQTRILFVBQUEsWUFBQXdULE1DSkEsV0FDQSxZQUtBLFNBQUFNLEtBUUEsUUFBQUwsR0FBQXJULEVBQUEyVCxHQUNBQSxFQUFBQyxNQUFBLFdBQ0FELEVBQUFFLE9BQUFDLFlBQUEsS0FDQUgsRUFBQUksU0FBQUMsWUFBQSxhQVZBLEdBQUFwVSxJQUNBRyxTQUFBLElBQ0EwVCxLQUFBSixFQUdBLE9BQUF6VCxHQVZBN0gsUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxnQkFBQThULE1DSkEsV0FDQSxZQUtBLFNBQUFPLEtBUUEsUUFBQVosR0FBQXJULEVBQUFzVCxHQUNBQSxFQUFBRSxTQUFBLGFBQUFGLEVBQUFFLFNBQUEsYUFDQVUsTUFBQUMsT0FBQWIsR0FBQSxpQkFDQUEsRUFBQUUsU0FBQSxhQUNBVSxNQUFBQyxPQUFBYixHQUFBLGdCQUVBWSxNQUFBQyxPQUFBYixHQUdBWSxNQUFBRSxPQWhCQSxHQUFBeFUsSUFDQUcsU0FBQSxJQUNBMFQsS0FBQUosRUFHQSxPQUFBelQsR0FWQTdILFFBQ0FDLE9BQUEsT0FDQTRILFVBQUEsY0FBQXFVLE1DSkEsV0FDQSxZQUtBLFNBQUFJLEtBUUEsUUFBQWhCLEdBQUFyVCxFQUFBc1QsR0FDQSxHQUFBbE4sR0FBQWtOLEVBQUFnQixXQUFBQyxRQUNBQyxFQUFBbEIsRUFBQVMsU0FBQVAsU0FBQSxXQUNBcE4sR0FBQXFPLE1BQUEsV0FDQW5CLEVBQUFvQixTQUFBLGdCQUdBdE8sRUFBQXVPLEtBQUEsYUFDQUgsR0FBQUEsR0FBQSxJQUFBcE8sRUFBQXdPLE1BQUFuVSxTQUNBNlMsRUFBQXVCLFlBQUEsZ0JBaEJBLEdBQUFqVixJQUNBRyxTQUFBLElBQ0EwVCxLQUFBSixFQUdBLE9BQUF6VCxHQVZBN0gsUUFDQUMsT0FBQSxPQUNBNEgsVUFBQSxTQUFBeVUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICd1aS5ib290c3RyYXAnLFxuICAnbmdBbmltYXRlJyxcbiAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAnbm91aXNsaWRlcicsXG4gICdsb2NhbHl0aWNzLmRpcmVjdGl2ZXMnLFxuICAndGltZXInLFxuICAnTG9jYWxTdG9yYWdlTW9kdWxlJyxcbiAgJ2FuZ3VsYXItc29ydGFibGUtdmlldycsXG4gICdhbmd1bGFyLnZlcnRpbGl6ZSdcbl0pOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0ICc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoY29uZmlndXJhdGlvbik7XG5cbiAgZnVuY3Rpb24gY29uZmlndXJhdGlvbigkaHR0cFByb3ZpZGVyLCAkdWliVG9vbHRpcFByb3ZpZGVyLCAkcVByb3ZpZGVyKSB7XG4gICAgLy9pbml0aWFsaXplIGdldCBpZiBub3QgdGhlcmVcbiAgICBpZiAoISRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQpIHtcbiAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7fTsgICAgXG4gICAgfSAgICBcbiAgICAvL2Rpc2FibGUgSUUgYWpheCByZXF1ZXN0IGNhY2hpbmdcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0WydJZi1Nb2RpZmllZC1TaW5jZSddID0gJ0ZyaSwgMDEgSmFuIDIwMTYgMDU6MDA6MDAgR01UJztcbiAgICAvLyBleHRyYVxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ0NhY2hlLUNvbnRyb2wnXSA9ICduby1jYWNoZSc7XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnUHJhZ21hJ10gPSAnbm8tY2FjaGUnO1xuXG4gICAgJHVpYlRvb2x0aXBQcm92aWRlci5vcHRpb25zKHsgYXBwZW5kVG9Cb2R5OiB0cnVlIH0pO1xuICAgICRxUHJvdmlkZXIuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMoZmFsc2UpO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcblxuICBmdW5jdGlvbiBBcHBDdHJsKCRzdGF0ZSwgbG9jYWxTdG9yYWdlU2VydmljZSkge1xuICAgIHZhciBhcHBDdHJsID0gdGhpcztcbiAgICAvLyBVc2UgdGhpcyBmb3IgU2lkZWJhciBtZW51XG4gICAgYXBwQ3RybC4kc3RhdGUgPSAkc3RhdGU7XG4gICAgLy8gTG9jayB0aGUgc2lkZWJhciBpbiB2aWV3XG4gICAgYXBwQ3RybC5sb2NrU2lkZWJhciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdzaWRlYmFyTG9ja2VkJyk7XG4gICAgYXBwQ3RybC50b2dnbGVTaWRlYmFyTG9ja2VkID0gdG9nZ2xlU2lkZWJhckxvY2tlZDtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXJMb2NrZWQobG9ja2VkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnc2lkZWJhckxvY2tlZCcsIGxvY2tlZCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhjb25maWd1cmVSb3V0ZXMpO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZVJvdXRlcygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XG4gICAgICBzdXBlckFkbWluOiByZXF1aXJlU3VwZXJBZG1pbixcbiAgICAgIGFkbWluOiByZXF1aXJlQWRtaW4sXG4gICAgICB1c2VyOiByZXF1aXJlQXV0aFxuICAgIH07XG5cbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAvLyBmb3IgYW55IHVubWF0Y2hlZCB1cmxcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIud2hlbignL2NvbXBldGl0aW9ucy8nLCAnL2NvbXBldGl0aW9ucycpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vdmlld3MvaG9tZS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucycsIHtcbiAgICAgICAgdXJsOiAnL2NvbXBldGl0aW9ucycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29tcGV0aXRpb25zQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbnMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy9teS1jb21wZXRpdGlvbnMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUNvbXBldGl0aW9uc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvbXktY29tcGV0aXRpb25zLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy52aWV3Jywge1xuICAgICAgICB1cmw6ICcvdmlldy86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBldGl0aW9ucy92aWV3cy9jb21wZXRpdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy5zdGF0cycsIHtcbiAgICAgICAgdXJsOiAnL3N0YXRzLzpjb21wZXRpdGlvbklkJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudEAnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29tcGV0aXRpb25TdGF0c0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY29tcGV0aXRpb24tc3RhdHMuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdjb21wZXRpdGlvbnMuYWRtaW4nLCB7XG4gICAgICAgIHVybDogJy9hZG1pbi86Y29tcGV0aXRpb25JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnRAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uQWRtaW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb25zL3ZpZXdzL2NvbXBldGl0aW9uLWFkbWluLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ2NvbXBldGl0aW9ucy5jcmVhdGUnLCB7XG4gICAgICAgIHVybDogJy9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50QCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDcmVhdGVDb21wZXRpdGlvbkN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wZXRpdGlvbnMvdmlld3MvY3JlYXRlLWNvbXBldGl0aW9uLmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgYXV0aDogcm91dGVSb2xlQ2hlY2tzLnVzZXJcbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3VzZXInLCB7XG4gICAgICAgIHVybDogJy91c2VyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3VzZXJzL3ZpZXdzL3VzZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBhdXRoOiByb3V0ZVJvbGVDaGVja3MudXNlclxuICAgICAgICB9XG4gICAgICB9KS5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvbG9naW4uaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmeScsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3ZlcmlmaWNhdGlvbicsIHtcbiAgICAgICAgdXJsOiAnL3ZlcmlmaWNhdGlvbi86dXNlcklkLzp2ZXJpZmljYXRpb25Ub2tlbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVmVyaWZpY2F0aW9uQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGhlbnRpY2F0aW9uL3ZpZXdzL3ZlcmlmaWNhdGlvbi5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0LXJlcXVlc3QnLCB7XG4gICAgICAgIHVybDogJy9wYXNzd29yZC1yZXNldCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3dvcmRSZXNldEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoZW50aWNhdGlvbi92aWV3cy9wYXNzd29yZC1yZXNldC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkuc3RhdGUoJ3Bhc3N3b3JkLXJlc2V0Jywge1xuICAgICAgICB1cmw6ICcvcGFzc3dvcmQtcmVzZXQvOnVzZXJJZC86dmVyaWZpY2F0aW9uVG9rZW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bhc3N3b3JkUmVzZXRDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aGVudGljYXRpb24vdmlld3MvcGFzc3dvcmQtcmVzZXQuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcmVxdWlyZUFkbWluLiRpbmplY3QgPSBbJ2F1dGhTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7XG4gIH1cblxuICByZXF1aXJlU3VwZXJBZG1pbi4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVTdXBlckFkbWluKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ3N1cGVyLWFkbWluJyk7XG4gIH1cblxuICByZXF1aXJlQXV0aC4kaW5qZWN0ID0gWydhdXRoU2VydmljZSddO1xuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIGF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUoKTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5ydW4oYXBwUnVuKTtcblxuICBmdW5jdGlvbiBhcHBSdW4oJHJvb3RTY29wZSwgJHN0YXRlLCBzaWRlYmFyU2VydmljZSkge1xuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciA9PT0gJ25vdCBhdXRob3JpemVkJykge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgICRzdGF0ZS5wcmV2aW91cyA9IHRvU3RhdGU7XG4gICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gdG9QYXJhbXM7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBhdXRoU2VydmljZSgkc3RhdGUsICRodHRwLCAkcSwgdXNlclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgYXV0aGVudGljYXRlVXNlcjogYXV0aGVudGljYXRlVXNlcixcbiAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIsXG4gICAgICBsb2dvdXQ6IGxvZ291dCxcbiAgICAgIGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGU6IGF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUsXG4gICAgICBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlOiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAndW52ZXJpZmllZCcpIHtcbiAgICAgICAgICBkZmQucmVzb2x2ZSgndW52ZXJpZmllZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICB1c2VyRGF0YTogdXNlckRhdGFcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVhc29uID09PSAnRXJyb3I6IEVtYWlsIGFscmVhZHkgaW4gdXNlJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCBhbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhhdCBlbWFpbCBhZGRyZXNzLicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnBvc3QoJy9sb2dvdXQnLCB7XG4gICAgICAgIGxvZ291dDogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlKHJvbGUpIHtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRob3JpemVkKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkcS5yZWplY3QoJ25vdCBhdXRob3JpemVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgdXNlclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHVzZXJTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRBbGxVc2VyczogZ2V0QWxsVXNlcnMsXG4gICAgICB2ZXJpZnlVc2VyOiB2ZXJpZnlVc2VyLFxuICAgICAgZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluazogZ2VuZXJhdGVQYXNzd29yZFJlc2V0TGluayxcbiAgICAgIHJlc2V0UGFzc3dvcmQ6IHJlc2V0UGFzc3dvcmQsXG4gICAgICB1cGRhdGVVc2VyOiB1cGRhdGVVc2VyXG4gICAgfTtcbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBldmVyeSB1c2VyIGhhcyBhIGRpc3BsYXkgbmFtZVxuICAgICAgICBfLmZvckVhY2godXNlcnMuZGF0YSwgZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICBpZiAoIXVzZXIuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHVzZXIuZGlzcGxheU5hbWUgPSB1c2VyLmZpcnN0TmFtZSArICcgJyArIHVzZXIubGFzdE5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdXNlcnMuZGF0YSA9IF8uc29ydEJ5KHVzZXJzLmRhdGEsICdkaXNwbGF5TmFtZScpO1xuICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2ZXJpZnlVc2VyKHVzZXJJZCwgdmVyaWZpY2F0aW9uVG9rZW4pIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlci92ZXJpZmljYXRpb24nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIHZlcmlmaWNhdGlvblRva2VuOiB2ZXJpZmljYXRpb25Ub2tlblxuICAgICAgICB9XG4gICAgICB9KTsgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlci9wYXNzd29yZC9saW5rJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWVcbiAgICAgICAgfVxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldFBhc3N3b3JkKHVzZXJJZCwgdmVyaWZpY2F0aW9uVG9rZW4sIHBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3VzZXIvcGFzc3dvcmQvcmVzZXQnLCB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICB2ZXJpZmljYXRpb25Ub2tlbjogdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVVc2VyKHVzZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvdXNlcicsIHtcbiAgICAgICAgdXNlcjogdXNlclxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIExvZ2luQ3RybCk7XG5cbiAgZnVuY3Rpb24gTG9naW5DdHJsKCRzdGF0ZSwgYXV0aFNlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmxvZ2luID0gbG9naW47XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICBhdXRoU2VydmljZS5hdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1VzZXJuYW1lIC8gcGFzc3dvcmQgY29tYmluYWl0b24gaW5jb3JyZWN0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgPT09ICd1bnZlcmlmaWVkJykge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1lvdSBtdXN0IHZlcmlmeSB5b3VyIGVtYWlsIGJlZm9yZSB5b3UgY2FuIGxvZ2luJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCRzdGF0ZS5wcmV2aW91cykge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCRzdGF0ZS5wcmV2aW91cywgJHN0YXRlLnByZXZQYXJhbXMpO1xuICAgICAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gbnVsbDtcbiAgICAgICAgICAgICRzdGF0ZS5wcmV2UGFyYW1zID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQYXNzd29yZFJlc2V0Q3RybCcsIFBhc3N3b3JkUmVzZXRDdHJsKTtcblxuICBmdW5jdGlvbiBQYXNzd29yZFJlc2V0Q3RybCgkc3RhdGUsICRzdGF0ZVBhcmFtcywgdXNlclNlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGF1dGhTZXJ2aWNlLCBpZGVudGl0eVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLnVzZXJuYW1lID0gJyc7XG4gICAgdm0udmVyaWZpZWQgPSBmYWxzZTtcbiAgICB2bS5yZXNldFBhc3N3b3JkRm9ybSA9IHt9O1xuICAgIHZtLmdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsgPSBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRMaW5rO1xuICAgIHZtLnJlc2V0UGFzc3dvcmQgPSByZXNldFBhc3N3b3JkO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgIH0gZWxzZSBpZiAoJHN0YXRlUGFyYW1zLnVzZXJJZCAmJiAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pIHtcbiAgICAgICAgdXNlclNlcnZpY2UudmVyaWZ5VXNlcigkc3RhdGVQYXJhbXMudXNlcklkLCAkc3RhdGVQYXJhbXMudmVyaWZpY2F0aW9uVG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpIHtcbiAgICAgIHVzZXJTZXJ2aWNlLmdlbmVyYXRlUGFzc3dvcmRSZXNldExpbmsodXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHRoYXQgZW1haWwgYWRkcmVzcycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uuc3VjY2VzcygnUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgZm9yIGEgcGFzc3dvcmQgcmVzZXQgbGluaycpO1xuICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNldFBhc3N3b3JkKHJlc2V0UGFzc3dvcmRGb3JtKSB7XG4gICAgICBpZiAocmVzZXRQYXNzd29yZEZvcm0ucGFzc3dvcmQgIT09IHJlc2V0UGFzc3dvcmRGb3JtLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnJlc2V0UGFzc3dvcmQoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuLCByZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgICAgYXV0aFNlcnZpY2UuYXV0aGVudGljYXRlVXNlcihyZXNwb25zZS5kYXRhLnVzZXJuYW1lLCByZXNldFBhc3N3b3JkRm9ybS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBSZWdpc3RlckN0cmwpO1xuXG4gIGZ1bmN0aW9uIFJlZ2lzdGVyQ3RybCgkc3RhdGUsIGF1dGhTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge31cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKG5ld1VzZXIpIHtcbiAgICAgIGlmIChuZXdVc2VyLnBhc3N3b3JkICE9PSBuZXdVc2VyLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdQYXNzd29yZHMgZG9uXFwndCBtYXRjaCEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghbmV3VXNlci5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIG5ld1VzZXIuZGlzcGxheU5hbWUgPSBuZXdVc2VyLmZpcnN0TmFtZSArICcgJyArIG5ld1VzZXIubGFzdE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aFNlcnZpY2UuY3JlYXRlVXNlcihuZXdVc2VyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3ZlcmlmeScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVmVyaWZpY2F0aW9uQ3RybCcsIFZlcmlmaWNhdGlvbkN0cmwpO1xuXG4gIGZ1bmN0aW9uIFZlcmlmaWNhdGlvbkN0cmwoJHN0YXRlLCAkc3RhdGVQYXJhbXMsIHVzZXJTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS52ZXJpZmllZCA9IHVuZGVmaW5lZDtcbiAgICB2bS52ZXJpZnlpbmcgPSBmYWxzZTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMudXNlcklkICYmICRzdGF0ZVBhcmFtcy52ZXJpZmljYXRpb25Ub2tlbikge1xuICAgICAgICB2bS52ZXJpZnlpbmcgPSB0cnVlO1xuICAgICAgICB2bS52ZXJpZmllZCA9IG51bGw7XG4gICAgICAgIHVzZXJTZXJ2aWNlLnZlcmlmeVVzZXIoJHN0YXRlUGFyYW1zLnVzZXJJZCwgJHN0YXRlUGFyYW1zLnZlcmlmaWNhdGlvblRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICB2bS52ZXJpZmllZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnZlcmlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUFjdGl2ZUNoYWxsZW5lZ2VzJywgd3BtQWN0aXZlQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIHdwbUFjdGl2ZUNoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9hY3RpdmUtY2hhbGxlbmdlcy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgZ2V0QWN0aXZlQ2hhbGxlbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVDaGFsbGVuZ2VzKCkge1xuICAgICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb24uX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFsbGVuZ2VzLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7ICAgICAgICAgIFxuICAgICAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLmRpc3BsYXlOYW1lID0gJ1RlYW0gJyArIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW07XG4gICAgICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5kaXNwbGF5TmFtZSA9ICdUZWFtICcgKyBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFsbGVuZ2UudGltZUxpbWl0ICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNoYWxsZW5nZS5leHBpcmVzID0gKG1vbWVudCgpLmRpZmYobW9tZW50KGNoYWxsZW5nZS5jcmVhdGVkKS5hZGQoY2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwncycpKSAqIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUNvbXBsZXRlZENoYWxsZW5lZ2VzJywgd3BtQ29tcGxldGVkQ2hhbGxlbmVnZXMpO1xuXG4gIGZ1bmN0aW9uIHdwbUNvbXBsZXRlZENoYWxsZW5lZ2VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogJ0AnLFxuICAgICAgICBhbGxvd0RlbGV0ZTogJz0nLFxuICAgICAgICBjaGFsbGVuZ2VzOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvY29tcGxldGVkLWNoYWxsZW5nZXMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkc3RhdGUsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jaGFsbGVuZ2VzID0gW107XG4gICAgdm0uZGVsZXRlQ2hhbGxlbmdlID0gZGVsZXRlQ2hhbGxlbmdlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY2hhbGxlbmdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodm0uY2hhbGxlbmdlcyAmJiB2bS5jaGFsbGVuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkaXNwbGF5Q29tcGxldGVkQ2hhbGxlbmdlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Q29tcGxldGVkQ2hhbGxlbmdlcygpIHtcbiAgICAgIF8uZm9yRWFjaCh2bS5jaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGNoYWxsZW5nZS5sb3NlciA9IGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJyA/ICdvcHBvbmVudCcgOiAnY2hhbGxlbmdlcic7XG4gICAgICAgIGlmIChjaGFsbGVuZ2UudHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5kaXNwbGF5TmFtZSA9ICdUZWFtICcgKyBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtO1xuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC5kaXNwbGF5TmFtZSA9ICdUZWFtICcgKyBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbTtcbiAgICAgICAgfVxuICAgICAgICBjaGFsbGVuZ2Uud2hlbkNvbXBsZXRlZCA9IG1vbWVudChjaGFsbGVuZ2UuY29tcGxldGVkKS5jYWxlbmRhcihudWxsLCB7XG4gICAgICAgICAgc2FtZURheTogJ1tUb2RheV0nLFxuICAgICAgICAgIG5leHREYXk6ICdbVG9tb3Jyb3ddJyxcbiAgICAgICAgICBuZXh0V2VlazogJ2RkZGQnLFxuICAgICAgICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5XScsXG4gICAgICAgICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCcsXG4gICAgICAgICAgc2FtZUVsc2U6ICdERC9NTS9ZWVlZJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNoYWxsZW5nZShjaGFsbGVuZ2VJZCwgJGluZGV4KSB7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVDaGFsbGVuZ2Uodm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlSWQpLnRoZW4gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uY2hhbGxlbmdlcy5zcGxpY2UoJGluZGV4LCAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMnLCB3cG1QbGF5ZXJPdmVyYWxsUmVzdWx0cyk7XG5cbiAgZnVuY3Rpb24gd3BtUGxheWVyT3ZlcmFsbFJlc3VsdHMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBwbGF5ZXI6ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NoYWxsZW5nZXMvY29tcG9uZW50cy9wbGF5ZXItb3ZlcmFsbC1yZXN1bHRzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ubWF4TGV2ZWxzID0gNztcbiAgICB2bS53aW5zID0ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhc0NoYWxsZW5nZXI6IDAsXG4gICAgICBhc09wcG9uZW50OiAwLFxuICAgICAgYnlGb3JmZWl0OiAwXG4gICAgfTtcbiAgICB2bS5sb3NlcyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0uc3RyZWFrID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIHZhbHVlOiAwXG4gICAgfTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLnBsYXllci5yZXN1bHRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodm0ucGxheWVyKSB7XG4gICAgICAgICAgYXNzaWducGxheWVyc1RvTGV2ZWxzKHZtLnBsYXllcik7XG4gICAgICAgICAgY2FsY3VsYXRlU3RyZWFrKHZtLnBsYXllcik7XG4gICAgICAgICAgY2FsY3VhdGVXaW5BbmRMb3Nlcyh2bS5wbGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc3NpZ25wbGF5ZXJzVG9MZXZlbHMocGxheWVyKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgYWxsIHRoZSBicmVhayBwb2ludHMgdG8gZmlndXJlIG91dCBsZXZlbHNcbiAgICAgIHZhciBicmVha1BvaW50cyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5tYXhMZXZlbHM7IGkrKykge1xuICAgICAgICBicmVha1BvaW50cy5wdXNoKCgoKGkgKiAoaSArIDEpKSAvIDIpKSArIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0IGFsbCBwbGF5ZXJzIHRvIHRoZSBsb3dlc3QgbGV2ZWxcbiAgICAgIHBsYXllci5sZXZlbCA9IGJyZWFrUG9pbnRzLmxlbmd0aDtcbiAgICAgIC8vIE5vdyBjaGVjayB0byBzZWUgaWYgdGhlIHBsYXllciBpcyBhdCBhIGhpZ2hlciBsZXZlbFxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBicmVha1BvaW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocGxheWVyLnBvc2l0aW9uIDwgYnJlYWtQb2ludHNbaiArIDFdKSB7XG4gICAgICAgICAgcGxheWVyLmxldmVsID0gYnJlYWtQb2ludHMuaW5kZXhPZihicmVha1BvaW50c1tqXSkgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlU3RyZWFrKHBsYXllcikge1xuICAgICAgLy8gRmlndXJlIG91dCB0aGUgcGxheWVyJ3MgY3VycmVudCBzdHJlYWtcbiAgICAgIHZhciBzdHJlYWsgPSAwO1xuICAgICAgdmFyIGNvbnRpbnVlU3RyZWFrID0gdHJ1ZTtcbiAgICAgIHZhciBzdHJlYWtUeXBlO1xuICAgICAgXy5mb3JFYWNoKHBsYXllci5yZXN1bHRzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjb250aW51ZVN0cmVhaykge1xuICAgICAgICAgIC8vIFdpbm5pbmcgU3RyZWFrXG4gICAgICAgICAgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkKSB8fFxuICAgICAgICAgICAgKGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcgJiYgY2hhbGxlbmdlLm9wcG9uZW50Ll9pZCA9PT0gcGxheWVyLl9pZCkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCBhbHJlYWR5IG9uIGEgbG9zaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciB3aW5uaW5nIHN0cmVha1xuICAgICAgICAgICAgaWYgKHN0cmVha1R5cGUgIT09ICdsb3NpbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ3dpbm5pbmcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWVTdHJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvLyBMb3NpbmcgU3RyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICgoY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JyAmJiBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQpIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBvbiBhIHdpbm5pbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIGxvc2luZyBzdHJlYWtcbiAgICAgICAgICAgIGlmIChzdHJlYWtUeXBlICE9PSAnd2lubmluZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnbG9zaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlU3RyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZtLnN0cmVhayA9IHtcbiAgICAgICAgICB0eXBlOiBzdHJlYWtUeXBlLFxuICAgICAgICAgIHZhbHVlOiBzdHJlYWtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1YXRlV2luQW5kTG9zZXMocGxheWVyKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHdpbnMgYW5kIGxvc2VzXG4gICAgICB2bS53aW5zLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMudG90YWwgPSB2bS53aW5zLmFzQ2hhbGxlbmdlciArIHZtLndpbnMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ud2lucy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuZm9yZmVpdCAmJiAoKGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50JykpXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLmxvc2VzLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdjaGFsbGVuZ2VyJ1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIocGxheWVyLnJlc3VsdHMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ29wcG9uZW50J1xuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy50b3RhbCA9IHZtLmxvc2VzLmFzQ2hhbGxlbmdlciArIHZtLmxvc2VzLmFzT3Bwb25lbnQ7XG5cbiAgICAgIHZtLmxvc2VzLmJ5Rm9yZmVpdCA9IF8uc2l6ZShfLmZpbHRlcihwbGF5ZXIucmVzdWx0cywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIuX2lkID09PSBwbGF5ZXIuX2lkICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC5faWQgPT09IHBsYXllci5faWQgJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInKSlcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVRlYW1PdmVyYWxsUmVzdWx0cycsIHdwbVRlYW1PdmVyYWxsUmVzdWx0cyk7XG5cbiAgZnVuY3Rpb24gd3BtVGVhbU92ZXJhbGxSZXN1bHRzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgdGVhbTogJz0nLFxuICAgICAgICBjaGFsbGVuZ2VzOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jaGFsbGVuZ2VzL2NvbXBvbmVudHMvdGVhbS1vdmVyYWxsLXJlc3VsdHMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS53aW5zID0ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhc0NoYWxsZW5nZXI6IDAsXG4gICAgICBhc09wcG9uZW50OiAwLFxuICAgICAgYnlGb3JmZWl0OiAwXG4gICAgfTtcbiAgICB2bS5sb3NlcyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgYXNDaGFsbGVuZ2VyOiAwLFxuICAgICAgYXNPcHBvbmVudDogMCxcbiAgICAgIGJ5Rm9yZmVpdDogMFxuICAgIH07XG4gICAgdm0uc3RyZWFrID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIHZhbHVlOiAwXG4gICAgfTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICRzY29wZS4kd2F0Y2goJ3ZtLmNoYWxsZW5nZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jaGFsbGVuZ2VzICYmIHZtLmNoYWxsZW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNhbGN1bGF0ZVN0cmVhayh2bS50ZWFtLCB2bS5jaGFsbGVuZ2VzKTtcbiAgICAgICAgICBjYWxjdWF0ZVdpbkFuZExvc2VzKHZtLnRlYW0sIHZtLmNoYWxsZW5nZXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTdHJlYWsodGVhbSwgY2hhbGxlbmdlcykge1xuICAgICAgLy8gRmlndXJlIG91dCB0aGUgdGVhbSdzIGN1cnJlbnQgc3RyZWFrXG4gICAgICB2YXIgc3RyZWFrID0gMDtcbiAgICAgIHZhciBjb250aW51ZVN0cmVhayA9IHRydWU7XG4gICAgICB2YXIgc3RyZWFrVHlwZTtcbiAgICAgIF8uZm9yRWFjaChjaGFsbGVuZ2VzLCBmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgIGlmIChjb250aW51ZVN0cmVhaykge1xuICAgICAgICAgIC8vIFdpbm5pbmcgU3RyZWFrXG4gICAgICAgICAgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicgJiYgY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSkgfHxcbiAgICAgICAgICAgIChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSBsb3Npbmcgc3RyZWFrIGFuZCAxIHRvIHRoZWlyIHdpbm5pbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ2xvc2luZycpIHtcbiAgICAgICAgICAgICAgc3RyZWFrICs9IDE7XG4gICAgICAgICAgICAgIHN0cmVha1R5cGUgPSAnd2lubmluZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8vIExvc2luZyBTdHJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKChjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnICYmIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0pIHx8XG4gICAgICAgICAgICAoY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInICYmIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhleSBhcmUgbm90IGFscmVhZHkgb24gYSB3aW5uaW5nIHN0cmVhayBhbmQgMSB0byB0aGVpciBsb3Npbmcgc3RyZWFrXG4gICAgICAgICAgICBpZiAoc3RyZWFrVHlwZSAhPT0gJ3dpbm5pbmcnKSB7XG4gICAgICAgICAgICAgIHN0cmVhayArPSAxO1xuICAgICAgICAgICAgICBzdHJlYWtUeXBlID0gJ2xvc2luZyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZVN0cmVhayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2bS5zdHJlYWsgPSB7XG4gICAgICAgICAgdHlwZTogc3RyZWFrVHlwZSxcbiAgICAgICAgICB2YWx1ZTogc3RyZWFrXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWF0ZVdpbkFuZExvc2VzKHRlYW0gLCBjaGFsbGVuZ2VzKSB7XG4gICAgICAvLyBGaWd1cmUgb3V0IHdpbnMgYW5kIGxvc2VzXG4gICAgICB2bS53aW5zLmFzT3Bwb25lbnQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ud2lucy5hc0NoYWxsZW5nZXIgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VyLnRlYW0gPT09IHRlYW0gJiYgY2hhbGxlbmdlLndpbm5lciA9PT0gJ2NoYWxsZW5nZXInXG4gICAgICAgICk7XG4gICAgICB9KSk7XG5cbiAgICAgIHZtLndpbnMudG90YWwgPSB2bS53aW5zLmFzQ2hhbGxlbmdlciArIHZtLndpbnMuYXNPcHBvbmVudDtcblxuICAgICAgdm0ud2lucy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpIHx8XG4gICAgICAgICAgKGNoYWxsZW5nZS5vcHBvbmVudC50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCcpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuXG4gICAgICB2bS5sb3Nlcy5hc09wcG9uZW50ID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcidcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMuYXNDaGFsbGVuZ2VyID0gXy5zaXplKF8uZmlsdGVyKGNoYWxsZW5nZXMsIGZ1bmN0aW9uKGNoYWxsZW5nZSkgeyBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBjaGFsbGVuZ2UuY2hhbGxlbmdlci50ZWFtID09PSB0ZWFtICYmIGNoYWxsZW5nZS53aW5uZXIgPT09ICdvcHBvbmVudCdcbiAgICAgICAgKTtcbiAgICAgIH0pKTtcblxuICAgICAgdm0ubG9zZXMudG90YWwgPSB2bS5sb3Nlcy5hc0NoYWxsZW5nZXIgKyB2bS5sb3Nlcy5hc09wcG9uZW50O1xuXG4gICAgICB2bS5sb3Nlcy5ieUZvcmZlaXQgPSBfLnNpemUoXy5maWx0ZXIoY2hhbGxlbmdlcywgZnVuY3Rpb24oY2hhbGxlbmdlKSB7IFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ICYmICgoY2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnb3Bwb25lbnQnKSB8fFxuICAgICAgICAgIChjaGFsbGVuZ2Uub3Bwb25lbnQudGVhbSA9PT0gdGVhbSAmJiBjaGFsbGVuZ2Uud2lubmVyID09PSAnY2hhbGxlbmdlcicpKVxuICAgICAgICApO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdjaGFsbGVuZ2VzU2VydmljZScsIGNoYWxsZW5nZXNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBjaGFsbGVuZ2VzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY3JlYXRlUHlyYW1pZENoYWxsZW5nZTogY3JlYXRlUHlyYW1pZENoYWxsZW5nZSxcbiAgICAgIGNyZWF0ZVZlcnN1c0NoYWxsZW5nZTogY3JlYXRlVmVyc3VzQ2hhbGxlbmdlLFxuICAgICAgY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlOiBjb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UsXG4gICAgICBjb21wbGV0ZVZlcnN1c0NoYWxsZW5nZTogY29tcGxldGVWZXJzdXNDaGFsbGVuZ2UsXG4gICAgICBnZXRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0Q2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbjogZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24sXG4gICAgICBnZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXI6IGdldEFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcixcbiAgICAgIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uOiBnZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbixcbiAgICAgIGRlbGV0ZUFjdGl2ZUNoYWxsZW5nZUJ5Q29tcGV0aXRpb25CeVBsYXllcjogZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyLFxuICAgICAgZGVsZXRlQ2hhbGxlbmdlOiBkZWxldGVDaGFsbGVuZ2UsXG4gICAgICBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbjogZ2V0UGxheWVyUmVzdWx0c0J5Q29tcGV0aXRpb25cbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZSkge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hhbGxlbmdlcy9weXJhbWlkL2NyZWF0ZScsIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVZlcnN1c0NoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvdmVyc3VzL2NyZWF0ZScsIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlUHlyYW1pZENoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvcHlyYW1pZC9jb21wbGV0ZScsICB7XG4gICAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVZlcnN1c0NoYWxsZW5nZShjaGFsbGVuZ2UpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NoYWxsZW5nZXMvdmVyc3VzL2NvbXBsZXRlJywgIHtcbiAgICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2hhbGxlbmdlcy9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb25JZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL2FjdGl2ZS9jb21wZXRpdGlvbicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uL3BsYXllcicsICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgICAgcGxheWVySWQ6IHBsYXllcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKGNvbXBldGl0aW9uSWQsIGxpbWl0KSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoYWxsZW5nZXMvY29tcGxldGVkL2NvbXBldGl0aW9uJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBsaW1pdDogbGltaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlQWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NoYWxsZW5nZXMvYWN0aXZlL2NvbXBldGl0aW9uL3BsYXllci9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIHBsYXllcklkOiBwbGF5ZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDaGFsbGVuZ2UoY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlSWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvY2hhbGxlbmdlcy9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICAgIGNoYWxsZW5nZUlkOiBjaGFsbGVuZ2VJZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbihjb21wZXRpdGlvbklkLCBwbGF5ZXJJZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jaGFsbGVuZ2VzL3Jlc3VsdHMvY29tcGV0aXRpb24vcGxheWVyJywgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgICBwbGF5ZXJJZDogcGxheWVySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1Gb290ZXInLCB3cG1Gb290ZXIpO1xuXG4gIGZ1bmN0aW9uIHdwbUZvb3RlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL2Zvb3Rlci5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYyhpZGVudGl0eVNlcnZpY2UsIGF1dGhTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1IZWFkZXInLCB3cG1IZWFkZXIpO1xuXG4gIGZ1bmN0aW9uIHdwbUhlYWRlcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnaGVhZGVyQ3RybCcsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tbW9uL2NvbXBvbmVudHMvaGVhZGVyLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgc2lkZWJhclNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgYXV0aFNlcnZpY2UsIGFsZXJ0c1NlcnZpY2UpIHtcbiAgICB2YXIgaGVhZGVyQ3RybCA9IHRoaXM7XG4gICAgaGVhZGVyQ3RybC5pbmRlbnRpdHkgPSBpZGVudGl0eVNlcnZpY2U7XG4gICAgaGVhZGVyQ3RybC5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgaGVhZGVyQ3RybC5zaWRlYmFyU3RhdHVzID0gc2lkZWJhclNlcnZpY2UuZ2V0U2lkZWJhclN0YXR1cygpO1xuICAgIGhlYWRlckN0cmwudG9nZ2xlU2lkZWJhciA9IHRvZ2dsZVNpZGViYXI7XG4gICAgaGVhZGVyQ3RybC5jbGVhckFsZXJ0ID0gY2xlYXJBbGVydDtcbiAgICBoZWFkZXJDdHJsLmNsZWFyQWxsQWxlcnRzID0gY2xlYXJBbGxBbGVydHM7XG4gICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgJHNjb3BlLiR3YXRjaCgnaGVhZGVyQ3RybC5pbmRlbnRpdHkuY3VycmVudFVzZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICBnZXRBY3RpdmVBbGVydHMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzKCkge1xuICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgYWxlcnRzU2VydmljZS5nZXRBY3RpdmVBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChhbGVydHMpIHtcbiAgICAgICAgICBoZWFkZXJDdHJsLmFsZXJ0cyA9IGFsZXJ0cy5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsZXJ0KGNsZWFyQWxlcnQsIGluZGV4KSB7XG4gICAgICBhbGVydHNTZXJ2aWNlLmNsZWFyQWxlcnQoY2xlYXJBbGVydCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckN0cmwuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckFsbEFsZXJ0cygpIHtcbiAgICAgIGFsZXJ0c1NlcnZpY2UuY2xlYXJBbGxBbGVydHNCeVBsYXllcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhZGVyQ3RybC5hbGVydHMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7XG4gICAgICBzaWRlYmFyU2VydmljZS5zZXRTaWRlYmFyU3RhdHVzKCFoZWFkZXJDdHJsLnNpZGViYXJTdGF0dXMubGVmdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOnVwZGF0ZV9hbGVydHMnLCBmdW5jdGlvbiAoZSwgYWxlcnRzKSB7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpICYmIF8uc29tZShhbGVydHMsIFsndXNlcklkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pKSB7XG4gICAgICAgIGdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1TaWRlYmFyJywgd3BtU2lkZWJhcik7XG5cbiAgZnVuY3Rpb24gd3BtU2lkZWJhcigpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAnc2lkZWJhckN0cmwnLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbW1vbi9jb21wb25lbnRzL3NpZGViYXIuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoaWRlbnRpdHlTZXJ2aWNlLCBhdXRoU2VydmljZSwgc2lkZWJhclNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGVudGl0eSA9IGlkZW50aXR5U2VydmljZTtcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXQ7XG4gICAgdm0uc2lkZWJhclN0YXR1cyA9IHNpZGViYXJTZXJ2aWNlLmdldFNpZGViYXJTdGF0dXMoKTtcblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5maWx0ZXIoJ29yZGVyT2JqZWN0QnknLCBvcmRlck9iamVjdEJ5KTtcblxuICBmdW5jdGlvbiBvcmRlck9iamVjdEJ5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGF0dHJpYnV0ZSkge1xuICAgICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KGlucHV0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIGZvciAodmFyIG9iamVjdEtleSBpbiBpbnB1dCkge1xuICAgICAgICBhcnJheS5wdXNoKGlucHV0W29iamVjdEtleV0pO1xuICAgICAgfVxuXG4gICAgICBhcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGEgPSBwYXJzZUludChhW2F0dHJpYnV0ZV0pO1xuICAgICAgICBiID0gcGFyc2VJbnQoYlthdHRyaWJ1dGVdKTtcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdhbGVydHNTZXJ2aWNlJywgYWxlcnRzU2VydmljZSk7XG5cbiAgZnVuY3Rpb24gYWxlcnRzU2VydmljZSgkaHR0cCkge1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXI6IGdldEFjdGl2ZUFsZXJ0c0J5UGxheWVyLFxuICAgICAgY2xlYXJBbGVydDogY2xlYXJBbGVydCxcbiAgICAgIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXI6IGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHVuY2xlYXJlZCBhbGVydHMgZm9yIGEgdXNlciBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYWxlcnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FsZXJ0cy8nLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgYWxlcnRzIGFzIGNsZWFyZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGVydElkIGlkIGZvciB0aGUgYWxlcnRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxlcnQoYWxlcnRJZCkge1xuICAgICAgcmV0dXJuICRodHRwLnB1dCgnL2FwaS9hbGVydC9jbGVhcicsIHtcbiAgICAgICAgYWxlcnRJZDogYWxlcnRJZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFya3MgYWxsIHVudmlld2VkIGFsZXJ0cyBhcyB2aWV3ZWQgZm9yIGEgdXNlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVzZXJJZCBpZCBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWxlcnRzQnlQbGF5ZXIodXNlcklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL2FsZXJ0cy9jbGVhcicsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdpZGVudGl0eVNlcnZpY2UnLCBpZGVudGl0eVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIGlkZW50aXR5U2VydmljZSgkd2luZG93KSB7XG4gICAgdmFyIGN1cnJlbnRVc2VyO1xuICAgIGlmICgkd2luZG93LmJvb3RzdHJhcHBlZFVzZXJPYmplY3QgIT09IG51bGwpIHtcbiAgICAgIGN1cnJlbnRVc2VyID0gJHdpbmRvdy5ib290c3RyYXBwZWRVc2VyT2JqZWN0O1xuICAgIH1cbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgIGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkLFxuICAgICAgaXNBdXRob3JpemVkOiBpc0F1dGhvcml6ZWRcbiAgICB9O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQocm9sZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2Yocm9sZSkgPiAtMTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnbm90aWZ5U2VydmljZScsIG5vdGlmeVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIG5vdGlmeVNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBpbmZvOiBpbmZvLFxuICAgICAgc3VjY2Vzczogc3VjY2VzcyxcbiAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXG4gICAgICBlcnJvcjogZXJyb3IsXG4gICAgICBpbnZlcnNlOiBpbnZlcnNlXG4gICAgfTtcblxuICAgICQubm90aWZ5RGVmYXVsdHMoe1xuICAgICAgbmV3ZXN0X29uX3RvcDogdHJ1ZSxcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB4OiAyMCxcbiAgICAgICAgeTogODVcbiAgICAgIH0sXG4gICAgICBkZWxheTogNTAwMCxcbiAgICB9KTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCB1cmwsIHRhcmdldCkge1xuICAgICAgJC5ub3RpZnkoe1xuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgfSwge1xuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0eXBlOiAnaW5mbydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHVybCwgdGFyZ2V0KSB7XG4gICAgICAkLm5vdGlmeSh7XG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0XG4gICAgICB9LCB7XG4gICAgICAgIC8vIHNldHRpbmdzXG4gICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2RhbmdlcidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludmVyc2UobWVzc2FnZSwgdXJsLCB0YXJnZXQpIHtcbiAgICAgICQubm90aWZ5KHtcbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gc2V0dGluZ3NcbiAgICAgICAgdHlwZTogJ2ludmVyc2UnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnc2Nyb2xsYmFyU2VydmljZScsIHNjcm9sbGJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNjcm9sbGJhclNlcnZpY2UoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBtYWxpaHVTY3JvbGw6IG1hbGlodVNjcm9sbFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcblxuICAgIGZ1bmN0aW9uIG1hbGlodVNjcm9sbChzZWxlY3RvciwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKSB7XG4gICAgICAkKHNlbGVjdG9yKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAgICAgdGhlbWU6IHRoZW1lLFxuICAgICAgICBzY3JvbGxJbmVydGlhOiAxMDAsXG4gICAgICAgIGF4aXM6IHNjcm9sbGF4aXMsXG4gICAgICAgIG1vdXNlV2hlZWw6IHtcbiAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgYXhpczogbW91c2V3aGVlbGF4aXMsXG4gICAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ3NpZGViYXJTZXJ2aWNlJywgc2lkZWJhclNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIHNpZGViYXJTZXJ2aWNlKCkge1xuICAgIHZhciBzaWRlYmFyU3RhdHVzID0ge1xuICAgICAgbGVmdDogZmFsc2UsXG4gICAgICByaWdodDogZmFsc2VcbiAgICB9O1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgZ2V0U2lkZWJhclN0YXR1czogZ2V0U2lkZWJhclN0YXR1cyxcbiAgICAgIHNldFNpZGViYXJTdGF0dXM6IHNldFNpZGViYXJTdGF0dXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRTaWRlYmFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIHNpZGViYXJTdGF0dXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2lkZWJhclN0YXR1cyhzdGF0dXMpIHtcbiAgICAgIHNpZGViYXJTdGF0dXMubGVmdCA9IHN0YXR1cztcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnd2Vic29ja2V0U2VydmljZScsIHdlYnNvY2tldFNlcnZpY2UpLnJ1bihmdW5jdGlvbiAod2Vic29ja2V0U2VydmljZSkge1xuICAgIHdlYnNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICB9KTtcblxuICBmdW5jdGlvbiB3ZWJzb2NrZXRTZXJ2aWNlKCRyb290U2NvcGUsICR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIGNvbm5lY3Rpb247XG4gICAgdmFyIHJldHJ5U2Vjb25kcyA9IFszLCAxMCwgMTAwLCAxMDAwXTtcbiAgICB2YXIgcmV0cnkgPSAwO1xuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgY29ubmVjdDogY29ubmVjdCxcbiAgICAgIHNlbmQ6IHNlbmRcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiB3ZWJzb2NrZXRIb3N0KCkge1xuICAgICAgaWYgKCR3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJldHVybiAnd3NzOi8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd3M6Ly8nICsgJHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgICBjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh3ZWJzb2NrZXRIb3N0KCkpO1xuXG4gICAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHJ5ID0gMDtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSk7XG4gICAgICB9O1xuXG4gICAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZXRyeSA8IHJldHJ5U2Vjb25kcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNsb3NlZC4gUmVjb25uZWN0aW5nLi4uJyk7XG4gICAgICAgICAgJHRpbWVvdXQoY29ubmVjdCwgcmV0cnlTZWNvbmRzW3JldHJ5XSoxMDAwKTtcbiAgICAgICAgICByZXRyeSArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXZpbmcgdXAgb24gV2ViU29ja2V0Jyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VuZCh0b3BpYywgZGF0YSkge1xuICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgICBjb25uZWN0aW9uLnNlbmQoanNvbik7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgSG9tZUN0cmwpO1xuXG4gIGZ1bmN0aW9uIEhvbWVDdHJsKGNvbXBldGl0aW9uc1NlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9ucyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbnMpIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb25zID0gY29tcGV0aXRpb25zLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbUNvbXBldGl0aW9uQ29tcGFjdCcsIHdwbUNvbXBldGl0aW9uQ29tcGFjdCk7XG5cbiAgZnVuY3Rpb24gd3BtQ29tcGV0aXRpb25Db21wYWN0KCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9JyxcblxuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL2NvbXBldGl0aW9uLWNvbXBhY3QuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoKSB7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd3cG1QZW5kaW5nUGxheWVycycsIHdwbVBlbmRpbmdQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiB3cG1QZW5kaW5nUGxheWVycygpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IGN0cmxGdW5jLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9jb21wZXRpdGlvbnMvY29tcG9uZW50cy9wZW5kaW5nLXBsYXllcnMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoY29tcGV0aXRpb25zU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0ucGVuZGluZ1BsYXllcnMgPSBbXTtcbiAgICB2bS5hcHByb3ZlUGVuZGluZ1BsYXllciA9IGFwcHJvdmVQZW5kaW5nUGxheWVyO1xuICAgIHZtLmRlbnlQZW5kaW5nUGxheWVyID0gZGVueVBlbmRpbmdQbGF5ZXI7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIocGxheWVyKSB7XG4gICAgICBwbGF5ZXIucG9zaXRpb24gPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aCArIDE7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmFwcHJvdmVQZW5kaW5nUGxheWVyKHZtLmNvbXBldGl0aW9uLl9pZCwgcGxheWVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZW55UGVuZGluZ1BsYXllcihwbGF5ZXIpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZGVueVBlbmRpbmdQbGF5ZXIodm0uY29tcGV0aXRpb24uX2lkLCBwbGF5ZXIpO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVB5cmFtaWQnLCB3cG1QeXJhbWlkKTtcblxuICBmdW5jdGlvbiB3cG1QeXJhbWlkKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvcHlyYW1pZC5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkaXJlY3RpdmU7XG4gIH1cblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY3RybEZ1bmMoJHNjb3BlLCAkc3RhdGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsICRmaWx0ZXIsIG5vdGlmeVNlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UpIHtcbiAgICB2YXIgbWF4TGV2ZWxzID0gNztcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgdm0ubGV2ZWxzID0gW107XG4gICAgdm0ubnVtYmVyT2ZCbG9ja3MgPSAwO1xuICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB2bS5jdXJyZW50VXNlcklzQWRtaW4gPSBmYWxzZTtcbiAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICB2bS5hY3RpdmVDaGFsbGVuZ2VPcHBvbmVudCA9IG51bGw7XG4gICAgdm0uYXZhaWxhYmxlQ2hhbGxlbmdlcyA9IGZhbHNlO1xuICAgIHZtLmNyZWF0ZUNoYWxsZW5nZSA9IGNyZWF0ZUNoYWxsZW5nZTtcbiAgICB2bS5jb21wbGV0ZUNoYWxsZW5nZSA9IGNvbXBsZXRlQ2hhbGxlbmdlO1xuICAgIHZtLmNoYWxsZW5nZUV4cGlyZWQgPSBjaGFsbGVuZ2VFeHBpcmVkO1xuICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0ge307XG4gICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgdm0uYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uID0gYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uO1xuICAgIHZtLmNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbiA9IGNvbmZpcm1SZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbjtcbiAgICB2bS5wbGF5ZXJDbGljayA9IHBsYXllckNsaWNrO1xuICAgIHZtLm51bWJlck9mUmVhbFBsYXllcnMgPSAwO1xuICAgIHZtLm1heFBsYXllcnMgPSAwO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG51bWJlciBvZiBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsZXZlbHNcbiAgICAgIGZvciAodmFyIGkgPSBtYXhMZXZlbHM7IGkgPiAwOyAtLWkpIHtcbiAgICAgICAgdm0ubWF4UGxheWVycyArPSBpO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25JZCA9IHZtLmNvbXBldGl0aW9uLl9pZDtcbiAgICAgICAgICBvcmRlclBsYXllcnMoKTtcbiAgICAgICAgICBnZXRQbGF5ZXJzU3RhdHVzKCk7XG4gICAgICAgICAgYXNzaWduTGV2ZWxzVG9QbGF5ZXJzKCk7XG4gICAgICAgICAgY2FsY3VsYXRlQ29tcGV0aXRpb25CbG9ja3MoKTtcbiAgICAgICAgICBmaWxsSW5FbXB0eUJsb2NrcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcmRlciB0aGUgcGxheWVycyBieSB0aGUgcG9zaXRpb24gcHJvcGVydHkgb2YgdGhlIHBsYXllcnMgYXJyYXkgaW4gdGhlIGNvbXBldGl0aW9uIG9iamVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9yZGVyUGxheWVycygpIHtcbiAgICAgIHZtLmNvbXBldGl0aW9uLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uY29tcGV0aXRpb24ucGxheWVycywgJ3Bvc2l0aW9uJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlndXJlIG91dCBpZiBlYWNoIHBsYXllciBpcyBhbHJlYWR5IGNoYWxsZW5nZWQgYW5kIHNldCBzb21lIHN0dWZmXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UGxheWVyc1N0YXR1cygpIHtcbiAgICAgIFxuICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pO1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYSBwZW5kaW5nIHJlcXVlc3QgdG8gam9pblxuICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5wZW5kaW5nUGxheWVycywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICB9XG5cbiAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBvbiB0aGlzIGNvbXBldGl0aW9uIGFuZCBzZXQgc29tZSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgcGxheWVyLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkge1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb25JZCwgcGxheWVyLl9pZCkudGhlbihmdW5jdGlvbiAoY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdm0uYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQgPSBjaGFsbGVuZ2UuZGF0YS5jaGFsbGVuZ2VyLl9pZCA9PT0gcGxheWVyLl9pZCA/IGNoYWxsZW5nZS5kYXRhLm9wcG9uZW50IDogY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlcjtcbiAgICAgICAgICAgICAgLy8gQWRkIGEgY2xhc3MgdG8gdGhlIGN1cnJlbnQgdXNlcidzIG9wcG9uZW50J1xuICAgICAgICAgICAgICB2YXIgY3VycmVudE9wcG9uZW50ID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsnX2lkJzogdm0uYWN0aXZlQ2hhbGxlbmdlT3Bwb25lbnQuX2lkfSk7XG4gICAgICAgICAgICAgIGN1cnJlbnRPcHBvbmVudC5jbGFzcyA9IGN1cnJlbnRPcHBvbmVudC5jbGFzcyA/IGN1cnJlbnRPcHBvbmVudC5jbGFzcyArICcgY3VycmVudC1vcHBvbmVudCc6ICdjdXJyZW50LW9wcG9uZW50JztcbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGRvZXNuJ3QgaGF2ZSBhbiBhY3RpdmUgY2hhbGxlbmdlLCBzbyBmaW5kIHRoZSBhdmFpbGFibGUgY2hhbGxlbmdlcydcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpbmRBdmFpbGFibGVDaGFsbGVuZ2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIF8uZm9yRWFjaChjaGFsbGVuZ2VzLmRhdGEsIGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcblxuICAgICAgICAgIHZhciBjaGFsbGVuZ2VyID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5jaGFsbGVuZ2VyLl9pZCB9KTtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlci5jbGFzcyA9PT0gJ2F2YWlsYWJsZScpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZXIuY2xhc3MgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhbGxlbmdlci5jbGFzcyA9IGNoYWxsZW5nZXIuY2xhc3MgPyBjaGFsbGVuZ2VyLmNsYXNzICsgJyB1bmF2YWlsYWJsZSc6ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgY2hhbGxlbmdlci5hdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICBjaGFsbGVuZ2VyLmNoYWxsZW5nZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnY2hhbGxlbmdlcidcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9wcG9uZW50ID0gXy5maW5kKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIHsgJ19pZCc6IGNoYWxsZW5nZS5vcHBvbmVudC5faWQgfSk7XG4gICAgICAgICAgaWYgKG9wcG9uZW50LmNsYXNzID09PSAnYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgb3Bwb25lbnQuY2xhc3MgPSBvcHBvbmVudC5jbGFzcyA/IG9wcG9uZW50LmNsYXNzICsgJyB1bmF2YWlsYWJsZSc6ICd1bmF2YWlsYWJsZSc7XG4gICAgICAgICAgb3Bwb25lbnQuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdvcHBvbmVudCdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gVHJhY2sgd2hlbiB0aGUgY2hhbGxlbmdlIHdpbGwgZXhwaXJlXG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgIHZhciB0aW1lVG9FeHBpcmUgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksICdzJykgKiAtMTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgaGFzIG5vdCB5ZXQgZXhwaXJlZCBkaXNwbGF5IGEgY291bnRkb3duIG9uIHRoZSBvcHBvbmVudFxuICAgICAgICAgICAgaWYgKHRpbWVUb0V4cGlyZSA+IDApIHtcbiAgICAgICAgICAgICAgb3Bwb25lbnQuY2hhbGxlbmdlLmV4cGlyZXMgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBjb21wZXRpdGlvbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIGJ5IGZvcmZlaXRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVRvRXhwaXJlIDw9IDApIHtcbiAgICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSwgb3Bwb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IHdoZXJlIHRvIHN0YXJ0IGVhY2ggbmV3IHJvdyBvbiB0aGUgY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCcmVha1BvaW50cygpIHtcbiAgICAgIHZtLmJyZWFrUG9pbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heExldmVsczsgaSsrKSB7XG4gICAgICAgIHZtLmJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBlYWNoIHBsYXllciBhIGxldmVsIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBicmVhayBwb2ludHNcbiAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hvIG90aGVyIHBsYXllcnMgY2FuIGNoYWxsZW5nZVxuICAgIGZ1bmN0aW9uIGFzc2lnbkxldmVsc1RvUGxheWVycygpIHtcbiAgICAgIHZhciBsZXZlbCA9IDA7XG4gICAgICB2bS5sZXZlbHMgPSBbXTtcbiAgICAgIGNyZWF0ZUJyZWFrUG9pbnRzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmNvbXBldGl0aW9uLnBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZtLmJyZWFrUG9pbnRzLmluZGV4T2YoaSArIDEpID4gLTEpIHtcbiAgICAgICAgICBsZXZlbCArPSAxO1xuICAgICAgICAgIC8vIFNldCB0aGUgbnVtYmVyIG9mIHRvdGFsIGxldmVsc1xuICAgICAgICAgIHZtLmxldmVscy5wdXNoKGxldmVsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHaXZlIGVhY2ggcGxheWVyIGEgbGV2ZWxcbiAgICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVyc1tpXS5sZXZlbCA9IGxldmVsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhvdyBtYW55IHRvdGFsIGJsb2NrcyBpbiB0aGlzIGNvbXBldGl0aW9uXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlQ29tcGV0aXRpb25CbG9ja3MoKSB7XG4gICAgICB2bS5udW1iZXJPZkJsb2NrcyA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gXy5sYXN0KHZtLmxldmVscyk7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdm0ubnVtYmVyT2ZCbG9ja3MgKz0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIG91dCB0aGUgcmVtYWluaW5nIGJsb2NrcyBvZiB0aGUgY29tcGV0aXRpb24gd2l0aCBlbXB0eSBibG9ja3NcbiAgICBmdW5jdGlvbiBmaWxsSW5FbXB0eUJsb2NrcygpIHtcbiAgICAgIHZtLm51bWJlck9mUmVhbFBsYXllcnMgPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSB2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aDsgaSA8IHZtLm51bWJlck9mQmxvY2tzOyBpKyspIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb24ucGxheWVycy5wdXNoKHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdFbXB0eScsXG4gICAgICAgICAgbGFzdE5hbWU6ICdTcG90JyxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ0VtcHR5IFNwb3QnLFxuICAgICAgICAgIHBvc2l0aW9uOiA5OSxcbiAgICAgICAgICBjbGFzczogdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPyAnZW1wdHknOiAnam9pbmFibGUgZW1wdHknXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gV2UgaGF2ZSB0byBnaXZlIGxldmVscyB0byB0aGUgbmV3IGVtcHR5IHNwb3RzXG4gICAgICBhc3NpZ25MZXZlbHNUb1BsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIGFsbCB0aGUgcGxheWVycyB0aGF0IGFyZSBhdmFpbGFibGUgdG8gYmUgY2hhbGxlbmdlZCBieSB0aGlzIHVzZXJcbiAgICBmdW5jdGlvbiBmaW5kQXZhaWxhYmxlQ2hhbGxlbmdlcygpIHtcbiAgICAgIGlmICh2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiAmJiAhdm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgIHZhciBsZXZlbEFib3ZlID0gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgPiAxID8gdm0uY3VycmVudFVzZXJQbGF5ZXIubGV2ZWwgLSAxIDogbnVsbDtcbiAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICBpZiAocGxheWVyLmxldmVsID09PSBsZXZlbEFib3ZlICYmIHBsYXllci5wb3NpdGlvbiAhPT0gOTkgJiYgcGxheWVyLmNsYXNzICE9PSAndW5hdmFpbGFibGUnICYmIHBsYXllci5hdmFpbGFibGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB2bS5hdmFpbGFibGVDaGFsbGVuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHBsYXllci5hdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgcGxheWVyLmNsYXNzID0gJ2F2YWlsYWJsZSc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2hhbGxlbmdlIGJldHdlZW4gdGhlIGN1cnJlbnQgdXNlciBhbmQgdGhlIHBsYXllciBzZWxlY3RlZFxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyLCB0aGUgY2hhbGxlbmdlZCBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UocGxheWVyKSB7XG4gICAgICBpZiAoIXBsYXllci5hdmFpbGFibGUpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5lcnJvcignU29ycnksIHRoYXQgaXMgbm90IGEgdmFsaWQgY2hhbGxlbmdlLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uaGFzQWN0aXZlQ2hhbGxlbmdlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNoYWxsZW5nZSA9IHtcbiAgICAgICAgICB0eXBlOiB2bS5jb21wZXRpdGlvbi50eXBlLFxuICAgICAgICAgIGNvbXBldGl0aW9uTmFtZTogdm0uY29tcGV0aXRpb24ubmFtZSxcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiB2bS5jb21wZXRpdGlvbklkLFxuICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICBmb3JmZWl0OiBmYWxzZSxcbiAgICAgICAgICB0aW1lTGltaXQ6IHZtLmNvbXBldGl0aW9uLmZvcmZlaXREYXlzLFxuICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgIF9pZDogdm0uY3VycmVudFVzZXJQbGF5ZXIuX2lkLFxuICAgICAgICAgICAgZW1haWw6IHZtLmN1cnJlbnRVc2VyUGxheWVyLmVtYWlsLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB2bS5jdXJyZW50VXNlclBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogdm0uY3VycmVudFVzZXJQbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdm0uY3VycmVudFVzZXJQbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wcG9uZW50OiB7XG4gICAgICAgICAgICBfaWQ6IHBsYXllci5faWQsXG4gICAgICAgICAgICBlbWFpbDogcGxheWVyLmVtYWlsLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogcGxheWVyLnBvc2l0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBjb21wZXRpdGlvblxuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jcmVhdGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb25NZW51VG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIGEgY2hhbGxlbmdlIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiBvciBhIGZvcmZlaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSB3aW5uZXJJc0N1cnJlbnRVc2VyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gZm9yZmVpdFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZm9yZmVpdExvc2VyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGxldGVDaGFsbGVuZ2Uod2lubmVySXNDdXJyZW50VXNlciwgZm9yZmVpdCwgZm9yZmVpdExvc2VyKSB7XG4gICAgICB2YXIgcGxheWVyID0gZm9yZmVpdExvc2VyIHx8IHZtLmN1cnJlbnRVc2VyUGxheWVyO1xuICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlQnlDb21wZXRpdGlvbkJ5UGxheWVyKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllci5faWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcblxuICAgICAgICB2YXIgc3dhcFBvc2l0aW9ucyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZm9yZmVpdFxuICAgICAgICBpZiAoZm9yZmVpdCkge1xuICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLmZvcmZlaXQgPSB0cnVlO1xuICAgICAgICAgIGlmIChmb3JmZWl0TG9zZXIuY2hhbGxlbmdlLnBvc2l0aW9uID09PSAnb3Bwb25lbnQnKSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnY2hhbGxlbmdlcic7XG4gICAgICAgICAgICBzd2FwUG9zaXRpb25zID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRmlndXJlIG91dCB3aG8gdGhlIHdpbm5lciB3YXMgdG8gc3RvcmUgaW4gdGhlIGNoYWxsZW5nZSByZWNvcmRcbiAgICAgICAgfSBlbHNlIGlmICh3aW5uZXJJc0N1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgaWYgKGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQpIHtcbiAgICAgICAgICAgIGNoYWxsZW5nZS5kYXRhLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgICAgICAgIHN3YXBQb3NpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFsbGVuZ2UuZGF0YS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEuY2hhbGxlbmdlci5faWQgPT09IHZtLmN1cnJlbnRVc2VyUGxheWVyLl9pZCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ29wcG9uZW50JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbGxlbmdlLmRhdGEud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICAgICAgc3dhcFBvc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3dhcCBwb3NpdGlvbnMgYW5kIHRoZW4gY29tcGxldGUgdGhlIGNoYWxsZW5nZSBvciBqdXN0IGNvbXBsZXRlIHRoZSBjaGFsbGVuZ2VcbiAgICAgICAgLy8gV2Vic29ja2V0IGV2ZW50IHdpbGwgcmVmcmVzaCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgaWYgKHN3YXBQb3NpdGlvbnMpIHtcbiAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnN3YXBQb3NpdGlvbnModm0uY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlLmRhdGEub3Bwb25lbnQsIGNoYWxsZW5nZS5kYXRhLmNoYWxsZW5nZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuY29tcGxldGVQeXJhbWlkQ2hhbGxlbmdlKGNoYWxsZW5nZS5kYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jb21wbGV0ZVB5cmFtaWRDaGFsbGVuZ2UoY2hhbGxlbmdlLmRhdGEpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlbW92aW5nQ3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBjb21wbGV0ZSBjaGFsbG5nZSBmdW5jdGlvbiB3aXRoIHRoZSBmb3JmZWl0aW5nIHBsYXllclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhbGxlbmdlRXhwaXJlZChwbGF5ZXIpIHtcbiAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHBsYXllcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgY3VycmVudCB1c2VyIHRoZSBjb21wZXRpdGlvbiBcbiAgICAgKiBpZiB0aGV5J3JlIG5vdCBhbHJlYWR5IG9uIGl0IGFuZCB0aGVyZSdzIHNwYWNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uKCkge1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBpZiAodm0ubnVtYmVyT2ZSZWFsUGxheWVycyA8IHZtLm1heFBsYXllcnMpIHtcbiAgICAgICAgICB2YXIgcGxheWVyID0ge1xuICAgICAgICAgICAgX2lkOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcG9zaXRpb246IHZtLm51bWJlck9mUmVhbFBsYXllcnMgKyAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoIXZtLmNvbXBldGl0aW9uLnJlc3RyaWN0Sm9pbnMpIHtcbiAgICAgICAgICAgIHN3YWwoe1xuICAgICAgICAgICAgICB0aXRsZTogJ0pvaW4gQ29tcGV0aXRpb24/JyxcbiAgICAgICAgICAgICAgdGV4dDogJ1lvdVxcJ2xsIGJlIGFkZGVkIHRvIHRoZSBib3R0b20nLFxuICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnSm9pbicsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5hZGRQbGF5ZXJUb0NvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQsIHBsYXllcik7XG4gICAgICAgICAgICAgIHN3YWwoJ1dlbGNvbWUgQWJvYXJkIScsICdOb3cgc3RhcnQgZmlnaHRpbmcgeW91ciB3YXkgdG8gdGhlIHRvcCcsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgdGl0bGU6ICdTZW5kIEpvaW4gUmVxdWVzdD8nLFxuICAgICAgICAgICAgICB0ZXh0OiAnVGhpcyBpcyBhIGNsb3NlZCBjb21wZXRpdGlvbiBzbyBhbiBhZG1pbiBtdXN0IGFwcHJvdmUgeW91ciByZXF1ZXN0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1NlbmQgUmVxdWVzdCcsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdOZXZlcm1pbmQnLFxuICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5hZGRQbGF5ZXJUb0NvbXBldGl0aW9uUmVxdWVzdCh2bS5jb21wZXRpdGlvbiwgcGxheWVyKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBzd2FsKCdSZXF1ZXN0IFNlbnQnLCAnWW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCBvbmNlIGFuIGFkbWluIHByb2Nlc3NlcyB0aGUgcmVxdWVzdC4nLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vdGlmeVNlcnZpY2Uud2FybmluZygnU29ycnksIHRoaXMgY29tcGV0aXRpb24gaXMgZnVsbCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ1BsZWFzZSBsb2dpbiB0byBqb2luIGEgY29tcGV0aXRpb24nKTtcbiAgICAgICAgJHN0YXRlLnByZXZpb3VzID0gJ2NvbXBldGl0aW9ucy52aWV3JztcbiAgICAgICAgJHN0YXRlLnByZXZQYXJhbXMgPSB7J2NvbXBldGl0aW9uSWQnOiB2bS5jb21wZXRpdGlvbklkfTtcbiAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgY29uZmlybWF0aW9uIG1vZGFsIGZvciBsZWF2aW5nIHRoZSBjb21wZXRpdGlvbiBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25maXJtUmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKSB7XG4gICAgICBzd2FsKHtcbiAgICAgICAgdGl0bGU6ICdMZWF2ZSBDb21wZXRpdGlvbj8nLFxuICAgICAgICB0ZXh0OiAnWW91IHdpbGwgbG9zZSB5b3VyIHNwb3QgYW5kIGZvcmZlaXQgYW55IGFjdGl2ZSBjaGFsbGVuZ2VzLicsXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWVzLCBsZWF2ZScsXG4gICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogJ2J0bi1kYW5nZXInLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm8sIHN0YXknLFxuICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlQ3VycmVudFVzZXJGcm9tQ29tcGV0aXRpb24oKTtcbiAgICAgICAgc3dhbCgnT0ssIHlvdVxcJ3Igb3V0IScsICdZb3VcXCd2ZSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgY29tcGV0aXRpb24uJywgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGlzIHRvIGVuZm9yY2Ugb3JkZXIgb2Ygb3BlcmF0aW9ucyB3aGVuIHRoZSBwbGF5ZXIgdG8gYmUgcmVtb3ZlZCBoYWQgYW4gYWN0aXZlIGNoYWxsZW5nZVxuICAgIHZhciByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHVzZXIgZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVDdXJyZW50VXNlckZyb21Db21wZXRpdGlvbigpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBsb2dnZWQgaW4gYW5kIGlzIG9uIHRoaXMgY29tcGV0aXRpb25cbiAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24pIHtcbiAgICAgICAgcmVtb3ZpbmdDdXJyZW50VXNlciA9IHRydWU7XG4gICAgICAgIC8vIEZvcmZlaXQgaWYgdGhleSBoYXZlIGFuIGFjdGl2ZSBjaGFsbGVuZ2VcbiAgICAgICAgaWYgKHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSkge1xuICAgICAgICAgIGNvbXBsZXRlQ2hhbGxlbmdlKG51bGwsIHRydWUsIHZtLmN1cnJlbnRVc2VyUGxheWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgcmVtb3ZpbmcgdGhlbSAuLi5cbiAgICAgICAgICB2bS5jdXJyZW50VXNlcklzT25Db21wZXRpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gR2V0IGFuIHVwZGF0ZWQgY29weSBvZiB0aGUgY29tcGV0aXRpb24gaW5jYXNlIGEgZm9yZmVpdCBoYXBwZW5lZFxuICAgICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHVwZGF0ZWQgY29weSBsb2NhbGx5IHNvIGFzIG5vdCB0byBkaXN0cnVwdCB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIC8vIHVudGlsIHRoZSBwbGF5ZXIgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgdmFyIGNvbXBldGl0aW9uID0gcC5kYXRhO1xuXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBzcG90IHRoZXkgd2VyZSBpbiBvbiB0aGUgY29tcGV0aXRpb25cbiAgICAgICAgICAgIHZhciBvcGVuUG9zaXRpb24gPSB2bS5jdXJyZW50VXNlclBsYXllci5wb3NpdGlvbjtcblxuICAgICAgICAgICAgLy8gTW92ZSBhbGwgdGhlIHBsYXllcnMgdXAgMSBwb3NpdGlvbiB0aGF0IHdlcmUgYmVoaW5kIHRoZSByZW1vdmVkIHBsYXllclxuICAgICAgICAgICAgXy5mb3JFYWNoKGNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbiA+PSBvcGVuUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucG9zaXRpb24gLT0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZWQgdGhlIHBsYXllciBmcm9tIHRoZSBjb21wZXRpdGlvblxuICAgICAgICAgICAgdmFyIHJlbW92ZWRQbGF5ZXIgPSBfLnJlbW92ZShjb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwbGF5ZXIuX2lkID09PSB2bS5jdXJyZW50VXNlclBsYXllci5faWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFrZSBhIG5ldyBhcnJheSBvZiBhbGwgdGhlIHBsYXllcnMgc3RpbGwgb24gdGhlIGNvbXBldGl0aW9uXG4gICAgICAgICAgICAvLyBvbmx5IHVzZSB0aGUgcHJvcGVydGllcyB3ZSB3YW50IHRvIHN0b3JlIGluIHRoZSBjb21wZXRpdGlvbiBkb2N1bWVudFxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLm51bWJlck9mUmVhbFBsYXllcnMgLSAxOyArK2kpIHtcbiAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRQbGF5ZXIgPSB7XG4gICAgICAgICAgICAgICAgX2lkOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLl9pZCxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGNvbXBldGl0aW9uLnBsYXllcnNbaV0uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjb21wZXRpdGlvbi5wbGF5ZXJzW2ldLnBvc2l0aW9uXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdXBkYXRlZFBsYXllcnMucHVzaCh1cGRhdGVkUGxheWVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsbCBzZXJ2aWNlIHRvIHJlbW92ZSB0aGUgcGxheWVyXG4gICAgICAgICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCwgcmVtb3ZlZFBsYXllclswXSwgdXBkYXRlZFBsYXllcnMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZW1vdmluZ0N1cnJlbnRVc2VyID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpZ3VyZSBvdXQgd2hhdCB0aGUgYXBwcm9wcmlhdGUgYWN0aW9uIGlzIGJhc2VkIG9uIHRoZSBwbGF5ZXIgY2xpY2tpbmcgYW5kIHRoZSBwbGF5ZXIgYmVpbmcgY2xpY2tlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBsYXllckNsaWNrKHBsYXllcikge1xuICAgICAgLy8gY2xpY2tlZCBvbiBlbXB0eSBzcG90XG4gICAgICBpZiAocGxheWVyLnBvc2l0aW9uID09PSA5OSAmJiAhdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24pIHtcbiAgICAgICAgYWRkQ3VycmVudFVzZXJUb0NvbXBldGl0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwbGF5ZXIuc2hvd0NoYWxsZW5nZU1vZGFsID0gIXBsYXllci5zaG93Q2hhbGxlbmdlTW9kYWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCB0aGUgY29tcGV0aXRpb24gYmVjYXN1ZSBvZiBhbiB1cGRhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoQ29tcGV0aXRpb24oKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd3BtVXBkYXRlQWRtaW5zJywgd3BtVXBkYXRlQWRtaW5zKTtcblxuICBmdW5jdGlvbiB3cG1VcGRhdGVBZG1pbnMoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjb21wZXRpdGlvbjogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdXBkYXRlLWFkbWlucy5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlLCB1c2VyU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlKSB7XG4gICAgdmFyIHJlbW92ZWRBZG1pbnMgPSBbXTtcbiAgICB2YXIgb3JpZ2luYWxBdmFpbGFibGVBZG1pbnMgPSBbXTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IFtdO1xuICAgIHZtLmFkZGVkQWRtaW5zID0gW107XG4gICAgdm0udXNlcklzUHJpbWFyeUFkbWluID0gZmFsc2U7XG4gICAgdm0udXBkYXRlQ29tcGV0aXRpb24gPSB1cGRhdGVDb21wZXRpdGlvbjtcbiAgICB2bS5jYW5jZWxVcGRhdGUgPSBjYW5jZWxVcGRhdGU7XG4gICAgdm0ucmVtb3ZlQWRtaW4gPSByZW1vdmVBZG1pbjtcbiAgICB2bS5hZGRBZG1pbiA9IGFkZEFkbWluO1xuICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24uYWRtaW5zKTtcbiAgICAgICAgICB2bS5kaXNhYmxlU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICB2bS51c2VySXNQcmltYXJ5QWRtaW4gPSBfLmZpbmQodm0uY29tcGV0aXRpb24uYWRtaW5zLCB7J3ByaW1hcnknOiB0cnVlfSkuX2lkID09PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkID8gdHJ1ZTogZmFsc2U7XG4gICAgICAgICAgZ2V0QXZhaWxhYmxlQWRtaW5zKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEF2YWlsYWJsZUFkbWlucygpIHtcbiAgICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IFtdO1xuICAgICAgcmVtb3ZlZEFkbWlucyA9IFtdO1xuICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsVXNlcnMoKS50aGVuKGZ1bmN0aW9uICh1c2Vycykge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGN1cnJlbnQgYWRtaW5zIGZyb20gdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGFkbWluc1xuICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24uYWRtaW5zLCBmdW5jdGlvbiAoY29tcGV0aXRpb25BZG1pbikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVBZG1pbil7XG4gICAgICAgICAgICByZXR1cm4gY29tcGV0aXRpb25BZG1pbi5faWQgPT09IGF2YWlsYWJsZUFkbWluLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIGFkbWluIHJlY29yZFxuICAgICAgICBfLmZvckVhY2godXNlcnMuZGF0YSwgZnVuY3Rpb24gKGF2YWlsYWJsZUFkbWluKSB7XG4gICAgICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVBZG1pbi5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogYXZhaWxhYmxlQWRtaW4ubGFzdE5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogYXZhaWxhYmxlQWRtaW4uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogYXZhaWxhYmxlQWRtaW4udXNlcm5hbWUsXG4gICAgICAgICAgICBfaWQ6IGF2YWlsYWJsZUFkbWluLl9pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvcmlnaW5hbEF2YWlsYWJsZUFkbWlucyA9IF8uY2xvbmVEZWVwKHZtLmF2YWlsYWJsZUFkbWlucyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24uYWRtaW5zID0gdm0uYWRkZWRBZG1pbnM7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLnVwZGF0ZUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICB9KTsgICBcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHJlbW92ZWRBZG1pbnMgPSBbXTtcbiAgICAgIHZtLmFkZGVkQWRtaW5zID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24uYWRtaW5zKTtcbiAgICAgIHZtLmF2YWlsYWJsZUFkbWlucyA9IF8uY2xvbmVEZWVwKG9yaWdpbmFsQXZhaWxhYmxlQWRtaW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGFkbWluIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICogUXVldWUgdXAgdGhlIGFkbWlucyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBhZG1pblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkbWluKSB7XG4gICAgICByZW1vdmVkQWRtaW5zLnB1c2goYWRtaW4pO1xuICAgICAgdm0uYXZhaWxhYmxlQWRtaW5zLnB1c2goXy5yZW1vdmUodm0uYWRkZWRBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFkbWluIHRvIHRoZSBjb21wZXRpdGlvblxuICAgICAqIEBwYXJhbSAge29iamVjdH0gYWRtaW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRBZG1pbihhZG1pbikge1xuICAgICAgdm0uYWRkZWRBZG1pbnMucHVzaChfLnJlbW92ZSh2bS5hdmFpbGFibGVBZG1pbnMsIHtfaWQ6IGFkbWluLl9pZH0pWzBdKTtcbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVVwZGF0ZVBsYXllcnMnLCB3cG1VcGRhdGVQbGF5ZXJzKTtcblxuICBmdW5jdGlvbiB3cG1VcGRhdGVQbGF5ZXJzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogY3RybEZ1bmMsXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY29tcGV0aXRpb246ICc9J1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2NvbXBldGl0aW9ucy9jb21wb25lbnRzL3VwZGF0ZS1wbGF5ZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGN0cmxGdW5jKCRzY29wZSwgJGZpbHRlciwgY29tcGV0aXRpb25zU2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIHVzZXJTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlKSB7XG4gICAgdmFyIHJlbW92ZWRQbGF5ZXJzID0gW107XG4gICAgdmFyIG9yaWdpbmFsQXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciBtYXhQbGF5ZXJzID0gbnVsbDtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBbXTtcbiAgICB2bS5hZGRlZFBsYXllcnMgPSBbXTtcbiAgICB2bS51cGRhdGVDb21wZXRpdGlvbiA9IHVwZGF0ZUNvbXBldGl0aW9uO1xuICAgIHZtLmNhbmNlbFVwZGF0ZSA9IGNhbmNlbFVwZGF0ZTtcbiAgICB2bS5yZW9yZGVyUGxheWVycyA9IHJlb3JkZXJQbGF5ZXJzO1xuICAgIHZtLnJlbW92ZVBsYXllciA9IHJlbW92ZVBsYXllcjtcbiAgICB2bS5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG4gICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBsYXllcnMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgZm9yICh2YXIgaSA9IG1heExldmVsczsgaSA+IDA7IC0taSkge1xuICAgICAgICBtYXhQbGF5ZXJzICs9IGk7XG4gICAgICB9XG4gICAgICAkc2NvcGUuJHdhdGNoKCd2bS5jb21wZXRpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZtLmNvbXBldGl0aW9uKSB7XG4gICAgICAgICAgdm0uYWRkZWRQbGF5ZXJzID0gXy5jbG9uZURlZXAodm0uY29tcGV0aXRpb24ucGxheWVycyk7XG4gICAgICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IHRydWU7XG4gICAgICAgICAgZ2V0QXZhaWxhYmxlUGxheWVycygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBdmFpbGFibGVQbGF5ZXJzKCkge1xuICAgICAgdm0uYXZhaWxhYmxlUGxheWVycyA9IFtdO1xuICAgICAgcmVtb3ZlZFBsYXllcnMgPSBbXTtcbiAgICAgIHVzZXJTZXJ2aWNlLmdldEFsbFVzZXJzKCkudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgXy5mb3JFYWNoKHZtLmNvbXBldGl0aW9uLnBsYXllcnMsIGZ1bmN0aW9uIChjb21wZXRpdGlvblBsYXllcikge1xuICAgICAgICAgIF8ucmVtb3ZlKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBldGl0aW9uUGxheWVyLl9pZCA9PT0gYXZhaWxhYmxlUGxheWVyLl9pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgdXNlIGNlcnRhaW4gcHJvcGVydGllcyBvZiB0aGUgdXNlciBmb3IgdGhlIHBsYXllciByZWNvcmRcbiAgICAgICAgXy5mb3JFYWNoKHVzZXJzLmRhdGEsIGZ1bmN0aW9uIChhdmFpbGFibGVQbGF5ZXIpIHtcbiAgICAgICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhdmFpbGFibGVQbGF5ZXIuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGF2YWlsYWJsZVBsYXllci5sYXN0TmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBhdmFpbGFibGVQbGF5ZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBlbWFpbDogYXZhaWxhYmxlUGxheWVyLnVzZXJuYW1lLFxuICAgICAgICAgICAgX2lkOiBhdmFpbGFibGVQbGF5ZXIuX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgb3JpZ2luYWxBdmFpbGFibGVQbGF5ZXJzID0gXy5jbG9uZURlZXAodm0uYXZhaWxhYmxlUGxheWVycyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnICYmIHZtLmFkZGVkUGxheWVycy5sZW5ndGggJSAyID4gMCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIFZlcnN1cyBjb21wZXRpdGlvbiBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgcGxheWVycycpO1xuICAgICAgfSBlbHNlIGlmICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoID4gbWF4UGxheWVycykge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmVycm9yKCdBIGNvbXBldGl0aW9uIGNhbiBoYXZlIGEgbWF4aW11bSBvZiAnICsgbWF4UGxheWVycyArICcgcGxheWVycycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXy5mb3JFYWNoKHJlbW92ZWRQbGF5ZXJzLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5kZWxldGVBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIodm0uY29tcGV0aXRpb24uX2lkLCBwbGF5ZXIuX2lkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uLnBsYXllcnMgPSB2bS5hZGRlZFBsYXllcnM7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odm0uY29tcGV0aXRpb24pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgdGhlIHVwZGF0ZSBhbmQgcHV0IGV2ZXJ5dGhpbmcgYmFjayB0byB0aGUgb3JnaW5hbFxuICAgIGZ1bmN0aW9uIGNhbmNlbFVwZGF0ZSgpIHtcbiAgICAgIHJlbW92ZWRQbGF5ZXJzID0gW107XG4gICAgICB2bS5hZGRlZFBsYXllcnMgPSBfLmNsb25lRGVlcCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzKTtcbiAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSBfLmNsb25lRGVlcChvcmlnaW5hbEF2YWlsYWJsZVBsYXllcnMpO1xuICAgIH1cblxuICAgIC8vIFJlb3JkZXIgdGhlIHBsYXllcnMgYmFzZWQgb24gdGhlIGRyYWctZHJvcFxuICAgIGZ1bmN0aW9uIHJlb3JkZXJQbGF5ZXJzKCkge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICd2ZXJzdXMnKSB7XG4gICAgICAgIHJlb3JkZXJWZXJzdXNQbGF5ZXJzKCk7XG4gICAgICB9IGVsc2UgaWYgKHZtLmNvbXBldGl0aW9uLnR5cGUgPT09ICdweXJhbWlkJykge1xuICAgICAgICByZW9yZGVyUHlyYW1pZFBsYXllcnMoKTtcbiAgICAgIH1cbiAgICAgIHZtLmRpc2FibGVTdWJtaXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIHRoZSBwbGF5ZXJzIGJhc2VkIG9uIHRoZSBkcmFnLWRyb3BcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUHlyYW1pZFBsYXllcnMoKSB7XG4gICAgICB2YXIgaSA9IDE7XG4gICAgICBfLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIHBsYXllci5wb3NpdGlvbiA9IGk7XG4gICAgICAgICsraTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlb3JkZXJWZXJzdXNQbGF5ZXJzKCkge1xuICAgICAgLy8gU2V0IGFsbCBwbGF5ZXJzIHRvIHRlYW0gMlxuICAgICAgXy5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSAyO1xuICAgICAgfSk7XG4gICAgICAvLyBTZXQgdGhlIGZpcnN0IGhhbGYgb2YgdGhlIHBsYXllcnMgdG8gdGVhbSAxXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICh2bS5hZGRlZFBsYXllcnMubGVuZ3RoIC8gMik7IGkrKykge1xuICAgICAgICB2bS5hZGRlZFBsYXllcnNbaV0ucG9zaXRpb24gPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwbGF5ZXIgZnJvbSB0aGUgY29tcGV0aXRpb25cbiAgICAgKiBRdWV1ZSB1cCB0aGUgcGxheWVycyB0byBiZSByZW1vdmVkIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBkaXNwbGF5XG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICByZW1vdmVkUGxheWVycy5wdXNoKHBsYXllcik7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGxheWVyIHRvIHRoZSBuZXcgY29tcGV0aXRpb25cbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHBsYXllclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFBsYXllcihwbGF5ZXIpIHtcbiAgICAgIHZtLmFkZGVkUGxheWVycy5wdXNoKF8ucmVtb3ZlKHZtLmF2YWlsYWJsZVBsYXllcnMsIHtfaWQ6IHBsYXllci5faWR9KVswXSk7XG4gICAgICByZW9yZGVyUGxheWVycygpO1xuICAgICAgdm0uZGlzYWJsZVN1Ym1pdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3dwbVZlcnN1cycsIHdwbVZlcnN1cyk7XG5cbiAgZnVuY3Rpb24gd3BtVmVyc3VzKCkge1xuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvY29tcGV0aXRpb25zL2NvbXBvbmVudHMvdmVyc3VzLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbXBldGl0aW9uOiAnPSdcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBjdHJsRnVuYyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgfVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjdHJsRnVuYygkc2NvcGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VySXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24gPSBmYWxzZTtcbiAgICB2bS5hY3RpdmVDaGFsbGVuZ2UgPSBudWxsO1xuICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IGZhbHNlO1xuICAgIHZtLmN1cnJlbnRVc2VyUGxheWVyID0gbnVsbDtcbiAgICB2bS5jcmVhdGVDaGFsbGVuZ2UgPSBjcmVhdGVDaGFsbGVuZ2U7XG4gICAgdm0uY29tcGxldGVDaGFsbGVuZ2UgPSBjb21wbGV0ZUNoYWxsZW5nZTtcbiAgICB2bS5jaGFsbGVuZ2VFeHBpcmVUaW1lID0gbnVsbDtcbiAgICB2bS5zaG93Q29udHJvbHMgPSBmYWxzZTtcbiAgICB2bS5zaG93Q2hhbGxlbmdlTW9kYWwgPSBmYWxzZTtcbiAgICB2bS50b2dnbGVDb250cm9scyA9IHRvZ2dsZUNvbnRyb2xzO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY29tcGV0aXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2bS5jb21wZXRpdGlvbikge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSB2bS5jb21wZXRpdGlvbi5faWQ7XG4gICAgICAgICAgdm0uc2hvd0NvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgdm0uc2hvd0NoYWxsZW5nZU1vZGFsID0gZmFsc2U7XG4gICAgICAgICAgZ3JvdXBQbGF5ZXJzKCk7XG4gICAgICAgICAgZ2V0Q3VycmVudFVzZXJTdGF0dXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR3JvdXAgcGxheWVycyBieSB0ZWFtXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3JvdXBQbGF5ZXJzKCkge1xuICAgICAgdm0uY29tcGV0aXRpb24udGVhbXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwbGF5ZXJzOiBfLmZpbHRlcih2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBbJ3Bvc2l0aW9uJywgMV0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGxheWVyczogXy5maWx0ZXIodm0uY29tcGV0aXRpb24ucGxheWVycywgWydwb3NpdGlvbicsIDJdKSxcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWd1cmUgb3V0IGlmIGVhY2ggcGxheWVyIGlzIGFscmVhZHkgY2hhbGxlbmdlZCBhbmQgc2V0IHNvbWUgc3R1ZmZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50VXNlclN0YXR1cygpIHtcbiAgICAgIFxuICAgICAgdm0uY3VycmVudFVzZXJJc0FkbWluID0gZmFsc2U7XG4gICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgaWYgKGlkZW50aXR5U2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIHZtLmN1cnJlbnRVc2VySXNBZG1pbiA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5hZG1pbnMsIFsnX2lkJywgaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZF0pO1xuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYSBwZW5kaW5nIHJlcXVlc3QgdG8gam9pblxuICAgICAgICB2bS5jdXJyZW50VXNlcklzUGVuZGluZyA9IF8uc29tZSh2bS5jb21wZXRpdGlvbi5wZW5kaW5nUGxheWVycywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSk7XG4gICAgICB9XG5cbiAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gZmFsc2U7XG4gICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICAgIF8uZm9yRWFjaCh2bS5jb21wZXRpdGlvbi5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBvbiB0aGlzIGNvbXBldGl0aW9uIGFuZCBzZXQgc29tZSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChpZGVudGl0eVNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgcGxheWVyLl9pZCA9PT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLl9pZCkge1xuICAgICAgICAgIHZtLmN1cnJlbnRVc2VySXNPbkNvbXBldGl0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBwbGF5ZXIuY2xhc3MgPSAnY3VycmVudC11c2VyJztcbiAgICAgICAgICB2bS5jdXJyZW50VXNlclBsYXllciA9IHBsYXllcjtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbi50ZWFtc1twbGF5ZXIucG9zaXRpb24gLSAxXS5jbGFzcyA9ICdjdXJyZW50LXVzZXItdGVhbSc7XG4gICAgICAgICAgdm0uY29tcGV0aXRpb24uY2xhc3MgPSAnY3VycmVudC11c2VyLW9uLWNvbXBldGl0aW9uJztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBjaGFsbGVuZ2UgZm9yIHRoaXMgY29tcGV0aXRpb25cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldEFjdGl2ZUNoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZSkge1xuICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhWzBdO1xuICAgICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG5cbiAgICAgICAgICAvLyBUcmFjayB3aGVuIHRoZSBjaGFsbGVuZ2Ugd2lsbCBleHBpcmVcbiAgICAgICAgICBpZiAodm0uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIHRpbWVUb0V4cGlyZSA9IG1vbWVudCgpLmRpZmYobW9tZW50KHZtLmFjdGl2ZUNoYWxsZW5nZS5jcmVhdGVkKS5hZGQodm0uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCwgJ2QnKSwgJ3MnKSAqIC0xO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNoYWxsZW5nZSBoYXMgbm90IHlldCBleHBpcmVkIGRpc3BsYXkgYSBjb3VudGRvd25cbiAgICAgICAgICAgIGlmICh0aW1lVG9FeHBpcmUgPiAwKSB7XG4gICAgICAgICAgICAgIHZtLmNoYWxsZW5nZUV4cGlyZVRpbWUgPSB0aW1lVG9FeHBpcmU7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFsbGVuZ2UgZXhwaXJlZCB3aGlsZSBubyBvbmUgd2FzIHZpZXdpbmcgdGhpcyBjb21wZXRpdGlvbiBjb21wbGV0ZSB0aGUgY2hhbGxlbmdlIGJ5IGZvcmZlaXRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVRvRXhwaXJlIDw9IDApIHtcbiAgICAgICAgICAgICAgY29tcGxldGVDaGFsbGVuZ2UobnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDb250cm9scygpIHtcbiAgICAgIGlmICh2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgJiYgdm0uY3VycmVudFVzZXJJc09uQ29tcGV0aXRpb24pIHtcbiAgICAgICAgdm0uc2hvd0NvbnRyb2xzID0gIXZtLnNob3dDb250cm9scztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UodGVhbSkge1xuICAgICAgdm0uc2hvd0NoYWxsZW5nZU1vZGFsID0gZmFsc2U7XG4gICAgICBpZiAodm0uaGFzQWN0aXZlQ2hhbGxlbmdlKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1NvcnJ5LCB5b3UgYXJlIGFscmVhZHkgaW4gYW4gYWN0aXZlIGNoYWxsZW5nZS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmhhc0FjdGl2ZUNoYWxsZW5nZSA9IHRydWU7XG4gICAgICAgIC8vIENsb3NlIHRoZSBjaGFsbGVuZ2UgbW9kYWxcbiAgICAgICAgdmFyIGNoYWxsZW5nZSA9IHtcbiAgICAgICAgICB0eXBlOiB2bS5jb21wZXRpdGlvbi50eXBlLFxuICAgICAgICAgIGNvbXBldGl0aW9uTmFtZTogdm0uY29tcGV0aXRpb24ubmFtZSxcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiB2bS5jb21wZXRpdGlvbklkLFxuICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICBmb3JmZWl0OiBmYWxzZSxcbiAgICAgICAgICB0aW1lTGltaXQ6IHZtLmNvbXBldGl0aW9uLmZvcmZlaXREYXlzLFxuICAgICAgICAgIGNoYWxsZW5nZXI6IHtcbiAgICAgICAgICAgIHRlYW06IHZtLmN1cnJlbnRVc2VyUGxheWVyLnBvc2l0aW9uLFxuICAgICAgICAgICAgX2lkOiB2bS5jdXJyZW50VXNlclBsYXllci5faWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wcG9uZW50OiB7XG4gICAgICAgICAgICB0ZWFtOiB0ZWFtXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGNoYWxsZW5nZVxuICAgICAgICAvLyBXZWJzb2NrZXQgZXZlbnQgd2lsbCByZWZyZXNoIHRoZSBjb21wZXRpdGlvblxuICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5jcmVhdGVWZXJzdXNDaGFsbGVuZ2UoY2hhbGxlbmdlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBDbG9zZSB0aGUgY29tcGV0aXRpb24gc2lkZWJhclxuICAgICAgICAgIHZtLmNvbXBldGl0aW9uTWVudVRvZ2dsZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wbGV0ZSBhIGNoYWxsZW5nZSBieSBhIHVzZXIgaW50ZXJhY3Rpb24gb3IgYSBmb3JmZWl0XG4gICAgICogXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB3aW5uaW5nVGVhbVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IGZvcmZlaXRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGZvcmZlaXRMb3NlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2hhbGxlbmdlKHdpbm5pbmdUZWFtLCBmb3JmZWl0KSB7XG4gICAgICB2bS5oYXNBY3RpdmVDaGFsbGVuZ2UgPSBmYWxzZTtcbiAgICAgIHZhciBjaGFsbGVuZ2UgPSB2bS5hY3RpdmVDaGFsbGVuZ2U7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBhIGZvcmZlaXRcbiAgICAgIGlmIChmb3JmZWl0KSB7XG4gICAgICAgIGNoYWxsZW5nZS5mb3JmZWl0ID0gdHJ1ZTtcbiAgICAgICAgY2hhbGxlbmdlLndpbm5lciA9ICdjaGFsbGVuZ2VyJztcbiAgICAgIC8vIEZpZ3VyZSBvdXQgd2hvIHRoZSB3aW5uZXIgd2FzIHRvIHN0b3JlIGluIHRoZSBjaGFsbGVuZ2UgcmVjb3JkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodm0uYWN0aXZlQ2hhbGxlbmdlLmNoYWxsZW5nZXIudGVhbSA9PT0gd2lubmluZ1RlYW0pIHtcbiAgICAgICAgICBjaGFsbGVuZ2Uud2lubmVyID0gJ2NoYWxsZW5nZXInO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYWxsZW5nZS53aW5uZXIgPSAnb3Bwb25lbnQnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmNvbXBsZXRlVmVyc3VzQ2hhbGxlbmdlKGNoYWxsZW5nZSk7XG4gICAgICB2bS5jb21wZXRpdGlvbk1lbnVUb2dnbGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoIHRoZSBjb21wZXRpdGlvbiBiZWNhc3VlIG9mIGFuIHVwZGF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlZnJlc2hDb21wZXRpdGlvbigpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgdm0uY29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2F0Y2ggZm9yIHdlYnNvY2tldCBldmVudFxuICAgICRzY29wZS4kb24oJ3dzOmNvbXBldGl0aW9uX3VwZGF0ZWQnLCBmdW5jdGlvbiAoXywgY2hhbGxlbmdlRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNoYWxsZW5nZURldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY2hhbGxlbmdlRGV0YWlscy5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJlZnJlc2hDb21wZXRpdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2NvbXBldGl0aW9uc1NlcnZpY2UnLCBjb21wZXRpdGlvbnNTZXJ2aWNlKTtcblxuICBmdW5jdGlvbiBjb21wZXRpdGlvbnNTZXJ2aWNlKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBnZXRDb21wZXRpdGlvbjogZ2V0Q29tcGV0aXRpb24sXG4gICAgICBnZXRDb21wZXRpdGlvbnNGb3JVc2VyOiBnZXRDb21wZXRpdGlvbnNGb3JVc2VyLFxuICAgICAgZ2V0Q29tcGV0aXRpb25zOiBnZXRDb21wZXRpdGlvbnMsXG4gICAgICBjcmVhdGVDb21wZXRpdGlvbjogY3JlYXRlQ29tcGV0aXRpb24sXG4gICAgICB1cGRhdGVDb21wZXRpdGlvbjogdXBkYXRlQ29tcGV0aXRpb24sXG4gICAgICBkZWxldGVDb21wZXRpdGlvbjogZGVsZXRlQ29tcGV0aXRpb24sXG4gICAgICBzd2FwUG9zaXRpb25zOiBzd2FwUG9zaXRpb25zLFxuICAgICAgYWRkUGxheWVyVG9Db21wZXRpdGlvbjogYWRkUGxheWVyVG9Db21wZXRpdGlvbixcbiAgICAgIGFkZFBsYXllclRvQ29tcGV0aXRpb25SZXF1ZXN0OiBhZGRQbGF5ZXJUb0NvbXBldGl0aW9uUmVxdWVzdCxcbiAgICAgIHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb246IHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24sXG4gICAgICBhcHByb3ZlUGVuZGluZ1BsYXllcjogYXBwcm92ZVBlbmRpbmdQbGF5ZXIsXG4gICAgICBkZW55UGVuZGluZ1BsYXllcjogZGVueVBlbmRpbmdQbGF5ZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgY29tcGV0aXRpb24gZnJvbSB0aGUgZGF0YWJhc2UgKG9yIG1lbW9yeSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb21wZXRpdGlvbiBpZCBmb3IgdGhlIHJlcXVlc3RlZCBjb21wZXRpdGlvblxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvbXBldGl0aW9uJywge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGNvbXBldGl0aW9ucyBmcm9tIHRoZSBkYXRhYmFzZSB0aGF0IGEgcGFydGljdWxhciB1c2VyIGlzIGluY2x1ZGVkIGluXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3VzZXJJZH0gdGhlIHVzZXIgaWQgZm9yIHRoZSByZXF1ZXN0ZWQgdXNlclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGV0aXRpb25zRm9yVXNlcih1c2VySWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tcGV0aXRpb25zL3VzZXInLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGFjdGl2ZSBjb21wZXRpdGlvbnMgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gY29tcGV0aXRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGV0aXRpb25zKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21wZXRpdGlvbnMnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2NyZWF0ZScsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL3VwZGF0ZScsIHtcbiAgICAgICAgY29tcGV0aXRpb246IGNvbXBldGl0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVDb21wZXRpdGlvbihjb21wZXRpdGlvbklkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NvbXBldGl0aW9ucy9kZWxldGUnLCAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3YXBQb3NpdGlvbnMoY29tcGV0aXRpb25JZCwgY2hhbGxlbmdlciwgb3Bwb25lbnQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvbXBldGl0aW9ucy9zd2FwUG9zaXRpb25zJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBjaGFsbGVuZ2VyOiBjaGFsbGVuZ2VyLFxuICAgICAgICBvcHBvbmVudDogb3Bwb25lbnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBsYXllclRvQ29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvYWRkUGxheWVyJywge1xuICAgICAgICBjb21wZXRpdGlvbklkOiBjb21wZXRpdGlvbklkLFxuICAgICAgICBwbGF5ZXI6IHBsYXllclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyVG9Db21wZXRpdGlvblJlcXVlc3QoY29tcGV0aXRpb24sIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2FkZFBsYXllclJlcXVlc3QnLCB7XG4gICAgICAgIGNvbXBldGl0aW9uOiBjb21wZXRpdGlvbixcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZWRQbGF5ZXJGcm9tQ29tcGV0aXRpb24oY29tcGV0aXRpb25JZCwgcmVtb3ZlZFBsYXllciwgcGxheWVycykge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL3JlbW92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcmVtb3ZlZFBsYXllcjogcmVtb3ZlZFBsYXllcixcbiAgICAgICAgcGxheWVyczogcGxheWVyc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwcm92ZVBlbmRpbmdQbGF5ZXIoY29tcGV0aXRpb25JZCwgcGxheWVyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb21wZXRpdGlvbnMvYXBwcm92ZVBsYXllcicsIHtcbiAgICAgICAgY29tcGV0aXRpb25JZDogY29tcGV0aXRpb25JZCxcbiAgICAgICAgcGxheWVyOiBwbGF5ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbnlQZW5kaW5nUGxheWVyKGNvbXBldGl0aW9uSWQsIHBsYXllcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY29tcGV0aXRpb25zL2RlbnlQbGF5ZXInLCB7XG4gICAgICAgIGNvbXBldGl0aW9uSWQ6IGNvbXBldGl0aW9uSWQsXG4gICAgICAgIHBsYXllcjogcGxheWVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQ29tcGV0aXRpb25BZG1pbkN0cmwnLCBDb21wZXRpdGlvbkFkbWluQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25BZG1pbkN0cmwoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGZpbHRlciwgY29tcGV0aXRpb25zU2VydmljZSwgaWRlbnRpdHlTZXJ2aWNlLCBub3RpZnlTZXJ2aWNlLCBjaGFsbGVuZ2VzU2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY29tcGV0aXRpb25JZCA9IG51bGw7XG4gICAgdm0udXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zID0gdXBkYXRlQ29tcGV0aXRpb25SZXN0cmljdEpvaW5zO1xuICAgIHZtLnVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZSA9IHVwZGF0ZUNvbXBldGl0aW9uUHJpdmF0ZTtcbiAgICB2bS5kZWxldGVDb21wZXRpdGlvbiA9IGRlbGV0ZUNvbXBldGl0aW9uO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hDb21wZXRpdGlvbigpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgdXNlciBpcyBhbiBhZG1pbiBvZiB0aGlzIGNvbXBldGl0aW9uXG4gICAgICAgIGlmIChjb21wZXRpdGlvbi5kYXRhICYmIF8uc29tZShjb21wZXRpdGlvbi5kYXRhLmFkbWlucywgWydfaWQnLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkXSkpIHtcbiAgICAgICAgICB2bS5pc0FkbWluID0gdHJ1ZTtcbiAgICAgICAgICAvLyBEaXNwbGF5IHRoZSBwbGF5ZXJzIGluIHRoZSBwcm9wZXIgb3JkZXJcbiAgICAgICAgICBjb21wZXRpdGlvbi5kYXRhLnBsYXllcnMgPSAkZmlsdGVyKCdvcmRlckJ5JykoY29tcGV0aXRpb24uZGF0YS5wbGF5ZXJzLCAncG9zaXRpb24nKTtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRDb21wbGV0ZWRDaGFsbGVuZ2VzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2VzKSB7XG4gICAgICAgIHZtLmNoYWxsZW5nZXMgPSBjaGFsbGVuZ2VzLmRhdGE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIHRoZSB1cGRhdGVzIHRoYXQgd2VyZSByZXF1c3RlZFxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbXBldGl0aW9uUmVzdHJpY3RKb2lucygpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb24odm0uY29tcGV0aXRpb25JZCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb24pIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRDb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgIHVwZGF0ZWRDb21wZXRpdGlvbi5yZXN0cmljdEpvaW5zID0gdm0uY29tcGV0aXRpb24ucmVzdHJpY3RKb2lucztcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS51cGRhdGVDb21wZXRpdGlvbih1cGRhdGVkQ29tcGV0aXRpb24pO1xuICAgICAgfSk7ICAgICAgXG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlcyB0aGF0IHdlcmUgcmVxdXN0ZWRcbiAgICBmdW5jdGlvbiB1cGRhdGVDb21wZXRpdGlvblByaXZhdGUoKSB7XG4gICAgICBjb21wZXRpdGlvbnNTZXJ2aWNlLmdldENvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNvbXBldGl0aW9uKSB7XG4gICAgICAgIHZhciB1cGRhdGVkQ29tcGV0aXRpb24gPSBjb21wZXRpdGlvbi5kYXRhO1xuICAgICAgICB1cGRhdGVkQ29tcGV0aXRpb24ucHJpdmF0ZSA9IHZtLmNvbXBldGl0aW9uLnByaXZhdGU7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UudXBkYXRlQ29tcGV0aXRpb24odXBkYXRlZENvbXBldGl0aW9uKTtcbiAgICAgIH0pOyAgICAgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbXBldGl0aW9uKCkge1xuICAgICAgc3dhbCh7XG4gICAgICAgIHRpdGxlOiAnRGVsZXRlIENvbXBldGl0aW9uPycsXG4gICAgICAgIHRleHQ6ICdUaGlzIGNhbiBub3QgYmUgdW5kb25lJyxcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTmV2ZXJtaW5kJyxcbiAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgIGNsb3NlT25DYW5jZWw6IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5kZWxldGVDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNvbXBldGl0aW9uRGV0YWlscykge1xuICAgICAgaWYgKHZtLmNvbXBldGl0aW9uSWQgPT09IGNvbXBldGl0aW9uRGV0YWlscy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuaW5mbyhjb21wZXRpdGlvbkRldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uU3RhdHNDdHJsJywgQ29tcGV0aXRpb25TdGF0c0N0cmwpO1xuXG4gIGZ1bmN0aW9uIENvbXBldGl0aW9uU3RhdHNDdHJsKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UsIGNoYWxsZW5nZXNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbklkID0gbnVsbDtcbiAgICB2bS5jb21wZXRpdGlvbiA9IHt9O1xuICAgIHZtLnBsYXllcnNSZXN1bHRzID0gW107XG4gICAgdm0uY2hhbGxlbmdlcyA9IFtdO1xuXG4gICAgYWN0aXZhdGUoKTtcblxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5jb21wZXRpdGlvbklkKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9uSWQgPSAkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZDtcbiAgICAgICAgcmVmcmVzaENvbXBldGl0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVmcmVzaENvbXBldGl0aW9uKCkge1xuICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICBpZiAoY29tcGV0aXRpb24uZGF0YSkge1xuICAgICAgICAgIHZtLmNvbXBldGl0aW9uID0gY29tcGV0aXRpb24uZGF0YTtcbiAgICAgICAgICBpZiAodm0uY29tcGV0aXRpb24udHlwZSA9PT0gJ3B5cmFtaWQnKSB7XG4gICAgICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb24ucGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRQbGF5ZXJSZXN1bHRzQnlDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkLCBwbGF5ZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJlc3VsdHMgPSByZXN1bHRzLmRhdGE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh2bS5jb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICAgICAgdm0udGVhbXMgPSBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIFVzZWQgZm9yIHRoZSBjb21wbGV0ZWQgY2hhbGxlbmdlcyBkaXJlY3RpdmVcbiAgICAgIGNoYWxsZW5nZXNTZXJ2aWNlLmdldENvbXBsZXRlZENoYWxsZW5nZXNCeUNvbXBldGl0aW9uKHZtLmNvbXBldGl0aW9uSWQpLnRoZW4oZnVuY3Rpb24gKGNoYWxsZW5nZXMpIHtcbiAgICAgICAgdm0uY2hhbGxlbmdlcyA9IGNoYWxsZW5nZXMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl91cGRhdGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICByZWZyZXNoQ29tcGV0aXRpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFdhdGNoIGZvciB3ZWJzb2NrZXQgZXZlbnRcbiAgICAkc2NvcGUuJG9uKCd3czpjb21wZXRpdGlvbl9kZWxldGVkJywgZnVuY3Rpb24gKF8sIGNoYWxsZW5nZURldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy5teUNvbXBldGl0aW9ucycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NvbXBldGl0aW9uQ3RybCcsIENvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25DdHJsKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIGNvbXBldGl0aW9uc1NlcnZpY2UsIG5vdGlmeVNlcnZpY2UpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmNvbXBldGl0aW9uSWQgPSBudWxsO1xuICAgIHZtLmNvbXBldGl0aW9uID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICgkc3RhdGVQYXJhbXMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICB2bS5jb21wZXRpdGlvbklkID0gJHN0YXRlUGFyYW1zLmNvbXBldGl0aW9uSWQ7XG5cbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5nZXRDb21wZXRpdGlvbih2bS5jb21wZXRpdGlvbklkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbikge1xuICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5kYXRhKSB7XG4gICAgICAgICAgICB2bS5jb21wZXRpdGlvbiA9IGNvbXBldGl0aW9uLmRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnY29tcGV0aXRpb25zLm15Q29tcGV0aXRpb25zJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fZGVsZXRlZCcsIGZ1bmN0aW9uIChfLCBjb21wZXRpdGlvbkRldGFpbHMpIHtcbiAgICAgIGlmICh2bS5jb21wZXRpdGlvbklkID09PSBjb21wZXRpdGlvbkRldGFpbHMuY29tcGV0aXRpb25JZCkge1xuICAgICAgICBub3RpZnlTZXJ2aWNlLmluZm8oY29tcGV0aXRpb25EZXRhaWxzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgJHN0YXRlLmdvKCdjb21wZXRpdGlvbnMubXlDb21wZXRpdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDb21wZXRpdGlvbnNDdHJsJywgQ29tcGV0aXRpb25zQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ29tcGV0aXRpb25zQ3RybChjb21wZXRpdGlvbnNTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jb21wZXRpdGlvbnMgPSBbXTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb25zKCkudGhlbihmdW5jdGlvbiAoY29tcGV0aXRpb25zKSB7XG4gICAgICAgIHZtLmNvbXBldGl0aW9ucyA9IGNvbXBldGl0aW9ucy5kYXRhO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlcyBhIGNvbXBldGl0aW9uXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ0NyZWF0ZUNvbXBldGl0aW9uQ3RybCcsIENyZWF0ZUNvbXBldGl0aW9uQ3RybCk7XG5cbiAgZnVuY3Rpb24gQ3JlYXRlQ29tcGV0aXRpb25DdHJsKCRzdGF0ZSwgdXNlclNlcnZpY2UsIGNvbXBldGl0aW9uc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBicmVha1BvaW50cyA9IFtdO1xuICAgIHZhciBtYXhMZXZlbHMgPSA3O1xuICAgIHZhciBtYXhQbGF5ZXJzID0gbnVsbDtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLm5ld0NvbXBldGl0aW9uID0ge1xuICAgICAgcGxheWVyczogW10sXG4gICAgICByZXN0cmljdEpvaW5zOiBmYWxzZSxcbiAgICAgIHByaXZhdGU6IGZhbHNlXG4gICAgfTtcbiAgICB2bS5hdmFpbGFibGVQbGF5ZXJzID0gW107XG4gICAgdm0uYWRkZWRQbGF5ZXJzID0gW107XG4gICAgdm0uY3JlYXRlQ29tcGV0aXRpb24gPSBjcmVhdGVDb21wZXRpdGlvbjtcbiAgICB2bS5hZGRQbGF5ZXIgPSBhZGRQbGF5ZXI7XG4gICAgdm0ucmVtb3ZlUGxheWVyID0gcmVtb3ZlUGxheWVyO1xuICAgIHZtLnJlb3JkZXJQbGF5ZXJzID0gcmVvcmRlclBsYXllcnM7XG4gICAgdm0ubmV3Q29tcGV0aXRpb24uZm9yZmVpdERheXMgPSAxO1xuICAgIHZtLmNvbXBldGl0aW9uVHlwZXMgPSBbJ3B5cmFtaWQnLCAndmVyc3VzJ107XG5cbiAgICBhY3RpdmF0ZSgpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJ1bnMgb24gY29udHJvbGxlciBpbnN0YW50aWF0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICB1c2VyU2VydmljZS5nZXRBbGxVc2VycygpLnRoZW4oZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHZtLmF2YWlsYWJsZVBsYXllcnMgPSB1c2Vycy5kYXRhO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGxheWVycyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGV2ZWxzXG4gICAgICBmb3IgKHZhciBpID0gbWF4TGV2ZWxzOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIG1heFBsYXllcnMgKz0gaTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGJyZWFrIHBvaW50cyBhcnJheVxuICAgICAgZm9yIChpID0gMDsgaSA8IG1heExldmVsczsgaSsrKSB7XG4gICAgICAgIGJyZWFrUG9pbnRzLnB1c2goKCgoaSAqIChpICsgMSkpIC8gMikpICsgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHBsYXllciB0byB0aGUgbmV3IGNvbXBldGl0aW9uXG4gICAgICogQ2hlY2tzIHRvIG1ha2Ugc3VyZSB5b3UgYXJlIG5vdCBhZGRpbmcgdG9vIG1hbnkgcGxheWVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gcGxheWVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGxheWVyKHBsYXllcikge1xuICAgICAgdm0uYWRkZWRQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYXZhaWxhYmxlUGxheWVycywge19pZDogcGxheWVyLl9pZH0pWzBdKTtcbiAgICAgIHJlb3JkZXJQbGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHByZXZpdW9zbHkgYWRkZWQgcGxheWVyIGZyb20gdGhlIGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBwbGF5ZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQbGF5ZXIocGxheWVyKSB7XG4gICAgICB2bS5hdmFpbGFibGVQbGF5ZXJzLnB1c2goXy5yZW1vdmUodm0uYWRkZWRQbGF5ZXJzLCB7X2lkOiBwbGF5ZXIuX2lkfSlbMF0pO1xuICAgICAgcmVvcmRlclBsYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGNoYW5nZXMgYmFzZWQgb24gdGhlIGNvbXBldGl0aW9uIHR5cGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyUGxheWVycygpIHtcbiAgICAgIGlmICh2bS5uZXdDb21wZXRpdGlvbi50eXBlID09PSAndmVyc3VzJykge1xuICAgICAgICByZW9yZGVyVmVyc3VzUGxheWVycygpO1xuICAgICAgfSBlbHNlIGlmICh2bS5uZXdDb21wZXRpdGlvbi50eXBlID09PSAncHlyYW1pZCcpIHtcbiAgICAgICAgcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVvcmRlciB0aGUgcGxheWVycyBiYXNlZCBvbiB0aGUgZHJhZy1kcm9wXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlclB5cmFtaWRQbGF5ZXJzKCkge1xuICAgICAgdmFyIGkgPSAxO1xuICAgICAgXy5mb3JFYWNoKHZtLmFkZGVkUGxheWVycywgZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSBpO1xuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW9yZGVyVmVyc3VzUGxheWVycygpIHtcbiAgICAgIC8vIFNldCBhbGwgcGxheWVycyB0byB0ZWFtIDJcbiAgICAgIF8uZm9yRWFjaCh2bS5hZGRlZFBsYXllcnMsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uID0gMjtcbiAgICAgIH0pO1xuICAgICAgLy8gU2V0IHRoZSBmaXJzdCBoYWxmIG9mIHRoZSBwbGF5ZXJzIHRvIHRlYW0gMVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAodm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAvIDIpOyBpKyspIHtcbiAgICAgICAgdm0uYWRkZWRQbGF5ZXJzW2ldLnBvc2l0aW9uID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGNvbXBldGl0aW9uXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBjb21wZXRpdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBldGl0aW9uKGNvbXBldGl0aW9uKSB7XG4gICAgICBpZiAoY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycgJiYgdm0uYWRkZWRQbGF5ZXJzLmxlbmd0aCAlIDIgPiAwKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgVmVyc3VzIGNvbXBldGl0aW9uIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2UgaWYgKHZtLmFkZGVkUGxheWVycy5sZW5ndGggPiBtYXhQbGF5ZXJzKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ0EgY29tcGV0aXRpb24gY2FuIGhhdmUgYSBtYXhpbXVtIG9mICcgKyBtYXhQbGF5ZXJzICsgJyBwbGF5ZXJzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uYWRkZWRQbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgdmFyIGFkZFBsYXllciA9IHtcbiAgICAgICAgICAgIF9pZDogcGxheWVyLl9pZCxcbiAgICAgICAgICAgIGVtYWlsOiBwbGF5ZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBsYXllci5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGxheWVyLmxhc3ROYW1lLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBsYXllci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwbGF5ZXIucG9zaXRpb25cbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbXBldGl0aW9uLnBsYXllcnMucHVzaChhZGRQbGF5ZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29tcGV0aXRpb24uYWRtaW5zID0gW3tcbiAgICAgICAgICBfaWQ6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5faWQsXG4gICAgICAgICAgZW1haWw6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHByaW1hcnk6IHRydWVcbiAgICAgICAgfV07XG5cbiAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgbnVtYmVyIG9mIGxldmVscyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHBsYXllcnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBicmVha1BvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wZXRpdGlvbi5wbGF5ZXJzLmxlbmd0aCA8IGJyZWFrUG9pbnRzW2ldKSB7XG4gICAgICAgICAgICBjb21wZXRpdGlvbi5sZXZlbHMgPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGV0aXRpb25zU2VydmljZS5jcmVhdGVDb21wZXRpdGlvbihjb21wZXRpdGlvbikudGhlbihmdW5jdGlvbiAobmV3Q29tcGV0aXRpb24pIHtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbXBldGl0aW9ucy52aWV3Jywge1xuICAgICAgICAgICAgY29tcGV0aXRpb25JZDogbmV3Q29tcGV0aXRpb24uZGF0YS5faWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ015Q29tcGV0aXRpb25zQ3RybCcsIE15Q29tcGV0aXRpb25zQ3RybCk7XG5cbiAgZnVuY3Rpb24gTXlDb21wZXRpdGlvbnNDdHJsKCRzY29wZSwgY29tcGV0aXRpb25zU2VydmljZSwgY2hhbGxlbmdlc1NlcnZpY2UsIGlkZW50aXR5U2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciBteUNvbXBldGl0aW9ucyA9IFtdO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYWN0aXZlQ2hhbGxlbmdlID0gbnVsbDtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGdldENvbXBldGl0aW9uc0ZvclVzZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCkge1xuICAgICAgbXlDb21wZXRpdGlvbnMgPSBbXTtcbiAgICAgIHZtLmFjdGl2ZUNoYWxsZW5nZSA9IG51bGw7XG4gICAgICBpZiAoaWRlbnRpdHlTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGNvbXBldGl0aW9uc1NlcnZpY2UuZ2V0Q29tcGV0aXRpb25zRm9yVXNlcihpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjb21wZXRpdGlvbnMpIHtcbiAgICAgICAgICB2bS5jb21wZXRpdGlvbnMgPSBjb21wZXRpdGlvbnMuZGF0YTtcbiAgICAgICAgICBfLmZvckVhY2godm0uY29tcGV0aXRpb25zLCBmdW5jdGlvbihjb21wZXRpdGlvbikge1xuICAgICAgICAgICAgbXlDb21wZXRpdGlvbnMucHVzaChjb21wZXRpdGlvbi5faWQpO1xuICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLnR5cGUgPT09ICdweXJhbWlkJykge1xuICAgICAgICAgICAgICBjaGFsbGVuZ2VzU2VydmljZS5nZXRBY3RpdmVDaGFsbGVuZ2VCeUNvbXBldGl0aW9uQnlQbGF5ZXIoY29tcGV0aXRpb24uX2lkLCBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZSA9IGNoYWxsZW5nZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmV4cGlyZXMgPSAobW9tZW50KCkuZGlmZihtb21lbnQoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLmNyZWF0ZWQpLmFkZChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UudGltZUxpbWl0LCAnZCcpLCdzJykpICogLTE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGV0aXRpb24udHlwZSA9PT0gJ3ZlcnN1cycpIHtcbiAgICAgICAgICAgICAgY2hhbGxlbmdlc1NlcnZpY2UuZ2V0QWN0aXZlQ2hhbGxlbmdlc0J5Q29tcGV0aXRpb24oY29tcGV0aXRpb24uX2lkKS50aGVuKGZ1bmN0aW9uIChjaGFsbGVuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbGxlbmdlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlID0gY2hhbGxlbmdlLmRhdGFbMF07XG4gICAgICAgICAgICAgICAgICBpZiAoY29tcGV0aXRpb24uYWN0aXZlQ2hhbGxlbmdlLnRpbWVMaW1pdCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UuZXhwaXJlcyA9IChtb21lbnQoKS5kaWZmKG1vbWVudChjb21wZXRpdGlvbi5hY3RpdmVDaGFsbGVuZ2UuY3JlYXRlZCkuYWRkKGNvbXBldGl0aW9uLmFjdGl2ZUNoYWxsZW5nZS50aW1lTGltaXQsICdkJyksJ3MnKSkgKiAtMTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXYXRjaCBmb3Igd2Vic29ja2V0IGV2ZW50XG4gICAgJHNjb3BlLiRvbignd3M6Y29tcGV0aXRpb25fdXBkYXRlZCcsIGZ1bmN0aW9uIChfLCBjaGFsbGVuZ2VEZXRhaWxzKSB7XG4gICAgICBpZiAobXlDb21wZXRpdGlvbnMuaW5kZXhPZihjaGFsbGVuZ2VEZXRhaWxzLmNvbXBldGl0aW9uSWQpID49IDApIHtcbiAgICAgICAgbm90aWZ5U2VydmljZS5pbmZvKGNoYWxsZW5nZURldGFpbHMuZGVzY3JpcHRpb24pO1xuICAgICAgICBnZXRDb21wZXRpdGlvbnNGb3JVc2VyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignVXNlckN0cmwnLCBVc2VyQ3RybCk7XG5cbiAgZnVuY3Rpb24gVXNlckN0cmwoaWRlbnRpdHlTZXJ2aWNlLCB1c2VyU2VydmljZSwgbm90aWZ5U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0udXNlciA9ICB7XG4gICAgICBfaWQ6ICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuX2lkLFxuICAgICAgZmlyc3ROYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWU6IGlkZW50aXR5U2VydmljZS5jdXJyZW50VXNlci5sYXN0TmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lOiBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIuZGlzcGxheU5hbWVcbiAgICB9O1xuICAgIHZtLnVwZGF0ZVVzZXIgPSB1cGRhdGVVc2VyO1xuICAgIHZtLnVzZXJGb3JtID0ge307XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7fVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVXNlciAodXNlcikge1xuICAgICAgaWYgKHVzZXIucGFzc3dvcmQgIT09IHVzZXIuY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgIG5vdGlmeVNlcnZpY2UuZXJyb3IoJ1Bhc3N3b3JkcyBkb25cXCd0IG1hdGNoIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgYW55IG9mIHRoZSBuYW1lcyB3ZXJlIHVwZGF0ZWQgd2UnbGwgbmVlZCB0byB1cGRhdGUgdGhlbSBpbiB0aGUgb3RoZXIgY29sbGVjdGlvbnMnXG4gICAgICAgIHZhciB1c2VyVXBkYXRlcyA9IHtcbiAgICAgICAgICBfaWQ6IHVzZXIuX2lkXG4gICAgICAgIH07XG4gICAgICAgIGlmICh1c2VyLmZpcnN0TmFtZSAhPT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmZpcnN0TmFtZSB8fCB1c2VyLmxhc3ROYW1lICE9PSBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIubGFzdE5hbWUgfHwgdXNlci5kaXNwbGF5TmFtZSAhPT0gaWRlbnRpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgdXNlclVwZGF0ZXMuZmlyc3ROYW1lID0gdXNlci5maXJzdE5hbWU7XG4gICAgICAgICAgdXNlclVwZGF0ZXMubGFzdE5hbWUgPSB1c2VyLmxhc3ROYW1lO1xuICAgICAgICAgIHVzZXJVcGRhdGVzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci5wYXNzd29yZCAmJiB1c2VyLnBhc3N3b3JkLmxlbnRnaCA+IDApIHtcbiAgICAgICAgICB1c2VyVXBkYXRlcy5wYXNzd29yZCA9IHVzZXIucGFzc3dvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VyVXBkYXRlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbm90aWZ5U2VydmljZS5zdWNjZXNzKCdZb3VyIGluZm9ybWF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgICB2bS51c2VyRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSB1cGRhdGVkIGRhdGFcbiAgICAgICAgICB2YXIgY3VycmVudFVzZXJDbG9uZSA9IGFuZ3VsYXIuY29weShpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIpO1xuICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGN1cnJlbnRVc2VyQ2xvbmUsIHVzZXJVcGRhdGVzKTtcbiAgICAgICAgICBpZGVudGl0eVNlcnZpY2UuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlckNsb25lO1xuICAgICAgICAgIHZtLnVzZXIuY29uZmlybVBhc3N3b3JkID0gdm0udXNlci5wYXNzd29yZCA9ICcnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdjT3ZlcmZsb3cnLCBjT3ZlcmZsb3cpO1xuXG4gIGZ1bmN0aW9uIGNPdmVyZmxvdyhzY3JvbGxiYXJTZXJ2aWNlKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHNjcm9sbGF4aXMgPSBhdHRycy5zY3JvbGxheGlzIHx8ICd5JztcbiAgICAgIHZhciB0aGVtZSA9IGF0dHJzLnRoZW1lIHx8ICdtaW5pbWFsLWRhcmsnO1xuICAgICAgdmFyIG1vdXNld2hlZWxheGlzID0gYXR0cnMubW91c2V3aGVlbGF4aXMgfHwgJ3knO1xuICAgICAgaWYgKCEkKCdodG1sJykuaGFzQ2xhc3MoJ2lzbW9iaWxlJykpIHtcbiAgICAgICAgc2Nyb2xsYmFyU2VydmljZS5tYWxpaHVTY3JvbGwoZWxlbWVudCwgdGhlbWUsIHNjcm9sbGF4aXMsIG1vdXNld2hlZWxheGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGVTdWJtZW51JywgdG9nZ2xlU3VibWVudSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlU3VibWVudSgpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsKSB7XG4gICAgICBlbC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsLm5leHQoKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICBlbC5wYXJlbnQoKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnd2F2ZXNFZmZlY3QnLCB3YXZlc0VmZmVjdCk7XG5cbiAgZnVuY3Rpb24gd2F2ZXNFZmZlY3QoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnYnRuLWljb24nKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdidG4tZmxvYXQnKSkge1xuICAgICAgICBXYXZlcy5hdHRhY2goZWxlbWVudCwgWyd3YXZlcy1jaXJjbGUnXSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoJ2J0bi1saWdodCcpKSB7XG4gICAgICAgIFdhdmVzLmF0dGFjaChlbGVtZW50LCBbJ3dhdmVzLWxpZ2h0J10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgV2F2ZXMuYXR0YWNoKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBXYXZlcy5pbml0KCk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZmdMaW5lJywgZmdMaW5lKTtcblxuICBmdW5jdGlvbiBmZ0xpbmUoKSB7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICBsaW5rOiBsaW5rRnVuYyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgaW5wdXQgPSBlbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKTtcbiAgICAgIHZhciBpc0Zsb2F0TGFiZWwgPSBlbGVtZW50LnBhcmVudCgpLmhhc0NsYXNzKCdmZy1mbG9hdCcpO1xuICAgICAgaW5wdXQuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdmZy10b2dnbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXQuYmx1cihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGbG9hdExhYmVsIHx8IChpc0Zsb2F0TGFiZWwgJiYgaW5wdXQudmFsKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZnLXRvZ2dsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
